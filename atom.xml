<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Farmer, keshiim æ’­ç§å¤ªé˜³ğŸŒ</title>
  <subtitle>å°nå¿«ä¹æˆé•¿ğŸ‰</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://keshiim.github.io/"/>
  <updated>2018-04-03T03:54:57.509Z</updated>
  <id>https://keshiim.github.io/</id>
  
  <author>
    <name>Zheng keshiim</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>translations-interviews</title>
    <link href="https://keshiim.github.io/2017/12/21/translations-interviews/"/>
    <id>https://keshiim.github.io/2017/12/21/translations-interviews/</id>
    <published>2017-12-21T09:55:27.000Z</published>
    <updated>2018-04-03T03:54:57.509Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<ul>
<li>åŸæ–‡åœ°å€ï¼š<a href="https://github.com/kdn251/interviews" target="_blank" rel="external">github.com/kdn251/interviews</a></li>
<li>è¯‘æ–‡å‡ºè‡ªï¼š<a href="https://github.com/xitu/gold-miner" target="_blank" rel="external">æ˜é‡‘ç¿»è¯‘è®¡åˆ’</a></li>
<li>è¯‘è€…ï¼š<a href="https://github.com/wxyyxc1992" target="_blank" rel="external">ç‹ä¸‹é‚€æœˆç†Š</a></li>
<li>æ ¡å¯¹è€…ï¼š<a href="https://github.com/phxnirvana" target="_blank" rel="external">PhxNirvana</a>ã€<a href="https://github.com/sqrthree" target="_blank" rel="external">æ ¹å·ä¸‰</a></li>
<li>è¿™ä¸ª <a href="https://github.com/xitu/interviews/compare/master...kdn251:master" target="_blank" rel="external">é“¾æ¥</a> ç”¨æ¥æŸ¥çœ‹æœ¬ç¿»è¯‘ä¸è‹±æ–‡ç‰ˆæ˜¯å¦æœ‰å·®åˆ«ï¼ˆå¦‚æœä½ æ²¡æœ‰çœ‹åˆ° README.md å‘ç”Ÿå˜åŒ–ï¼Œé‚£å°±æ„å‘³ç€è¿™ä»½ç¿»è¯‘æ–‡æ¡£æ˜¯æœ€æ–°çš„ï¼‰ã€‚</li>
</ul>
</blockquote>
<h1 id="Interviews"><a href="#Interviews" class="headerlink" title="Interviews"></a>Interviews</h1><blockquote>
<p>è½¯ä»¶å·¥ç¨‹æŠ€æœ¯é¢è¯•ä¸ªäººæŒ‡å—ã€‚</p>
<p>Maintainer - <a href="https://github.com/kdn251" target="_blank" rel="external">Kevin Naughton Jr.</a></p>
</blockquote>
<h2 id="å…¶ä»–è¯­è¨€ç‰ˆæœ¬"><a href="#å…¶ä»–è¯­è¨€ç‰ˆæœ¬" class="headerlink" title="å…¶ä»–è¯­è¨€ç‰ˆæœ¬"></a>å…¶ä»–è¯­è¨€ç‰ˆæœ¬</h2><ul>
<li><a href="./README.md">English</a></li>
</ul>
<h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ul>
<li><a href="#åœ¨çº¿ç»ƒä¹ ">åœ¨çº¿ç»ƒä¹ </a></li>
<li><a href="#åœ¨çº¿é¢è¯•ç¼–ç¨‹">åœ¨çº¿é¢è¯•ç¼–ç¨‹</a></li>
<li><a href="#æ•°æ®ç»“æ„">æ•°æ®ç»“æ„</a></li>
<li><a href="#ç®—æ³•">ç®—æ³•</a></li>
<li><a href="#ä½è¿ç®—">ä½è¿ç®—</a></li>
<li><a href="#ç®—æ³•å¤æ‚åº¦åˆ†æ">ç®—æ³•å¤æ‚åº¦åˆ†æ</a></li>
<li><a href="#è§†é¢‘æ•™ç¨‹">è§†é¢‘æ•™ç¨‹</a></li>
<li><a href="#é¢è¯•ä¹¦ç±">é¢è¯•ä¹¦ç±</a></li>
<li><a href="#è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯èµ„è®¯">è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯èµ„è®¯</a></li>
<li><a href="#æ–‡ä»¶ç»“æ„">æ–‡ä»¶ç»“æ„</a></li>
</ul>
<h2 id="åœ¨çº¿ç»ƒä¹ "><a href="#åœ¨çº¿ç»ƒä¹ " class="headerlink" title="åœ¨çº¿ç»ƒä¹ "></a>åœ¨çº¿ç»ƒä¹ </h2><ul>
<li><a href="https://leetcode.com/" target="_blank" rel="external">LeetCode</a></li>
<li><a href="https://vjudge.net/" target="_blank" rel="external">Virtual Judge</a></li>
<li><a href="https://www.careercup.com/" target="_blank" rel="external">CareerCup</a></li>
<li><a href="https://www.hackerrank.com/" target="_blank" rel="external">HackerRank</a></li>
<li><a href="https://codefights.com/" target="_blank" rel="external">CodeFights</a></li>
<li><a href="https://open.kattis.com/" target="_blank" rel="external">Kattis</a></li>
<li><a href="https://www.hackerearth.com" target="_blank" rel="external">HackerEarth</a></li>
<li><a href="https://codility.com/programmers/lessons/1-iterations/" target="_blank" rel="external">Codility</a></li>
<li><a href="http://codeforces.com/" target="_blank" rel="external">Code Forces</a></li>
<li><a href="https://www.codechef.com/" target="_blank" rel="external">Code Chef</a></li>
<li><a href="http://www.spoj.com/" target="_blank" rel="external">Sphere Online Judge - SPOJ</a></li>
<li><a href="https://www.interviewbit.com/" target="_blank" rel="external">InterviewBit</a></li>
</ul>
<h2 id="åœ¨çº¿é¢è¯•ç¼–ç¨‹"><a href="#åœ¨çº¿é¢è¯•ç¼–ç¨‹" class="headerlink" title="åœ¨çº¿é¢è¯•ç¼–ç¨‹"></a>åœ¨çº¿é¢è¯•ç¼–ç¨‹</h2><ul>
<li><a href="https://www.pramp.com/ref/gt4-cn" target="_blank" rel="external">Pramp</a></li>
<li><a href="http://www.gainlo.co/#!/" target="_blank" rel="external">Gainlo</a></li>
<li><a href="https://refdash.com/" target="_blank" rel="external">Refdash</a></li>
</ul>
<h2 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h2><h3 id="Linked-List"><a href="#Linked-List" class="headerlink" title="Linked List"></a>Linked List</h3><ul>
<li>é“¾è¡¨å³æ˜¯ç”±èŠ‚ç‚¹ï¼ˆNodeï¼‰ç»„æˆçš„çº¿æ€§é›†åˆï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯ä»¥åˆ©ç”¨æŒ‡é’ˆæŒ‡å‘å…¶ä»–èŠ‚ç‚¹ã€‚å®ƒæ˜¯ä¸€ç§åŒ…å«äº†å¤šä¸ªèŠ‚ç‚¹çš„ã€èƒ½å¤Ÿç”¨äºè¡¨ç¤ºåºåˆ—çš„æ•°æ®ç»“æ„ã€‚</li>
<li><strong>å•å‘é“¾è¡¨</strong>: é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ä»…æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä¸”æœ€åä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘ç©ºã€‚</li>
<li><strong>åŒå‘é“¾è¡¨</strong>: å…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹å…·æœ‰ä¸¤ä¸ªæŒ‡é’ˆ pã€nï¼Œä½¿å¾— p æŒ‡å‘å…ˆå‰èŠ‚ç‚¹å¹¶ä¸” n æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼›æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„ n æŒ‡é’ˆæŒ‡å‘ nullã€‚</li>
<li><strong>å¾ªç¯é“¾è¡¨</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å¹¶ä¸”æœ€åä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„é“¾è¡¨ã€‚</li>
<li>æ—¶é—´å¤æ‚åº¦:<ul>
<li>ç´¢å¼•: <code>O(n)</code></li>
<li>æœç´¢: <code>O(n)</code></li>
<li>æ’å…¥: <code>O(1)</code></li>
<li>ç§»é™¤: <code>O(1)</code></li>
</ul>
</li>
</ul>
<h3 id="Stack"><a href="#Stack" class="headerlink" title="Stack"></a>Stack</h3><ul>
<li>æ ˆæ˜¯å…ƒç´ çš„é›†åˆï¼Œå…¶åŒ…å«äº†ä¸¤ä¸ªåŸºæœ¬æ“ä½œï¼špush æ“ä½œå¯ä»¥ç”¨äºå°†å…ƒç´ å‹å…¥æ ˆï¼Œpop æ“ä½œå¯ä»¥å°†æ ˆé¡¶å…ƒç´ ç§»é™¤ã€‚</li>
<li>éµå¾ªåå…¥å…ˆå‡ºï¼ˆLIFOï¼‰åŸåˆ™ã€‚</li>
<li>æ—¶é—´å¤æ‚åº¦:<ul>
<li>ç´¢å¼•: <code>O(n)</code></li>
<li>æœç´¢: <code>O(n)</code></li>
<li>æ’å…¥: <code>O(1)</code></li>
<li>ç§»é™¤: <code>O(1)</code></li>
</ul>
</li>
</ul>
<h3 id="Queue"><a href="#Queue" class="headerlink" title="Queue"></a>Queue</h3><ul>
<li>é˜Ÿåˆ—æ˜¯å…ƒç´ çš„é›†åˆï¼Œå…¶åŒ…å«äº†ä¸¤ä¸ªåŸºæœ¬æ“ä½œï¼šenqueue æ“ä½œå¯ä»¥ç”¨äºå°†å…ƒç´ æ’å…¥åˆ°é˜Ÿåˆ—ä¸­ï¼Œè€Œ dequeue æ“ä½œåˆ™æ˜¯å°†å…ƒç´ ä»é˜Ÿåˆ—ä¸­ç§»é™¤ã€‚</li>
<li>éµå¾ªå…ˆå…¥å…ˆå‡ºåŸåˆ™ (FIFO)ã€‚</li>
<li>æ—¶é—´å¤æ‚åº¦:<ul>
<li>ç´¢å¼•: <code>O(n)</code></li>
<li>æœç´¢: <code>O(n)</code></li>
<li>æ’å…¥: <code>O(1)</code></li>
<li>ç§»é™¤: <code>O(1)</code></li>
</ul>
</li>
</ul>
<h3 id="Tree"><a href="#Tree" class="headerlink" title="Tree"></a>Tree</h3><ul>
<li>æ ‘æ˜¯æ— å‘ã€è¿é€šçš„æ— ç¯å›¾ã€‚</li>
</ul>
<h3 id="Binary-Tree"><a href="#Binary-Tree" class="headerlink" title="Binary Tree"></a>Binary Tree</h3><ul>
<li>äºŒå‰æ ‘å³æ˜¯æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šåŒ…å«å·¦å­èŠ‚ç‚¹ä¸å³å­èŠ‚ç‚¹è¿™ä¸¤ä¸ªèŠ‚ç‚¹çš„æ ‘å½¢æ•°æ®ç»“æ„ã€‚</li>
<li><strong>æ»¡äºŒå‰æ ‘</strong>: æ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ä»…åŒ…å« 0 æˆ– 2 ä¸ªèŠ‚ç‚¹ã€‚</li>
<li><strong>å®Œç¾äºŒå‰æ ‘ï¼ˆPerfect Binary Treeï¼‰</strong>: äºŒå‰æ ‘ä¸­çš„æ¯ä¸ªå¶èŠ‚ç‚¹éƒ½æ‹¥æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œå¹¶ä¸”å…·æœ‰ç›¸åŒçš„é«˜åº¦ã€‚</li>
<li><strong>å®Œå…¨äºŒå‰æ ‘</strong>: é™¤æœ€åä¸€å±‚å¤–ï¼Œæ¯ä¸€å±‚ä¸Šçš„ç»“ç‚¹æ•°å‡è¾¾åˆ°æœ€å¤§å€¼ï¼›åœ¨æœ€åä¸€å±‚ä¸Šåªç¼ºå°‘å³è¾¹çš„è‹¥å¹²ç»“ç‚¹ã€‚</li>
</ul>
<h3 id="Binary-Search-Tree"><a href="#Binary-Search-Tree" class="headerlink" title="Binary Search Tree"></a>Binary Search Tree</h3><ul>
<li>äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„äºŒå‰æ ‘ï¼Œå…¶ä»»ä½•èŠ‚ç‚¹ä¸­çš„å€¼éƒ½ä¼šå¤§äºæˆ–è€…ç­‰äºå…¶å·¦å­æ ‘ä¸­å­˜å‚¨çš„å€¼å¹¶ä¸”å°äºæˆ–è€…ç­‰äºå…¶å³å­æ ‘ä¸­å­˜å‚¨çš„å€¼ã€‚</li>
<li>æ—¶é—´å¤æ‚åº¦:<ul>
<li>ç´¢å¼•: <code>O(log(n))</code></li>
<li>æœç´¢: <code>O(log(n))</code></li>
<li>æ’å…¥: <code>O(log(n))</code></li>
<li>åˆ é™¤: <code>O(log(n))</code></li>
</ul>
</li>
</ul>
<p><img style="margin: auto" src="/2017/12/21/translations-interviews/BST.png?raw=true" alt="Binary Search Tree" title="Binary Search Tree" width="400" height="500"></p>
<h3 id="Trie"><a href="#Trie" class="headerlink" title="Trie"></a>Trie</h3><ul>
<li>å­—å…¸æ ‘ï¼Œåˆç§°åŸºæ•°æ ‘æˆ–è€…å‰ç¼€æ ‘ï¼Œèƒ½å¤Ÿç”¨äºå­˜å‚¨é”®ä¸ºå­—ç¬¦ä¸²çš„åŠ¨æ€é›†åˆæˆ–è€…å…³è”æ•°ç»„çš„æœç´¢æ ‘ã€‚æ ‘ä¸­çš„èŠ‚ç‚¹å¹¶æ²¡æœ‰ç›´æ¥å­˜å‚¨å…³è”é”®å€¼ï¼Œè€Œæ˜¯è¯¥èŠ‚ç‚¹åœ¨æ ‘ä¸­çš„æŒ‚è½½ä½ç½®å†³å®šäº†å…¶å…³è”é”®å€¼ã€‚æŸä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹éƒ½æ‹¥æœ‰ç›¸åŒçš„å‰ç¼€ï¼Œæ•´æ£µæ ‘çš„æ ¹èŠ‚ç‚¹åˆ™æ˜¯ç©ºå­—ç¬¦ä¸²ã€‚</li>
</ul>
<p><img src="/2017/12/21/translations-interviews/trie.png?raw=true" alt="Alt text" title="Trie"></p>
<h3 id="Fenwick-Tree"><a href="#Fenwick-Tree" class="headerlink" title="Fenwick Tree"></a>Fenwick Tree</h3><ul>
<li>æ ‘çŠ¶æ•°ç»„åˆç§° Binary Indexed Treeï¼Œå…¶è¡¨ç°å½¢å¼ä¸ºæ ‘ï¼Œä¸è¿‡æœ¬è´¨ä¸Šæ˜¯ä»¥æ•°ç»„å®ç°ã€‚æ•°ç»„ä¸­çš„ä¸‹æ ‡ä»£è¡¨ç€æ ‘ä¸­çš„é¡¶ç‚¹ï¼Œæ¯ä¸ªé¡¶ç‚¹çš„çˆ¶èŠ‚ç‚¹æˆ–è€…å­èŠ‚ç‚¹çš„ä¸‹æ ‡èƒ½å¤Ÿé€šè¿‡ä½è¿ç®—è·å¾—ã€‚æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ åŒ…å«äº†é¢„è®¡ç®—çš„åŒºé—´å€¼ä¹‹å’Œï¼Œåœ¨æ•´æ£µæ ‘æ›´æ–°çš„è¿‡ç¨‹ä¸­åŒæ ·ä¼šæ›´æ–°è¿™äº›é¢„è®¡ç®—çš„å€¼ã€‚</li>
<li>æ—¶é—´å¤æ‚åº¦:<ul>
<li>åŒºé—´æ±‚å€¼: <code>O(log(n))</code></li>
<li>æ›´æ–°: <code>O(log(n))</code></li>
</ul>
</li>
</ul>
<p><img src="/2017/12/21/translations-interviews/fenwickTree.png?raw=true" alt="Alt text" title="Fenwick Tree"></p>
<h3 id="Segment-Tree"><a href="#Segment-Tree" class="headerlink" title="Segment Tree"></a>Segment Tree</h3><ul>
<li>çº¿æ®µæ ‘æ˜¯ç”¨äºå­˜æ”¾é—´éš”æˆ–è€…çº¿æ®µçš„æ ‘å½¢æ•°æ®ç»“æ„ï¼Œå®ƒå…è®¸å¿«é€Ÿçš„æŸ¥æ‰¾æŸä¸€ä¸ªèŠ‚ç‚¹åœ¨è‹¥å¹²æ¡çº¿æ®µä¸­å‡ºç°çš„æ¬¡æ•°.</li>
<li>æ—¶é—´å¤æ‚åº¦:<ul>
<li>åŒºé—´æŸ¥è¯¢: <code>O(log(n))</code></li>
<li>æ›´æ–°: <code>O(log(n))</code></li>
</ul>
</li>
</ul>
<p><img src="/2017/12/21/translations-interviews/segmentTree.png?raw=true" alt="Alt text" title="Segment Tree"></p>
<h3 id="Heap"><a href="#Heap" class="headerlink" title="Heap"></a>Heap</h3><ul>
<li>å †æ˜¯ä¸€ç§ç‰¹æ®Šçš„åŸºäºæ ‘çš„æ»¡è¶³æŸäº›ç‰¹æ€§çš„æ•°æ®ç»“æ„ï¼Œæ•´ä¸ªå †ä¸­çš„æ‰€æœ‰çˆ¶å­èŠ‚ç‚¹çš„é”®å€¼éƒ½ä¼šæ»¡è¶³ç›¸åŒçš„æ’åºæ¡ä»¶ã€‚å †æ›´å‡†ç¡®åœ°å¯ä»¥åˆ†ä¸ºæœ€å¤§å †ä¸æœ€å°å †ï¼Œåœ¨æœ€å¤§å †ä¸­ï¼Œçˆ¶èŠ‚ç‚¹çš„é”®å€¼æ°¸è¿œå¤§äºæˆ–è€…ç­‰äºå­èŠ‚ç‚¹çš„å€¼ï¼Œå¹¶ä¸”æ•´ä¸ªå †ä¸­çš„æœ€å¤§å€¼å­˜å‚¨äºæ ¹èŠ‚ç‚¹ï¼›è€Œæœ€å°å †ä¸­ï¼Œçˆ¶èŠ‚ç‚¹çš„é”®å€¼æ°¸è¿œå°äºæˆ–è€…ç­‰äºå…¶å­èŠ‚ç‚¹çš„é”®å€¼ï¼Œå¹¶ä¸”æ•´ä¸ªå †ä¸­çš„æœ€å°å€¼å­˜å‚¨äºæ ¹èŠ‚ç‚¹ã€‚</li>
<li>æ—¶é—´å¤æ‚åº¦:<ul>
<li>è®¿é—®æœ€å¤§å€¼ / æœ€å°å€¼: <code>O(1)</code></li>
<li>æ’å…¥: <code>O(log(n))</code></li>
<li>ç§»é™¤æœ€å¤§å€¼ / æœ€å°å€¼: <code>O(log(n))</code></li>
</ul>
</li>
</ul>
<p><img style="margin: auto" src="/2017/12/21/translations-interviews/heap.png?raw=true" alt="Max Heap" title="" max="" heap""="" width="400" height="500"></p>
<h3 id="Hashing"><a href="#Hashing" class="headerlink" title="Hashing"></a>Hashing</h3><ul>
<li>å“ˆå¸Œèƒ½å¤Ÿå°†ä»»æ„é•¿åº¦çš„æ•°æ®æ˜ å°„åˆ°å›ºå®šé•¿åº¦çš„æ•°æ®ã€‚å“ˆå¸Œå‡½æ•°è¿”å›çš„å³æ˜¯å“ˆå¸Œå€¼ï¼Œå¦‚æœä¸¤ä¸ªä¸åŒçš„é”®å¾—åˆ°ç›¸åŒçš„å“ˆå¸Œå€¼ï¼Œå³å°†è¿™ç§ç°è±¡ç§°ä¸ºç¢°æ’ã€‚</li>
<li><strong>Hash Map</strong>: Hash Map æ˜¯ä¸€ç§èƒ½å¤Ÿå»ºç«‹èµ·é”®ä¸å€¼ä¹‹é—´å…³ç³»çš„æ•°æ®ç»“æ„ï¼ŒHash Map èƒ½å¤Ÿä½¿ç”¨å“ˆå¸Œå‡½æ•°å°†é”®è½¬åŒ–ä¸ºæ¡¶æˆ–è€…æ§½ä¸­çš„ä¸‹æ ‡ï¼Œä»è€Œä¼˜åŒ–å¯¹äºç›®æ ‡å€¼çš„æœç´¢é€Ÿåº¦ã€‚</li>
<li>ç¢°æ’è§£å†³<ul>
<li><strong>é“¾åœ°å€æ³•ï¼ˆSeparate Chainingï¼‰</strong>: é“¾åœ°å€æ³•ä¸­ï¼Œæ¯ä¸ªæ¡¶æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼ŒåŒ…å«äº†ä¸€ç³»åˆ—ç´¢å¼•çš„åˆ—è¡¨ã€‚æœç´¢æ“ä½œçš„æ—¶é—´å¤æ‚åº¦å³æ˜¯æœç´¢æ¡¶çš„æ—¶é—´ï¼ˆå›ºå®šæ—¶é—´ï¼‰ä¸éå†åˆ—è¡¨çš„æ—¶é—´ä¹‹å’Œã€‚</li>
<li><strong>å¼€åœ°å€æ³•ï¼ˆOpen Addressingï¼‰</strong>: åœ¨å¼€åœ°å€æ³•ä¸­ï¼Œå½“æ’å…¥æ–°å€¼æ—¶ï¼Œä¼šåˆ¤æ–­è¯¥å€¼å¯¹åº”çš„å“ˆå¸Œæ¡¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™æ ¹æ®æŸç§ç®—æ³•ä¾æ¬¡é€‰æ‹©ä¸‹ä¸€ä¸ªå¯èƒ½çš„ä½ç½®ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªå°šæœªè¢«å ç”¨çš„åœ°å€ã€‚æ‰€è°“å¼€åœ°å€æ³•ä¹Ÿæ˜¯æŒ‡æŸä¸ªå…ƒç´ çš„ä½ç½®å¹¶ä¸æ°¸è¿œç”±å…¶å“ˆå¸Œå€¼å†³å®šã€‚</li>
</ul>
</li>
</ul>
<p><img src="/2017/12/21/translations-interviews/hash.png?raw=true" alt="Alt text" title="Hashing"></p>
<h3 id="Graph"><a href="#Graph" class="headerlink" title="Graph"></a>Graph</h3><ul>
<li>å›¾æ˜¯ä¸€ç§æ•°æ®å…ƒç´ é—´ä¸ºå¤šå¯¹å¤šå…³ç³»çš„æ•°æ®ç»“æ„ï¼ŒåŠ ä¸Šä¸€ç»„åŸºæœ¬æ“ä½œæ„æˆçš„æŠ½è±¡æ•°æ®ç±»å‹ã€‚<ul>
<li><strong>æ— å‘å›¾ï¼ˆUndirected Graphï¼‰</strong>: æ— å‘å›¾å…·æœ‰å¯¹ç§°çš„é‚»æ¥çŸ©é˜µï¼Œå› æ­¤å¦‚æœå­˜åœ¨æŸæ¡ä»èŠ‚ç‚¹ u åˆ°èŠ‚ç‚¹ v çš„è¾¹ï¼Œåä¹‹ä» v åˆ° u çš„è¾¹ä¹Ÿå­˜åœ¨ã€‚</li>
<li><strong>æœ‰å‘å›¾ï¼ˆDirected Graphï¼‰</strong>: æœ‰å‘å›¾çš„é‚»æ¥çŸ©é˜µæ˜¯éå¯¹ç§°çš„ï¼Œå³å¦‚æœå­˜åœ¨ä» u åˆ° v çš„è¾¹å¹¶ä¸æ„å‘³ç€ä¸€å®šå­˜åœ¨ä» v åˆ° u çš„è¾¹ã€‚</li>
</ul>
</li>
</ul>
<p><img style="margin: auto" src="/2017/12/21/translations-interviews/graph.png?raw=true" alt="Graph" title="Graph" width="400" height="500"></p>
<h2 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h2><h3 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h3><h4 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h4><ul>
<li>ç¨³å®š: å¦</li>
<li>æ—¶é—´å¤æ‚åº¦:<ul>
<li>æœ€ä¼˜æ—¶é—´: <code>O(nlog(n))</code></li>
<li>æœ€åæ—¶é—´: <code>O(n^2)</code></li>
<li>å¹³å‡æ—¶é—´: <code>O(nlog(n))</code></li>
</ul>
</li>
</ul>
<p><img src="/2017/12/21/translations-interviews/quicksort.gif?raw=true" alt="Alt text" title="Quicksort"></p>
<h4 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h4><ul>
<li>å½’å¹¶æ’åºæ˜¯å…¸å‹çš„åˆ†æ²»ç®—æ³•ï¼Œå®ƒä¸æ–­åœ°å°†æŸä¸ªæ•°ç»„åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«å¯¹å·¦å­æ•°ç»„ä¸å³å­æ•°ç»„è¿›è¡Œæ’åºï¼Œç„¶åå°†ä¸¤ä¸ªæ•°ç»„åˆå¹¶ä¸ºæ–°çš„æœ‰åºæ•°ç»„ã€‚</li>
<li>ç¨³å®š: æ˜¯</li>
<li>æ—¶é—´å¤æ‚åº¦:<ul>
<li>æœ€ä¼˜æ—¶é—´: <code>O(nlog(n))</code></li>
<li>æœ€åæ—¶é—´: <code>O(nlog(n))</code></li>
<li>å¹³å‡æ—¶é—´: <code>O(nlog(n))</code></li>
</ul>
</li>
</ul>
<p><img src="/2017/12/21/translations-interviews/mergesort.gif?raw=true" alt="Alt text" title="Mergesort"></p>
<h4 id="æ¡¶æ’åº"><a href="#æ¡¶æ’åº" class="headerlink" title="æ¡¶æ’åº"></a>æ¡¶æ’åº</h4><ul>
<li>æ¡¶æ’åºå°†æ•°ç»„åˆ†åˆ°æœ‰é™æ•°é‡çš„æ¡¶å­é‡Œã€‚æ¯ä¸ªæ¡¶å­å†ä¸ªåˆ«æ’åºï¼ˆæœ‰å¯èƒ½å†ä½¿ç”¨åˆ«çš„æ’åºç®—æ³•æˆ–æ˜¯ä»¥é€’å½’æ–¹å¼ç»§ç»­ä½¿ç”¨æ¡¶æ’åºè¿›è¡Œæ’åºï¼‰ã€‚</li>
<li>æ—¶é—´å¤æ‚åº¦:<ul>
<li>æœ€ä¼˜æ—¶é—´: <code>Î©(n + k)</code></li>
<li>æœ€åæ—¶é—´: <code>O(n^2)</code></li>
<li>å¹³å‡æ—¶é—´:<code>Î˜(n + k)</code></li>
</ul>
</li>
</ul>
<p><img src="/2017/12/21/translations-interviews/bucketsort.png?raw=true" alt="Alt text" title="Bucket Sort"></p>
<h4 id="åŸºæ•°æ’åº"><a href="#åŸºæ•°æ’åº" class="headerlink" title="åŸºæ•°æ’åº"></a>åŸºæ•°æ’åº</h4><ul>
<li>åŸºæ•°æ’åºç±»ä¼¼äºæ¡¶æ’åºï¼Œå°†æ•°ç»„åˆ†å‰²åˆ°æœ‰é™æ•°ç›®çš„æ¡¶ä¸­ï¼›ä¸è¿‡å…¶åœ¨åˆ†å‰²ä¹‹åå¹¶æ²¡æœ‰è®©æ¯ä¸ªæ¡¶å•ç‹¬åœ°è¿›è¡Œæ’åºï¼Œè€Œæ˜¯ç›´æ¥è¿›è¡Œäº†åˆå¹¶æ“ä½œã€‚</li>
<li>æ—¶é—´å¤æ‚åº¦:<ul>
<li>æœ€ä¼˜æ—¶é—´: <code>Î©(nk)</code></li>
<li>æœ€åæ—¶é—´: <code>O(nk)</code></li>
<li>å¹³å‡æ—¶é—´: <code>Î˜(nk)</code></li>
</ul>
</li>
</ul>
<h3 id="å›¾ç®—æ³•"><a href="#å›¾ç®—æ³•" class="headerlink" title="å›¾ç®—æ³•"></a>å›¾ç®—æ³•</h3><h4 id="æ·±åº¦ä¼˜å…ˆæœç´¢"><a href="#æ·±åº¦ä¼˜å…ˆæœç´¢" class="headerlink" title="æ·±åº¦ä¼˜å…ˆæœç´¢"></a>æ·±åº¦ä¼˜å…ˆæœç´¢</h4><ul>
<li>æ·±åº¦ä¼˜å…ˆç®—æ³•æ˜¯ä¸€ç§ä¼˜å…ˆéå†å­èŠ‚ç‚¹è€Œä¸æ˜¯å›æº¯çš„ç®—æ³•ã€‚</li>
<li>æ—¶é—´å¤æ‚åº¦: <code>O(|V| + |E|)</code></li>
</ul>
<p><img src="/2017/12/21/translations-interviews/dfsbfs.gif?raw=true" alt="Alt text" title="DFS / BFS Traversal"></p>
<h4 id="å¹¿åº¦ä¼˜å…ˆæœç´¢"><a href="#å¹¿åº¦ä¼˜å…ˆæœç´¢" class="headerlink" title="å¹¿åº¦ä¼˜å…ˆæœç´¢"></a>å¹¿åº¦ä¼˜å…ˆæœç´¢</h4><ul>
<li>å¹¿åº¦ä¼˜å…ˆæœç´¢æ˜¯ä¼˜å…ˆéå†é‚»å±…èŠ‚ç‚¹è€Œä¸æ˜¯å­èŠ‚ç‚¹çš„å›¾éå†ç®—æ³•ã€‚</li>
<li>æ—¶é—´å¤æ‚åº¦: <code>O(|V| + |E|)</code></li>
</ul>
<p><img src="/2017/12/21/translations-interviews/dfsbfs.gif?raw=true" alt="Alt text" title="DFS / BFS Traversal"></p>
<h4 id="æ‹“æ‰‘æ’åº"><a href="#æ‹“æ‰‘æ’åº" class="headerlink" title="æ‹“æ‰‘æ’åº"></a>æ‹“æ‰‘æ’åº</h4><ul>
<li>æ‹“æ‰‘æ’åºæ˜¯å¯¹äºæœ‰å‘å›¾èŠ‚ç‚¹çš„çº¿æ€§æ’åºï¼Œå¦‚æœå­˜åœ¨æŸæ¡ä» u åˆ° v çš„è¾¹ï¼Œåˆ™è®¤ä¸º u çš„ä¸‹æ ‡å…ˆäº vã€‚</li>
<li>æ—¶é—´å¤æ‚åº¦: <code>O(|V| + |E|)</code></li>
</ul>
<h4 id="Dijkstra-ç®—æ³•"><a href="#Dijkstra-ç®—æ³•" class="headerlink" title="Dijkstra ç®—æ³•"></a>Dijkstra ç®—æ³•</h4><ul>
<li><strong>Dijkstra ç®—æ³•</strong> ç”¨äºè®¡ç®—æœ‰å‘å›¾ä¸­å•æºæœ€çŸ­è·¯å¾„é—®é¢˜ã€‚</li>
<li>æ—¶é—´å¤æ‚åº¦: <code>O(|V|^2)</code></li>
</ul>
<p><img src="/2017/12/21/translations-interviews/dijkstra.gif?raw=true" alt="Alt text" title="Dijkstra&#39;s"></p>
<h4 id="Bellman-Ford-ç®—æ³•"><a href="#Bellman-Ford-ç®—æ³•" class="headerlink" title="Bellman-Ford ç®—æ³•"></a>Bellman-Ford ç®—æ³•</h4><ul>
<li><strong>Bellman-Ford ç®—æ³•</strong>æ˜¯åœ¨å¸¦æƒå›¾ä¸­è®¡ç®—ä»å•ä¸€æºç‚¹å‡ºå‘åˆ°å…¶ä»–èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„çš„ç®—æ³•ã€‚</li>
<li>å°½ç®¡ç®—æ³•å¤æ‚åº¦å¤§äº Dijkstra ç®—æ³•ï¼Œä½†æ˜¯å®ƒé€‚ç”¨äºåŒ…å«äº†è´Ÿå€¼è¾¹çš„å›¾ã€‚</li>
<li>æ—¶é—´å¤æ‚åº¦:<ul>
<li>æœ€ä¼˜æ—¶é—´: <code>O(|E|)</code></li>
</ul>
<ul>
<li>æœ€åæ—¶é—´: <code>O(|V||E|)</code></li>
</ul>
</li>
</ul>
<p><img src="/2017/12/21/translations-interviews/bellman-ford.gif?raw=true" alt="Alt text" title="Bellman-Ford"></p>
<h4 id="Floyd-Warshall-ç®—æ³•"><a href="#Floyd-Warshall-ç®—æ³•" class="headerlink" title="Floyd-Warshall ç®—æ³•"></a>Floyd-Warshall ç®—æ³•</h4><ul>
<li><strong>Floyd-Warshall ç®—æ³•</strong> èƒ½å¤Ÿç”¨äºåœ¨æ— ç¯å¸¦æƒå›¾ä¸­å¯»æ‰¾ä»»æ„èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚</li>
<li>æ—¶é—´å¤æ‚åº¦:<ul>
<li>æœ€ä¼˜æ—¶é—´: <code>O(|V|^3)</code></li>
<li>æœ€åæ—¶é—´: <code>O(|V|^3)</code></li>
<li>å¹³å‡æ—¶é—´: <code>O(|V|^3)</code></li>
</ul>
</li>
</ul>
<h4 id="Prim-ç®—æ³•"><a href="#Prim-ç®—æ³•" class="headerlink" title="Prim ç®—æ³•"></a>Prim ç®—æ³•</h4><ul>
<li><strong>Prim ç®—æ³•</strong>æ˜¯ç”¨äºåœ¨å¸¦æƒæ— å‘å›¾ä¸­è®¡ç®—æœ€å°ç”Ÿæˆæ ‘çš„è´ªå©ªç®—æ³•ã€‚æ¢è¨€ä¹‹ï¼ŒPrim ç®—æ³•èƒ½å¤Ÿåœ¨å›¾ä¸­æŠ½å–å‡ºè¿æ¥æ‰€æœ‰èŠ‚ç‚¹çš„è¾¹çš„æœ€å°ä»£ä»·å­é›†ã€‚</li>
<li>æ—¶é—´å¤æ‚åº¦: <code>O(|V|^2)</code></li>
</ul>
<p><img src="/2017/12/21/translations-interviews/prim.gif?raw=true" alt="Alt text" title="Prim&#39;s Algorithm"></p>
<h4 id="Kruskal-ç®—æ³•"><a href="#Kruskal-ç®—æ³•" class="headerlink" title="Kruskal ç®—æ³•"></a>Kruskal ç®—æ³•</h4><ul>
<li><strong>Kruskal ç®—æ³•</strong>åŒæ ·æ˜¯è®¡ç®—å›¾çš„æœ€å°ç”Ÿæˆæ ‘çš„ç®—æ³•ï¼Œä¸ Prim çš„åŒºåˆ«åœ¨äºå¹¶ä¸éœ€è¦å›¾æ˜¯è¿é€šçš„ã€‚</li>
<li>æ—¶é—´å¤æ‚åº¦: <code>O(|E|log|V|)</code></li>
</ul>
<p><img src="/2017/12/21/translations-interviews/kruskal.gif?raw=true" alt="Alt text" title="Kruskal&#39;s Algorithm"></p>
<h2 id="ä½è¿ç®—"><a href="#ä½è¿ç®—" class="headerlink" title="ä½è¿ç®—"></a>ä½è¿ç®—</h2><ul>
<li>ä½è¿ç®—å³æ˜¯åœ¨ä½çº§åˆ«è¿›è¡Œæ“ä½œçš„æŠ€æœ¯ï¼Œåˆé€‚çš„ä½è¿ç®—èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¾—åˆ°æ›´å¿«åœ°è¿ç®—é€Ÿåº¦ä¸æ›´å°çš„å†…å­˜ä½¿ç”¨ã€‚</li>
<li>æµ‹è¯•ç¬¬ k ä½: <code>s &amp; (1 &lt;&lt; k)</code></li>
<li>è®¾ç½®ç¬¬ k ä½: <code>s |= (1 &lt;&lt; k)</code></li>
<li>ç¬¬ k ä½ç½®é›¶: <code>s &amp;= ~(1 &lt;&lt; k)</code></li>
<li>åˆ‡æ¢ç¬¬ k ä½å€¼: <code>s ^= ~(1 &lt;&lt; k)</code></li>
<li>ä¹˜ä»¥ 2: <code>s &lt;&lt; n</code></li>
<li>é™¤ä»¥ 2: <code>s &gt;&gt; n</code></li>
<li>äº¤é›†: <code>s &amp; t</code></li>
<li>å¹¶é›†: <code>s | t</code></li>
<li>å‡æ³•: <code>s &amp; ~t</code></li>
<li>äº¤æ¢ <code>x = x ^ y ^ (y = x)</code></li>
<li>å–å‡ºæœ€å°é 0 ä½ï¼ˆExtract lowest set bitï¼‰: <code>s &amp; (-s)</code></li>
<li>å–å‡ºæœ€å° 0 ä½ï¼ˆExtract lowest unset bitï¼‰: <code>~s &amp; (s + 1)</code></li>
<li>äº¤æ¢å€¼:<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">x ^= y;</div><div class="line">y ^= x;</div><div class="line">x ^= y;</div></pre></td></tr></table></figure>
</code></pre></li>
</ul>
<h2 id="ç®—æ³•å¤æ‚åº¦åˆ†æ"><a href="#ç®—æ³•å¤æ‚åº¦åˆ†æ" class="headerlink" title="ç®—æ³•å¤æ‚åº¦åˆ†æ"></a>ç®—æ³•å¤æ‚åº¦åˆ†æ</h2><h4 id="å¤§-O-è¡¨ç¤º"><a href="#å¤§-O-è¡¨ç¤º" class="headerlink" title="å¤§ O è¡¨ç¤º"></a>å¤§ O è¡¨ç¤º</h4><ul>
<li><strong>å¤§ O è¡¨ç¤º</strong> ç”¨äºè¡¨ç¤ºæŸä¸ªç®—æ³•çš„ä¸Šé™ï¼Œå¾€å¾€ç”¨äºæè¿°æœ€åçš„æƒ…å†µã€‚</li>
</ul>
<p><img src="/2017/12/21/translations-interviews/bigO.png?raw=true" alt="Alt text" title="Theta Notation"></p>
<h4 id="å°-O-è¡¨ç¤º"><a href="#å°-O-è¡¨ç¤º" class="headerlink" title="å° O è¡¨ç¤º"></a>å° O è¡¨ç¤º</h4><ul>
<li><strong>å° O è¡¨ç¤º</strong>ç”¨äºæè¿°æŸä¸ªç®—æ³•çš„æ¸è¿›ä¸Šç•Œï¼Œä¸è¿‡äºŒè€…è¦æ›´ä¸ºç´§å¯†ã€‚</li>
</ul>
<h4 id="å¤§-Î©-è¡¨ç¤º"><a href="#å¤§-Î©-è¡¨ç¤º" class="headerlink" title="å¤§ Î© è¡¨ç¤º"></a>å¤§ Î© è¡¨ç¤º</h4><ul>
<li><strong>å¤§ Î© è¡¨ç¤º</strong>ç”¨äºæè¿°æŸä¸ªç®—æ³•çš„æ¸è¿›ä¸‹ç•Œã€‚</li>
</ul>
<p><img src="/2017/12/21/translations-interviews/bigOmega.png?raw=true" alt="Alt text" title="Theta Notation"></p>
<h4 id="å°-Ï‰-è¡¨ç¤º"><a href="#å°-Ï‰-è¡¨ç¤º" class="headerlink" title="å° Ï‰ è¡¨ç¤º"></a>å° Ï‰ è¡¨ç¤º</h4><ul>
<li><strong>Little Omega Notation</strong>ç”¨äºæè¿°æŸä¸ªç‰¹å®šç®—æ³•çš„ä¸‹ç•Œï¼Œä¸è¿‡ä¸ä¸€å®šå¾ˆé è¿‘ã€‚</li>
</ul>
<h4 id="Theta-Î˜-è¡¨ç¤º"><a href="#Theta-Î˜-è¡¨ç¤º" class="headerlink" title="Theta Î˜ è¡¨ç¤º"></a>Theta Î˜ è¡¨ç¤º</h4><ul>
<li><strong>Theta Notation</strong>ç”¨äºæè¿°æŸä¸ªç¡®å®šç®—æ³•çš„ç¡®ç•Œã€‚</li>
</ul>
<p><img src="/2017/12/21/translations-interviews/theta.png?raw=true" alt="Alt text" title="Theta Notation"></p>
<h2 id="è§†é¢‘æ•™ç¨‹"><a href="#è§†é¢‘æ•™ç¨‹" class="headerlink" title="è§†é¢‘æ•™ç¨‹"></a>è§†é¢‘æ•™ç¨‹</h2><ul>
<li>Data Structures<ul>
<li><a href="https://www.youtube.com/watch?v=mFPmKGIrQs4&amp;index=1&amp;list=PL-XXv-cvA_iAlnI-BQr9hjqADPBtujFJd" target="_blank" rel="external">UC Berkeley Data Structures</a></li>
<li><a href="https://www.youtube.com/watch?v=T0yzrZL1py0&amp;list=PLUl4u3cNGP61hsJNdULdudlRL493b-XZf&amp;index=1" target="_blank" rel="external">MIT Advanced Data Structures</a></li>
</ul>
</li>
<li>Algorithms<ul>
<li><a href="https://www.youtube.com/watch?v=HtSuA80QTyo&amp;list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb&amp;index=1" target="_blank" rel="external">MIT Introduction to Algorithms</a></li>
<li><a href="https://www.youtube.com/playlist?list=PL6ogFv-ieghdoGKGg2Bik3Gl1glBTEu8c" target="_blank" rel="external">MIT Advanced Algorithms</a></li>
</ul>
</li>
</ul>
<h2 id="é¢è¯•ä¹¦ç±"><a href="#é¢è¯•ä¹¦ç±" class="headerlink" title="é¢è¯•ä¹¦ç±"></a>é¢è¯•ä¹¦ç±</h2><ul>
<li>Competitive Programming 3 - Steven Halim &amp; Felix Halim</li>
<li>Cracking The Coding Interview - Gayle Laakmann McDowell</li>
<li>Cracking The PM Interview - Gayle Laakmann McDowell &amp; Jackie Bavaro</li>
</ul>
<h2 id="è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯èµ„è®¯"><a href="#è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯èµ„è®¯" class="headerlink" title="è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯èµ„è®¯"></a>è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯èµ„è®¯</h2><ul>
<li><a href="https://news.ycombinator.com/" target="_blank" rel="external">Hacker News</a></li>
<li><a href="https://lobste.rs/" target="_blank" rel="external">Lobsters</a></li>
</ul>
<h2 id="æ–‡ä»¶ç»“æ„"><a href="#æ–‡ä»¶ç»“æ„" class="headerlink" title="æ–‡ä»¶ç»“æ„"></a>æ–‡ä»¶ç»“æ„</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div></pre></td><td class="code"><pre><div class="line">.</div><div class="line">â”œâ”€â”€ Array</div><div class="line">â”‚Â Â  â”œâ”€â”€ bestTimeToBuyAndSellStock.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ findTheCelebrity.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ gameOfLife.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ increasingTripletSubsequence.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ insertInterval.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ longestConsecutiveSequence.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ maximumProductSubarray.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ maximumSubarray.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ mergeIntervals.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ missingRanges.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ productOfArrayExceptSelf.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ rotateImage.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ searchInRotatedSortedArray.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ spiralMatrixII.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ subsetsII.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ subsets.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ summaryRanges.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ wiggleSort.java</div><div class="line">â”‚Â Â  â””â”€â”€ wordSearch.java</div><div class="line">â”œâ”€â”€ Backtracking</div><div class="line">â”‚Â Â  â”œâ”€â”€ androidUnlockPatterns.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ generalizedAbbreviation.java</div><div class="line">â”‚Â Â  â””â”€â”€ letterCombinationsOfAPhoneNumber.java</div><div class="line">â”œâ”€â”€ BinarySearch</div><div class="line">â”‚Â Â  â”œâ”€â”€ closestBinarySearchTreeValue.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ firstBadVersion.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ guessNumberHigherOrLower.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ pow(x,n).java</div><div class="line">â”‚Â Â  â””â”€â”€ sqrt(x).java</div><div class="line">â”œâ”€â”€ BitManipulation</div><div class="line">â”‚Â Â  â”œâ”€â”€ binaryWatch.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ countingBits.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ hammingDistance.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ maximumProductOfWordLengths.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ numberOf1Bits.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ sumOfTwoIntegers.java</div><div class="line">â”‚Â Â  â””â”€â”€ utf-8Validation.java</div><div class="line">â”œâ”€â”€ BreadthFirstSearch</div><div class="line">â”‚Â Â  â”œâ”€â”€ binaryTreeLevelOrderTraversal.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ cloneGraph.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ pacificAtlanticWaterFlow.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ removeInvalidParentheses.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ shortestDistanceFromAllBuildings.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ symmetricTree.java</div><div class="line">â”‚Â Â  â””â”€â”€ wallsAndGates.java</div><div class="line">â”œâ”€â”€ DepthFirstSearch</div><div class="line">â”‚Â Â  â”œâ”€â”€ balancedBinaryTree.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ battleshipsInABoard.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ convertSortedArrayToBinarySearchTree.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ maximumDepthOfABinaryTree.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ numberOfIslands.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ populatingNextRightPointersInEachNode.java</div><div class="line">â”‚Â Â  â””â”€â”€ sameTree.java</div><div class="line">â”œâ”€â”€ Design</div><div class="line">â”‚Â Â  â””â”€â”€ zigzagIterator.java</div><div class="line">â”œâ”€â”€ DivideAndConquer</div><div class="line">â”‚Â Â  â”œâ”€â”€ expressionAddOperators.java</div><div class="line">â”‚Â Â  â””â”€â”€ kthLargestElementInAnArray.java</div><div class="line">â”œâ”€â”€ DynamicProgramming</div><div class="line">â”‚Â Â  â”œâ”€â”€ bombEnemy.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ climbingStairs.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ combinationSumIV.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ countingBits.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ editDistance.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ houseRobber.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ paintFence.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ paintHouseII.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ regularExpressionMatching.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ sentenceScreenFitting.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ uniqueBinarySearchTrees.java</div><div class="line">â”‚Â Â  â””â”€â”€ wordBreak.java</div><div class="line">â”œâ”€â”€ HashTable</div><div class="line">â”‚Â Â  â”œâ”€â”€ binaryTreeVerticalOrderTraversal.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ findTheDifference.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ groupAnagrams.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ groupShiftedStrings.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ islandPerimeter.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ loggerRateLimiter.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ maximumSizeSubarraySumEqualsK.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ minimumWindowSubstring.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ sparseMatrixMultiplication.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ strobogrammaticNumber.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ twoSum.java</div><div class="line">â”‚Â Â  â””â”€â”€ uniqueWordAbbreviation.java</div><div class="line">â”œâ”€â”€ LinkedList</div><div class="line">â”‚Â Â  â”œâ”€â”€ addTwoNumbers.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ deleteNodeInALinkedList.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ mergeKSortedLists.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ palindromeLinkedList.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ plusOneLinkedList.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ README.md</div><div class="line">â”‚Â Â  â””â”€â”€ reverseLinkedList.java</div><div class="line">â”œâ”€â”€ Queue</div><div class="line">â”‚Â Â  â””â”€â”€ movingAverageFromDataStream.java</div><div class="line">â”œâ”€â”€ README.md</div><div class="line">â”œâ”€â”€ Sort</div><div class="line">â”‚Â Â  â”œâ”€â”€ meetingRoomsII.java</div><div class="line">â”‚Â Â  â””â”€â”€ meetingRooms.java</div><div class="line">â”œâ”€â”€ Stack</div><div class="line">â”‚Â Â  â”œâ”€â”€ binarySearchTreeIterator.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ decodeString.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ flattenNestedListIterator.java</div><div class="line">â”‚Â Â  â””â”€â”€ trappingRainWater.java</div><div class="line">â”œâ”€â”€ String</div><div class="line">â”‚Â Â  â”œâ”€â”€ addBinary.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ countAndSay.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ decodeWays.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ editDistance.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ integerToEnglishWords.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ longestPalindrome.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ longestSubstringWithAtMostKDistinctCharacters.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ minimumWindowSubstring.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ multiplyString.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ oneEditDistance.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ palindromePermutation.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ README.md</div><div class="line">â”‚Â Â  â”œâ”€â”€ reverseVowelsOfAString.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ romanToInteger.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ validPalindrome.java</div><div class="line">â”‚Â Â  â””â”€â”€ validParentheses.java</div><div class="line">â”œâ”€â”€ Tree</div><div class="line">â”‚Â Â  â”œâ”€â”€ binaryTreeMaximumPathSum.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ binaryTreePaths.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ inorderSuccessorInBST.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ invertBinaryTree.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ lowestCommonAncestorOfABinaryTree.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ sumOfLeftLeaves.java</div><div class="line">â”‚Â Â  â””â”€â”€ validateBinarySearchTree.java</div><div class="line">â”œâ”€â”€ Trie</div><div class="line">â”‚Â Â  â”œâ”€â”€ addAndSearchWordDataStructureDesign.java</div><div class="line">â”‚Â Â  â”œâ”€â”€ implementTrie.java</div><div class="line">â”‚Â Â  â””â”€â”€ wordSquares.java</div><div class="line">â””â”€â”€ TwoPointers</div><div class="line">    â”œâ”€â”€ 3Sum.java</div><div class="line">    â”œâ”€â”€ 3SumSmaller.java</div><div class="line">    â”œâ”€â”€ mergeSortedArray.java</div><div class="line">    â”œâ”€â”€ minimumSizeSubarraySum.java</div><div class="line">    â”œâ”€â”€ moveZeros.java</div><div class="line">    â”œâ”€â”€ removeDuplicatesFromSortedArray.java</div><div class="line">    â”œâ”€â”€ reverseString.java</div><div class="line">    â””â”€â”€ sortColors.java</div><div class="line"></div><div class="line">18 directories, 124 files</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;åŸæ–‡åœ°å€ï¼š&lt;a href=&quot;https://github.com/kdn251/interviews&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;github.com/kdn251/interviews&lt;/a&gt;&lt;/l
    
    </summary>
    
    
      <category term="interviews" scheme="https://keshiim.github.io/tags/interviews/"/>
    
  </entry>
  
  <entry>
    <title>Swiftï¼šç±»å‹è½¬æ¢</title>
    <link href="https://keshiim.github.io/2017/12/18/Swift-type-casting/"/>
    <id>https://keshiim.github.io/2017/12/18/Swift-type-casting/</id>
    <published>2017-12-18T06:57:32.000Z</published>
    <updated>2018-03-20T09:56:53.668Z</updated>
    
    <content type="html"><![CDATA[<p><strong>ç±»å‹è½¬æ¢</strong>å¯ä»¥åˆ¤æ–­å®ä¾‹çš„ç±»å‹ï¼Œä¹Ÿå¯ä»¥å°†è¯¥å®ä¾‹åœ¨å…¶æ‰€åœ¨çš„ç±»å±‚æ¬¡ä¸­è§†ä¸º<em>å…¶çˆ¶ç±»æˆ–å­ç±»çš„å®ä¾‹</em>ã€‚</p>
<p>Swift ä¸­ç±»å‹è½¬æ¢çš„å®ç°ä¸º <code>is</code> å’Œ <code>as</code> æ“ä½œç¬¦ã€‚è¿™ä¸¤ä¸ªæ“ä½œç¬¦ä½¿ç”¨äº†ä¸€ç§<strong>ç®€å•ä¼ ç¥</strong>çš„æ–¹å¼æ¥æ£€æŸ¥ä¸€ä¸ªå€¼çš„ç±»å‹æˆ–å°†æŸä¸ªå€¼è½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹ã€‚</p>
<h3 id="ä¸ºç±»å‹è½¬æ¢å®šä¹‰ç±»å±‚æ¬¡"><a href="#ä¸ºç±»å‹è½¬æ¢å®šä¹‰ç±»å±‚æ¬¡" class="headerlink" title="ä¸ºç±»å‹è½¬æ¢å®šä¹‰ç±»å±‚æ¬¡"></a>ä¸ºç±»å‹è½¬æ¢å®šä¹‰ç±»å±‚æ¬¡</h3><p>ä½ å¯ä»¥åœ¨ç±»åŠå…¶å­ç±»å±‚æ¬¡ä¸­ä½¿ç”¨ç±»å‹è½¬æ¢æ¥åˆ¤æ–­ç‰¹å®šç±»å®ä¾‹çš„ç±»å‹å¹¶ä¸”åœ¨åŒä¸€ç±»å±‚æ¬¡ä¸­å°†è¯¥å®ä¾‹ç±»å‹è½¬æ¢ä¸ºå¦ä¸€ä¸ªç±»ã€‚ä¸‹é¢çš„ä¸‰æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªç±»å±‚æ¬¡ä»¥åŠä¸€ä¸ªåŒ…å«äº†è¿™äº›ç±»å®ä¾‹çš„æ•°ç»„ï¼Œä½œä¸ºç±»å‹è½¬æ¢çš„ä¾‹å­ã€‚</p>
<p>ç¬¬ä¸€ä¸ªä»£ç ç‰‡æ®µå®šä¹‰äº†ä¸€ä¸ªå«åš <code>MediaItem</code> çš„æ–°åŸºç±»ã€‚è¿™ä¸ªç±»ä¸ºå‡ºç°åœ¨æ•°å­—åª’ä½“åº“ä¸­çš„æ‰€æœ‰æˆå‘˜æä¾›äº†åŸºæœ¬çš„åŠŸèƒ½ã€‚å®ƒå£°æ˜äº†ä¸€ä¸ª <code>String</code> ç±»å‹çš„ <code>name</code> å’Œä¸€ä¸ªå«åš <code>init</code> çš„ <code>name</code> åˆå§‹åŒ–å™¨ã€‚ï¼ˆè¿™é‡Œå‡è®¾æ‰€æœ‰çš„åª’ä½“é¡¹ç›®ï¼ŒåŒ…æ‹¬æ‰€æœ‰ç”µå½±å’ŒéŸ³ä¹ï¼Œéƒ½æœ‰ä¸€ä¸ªåå­—ã€‚ï¼‰</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MediaItem</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸‹ä¸€ä¸ªç‰‡æ®µå®šä¹‰äº†ä¸¤ä¸ª <code>MediaItem</code> çš„å­ç±»ã€‚ç¬¬ä¸€ä¸ªå­ç±»ï¼Œ <code>Movie</code> ï¼Œå°è£…äº†é¢å¤–çš„ç”µå½±çš„ä¿¡æ¯ã€‚ä»–åœ¨ <code>MediaItem</code> çš„åŸºç¡€ä¸Šæ·»åŠ äº†åä¸º <code>director</code> çš„å±æ€§åŠå…¶åˆå§‹åŒ–å™¨ã€‚ç¬¬äºŒä¸ªå­ç±»ï¼Œ <code>Song</code> ï¼Œå¢åŠ äº†åä¸º <code>artist</code> çš„å±æ€§åŠå…¶åˆå§‹åŒ–å™¨ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Movie</span>: <span class="title">MediaItem</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> director: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>, director: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.director = director</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(name: name)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Song</span>: <span class="title">MediaItem</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> artist: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>, artist: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.artist = artist</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(name: name)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æœ€åä¸€ä¸ªä»£ç æ®µåˆ›å»ºäº†åä¸º <code>library</code> çš„å¸¸é‡æ•°ç»„ï¼Œå®ƒåŒ…å«äº†ä¸¤ä¸ª <code>Movie</code> å®ä¾‹å’Œä¸‰ä¸ª <code>Song</code> å®ä¾‹ã€‚ <code>library</code> æ•°ç»„çš„ç±»å‹æ˜¯åœ¨åˆå§‹åŒ–æ—¶æ ¹æ®<em>å¸¸é‡å­—é¢é‡æ¨æ–­å‡ºæ¥</em>çš„ã€‚ <code>Swift</code> <strong>çš„ç±»å‹æ£€æŸ¥å™¨èƒ½å¤Ÿæ¨æ–­</strong> <code>Movie</code> <strong>å’Œ</strong> <code>Song</code> <strong>æœ‰ä¸€ä¸ªå…±åŒçš„çˆ¶ç±»</strong> <code>MediaItem</code> ï¼Œ <em>å› æ­¤ <code>library</code> çš„ç±»å‹æ¨æ–­ä¸º <code>[MediaItem]</code></em> ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> library = [</div><div class="line">    <span class="type">Movie</span>(name: <span class="string">"Casablanca"</span>, director: <span class="string">"Michael Curtiz"</span>),</div><div class="line">    <span class="type">Song</span>(name: <span class="string">"Blue Suede Shoes"</span>, artist: <span class="string">"Elvis Presley"</span>),</div><div class="line">    <span class="type">Movie</span>(name: <span class="string">"Citizen Kane"</span>, director: <span class="string">"Orson Welles"</span>),</div><div class="line">    <span class="type">Song</span>(name: <span class="string">"The One And Only"</span>, artist: <span class="string">"Chesney Hawkes"</span>),</div><div class="line">    <span class="type">Song</span>(name: <span class="string">"Never Gonna Give You Up"</span>, artist: <span class="string">"Rick Astley"</span>)</div><div class="line">]</div><div class="line"><span class="comment">// "library" çš„ç±»å‹è¢«æ¨æ–­ä¸º[MediaItem]</span></div></pre></td></tr></table></figure>
<p>äº‹å®ä¸Š <code>library</code> å‚¨å­˜çš„é¡¹ç›®åœ¨åå°ä¾æ—§æ˜¯ <code>Movie</code> å’Œ <code>Song</code> å®ä¾‹ã€‚æ€»ä¹‹ï¼Œå¦‚æœä½ éå†è¿™ä¸ªæ•°ç»„çš„å†…å®¹ï¼Œä½ å–å‡ºçš„é¡¹ç›®å°†ä¼šæ˜¯ <code>MediaItem</code> ç±»å‹è€Œé <code>Movie</code> æˆ– <code>Song</code> ç±»å‹ã€‚<strong>ä¸ºäº†ä½¿ç”¨ä»–ä»¬åŸç”Ÿçš„ç±»å‹ï¼Œä½ éœ€è¦æ£€æŸ¥ä»–ä»¬çš„ç±»å‹æˆ–å°†ä»–ä»¬å‘ä¸‹è½¬æ¢ä¸ºä¸åŒçš„ç±»å‹</strong>ï¼Œå¦‚ä¸‹æ‰€è¿°ã€‚</p>
<h3 id="ç±»å‹æ£€æŸ¥-is"><a href="#ç±»å‹æ£€æŸ¥-is" class="headerlink" title="ç±»å‹æ£€æŸ¥(is)"></a>ç±»å‹æ£€æŸ¥(is)</h3><p>ä½¿ç”¨ç±»å‹æ£€æŸ¥æ“ä½œç¬¦ ï¼ˆ <code>is</code> ï¼‰æ¥æ£€æŸ¥ä¸€ä¸ªå®ä¾‹æ˜¯å¦å±äºä¸€ä¸ª<strong>ç‰¹å®šçš„å­ç±»</strong>ã€‚å¦‚æœå®ä¾‹æ˜¯è¯¥å­ç±»ç±»å‹ï¼Œç±»å‹æ£€æŸ¥æ“ä½œç¬¦è¿”å› <code>true</code> ï¼Œå¦åˆ™è¿”å› <code>false</code> ã€‚</p>
<p>ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ä¸¤ä¸ªå˜é‡ï¼Œ <code>movieCount</code> å’Œ <code>songCount</code> ï¼Œç”¨æ¥è®¡ç®—æ•°ç»„ <code>library</code> ä¸­ <code>Movie</code> å’Œ <code>Song</code> å®ä¾‹çš„ä¸ªæ•°ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> movieCount = <span class="number">0</span></div><div class="line"><span class="keyword">var</span> songCount = <span class="number">0</span></div><div class="line"> </div><div class="line"><span class="keyword">for</span> item <span class="keyword">in</span> library &#123;</div><div class="line">    <span class="keyword">if</span> item <span class="keyword">is</span> <span class="type">Movie</span> &#123;</div><div class="line">        movieCount += <span class="number">1</span></div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> item <span class="keyword">is</span> <span class="type">Song</span> &#123;</div><div class="line">        songCount += <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="built_in">print</span>(<span class="string">"Media library contains <span class="subst">\(movieCount)</span> movies and <span class="subst">\(songCount)</span> songs"</span>)</div><div class="line"><span class="comment">// Prints "Media library contains 2 movies and 3 songs"</span></div></pre></td></tr></table></figure>
<p>è¿™ä¸ªä¾‹å­éå†äº† <code>library</code> æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚æ¯ä¸€è½®ä¸­ï¼Œ <code>for-in</code> çš„å¾ªç¯éƒ½å°† <code>item</code> å¸¸é‡è®¾ç½®ä¸ºæ•°ç»„ä¸­çš„ä¸‹ä¸€ä¸ª <code>MediaItem</code> ã€‚</p>
<p>å¦‚æœå½“å‰ <code>MediaItem</code> æ˜¯ <code>Movie</code> ç±»å‹çš„å®ä¾‹ï¼Œ <code>item is Movie</code> è¿”å› <code>true</code> ï¼Œåä¹‹è¿”å› <code>false</code> ã€‚åŒæ ·çš„ï¼Œ <code>item is Song</code> æ£€æŸ¥äº†è¯¥å¯¹è±¡æ˜¯å¦ä¸º <code>Song</code> ç±»å‹çš„å®ä¾‹ã€‚åœ¨ <code>for-in</code> å¾ªç¯çš„æœ€åï¼Œ <code>movieCount</code> å’Œ <code>songCount</code> çš„å€¼å°±æ˜¯æ•°ç»„ä¸­å¯¹åº”ç±»å‹å®ä¾‹çš„æ•°é‡ã€‚</p>
<h3 id="å‘ä¸‹ç±»å‹è½¬æ¢-as"><a href="#å‘ä¸‹ç±»å‹è½¬æ¢-as" class="headerlink" title="å‘ä¸‹ç±»å‹è½¬æ¢(as)"></a>å‘ä¸‹ç±»å‹è½¬æ¢(as)</h3><p>æŸä¸ªç±»ç±»å‹çš„å¸¸é‡æˆ–å˜é‡å¯èƒ½å®é™…ä¸Šåœ¨åå°å¼•ç”¨è‡ªä¸€ä¸ªå­ç±»çš„å®ä¾‹ã€‚å½“ä½ é‡åˆ°è¿™ç§æƒ…å†µæ—¶ä½ å¯ä»¥å°è¯•ä½¿ç”¨<strong>ç±»å‹è½¬æ¢æ“ä½œç¬¦ï¼ˆ as? æˆ– as! ï¼‰</strong>å°†å®ƒ<strong>å‘ä¸‹*</strong>ç±»å‹è½¬æ¢è‡³å…¶å­ç±»ç±»å‹*ã€‚</p>
<p>ç”±äºå‘ä¸‹ç±»å‹è½¬æ¢èƒ½å¤±è´¥ï¼Œç±»å‹è½¬æ¢æ“ä½œç¬¦å°±æœ‰äº†ä¸¤ä¸ªä¸åŒå½¢å¼ã€‚<em>æ¡ä»¶å½¢å¼</em>ï¼Œ <code>as?</code> ï¼Œ<strong>è¿”å›äº†ä¸€ä¸ªä½ å°†è¦å‘ä¸‹ç±»å‹è½¬æ¢çš„å€¼çš„å¯é€‰é¡¹</strong>ã€‚<em>å¼ºåˆ¶å½¢å¼</em>ï¼Œ <code>as!</code> ï¼Œ<strong>åˆ™å°†å‘ä¸‹ç±»å‹è½¬æ¢å’Œå¼ºåˆ¶å±•å¼€ç»“åˆä¸ºä¸€ä¸ªæ­¥éª¤</strong>ã€‚</p>
<p>å¦‚æœä½ ä¸ç¡®å®šä½ å‘ä¸‹è½¬æ¢ç±»å‹æ˜¯å¦èƒ½å¤ŸæˆåŠŸï¼Œè¯·ä½¿ç”¨æ¡ä»¶å½¢å¼çš„ç±»å‹è½¬æ¢æ“ä½œç¬¦ ï¼ˆ <code>as?</code> ï¼‰ã€‚ä½¿ç”¨æ¡ä»¶å½¢å¼çš„ç±»å‹è½¬æ¢æ“ä½œç¬¦æ€»æ˜¯è¿”å›ä¸€ä¸ªå¯é€‰é¡¹ï¼Œå¦‚æœå‘ä¸‹è½¬æ¢å¤±è´¥ï¼Œå¯é€‰å€¼ä¸º <code>nil</code> ã€‚è¿™å…è®¸ä½ æ£€æŸ¥å‘ä¸‹ç±»å‹è½¬æ¢æ˜¯å¦æˆåŠŸã€‚</p>
<p>å½“ä½ ç¡®ä¿¡å‘ä¸‹è½¬æ¢ç±»å‹ä¼šæˆåŠŸæ—¶ï¼Œä½¿ç”¨å¼ºåˆ¶å½¢å¼çš„ç±»å‹è½¬æ¢æ“ä½œç¬¦ï¼ˆ <code>as!</code>ï¼‰ã€‚<em>å½“ä½ å‘ä¸‹è½¬æ¢è‡³ä¸€ä¸ªé”™è¯¯çš„ç±»å‹æ—¶ï¼Œå¼ºåˆ¶å½¢å¼çš„ç±»å‹è½¬æ¢æ“ä½œç¬¦ä¼šè§¦å‘ä¸€ä¸ªè¿è¡Œé”™è¯¯</em>ã€‚</p>
<p>ä¸‹é¢çš„ä¾‹å­éå†äº† <code>library</code> ä¸­çš„æ¯ä¸ª <code>MediaItem</code> ï¼Œå¹¶æ‰“å°å‡ºç›¸åº”çš„æè¿°ä¿¡æ¯ã€‚è¦è¿™æ ·åšçš„è¯ï¼Œæ¯ä¸ªé¡¹ç›®å‡éœ€è¦è¢«å½“åš <code>Movie</code> æˆ– <code>Song</code> æ¥è®¿é—®ï¼Œè€Œä¸ä»…ä»…æ˜¯ <code>MediaItem</code> ã€‚ä¸ºäº†åœ¨æè¿°ä¿¡æ¯ä¸­è®¿é—® <code>Movie</code> æˆ– <code>Song</code> çš„ <code>director</code> å’Œ <code>artist</code> å±æ€§ï¼Œè¿™æ ·åšæ˜¯å¿…è¦çš„ã€‚</p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ•°ç»„ä¸­æ¯ä¸€ä¸ªé¡¹ç›®çš„ç±»å‹å¯èƒ½æ˜¯ <code>Movie</code> ä¹Ÿå¯èƒ½æ˜¯ <code>Song</code> ã€‚ä½ ä¸çŸ¥é“éå†æ—¶é¡¹ç›®çš„ç¡®åˆ‡ç±»å‹æ˜¯ä»€ä¹ˆï¼Œæ‰€ä»¥è¿™æ—¶ä½¿ç”¨æ¡ä»¶å½¢å¼çš„ç±»å‹è½¬æ¢ç¬¦<code>ï¼ˆ as? ï¼‰</code>æ¥æ£€æŸ¥éå†ä¸­æ¯æ¬¡å‘ä¸‹ç±»å‹è½¬æ¢ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> item <span class="keyword">in</span> library &#123;</div><div class="line">    <span class="keyword">if</span> <span class="keyword">let</span> movie = item <span class="keyword">as</span>? <span class="type">Movie</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Movie: '<span class="subst">\(movie.name)</span>', dir. <span class="subst">\(movie.director)</span>"</span>)</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="keyword">let</span> song = item <span class="keyword">as</span>? <span class="type">Song</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Song: '<span class="subst">\(song.name)</span>', by <span class="subst">\(song.artist)</span>"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="comment">// Movie: 'Casablanca', dir. Michael Curtiz</span></div><div class="line"><span class="comment">// Song: 'Blue Suede Shoes', by Elvis Presley</span></div><div class="line"><span class="comment">// Movie: 'Citizen Kane', dir. Orson Welles</span></div><div class="line"><span class="comment">// Song: 'The One And Only', by Chesney Hawkes</span></div><div class="line"><span class="comment">// Song: 'Never Gonna Give You Up', by Rick Astley</span></div></pre></td></tr></table></figure>
<p>ä¾‹å­å¼€å¤´å°è¯•å°†å½“å‰ <code>item</code> å½“åš <code>Movie</code> å‘ä¸‹ç±»å‹è½¬æ¢ã€‚ç”±äº <code>item</code> æ˜¯ä¸€ä¸ª <code>MediaItem</code> çš„å®ä¾‹ï¼Œå®ƒæœ‰å¯èƒ½æ˜¯ <code>Movie</code> ç±»å‹ï¼›åŒæ ·çš„ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ <code>Song</code> æˆ–è€…ä»…ä»…æ˜¯ <code>MediaItem</code> åŸºç±»ã€‚ä»‹äºè¿™ç§ä¸ç¡®å®šæ€§ï¼Œç±»å‹è½¬æ¢ç¬¦ <code>as?</code> åœ¨å‘ä¸‹ç±»å‹è½¬æ¢åˆ°å­ç±»æ—¶è¿”å›äº†ä¸€ä¸ªå¯é€‰é¡¹ã€‚ <code>item as? Movie</code>  çš„ç»“æœæ˜¯ <code>Movie?</code> ç±»å‹ï¼Œä¹Ÿå°±æ˜¯â€œå¯é€‰ <code>Movie</code> ç±»å‹â€ã€‚</p>
<p>å½“æ•°ç»„ä¸­çš„ <code>Song</code> å®ä¾‹ä½¿ç”¨å‘ä¸‹è½¬æ¢è‡³ <code>Movie</code> ç±»å‹æ—¶ä¼šå¤±è´¥ã€‚ä¸ºäº†å¤„ç†è¿™ç§æƒ…å†µï¼Œä¸Šé¢çš„ä¾‹å­ä½¿ç”¨äº†å¯é€‰ç»‘å®šæ¥æ£€æŸ¥å¯é€‰ <code>Movie</code> ç±»å‹æ˜¯å¦åŒ…å«äº†ä¸€ä¸ªå€¼ï¼ˆæˆ–è€…è¯´æ£€æŸ¥å‘ä¸‹ç±»å‹è½¬æ¢æ˜¯å¦æˆåŠŸï¼‰ã€‚è¿™ä¸ªå¯é€‰ç»‘å®šå†™ä½œâ€œ<code>if let movie = item as? Movie</code> â€ï¼Œå®ƒå¯ä»¥è¢«è¯»ä½œï¼š</p>
<p><strong>å°è¯•ä»¥ <code>Movie</code> ç±»å‹è®¿é—® <code>item</code> ã€‚å¦‚æœæˆåŠŸï¼Œè®¾ç½®ä¸€ä¸ªæ–°çš„ä¸´æ—¶å¸¸é‡ <code>movie</code> å‚¨å­˜è¿”å›çš„å¯é€‰ <code>Movie</code> ç±»å‹ ã€‚</strong></p>
<p>å¦‚æœå‘ä¸‹ç±»å‹è½¬æ¢æˆåŠŸï¼Œ <code>movie</code> çš„å±æ€§å°†ç”¨äºè¾“å‡º <code>Movie</code> å®ä¾‹çš„æè¿°ä¿¡æ¯ï¼ŒåŒ…æ‹¬ <code>director</code> çš„åå­—ã€‚åŒç†ï¼Œæ— è®ºæ˜¯å¦åœ¨æ•°ç»„ä¸­æ‰¾åˆ° <code>Song</code> ï¼Œå‡å¯ä»¥æ£€æŸ¥ <code>Song</code> å®ä¾‹ç„¶åè¾“å‡ºåˆé€‚çš„æè¿°ï¼ˆåŒ…æ‹¬ <code>artist</code> çš„åå­—ï¼‰ã€‚</p>
<h3 id="Any-å’Œ-AnyObject-çš„ç±»å‹è½¬æ¢"><a href="#Any-å’Œ-AnyObject-çš„ç±»å‹è½¬æ¢" class="headerlink" title="Any å’Œ AnyObject çš„ç±»å‹è½¬æ¢"></a>Any å’Œ AnyObject çš„ç±»å‹è½¬æ¢</h3><p>Swift ä¸ºä¸ç¡®å®šçš„ç±»å‹æä¾›äº†ä¸¤ç§ç‰¹æ®Šçš„ç±»å‹åˆ«åï¼š</p>
<ul>
<li><code>AnyObject</code>  å¯ä»¥è¡¨ç¤ºä»»ä½•<strong>ç±»ç±»å‹</strong>çš„å®ä¾‹ã€‚</li>
<li><code>Any</code>  å¯ä»¥è¡¨ç¤º<strong>ä»»ä½•</strong>ç±»å‹ï¼ŒåŒ…æ‹¬å‡½æ•°ç±»å‹ã€‚</li>
</ul>
<p>åªæœ‰å½“ä½ ç¡®åˆ‡éœ€è¦ä½¿ç”¨å®ƒä»¬çš„åŠŸèƒ½å’Œè¡Œä¸ºæ—¶å†ä½¿ç”¨ <code>Any</code> å’Œ <code>AnyObject</code> ã€‚åœ¨å†™ä»£ç æ—¶ä½¿ç”¨æ›´åŠ æ˜ç¡®çš„ç±»å‹è¡¨è¾¾æ€»è¦å¥½ä¸€äº›ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªä½¿ç”¨ <code>Any</code> ç±»å‹æ¥å¯¹ä¸åŒç±»å‹è¿›è¡Œæ“ä½œçš„ä¾‹å­ï¼ŒåŒ…å«äº†å‡½æ•°ç±»å‹ä»¥åŠéç±»ç±»å‹ã€‚è¿™ä¸ªä¾‹å­å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>things</code> çš„æ•°ç»„ï¼Œå®ƒç”¨äºå‚¨å­˜ <code>Any</code> ç±»å‹çš„å€¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> things = [<span class="type">Any</span>]()</div><div class="line">things.append(<span class="number">0</span>)</div><div class="line">things.append(<span class="number">0.0</span>)</div><div class="line">things.append(<span class="number">43</span>)</div><div class="line">things.append(<span class="number">3.14159</span>)</div><div class="line">things.append(<span class="string">"hello"</span>)</div><div class="line">things.append((<span class="number">3.0</span>, <span class="number">5.0</span>))</div><div class="line">things.append(<span class="type">Movie</span>(name: <span class="string">"Ghostbusters"</span>, director: <span class="string">"Ivan Reitman"</span>))</div><div class="line">things.append(&#123; (name: <span class="type">String</span>) -&gt; <span class="type">String</span> <span class="keyword">in</span> <span class="string">"Hello, <span class="subst">\(name)</span>"</span>&#125;)</div></pre></td></tr></table></figure>
<p>è¿™ä¸ª <code>things</code> æ•°ç»„åŒ…å«äº†ä¸¤ä¸ª <code>Int</code> å€¼ã€ä¸¤ä¸ª <code>Double</code> å€¼ã€ä¸€ä¸ª <code>String</code> å€¼ã€ä¸€ä¸ª <code>(Double, Double)</code> çš„å…ƒç»„ã€ <code>Movie</code> å®ä¾‹â€œ<code>Ghostbusters</code>â€ã€ä»¥åŠä¸€ä¸ªæ¥æ”¶ <code>String</code> å€¼å¹¶è¿”å› <code>String</code> å€¼çš„é—­åŒ…è¡¨è¾¾å¼ã€‚</p>
<p>ä½ å¯ä»¥åœ¨ <code>switch</code> ç»“æ„çš„ <code>case</code> ä¸­ä½¿ç”¨ <code>is</code> å’Œ <code>as</code> æ“ä½œç¬¦æ‰¾å‡ºå·²çŸ¥ <code>Any</code> æˆ– <code>AnyObject</code> ç±»å‹çš„å¸¸é‡æˆ–å˜é‡çš„å…·ä½“ç±»å‹ã€‚ä¸‹é¢çš„ä¾‹å­ä½¿ç”¨ <code>switch</code> è¯­å¥éå†äº† <code>things</code> æ•°ç»„å¹¶æŸ¥è¯¢æ¯ä¸€é¡¹çš„ç±»å‹ã€‚<strong>å…¶ä¸­å‡ ä¸ª <code>switch</code> çš„ <code>case</code> å°†ç¡®å®šçš„å€¼å’Œç¡®å®šç±»å‹çš„å¸¸é‡ç»‘å®šåœ¨ä¸€èµ·</strong>ï¼Œä½¿å…¶å€¼å¯ä»¥è¢«è¾“å‡ºï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> thing <span class="keyword">in</span> things &#123;</div><div class="line">    <span class="keyword">switch</span> thing &#123;</div><div class="line">    <span class="keyword">case</span> <span class="number">0</span> <span class="keyword">as</span> <span class="type">Int</span>:</div><div class="line">        <span class="built_in">print</span>(<span class="string">"zero as an Int"</span>)</div><div class="line">    <span class="keyword">case</span> <span class="number">0</span> <span class="keyword">as</span> <span class="type">Double</span>:</div><div class="line">        <span class="built_in">print</span>(<span class="string">"zero as a Double"</span>)</div><div class="line">    <span class="keyword">case</span> <span class="keyword">let</span> someInt <span class="keyword">as</span> <span class="type">Int</span>:</div><div class="line">        <span class="built_in">print</span>(<span class="string">"an integer value of <span class="subst">\(someInt)</span>"</span>)</div><div class="line">    <span class="keyword">case</span> <span class="keyword">let</span> someDouble <span class="keyword">as</span> <span class="type">Double</span> <span class="keyword">where</span> someDouble &gt; <span class="number">0</span>:</div><div class="line">        <span class="built_in">print</span>(<span class="string">"a positive double value of <span class="subst">\(someDouble)</span>"</span>)</div><div class="line">    <span class="keyword">case</span> <span class="keyword">is</span> <span class="type">Double</span>:</div><div class="line">        <span class="built_in">print</span>(<span class="string">"some other double value that I don't want to print"</span>)</div><div class="line">    <span class="keyword">case</span> <span class="keyword">let</span> someString <span class="keyword">as</span> <span class="type">String</span>:</div><div class="line">        <span class="built_in">print</span>(<span class="string">"a string value of \"<span class="subst">\(someString)</span>\""</span>)</div><div class="line">    <span class="keyword">case</span> <span class="keyword">let</span> (x, y) <span class="keyword">as</span> (<span class="type">Double</span>, <span class="type">Double</span>):</div><div class="line">        <span class="built_in">print</span>(<span class="string">"an (x, y) point at <span class="subst">\(x)</span>, <span class="subst">\(y)</span>"</span>)</div><div class="line">    <span class="keyword">case</span> <span class="keyword">let</span> movie <span class="keyword">as</span> <span class="type">Movie</span>:</div><div class="line">        <span class="built_in">print</span>(<span class="string">"a movie called <span class="subst">\(movie.name)</span>, dir. <span class="subst">\(movie.director)</span>"</span>)</div><div class="line">    <span class="keyword">case</span> <span class="keyword">let</span> stringConverter <span class="keyword">as</span> (<span class="type">String</span>) -&gt; <span class="type">String</span>:</div><div class="line">        <span class="built_in">print</span>(stringConverter(<span class="string">"Michael"</span>))</div><div class="line">    <span class="keyword">default</span>:</div><div class="line">        <span class="built_in">print</span>(<span class="string">"something else"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="comment">// zero as an Int</span></div><div class="line"><span class="comment">// zero as a Double</span></div><div class="line"><span class="comment">// an integer value of 42</span></div><div class="line"><span class="comment">// a positive double value of 3.14159</span></div><div class="line"><span class="comment">// a string value of "hello"</span></div><div class="line"><span class="comment">// an (x, y) point at 3.0, 5.0</span></div><div class="line"><span class="comment">// a movie called Ghostbusters, dir. Ivan Reitman</span></div><div class="line"><span class="comment">// Hello, Michael</span></div></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„<br><code>Any</code>ç±»å‹è¡¨ç¤ºäº†ä»»æ„ç±»å‹çš„å€¼ï¼Œ<strong>åŒ…æ‹¬å¯é€‰ç±»å‹</strong>ã€‚<em>å¦‚æœä½ ç»™æ˜¾å¼å£°æ˜çš„<code>Any</code>ç±»å‹ä½¿ç”¨å¯é€‰é¡¹ï¼ŒSwift å°±ä¼šå‘å‡ºè­¦å‘Š</em>ã€‚å¦‚æœä½ çœŸå¿ƒéœ€è¦åœ¨<code>Any</code>å€¼ä¸­ä½¿ç”¨å¯é€‰é¡¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œä½ å¯ä»¥ä½¿ç”¨<code>as</code>è¿ç®—ç¬¦æ¥æ˜¾å¼åœ°è½¬æ¢å¯é€‰é¡¹ä¸º<code>Any</code>ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> optionalNumber: <span class="type">Int</span>? = <span class="number">3</span></div><div class="line">things.append(optionalNumber)        <span class="comment">// Warning</span></div><div class="line">things.append(optionalNumber <span class="keyword">as</span> <span class="type">Any</span>) <span class="comment">// No warning</span></div></pre></td></tr></table></figure>
<p>æ‘˜è‡ªï¼š<a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/index.html#//apple_ref/doc/uid/TP40014097-CH3-ID0" target="_blank" rel="external">swift å®˜ç½‘</a><br>æ‰€æœ‰ä»£ç åœ¨Xcode9 Swift4 ç¯å¢ƒç¼–è¯‘æ²¡é—®é¢˜ï¼Œä»£ç <a href="https://github.com/keshiim/LearnSwift4" target="_blank" rel="external">æˆ³è¿™é‡Œ https://github.com/keshiim/LearnSwift4</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;ç±»å‹è½¬æ¢&lt;/strong&gt;å¯ä»¥åˆ¤æ–­å®ä¾‹çš„ç±»å‹ï¼Œä¹Ÿå¯ä»¥å°†è¯¥å®ä¾‹åœ¨å…¶æ‰€åœ¨çš„ç±»å±‚æ¬¡ä¸­è§†ä¸º&lt;em&gt;å…¶çˆ¶ç±»æˆ–å­ç±»çš„å®ä¾‹&lt;/em&gt;ã€‚&lt;/p&gt;
&lt;p&gt;Swift ä¸­ç±»å‹è½¬æ¢çš„å®ç°ä¸º &lt;code&gt;is&lt;/code&gt; å’Œ &lt;code&gt;as&lt;/code&gt; æ“ä½œç¬¦ã€‚è¿™ä¸¤ä¸ªæ“ä½œç¬¦ä½¿
    
    </summary>
    
      <category term="å­¦ä¹ " scheme="https://keshiim.github.io/categories/%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="Swift" scheme="https://keshiim.github.io/categories/%E5%AD%A6%E4%B9%A0/Swift/"/>
    
    
      <category term="Swift" scheme="https://keshiim.github.io/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode-26 Remove Duplicates from Sorted Array</title>
    <link href="https://keshiim.github.io/2017/12/07/Leetcode-26-Remove-Duplicates-from-Sorted-Array/"/>
    <id>https://keshiim.github.io/2017/12/07/Leetcode-26-Remove-Duplicates-from-Sorted-Array/</id>
    <published>2017-12-07T09:13:48.000Z</published>
    <updated>2018-03-20T09:56:53.644Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://leetcode.com/problems/remove-duplicates-from-sorted-array/description/" target="_blank" rel="external">Remove Duplicates from Sorted Array</a></p>
<h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><p>Given a sorted array, remove the dupicates <strong>in-place</strong> such that each element appear only <em>once</em> and return the new length.</p>
<p>Do not allocate extra space for another array, you must do this by modifying the input array <em>in-place</em> with O(1) extra memory.</p>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Given nums = [<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>],</div><div class="line"></div><div class="line">Your function should <span class="keyword">return</span> length = <span class="number">2</span>, with the first two elements of nums being <span class="number">1</span> <span class="keyword">and</span> <span class="number">2</span> respectively.</div><div class="line">It doesn't matter what you leave beyond the <span class="keyword">new</span> length.</div></pre></td></tr></table></figure>
<h3 id="è§£æ³•1"><a href="#è§£æ³•1" class="headerlink" title="è§£æ³•1"></a>è§£æ³•1</h3><p>è¿™é“é¢˜è¦æˆ‘ä»¬ä»æœ‰åºæ•°ç»„ä¸­å»é™¤é‡å¤é¡¹ï¼Œå¹¶è¿”å›å»é‡åçš„æ•°ç»„é•¿åº¦ã€‚é‚£ä¹ˆè¿™é“é¢˜çš„è§£é¢˜æ€è·¯æ˜¯ï¼Œæˆ‘ä»¬ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ¥è®°å½•éå†çš„åæ ‡ï¼Œæœ€å¼€å§‹æ—¶ä¸¤ä¸ªæŒ‡é’ˆéƒ½æŒ‡å‘ç¬¬ä¸€ä¸ªæ•°å­—ï¼Œå¦‚æœä¸¤ä¸ªæŒ‡é’ˆæŒ‡çš„æ•°å­—ç›¸åŒï¼Œåˆ™å¿«æŒ‡é’ˆå‘å‰èµ°ä¸€æ­¥ï¼Œå¦‚æœä¸åŒï¼Œåˆ™ä¸¤ä¸ªæŒ‡é’ˆéƒ½å‘å‰èµ°ä¸€æ­¥ï¼Œè¿™æ ·å½“å¿«æŒ‡é’ˆèµ°å®Œæ•´ä¸ªæ•°ç»„åï¼Œæ…¢æŒ‡é’ˆå½“å‰çš„åæ ‡åŠ  <code>1</code> å°±æ˜¯æ•°ç»„ä¸­ä¸åŒæ•°å­—çš„ä¸ªæ•°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<h4 id="Cpp"><a href="#Cpp" class="headerlink" title="Cpp"></a>Cpp</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">removeDuplicates</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (nums.empty()) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> n = nums.size(), pre = <span class="number">0</span>, cur = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span> (cur &lt; n) &#123;</div><div class="line">            <span class="keyword">if</span> (nums[pre] == nums[cur]) ++cur;</div><div class="line">            <span class="keyword">else</span> nums[++pre] = nums[cur++];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> pre + <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Swift"><a href="#Swift" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">removeDuplicates</span><span class="params">(<span class="number">_</span> nums: <span class="keyword">inout</span> [Int])</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">if</span> nums.isEmpty &#123; <span class="keyword">return</span> <span class="number">0</span> &#125;</div><div class="line">        <span class="keyword">var</span> pre = <span class="number">0</span>, cur = <span class="number">0</span></div><div class="line">        <span class="keyword">let</span> n = nums.<span class="built_in">count</span></div><div class="line">        <span class="keyword">while</span> cur &lt; n &#123;</div><div class="line">            <span class="keyword">if</span> nums[pre] == nums[cur] &#123; cur += <span class="number">1</span> &#125;</div><div class="line">            <span class="keyword">else</span> &#123;</div><div class="line">                pre += <span class="number">1</span></div><div class="line">                nums[pre] = nums[cur]</div><div class="line">                cur += <span class="number">1</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> pre + <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="è§£æ³•2"><a href="#è§£æ³•2" class="headerlink" title="è§£æ³•2"></a>è§£æ³•2</h3><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨<code>for</code>å¾ªç¯æ¥å†™ï¼Œè¿™é‡Œçš„<code>j</code>å°±æ˜¯ä¸Šé¢è§£æ³•ä¸­çš„<code>pre</code>ï¼Œ<code>i</code>å°±æ˜¯<code>cur</code>ï¼Œæ‰€ä»¥æœ¬è´¨ä¸Šéƒ½æ˜¯ä¸€æ ·çš„ï¼Œå‚è§ä»£ç å¦‚ä¸‹ï¼š</p>
<h4 id="Cpp-1"><a href="#Cpp-1" class="headerlink" title="Cpp"></a>Cpp</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">removeDuplicates</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (nums.empty()) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> n = nums.size(), j = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">            <span class="keyword">if</span> (nums[j] != nums[i]) &#123;</div><div class="line">                nums[++j] = nums[i];</div><div class="line">            &#125;</div><div class="line">        &#125;    </div><div class="line">        <span class="keyword">return</span> pre + <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Swift-1"><a href="#Swift-1" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">removeDuplicates</span><span class="params">(<span class="number">_</span> nums: <span class="keyword">inout</span> [Int])</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">if</span> nums.isEmpty &#123; <span class="keyword">return</span> <span class="number">0</span> &#125;</div><div class="line">        <span class="keyword">var</span> j = <span class="number">0</span></div><div class="line">        <span class="keyword">let</span> n = nums.<span class="built_in">count</span></div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;n &#123;</div><div class="line">            <span class="keyword">if</span> nums[j] != nums[i] &#123;</div><div class="line">                j += <span class="number">1</span></div><div class="line">                nums[j] = nums[i]</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> pre + <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://leetcode.com/problems/remove-duplicates-from-sorted-array/description/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Remove Duplicates
    
    </summary>
    
      <category term="LeetCode" scheme="https://keshiim.github.io/categories/LeetCode/"/>
    
    
      <category term="LeetCode" scheme="https://keshiim.github.io/tags/LeetCode/"/>
    
      <category term="algorithm" scheme="https://keshiim.github.io/tags/algorithm/"/>
    
      <category term="ç®—æ³•" scheme="https://keshiim.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="Array" scheme="https://keshiim.github.io/tags/Array/"/>
    
      <category term="Easy" scheme="https://keshiim.github.io/tags/Easy/"/>
    
  </entry>
  
  <entry>
    <title>Swiftï¼šé”™è¯¯å¤„ç†</title>
    <link href="https://keshiim.github.io/2017/12/07/Swift%EF%BC%9Aerror-handling/"/>
    <id>https://keshiim.github.io/2017/12/07/Swiftï¼šerror-handling/</id>
    <published>2017-12-07T07:46:16.000Z</published>
    <updated>2018-03-20T09:56:53.668Z</updated>
    
    <content type="html"><![CDATA[<p><strong>é”™è¯¯å¤„ç†</strong>æ˜¯ç›¸åº”å’Œæ¥æ”¶æ¥è‡ªä½ ç¨‹åºä¸­é”™è¯¯æ¡ä»¶çš„è¿‡ç¨‹ã€‚Swift ç»™è¿è¡Œæ—¶å¯æ¢å¤é”™è¯¯çš„æŠ›å‡ºã€æ•è·ã€ä¼ é€’å’Œæ“çºµæä¾›äº†ä¸€ç±»æ”¯æŒã€‚<br>æœ‰äº›å‡½æ•°å’Œæ–¹æ³•ä¸èƒ½ä¿è¯æ€»èƒ½å®Œå…¨æ‰§è¡Œæˆ–è€…äº§ç”Ÿæœ‰ç”¨çš„è¾“å‡ºã€‚å¯é€‰é¡¹ç”¨æ¥è¡¨ç¤ºä¸å­˜åœ¨å€¼ï¼Œä½†æ˜¯å½“å‡½æ•°é”™è¯¯ï¼Œèƒ½å¤Ÿäº†è§£åˆ°ä»€ä¹ˆå¯¼è‡´äº†é”™è¯¯å°†ä¼šå˜å¾—å¾ˆæœ‰ç”¨å¤„ï¼Œè¿™æ ·ä½ çš„ä»£ç å°±èƒ½æ ¹æ®é”™è¯¯æ¥å“åº”äº†ã€‚</p>
<p>ä¸¾ä¾‹æ¥è¯´ï¼Œå‡è®¾ä¸€ä¸ªé˜…è¯»å’Œå¤„ç†æ¥è‡ªç¡¬ç›˜ä¸Šæ–‡ä»¶æ•°æ®çš„ä»»åŠ¡ã€‚è¿™ç§æƒ…å†µä¸‹æœ‰å¾ˆå¤šç§å¯¼è‡´ä»»åŠ¡å¤±è´¥çš„æ–¹æ³•ï¼Œç›®å½•ä¸­æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ–‡ä»¶æ²¡æœ‰è¯»æƒé™ï¼Œæˆ–è€…æ–‡ä»¶æ²¡æœ‰ä»¥å…¼å®¹æ ¼å¼ç¼–ç ã€‚ä»è¿™äº›é”™è¯¯ä¸­åŒºåˆ†ä¸åŒçš„çŠ¶å†µå°†èƒ½å¤Ÿè®©ç¨‹åºè§£å†³å’Œä»è¿™äº›é”™è¯¯ä¸­æ¢å¤ï¼Œå¹¶ä¸”æŠŠä¸èƒ½è§£å†³çš„é”™è¯¯é€šçŸ¥ç»™ç”¨æˆ·ã€‚</p>
<h3 id="è¡¨ç¤ºå’ŒæŠ›å‡ºé”™è¯¯"><a href="#è¡¨ç¤ºå’ŒæŠ›å‡ºé”™è¯¯" class="headerlink" title="è¡¨ç¤ºå’ŒæŠ›å‡ºé”™è¯¯"></a>è¡¨ç¤ºå’ŒæŠ›å‡ºé”™è¯¯</h3><p>åœ¨ Swift ä¸­ï¼Œé”™è¯¯è¡¨ç¤ºä¸ºéµå¾ª <code>Error</code>åè®®ç±»å‹çš„å€¼ã€‚è¿™ä¸ªç©ºçš„åè®®æ˜ç¡®äº†ä¸€ä¸ªç±»å‹å¯ä»¥ç”¨äºé”™è¯¯å¤„ç†ã€‚</p>
<p>Swift æšä¸¾æ˜¯å…¸å‹çš„ä¸ºä¸€ç»„ç›¸å…³é”™è¯¯æ¡ä»¶å»ºæ¨¡çš„å®Œç¾é…é€‚ç±»å‹ï¼Œå…³è”å€¼è¿˜å…è®¸é”™è¯¯é”™è¯¯é€šè®¯æºå¸¦é¢å¤–çš„ä¿¡æ¯ã€‚æ¯”å¦‚è¯´ï¼Œè¿™æ˜¯ä½ å¯èƒ½ä¼šæƒ³åˆ°çš„æ¸¸æˆé‡Œè‡ªåŠ¨å”®è´§æœºä¼šé‡åˆ°çš„é”™è¯¯æ¡ä»¶ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">VendingMachineError</span>: <span class="title">Error</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> invalidSelection</div><div class="line">    <span class="keyword">case</span> insufficientFunds(coinsNeeded: <span class="type">Int</span>)</div><div class="line">    <span class="keyword">case</span> outOfStock</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æŠ›å‡ºä¸€ä¸ªé”™è¯¯å…è®¸ä½ æ˜ç¡®æŸäº›æ„å¤–çš„äº‹æƒ…å‘ç”Ÿäº†å¹¶ä¸”æ­£å¸¸çš„æ‰§è¡Œæµä¸èƒ½ç»§ç»­ä¸‹å»ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>throw</code> è¯­å¥æ¥æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚æ¯”å¦‚è¯´ï¼Œä¸‹é¢çš„ä»£ç é€šè¿‡æŠ›å‡ºä¸€ä¸ªé”™è¯¯æ¥æ˜ç¡®è‡ªåŠ¨å”®è´§æœºéœ€è¦äº”ä¸ªé¢å¤–çš„é‡‘å¸ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">throw</span> <span class="type">VendingMachineError</span>.insufficientFunds(coinsNeeded: <span class="number">5</span>)</div></pre></td></tr></table></figure>
<h3 id="å¤„ç†é”™è¯¯"><a href="#å¤„ç†é”™è¯¯" class="headerlink" title="å¤„ç†é”™è¯¯"></a>å¤„ç†é”™è¯¯</h3><p>å½“ä¸€ä¸ªé”™è¯¯è¢«æŠ›å‡ºï¼Œå‘¨å›´çš„æŸäº›ä»£ç å¿…é¡»ä¸ºå¤„ç†é”™è¯¯å“åº”â€”â€”æ¯”å¦‚è¯´ï¼Œä¸ºäº†çº æ­£é”™è¯¯ï¼Œå°è¯•æ›¿ä»£æ–¹æ¡ˆï¼Œæˆ–è€…æŠŠé”™è¯¯é€šçŸ¥ç”¨æˆ·ã€‚</p>
<p>åœ¨ Swift ä¸­æœ‰å››ç§æ–¹å¼æ¥å¤„ç†é”™è¯¯ã€‚ä½ å¯ä»¥å°†æ¥è‡ªå‡½æ•°çš„é”™è¯¯ä¼ é€’ç»™è°ƒç”¨å‡½æ•°çš„ä»£ç ä¸­ï¼Œä½¿ç”¨ <code>do-catch</code> è¯­å¥æ¥å¤„ç†é”™è¯¯ï¼ŒæŠŠé”™è¯¯ä½œä¸ºå¯é€‰é¡¹çš„å€¼ï¼Œæˆ–è€…é”™è¯¯ä¸ä¼šå‘ç”Ÿçš„æ–­è¨€ã€‚æ¯ä¸€ç§æ–¹æ³•éƒ½åœ¨ä¸‹è¾¹çš„ç« èŠ‚ä¸­æœ‰è¯¦ç»†å™è¿°ã€‚</p>
<p>å½“å‡½æ•°æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå®ƒå°±æ”¹å˜äº†ä½ ç¨‹åºçš„æµï¼Œæ‰€ä»¥èƒ½å¤Ÿå¿«é€Ÿå®šä½é”™è¯¯å°±æ˜¾å¾—æ ¼å¤–é‡è¦ã€‚è¦å®šä½ä½ ä»£ç ä¸­çš„è¿™äº›ä½ç½®ï¼Œä½¿ç”¨ <code>try</code> å…³é”®å­—â€”â€”æˆ–è€… <code>try?</code> æˆ– <code>try!</code> å˜ä½“â€”â€”æ”¾åœ¨è°ƒç”¨å‡½æ•°ã€æ–¹æ³•æˆ–è€…ä¼šæŠ›å‡ºé”™è¯¯çš„åˆå§‹åŒ–å™¨ä»£ç ä¹‹å‰ã€‚è¿™äº›å…³é”®å­—åœ¨ä¸‹é¢çš„ç« èŠ‚ä¸­æœ‰è¯¦ç»†çš„æè¿°ã€‚</p>
<h4 id="ä½¿ç”¨æŠ›å‡ºå‡½æ•°ä¼ é€’é”™è¯¯"><a href="#ä½¿ç”¨æŠ›å‡ºå‡½æ•°ä¼ é€’é”™è¯¯" class="headerlink" title="ä½¿ç”¨æŠ›å‡ºå‡½æ•°ä¼ é€’é”™è¯¯"></a>ä½¿ç”¨æŠ›å‡ºå‡½æ•°ä¼ é€’é”™è¯¯</h4><p>ä¸ºäº†æ˜ç¡®ä¸€ä¸ªå‡½æ•°æˆ–è€…æ–¹æ³•å¯ä»¥æŠ›å‡ºé”™è¯¯ï¼Œä½ è¦åœ¨å®ƒçš„å£°æ˜å½“ä¸­çš„å½¢å¼å‚æ•°åè¾¹å†™ä¸Š <code>throws</code>å…³é”®å­—ã€‚ä½¿ç”¨ <code>throws</code>æ ‡è®°çš„å‡½æ•°å«åš<strong>æŠ›å‡ºå‡½æ•°</strong>ã€‚å¦‚æœå®ƒæ˜ç¡®äº†ä¸€ä¸ªè¿”å›ç±»å‹ï¼Œé‚£ä¹ˆ <code>throws</code>å…³é”®å­—è¦åœ¨è¿”å›ç®­å¤´ ( <code>-&gt;</code>)ä¹‹å‰ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">canThrowErrors</span><span class="params">()</span></span> <span class="keyword">throws</span> -&gt; <span class="type">String</span></div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">cannotThrowErrors</span><span class="params">()</span></span> -&gt; <span class="type">String</span></div></pre></td></tr></table></figure>
<p>æŠ›å‡ºå‡½æ•°å¯ä»¥æŠŠå®ƒå†…éƒ¨æŠ›å‡ºçš„é”™è¯¯ä¼ é€’åˆ°å®ƒè¢«è°ƒç”¨çš„ç”Ÿæ•ˆèŒƒå›´ä¹‹å†…ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šåªæœ‰æŠ›å‡ºå‡½æ•°å¯ä»¥ä¼ é€’é”™è¯¯ã€‚ä»»ä½•åœ¨éæŠ›å‡ºå‡½æ•°ä¸­æŠ›å‡ºçš„é”™è¯¯éƒ½å¿…é¡»åœ¨è¯¥å‡½æ•°å†…éƒ¨å¤„ç†ã€‚</p>
</blockquote>
<p><em>åœ¨æŠ›å‡ºå‡½æ•°ä½“å†…çš„ä»»ä½•åœ°æ–¹ï¼Œä½ éƒ½å¯ä»¥ç”¨ <code>throw</code>è¯­å¥æ¥æŠ›å‡ºé”™è¯¯ã€‚</em></p>
<p>åœ¨ä¸‹è¾¹çš„æ —å­ä¸­ï¼Œ <code>VendingMachine</code>ç±»æ‹¥æœ‰ä¸€ä¸ªå¦‚æœè¯·æ±‚çš„ç‰©å“ä¸å­˜åœ¨ã€å–å…‰äº†æˆ–è€…æ¯”æŠ¼é‡‘è´µäº†å°±ä¼šæŠ›å‡ºå¯¹åº”çš„ <code>VendingMachineError</code>é”™è¯¯çš„ <code>vend(itemNamed:)</code>æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Item</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> price: <span class="type">Int</span></div><div class="line">    <span class="keyword">var</span> <span class="built_in">count</span>: <span class="type">Int</span></div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">VendingMachine</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> inventory = [<span class="string">"Candy Bar"</span>: <span class="type">Item</span>(price: <span class="number">12</span>, <span class="built_in">count</span>: <span class="number">7</span>),</div><div class="line">                     <span class="string">"Chips"</span>: <span class="type">Item</span>(price: <span class="number">10</span>, <span class="built_in">count</span>: <span class="number">4</span>),</div><div class="line">                     <span class="string">"Pretzels"</span>: <span class="type">Item</span>(price: <span class="number">7</span>, <span class="built_in">count</span>: <span class="number">11</span>)</div><div class="line">    ]</div><div class="line">    <span class="keyword">var</span> coinsDeposited = <span class="number">0</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">vend</span><span class="params">(itemNamed name: String)</span></span> <span class="keyword">throws</span> &#123;</div><div class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> item = inventory[name] <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="type">VendingMachineError</span>.invalidSelection</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">guard</span> item.<span class="built_in">count</span> &gt; <span class="number">0</span> <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="type">VendingMachineError</span>.outOfStock</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">guard</span> item.price &lt;= coinsDeposited <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="type">VendingMachineError</span>.insufficientFunds(coinsNeeded: item.price - coinsDeposited)</div><div class="line">        &#125;</div><div class="line">        coinsDeposited -= item.price</div><div class="line">        <span class="keyword">var</span> newItem = item</div><div class="line">        newItem.<span class="built_in">count</span> -= <span class="number">1</span></div><div class="line">        inventory[name] = newItem</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Dispensing <span class="subst">\(name)</span>"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>vend(itemNamed:)</code>æ–¹æ³•çš„å®ç°ä½¿ç”¨äº† <code>guard</code>è¯­å¥æ¥æå‰é€€å‡ºå¹¶æŠ›å‡ºé”™è¯¯ï¼Œå¦‚æœè´­ä¹°é›¶é£Ÿçš„æ¡ä»¶ä¸ç¬¦åˆçš„è¯ã€‚å› ä¸º <code>throw</code>è¯­å¥ç«‹å³ä¼ é€ç¨‹åºæ§åˆ¶ï¼Œæ‰€ä»¥åªæœ‰æ‰€æœ‰æ¡ä»¶éƒ½è¾¾åˆ°ï¼Œç‰©å“æ‰ä¼šå”®å‡ºã€‚</p>
<p>ç”±äº <code>vend(itemNamed:)</code>æ–¹æ³•ä¼ é€’å®ƒæŠ›å‡ºçš„ä»»ä½•é”™è¯¯ï¼Œæ‰€ä»¥ä½ è°ƒç”¨å®ƒçš„ä»£ç è¦ä¹ˆç›´æ¥å¤„ç†é”™è¯¯â€”â€”ä½¿ç”¨ <code>do-catch</code>è¯­å¥ï¼Œ <code>try?</code>æˆ–è€… <code>try!</code>â€”â€”<em>è¦ä¹ˆç»§ç»­ä¼ é€’å®ƒä»¬</em>ã€‚æ¯”å¦‚è¯´ï¼Œä¸‹è¾¹æ —å­ä¸­çš„ <code>buyFavoriteSnack(person:vendingMachine:)</code>åŒæ ·æ˜¯ä¸€ä¸ªæŠ›å‡ºå‡½æ•°ï¼Œä»»ä½• <code>vend(itemNamed:)</code>æ–¹æ³•æŠ›å‡ºçš„å‡½æ•°éƒ½ä¼šå‘ä¸Šä¼ é€’ç»™è°ƒç”¨ <code>buyFavoriteSnack(person:vendingMachine:)</code>å‡½æ•°çš„åœ°æ–¹ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> favoriteSnacks = [</div><div class="line">    <span class="string">"Alice"</span>: <span class="string">"Chips"</span>,</div><div class="line">    <span class="string">"Bob"</span>: <span class="string">"Licorice"</span>,</div><div class="line">    <span class="string">"Eve"</span>: <span class="string">"Pretzels"</span>,</div><div class="line">]</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">buyFavoriteSnack</span><span class="params">(person: String, vendingMachine: VendingMachine)</span></span> <span class="keyword">throws</span> &#123;</div><div class="line">    <span class="keyword">let</span> snackName = favoriteSnacks[person] ?? <span class="string">"Candy Bar"</span></div><div class="line">    <span class="keyword">try</span> vendingMachine.vend(itemNamed: snackName)</div><div class="line">&#125;</div><div class="line"><span class="comment">// Dispensing Chips</span></div></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªæ —å­ä¸­ï¼Œ <code>buyFavoriteSnack(person:vendingMachine:)</code>å‡½æ•°æŸ¥æ‰¾ç»™å®šäººçš„æœ€çˆ±é›¶é£Ÿå¹¶ä¸”å°è¯•é€šè¿‡è°ƒç”¨ <code>vend(itemNamed:)</code>æ–¹æ³•æ¥è´­ä¹°å®ƒä»¬ã€‚<strong>ç”±äº <code>vend(itemNamed:)</code>æ–¹æ³•ä¼šæŠ›å‡ºé”™è¯¯ï¼Œè°ƒç”¨çš„æ—¶å€™è¦åœ¨å‰è¾¹ç”¨ <code>try</code>å…³é”®å­—</strong>ã€‚</p>
<h4 id="ä½¿ç”¨-Do-Catch-å¤„ç†é”™è¯¯"><a href="#ä½¿ç”¨-Do-Catch-å¤„ç†é”™è¯¯" class="headerlink" title="ä½¿ç”¨ Do-Catch å¤„ç†é”™è¯¯"></a>ä½¿ç”¨ Do-Catch å¤„ç†é”™è¯¯</h4><p>ä½¿ç”¨ <code>do-catch</code>è¯­å¥æ¥é€šè¿‡è¿è¡Œä¸€æ®µä»£ç å¤„ç†é”™è¯¯ã€‚å¦‚æœ<code>do</code>åˆ†å¥ä¸­æŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯ï¼Œå®ƒå°±ä¼šä¸ <code>catch</code>åˆ†å¥åŒ¹é…ï¼Œä»¥ç¡®å®šå…¶ä¸­ä¹‹ä¸€å¯ä»¥å¤„ç†é”™è¯¯ã€‚</p>
<p>è¿™æ˜¯ <code>do-catch</code>è¯­å¥çš„é€šå¸¸ä½¿ç”¨å§¿åŠ¿ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">do</span> &#123;</div><div class="line">    <span class="keyword">try</span> expression</div><div class="line">    statements</div><div class="line">&#125; <span class="keyword">catch</span> pattern <span class="number">1</span> &#123;</div><div class="line">    statements</div><div class="line">&#125; <span class="keyword">catch</span> pattern <span class="number">2</span> <span class="keyword">where</span> condition &#123;</div><div class="line">    statements</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨ <code>catch</code>åå†™ä¸€ä¸ª<em>æ¨¡å¼</em>æ¥æ˜ç¡®åˆ†å¥å¯ä»¥å¤„ç†å“ªä¸ªé”™è¯¯ã€‚<strong>å¦‚æœä¸€ä¸ª <code>catch</code>åˆ†å¥æ²¡æœ‰æ¨¡å¼ï¼Œè¿™ä¸ªåˆ†å¥å°±å¯ä»¥åŒ¹é…æ‰€æœ‰é”™è¯¯å¹¶ä¸”ç»‘å®šè¿™ä¸ªé”™è¯¯åˆ°æœ¬åœ°å¸¸é‡ <code>error</code>ä¸Š</strong>ã€‚</p>
<p><code>catch</code>åˆ†å¥æ²¡æœ‰å¤„ç† <code>do</code>åˆ†å¥å¯èƒ½æŠ›å‡ºçš„æ‰€æœ‰é”™è¯¯ã€‚å¦‚æœæ²¡æœ‰ <code>catch</code>åˆ†å¥èƒ½å¤„ç†è¿™ä¸ªé”™è¯¯ï¼Œé‚£é”™è¯¯å°±ä¼šä¼ é€’åˆ°<em>å‘¨å›´çš„ç”Ÿæ•ˆèŒƒå›´å½“ä¸­</em>ã€‚æ€»ä¹‹ï¼Œé”™è¯¯æ€»å¾—åœ¨å‘¨å›´æŸä¸ªèŒƒå›´å†…è¢«å¤„ç†ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæ¥ä¸‹æ¥çš„ä»£ç å¤„ç†äº† <code>VendingMachineError</code>æšä¸¾é‡Œçš„æ‰€æœ‰ä¸‰ä¸ªé”™è¯¯ï¼Œä½†å…¶ä»–æ‰€æœ‰é”™è¯¯å¾—é€šè¿‡èŒƒå›´å†…å…¶ä»–ä»£ç å¤„ç†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> vendingMachine = <span class="type">VendingMachine</span>()</div><div class="line">vendingMachine.coinsDeposited = <span class="number">8</span></div><div class="line"><span class="keyword">do</span> &#123;</div><div class="line">    <span class="keyword">try</span> buyFavoriteSnack(<span class="string">"Alice"</span>, vendingMachine: vendingMachine)</div><div class="line">    <span class="comment">// Enjoy delicious snack</span></div><div class="line">&#125; <span class="keyword">catch</span> <span class="type">VendingMachineError</span>.invalidSelection &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Invalid Selection."</span>)</div><div class="line">&#125; <span class="keyword">catch</span> <span class="type">VendingMachineError</span>.outOfStock &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Out of Stock."</span>)</div><div class="line">&#125; <span class="keyword">catch</span> <span class="type">VendingMachineError</span>.insufficientFunds(<span class="keyword">let</span> coinsNeeded) &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Insufficient funds. Please insert an additional <span class="subst">\(coinsNeeded)</span> coins."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// prints "Insufficient funds. Please insert an additional 2 coins."</span></div></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„æ —å­å½“ä¸­ï¼Œå‡½æ•° <code>buyFavoriteSnack(person:vendingMachine:)</code>åœ¨ <code>try</code>è¡¨è¾¾å¼ä¸­è¢«è°ƒç”¨ï¼Œå› ä¸ºå®ƒä¼šæŠ›å‡ºé”™è¯¯ã€‚å¦‚æœæŠ›å‡ºé”™è¯¯ï¼Œæ‰§è¡Œä¼šç«‹å³åˆ‡æ¢åˆ° <code>catch</code>åˆ†å¥ï¼Œå®ƒå†³å®šæ˜¯å¦ä¼ é€’æ¥ç»§ç»­ã€‚å¦‚æœæ²¡æœ‰é”™è¯¯æŠ›å‡ºï¼Œ <code>do</code>è¯­å¥ä¸­å‰©ä¸‹çš„è¯­å¥å°†ä¼šè¢«æ‰§è¡Œã€‚</p>
<h4 id="è½¬æ¢é”™è¯¯ä¸ºå¯é€‰é¡¹"><a href="#è½¬æ¢é”™è¯¯ä¸ºå¯é€‰é¡¹" class="headerlink" title="è½¬æ¢é”™è¯¯ä¸ºå¯é€‰é¡¹"></a>è½¬æ¢é”™è¯¯ä¸ºå¯é€‰é¡¹</h4><p>ä½¿ç”¨ <code>try?</code>é€šè¿‡<strong>å°†é”™è¯¯è½¬æ¢ä¸ºå¯é€‰é¡¹æ¥å¤„ç†ä¸€ä¸ªé”™è¯¯</strong>ã€‚å¦‚æœä¸€ä¸ªé”™è¯¯åœ¨ <code>try?</code>è¡¨è¾¾å¼ä¸­æŠ›å‡ºï¼Œåˆ™è¡¨è¾¾å¼çš„å€¼ä¸º <code>nil</code>ã€‚æ¯”å¦‚è¯´ä¸‹é¢çš„ä»£ç <code>x</code>å’Œ<code>y</code>æ‹¥æœ‰åŒæ ·çš„å€¼å’Œè¡Œä¸ºï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">someThrowingFunction</span><span class="params">()</span></span> <span class="keyword">throws</span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">let</span> x = <span class="keyword">try</span>? someThrowingFunction()</div><div class="line"> </div><div class="line"><span class="keyword">let</span> y: <span class="type">Int</span>?</div><div class="line"><span class="keyword">do</span> &#123;</div><div class="line">    y = <span class="keyword">try</span> someThrowingFunction()</div><div class="line">&#125; <span class="keyword">catch</span> &#123;</div><div class="line">    y = <span class="literal">nil</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœ <code>someThrowingFunction()</code>æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œ <code>x</code>å’Œ <code>y</code>çš„å€¼å°±æ˜¯ <code>nil</code>ã€‚å¦ä¸€æ–¹é¢ï¼Œ<code>x</code>å’Œ<code>y</code>çš„å€¼æ˜¯å‡½æ•°è¿”å›çš„å€¼ã€‚æ³¨æ„ <code>x</code>å’Œ <code>y</code>æ˜¯å¯é€‰çš„æ— è®º <code>someThrowingFunction()</code>è¿”å›ä»€ä¹ˆç±»å‹ï¼Œè¿™é‡Œå‡½æ•°è¿”å›äº†ä¸€ä¸ªæ•´æ•°ï¼Œæ‰€ä»¥<code>x</code>å’Œ<code>y</code>æ˜¯å¯é€‰æ•´æ•°ã€‚</p>
<p><strong>å½“ä½ æƒ³è¦åœ¨åŒä¸€å¥é‡Œå¤„ç†æ‰€æœ‰é”™è¯¯æ—¶</strong>ï¼Œä½¿ç”¨ <code>try?</code>èƒ½è®©ä½ çš„é”™è¯¯å¤„ç†ä»£ç æ›´åŠ ç®€æ´ã€‚æ¯”å¦‚ï¼Œä¸‹è¾¹çš„ä»£ç ä½¿ç”¨äº†ä¸€äº›æ–¹æ³•æ¥è·å–æ•°æ®ï¼Œæˆ–è€…åœ¨æ‰€æœ‰æ–¹å¼éƒ½å¤±è´¥åè¿”å› <code>nil</code>ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">fetchData</span><span class="params">()</span></span> -&gt; <span class="type">Data</span>? &#123;</div><div class="line">    <span class="keyword">if</span> <span class="keyword">let</span> data = <span class="keyword">try</span>? fetchDataFromDisk() &#123; <span class="keyword">return</span> data &#125;</div><div class="line">    <span class="keyword">if</span> <span class="keyword">let</span> data = <span class="keyword">try</span>? fetchDataFromServer() &#123; <span class="keyword">return</span> data &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">nil</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="å–æ¶ˆé”™è¯¯ä¼ é€’"><a href="#å–æ¶ˆé”™è¯¯ä¼ é€’" class="headerlink" title="å–æ¶ˆé”™è¯¯ä¼ é€’"></a>å–æ¶ˆé”™è¯¯ä¼ é€’</h4><p>äº‹å®ä¸Šæœ‰æ—¶ä½ å·²ç»çŸ¥é“ä¸€ä¸ªæŠ›å‡ºé”™è¯¯æˆ–è€…æ–¹æ³•ä¸ä¼šåœ¨è¿è¡Œæ—¶æŠ›å‡ºé”™è¯¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥åœ¨è¡¨è¾¾å¼å‰å†™ <code>try!</code>æ¥<strong>å–æ¶ˆé”™è¯¯ä¼ é€’å¹¶ä¸”æŠŠè°ƒç”¨æ”¾è¿›ä¸ä¼šæœ‰é”™è¯¯æŠ›å‡ºçš„è¿è¡Œæ—¶æ–­è¨€å½“ä¸­</strong>ã€‚å¦‚æœé”™è¯¯çœŸçš„æŠ›å‡ºäº†ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªè¿è¡Œæ—¶é”™è¯¯ã€‚</p>
<p>æ¯”å¦‚è¯´ï¼Œä¸‹é¢çš„ä»£ç ä½¿ç”¨äº† <code>loadImage(_:)</code>å‡½æ•°ï¼Œå®ƒåœ¨ç»™å®šè·¯å¾„ä¸‹åŠ è½½å›¾åƒèµ„æºï¼Œå¦‚æœå›¾åƒä¸èƒ½è¢«åŠ è½½åˆ™æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”±äºå›¾åƒè·Ÿç€åº”ç”¨èµ°ï¼Œè¿è¡Œæ—¶ä¸ä¼šæœ‰é”™è¯¯æŠ›å‡ºï¼Œæ‰€ä»¥å–æ¶ˆé”™è¯¯ä¼ é€’æ˜¯åˆé€‚çš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> photo = <span class="keyword">try</span>! loadImage(<span class="string">"./Resources/John Appleseed.jpg"</span>)</div></pre></td></tr></table></figure>
<h3 id="æŒ‡å®šæ¸…ç†æ“ä½œ"><a href="#æŒ‡å®šæ¸…ç†æ“ä½œ" class="headerlink" title="æŒ‡å®šæ¸…ç†æ“ä½œ"></a>æŒ‡å®šæ¸…ç†æ“ä½œ</h3><p><strong>ä½¿ç”¨ <code>defer</code>è¯­å¥æ¥åœ¨ä»£ç ç¦»å¼€å½“å‰ä»£ç å—å‰æ‰§è¡Œè¯­å¥åˆé›†</strong>ã€‚è¿™ä¸ªè¯­å¥å…è®¸ä½ åœ¨ä»¥ä»»ä½•æ–¹å¼ç¦»å¼€å½“å‰ä»£ç å—å‰æ‰§è¡Œå¿…é¡»è¦çš„æ¸…ç†å·¥ä½œâ€”â€”æ— è®ºæ˜¯å› ä¸ºæŠ›å‡ºäº†é”™è¯¯è¿˜æ˜¯å› ä¸º <code>return</code>æˆ–è€… <code>break</code>è¿™æ ·çš„è¯­å¥ã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>defer</code>è¯­å¥æ¥ä¿è¯æ–‡ä»¶æè¿°ç¬¦éƒ½å…³é—­å¹¶ä¸”æ‰‹åŠ¨æŒ‡å®šçš„å†…å­˜åˆ°è¢«é‡Šæ”¾ã€‚</p>
<p><code>defer</code>è¯­å¥å»¶è¿Ÿæ‰§è¡Œç›´åˆ°å½“å‰èŒƒå›´é€€å‡ºã€‚è¿™ä¸ªè¯­å¥ç”± <code>defer</code>å…³é”®å­—å’Œéœ€è¦ç¨åæ‰§è¡Œçš„è¯­å¥ç»„æˆã€‚è¢«å»¶è¿Ÿæ‰§è¡Œçš„è¯­å¥å¯èƒ½ä¸ä¼šåŒ…å«ä»»ä½•ä¼šåˆ‡æ¢æ§åˆ¶å‡ºè¯­å¥çš„ä»£ç ï¼Œæ¯”å¦‚ <code>break</code>æˆ– <code>return</code>è¯­å¥ï¼Œæˆ–è€…é€šè¿‡æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚<strong>å»¶è¿Ÿçš„æ“ä½œä¸å…¶æŒ‡å®šçš„é¡ºåºç›¸åæ‰§è¡Œ</strong>â€”â€”å°±æ˜¯è¯´ï¼Œç¬¬ä¸€ä¸ª <code>defer</code>è¯­å¥ä¸­çš„ä»£ç ä¼šåœ¨ç¬¬äºŒä¸ªä¸­ä»£ç æ‰§è¡Œå®Œæ¯•åæ‰§è¡Œï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">processFile</span><span class="params">(filename: String)</span></span> <span class="keyword">throws</span> &#123;</div><div class="line">    <span class="keyword">if</span> exists(filename) &#123;</div><div class="line">        <span class="keyword">let</span> file = <span class="keyword">open</span>(filename)</div><div class="line">        <span class="keyword">defer</span> &#123;</div><div class="line">            close(file)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">while</span> <span class="keyword">let</span> line = <span class="keyword">try</span>? file.readline() &#123;</div><div class="line">            <span class="comment">// Work with the file.</span></div><div class="line">        &#125;</div><div class="line">        <span class="comment">// close(file) is called here, at the end of the scope.</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>æ‘˜è‡ªï¼š<a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/index.html#//apple_ref/doc/uid/TP40014097-CH3-ID0" target="_blank" rel="external">Swift å®˜ç½‘</a><br>æ‰€æœ‰ä»£ç åœ¨Xcode9 Swift4 ç¯å¢ƒç¼–è¯‘æ²¡é—®é¢˜ï¼Œä»£ç <a href="https://github.com/keshiim/LearnSwift4" target="_blank" rel="external">æˆ³è¿™é‡Œ https://github.com/keshiim/LearnSwift4</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;é”™è¯¯å¤„ç†&lt;/strong&gt;æ˜¯ç›¸åº”å’Œæ¥æ”¶æ¥è‡ªä½ ç¨‹åºä¸­é”™è¯¯æ¡ä»¶çš„è¿‡ç¨‹ã€‚Swift ç»™è¿è¡Œæ—¶å¯æ¢å¤é”™è¯¯çš„æŠ›å‡ºã€æ•è·ã€ä¼ é€’å’Œæ“çºµæä¾›äº†ä¸€ç±»æ”¯æŒã€‚&lt;br&gt;æœ‰äº›å‡½æ•°å’Œæ–¹æ³•ä¸èƒ½ä¿è¯æ€»èƒ½å®Œå…¨æ‰§è¡Œæˆ–è€…äº§ç”Ÿæœ‰ç”¨çš„è¾“å‡ºã€‚å¯é€‰é¡¹ç”¨æ¥è¡¨ç¤ºä¸å­˜åœ¨å€¼ï¼Œä½†æ˜¯å½“å‡½æ•°é”™è¯¯ï¼Œèƒ½å¤Ÿäº†è§£åˆ°ä»€ä¹ˆå¯¼è‡´äº†
    
    </summary>
    
      <category term="å­¦ä¹ " scheme="https://keshiim.github.io/categories/%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="Swift" scheme="https://keshiim.github.io/categories/%E5%AD%A6%E4%B9%A0/Swift/"/>
    
    
      <category term="Swift" scheme="https://keshiim.github.io/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>Swiftï¼šå¯é€‰é“¾</title>
    <link href="https://keshiim.github.io/2017/12/06/Swift-optional-chaining/"/>
    <id>https://keshiim.github.io/2017/12/06/Swift-optional-chaining/</id>
    <published>2017-12-06T09:30:14.000Z</published>
    <updated>2018-03-20T09:56:53.667Z</updated>
    
    <content type="html"><![CDATA[<p><strong>å¯é€‰é“¾</strong>æ˜¯ä¸€ä¸ªè°ƒç”¨å’ŒæŸ¥è¯¢å¯é€‰å±æ€§ã€æ–¹æ³•å’Œä¸‹æ ‡çš„è¿‡ç¨‹ï¼Œå®ƒå¯èƒ½ä¸º <code>nil</code> ã€‚<em>å¦‚æœå¯é€‰é¡¹åŒ…å«å€¼</em>ï¼Œå±æ€§ã€æ–¹æ³•æˆ–è€…ä¸‹æ ‡çš„è°ƒç”¨æˆåŠŸï¼›å¦‚æœå¯é€‰é¡¹æ˜¯ <code>nil</code> ï¼Œå±æ€§ã€æ–¹æ³•æˆ–è€…ä¸‹æ ‡çš„è°ƒç”¨ä¼šè¿”å› <code>nil</code> ã€‚å¤šä¸ªæŸ¥è¯¢å¯ä»¥é“¾æ¥åœ¨ä¸€èµ·ï¼Œå¦‚æœé“¾ä¸­ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ <code>nil</code> ï¼Œé‚£ä¹ˆæ•´ä¸ªé“¾å°±ä¼šå¾—ä½“åœ°å¤±è´¥ã€‚</p>
<blockquote>
<p>æ³¨æ„<br>Swift ä¸­çš„å¯é€‰é“¾ä¸ Objective-C ä¸­çš„ nil ä¿¡æ¯ç±»ä¼¼ï¼Œä½†æ˜¯å®ƒå´å·¥ä½œåœ¨ä»»æ„ç±»å‹ä¸Šï¼Œè€Œä¸”å®ƒèƒ½æ£€æµ‹æˆåŠŸè¿˜æ˜¯å¤±è´¥ã€‚</p>
</blockquote>
<h3 id="å¯é€‰é“¾ä»£æ›¿å¼ºåˆ¶å±•å¼€"><a href="#å¯é€‰é“¾ä»£æ›¿å¼ºåˆ¶å±•å¼€" class="headerlink" title="å¯é€‰é“¾ä»£æ›¿å¼ºåˆ¶å±•å¼€"></a>å¯é€‰é“¾ä»£æ›¿å¼ºåˆ¶å±•å¼€</h3><p>ä½ å¯ä»¥é€šè¿‡åœ¨ä½ å¸Œæœ›å¦‚æœå¯é€‰é¡¹ä¸ºé <code>nil</code> å°±è°ƒç”¨å±æ€§ã€æ–¹æ³•æˆ–è€…è„šæœ¬çš„å¯é€‰å€¼åè¾¹ä½¿ç”¨é—®å·ï¼ˆ <code>?</code> ï¼‰<strong>æ¥æ˜ç¡®å¯é€‰é“¾</strong>ã€‚è¿™å’Œåœ¨å¯é€‰å€¼åæ”¾å¹å·ï¼ˆ <code>!</code> ï¼‰æ¥å¼ºåˆ¶å±•å¼€å®ƒçš„å€¼éå¸¸ç±»ä¼¼ã€‚ä¸»è¦çš„åŒºåˆ«åœ¨äºå¯é€‰é“¾ä¼šåœ¨å¯é€‰é¡¹ä¸º <code>nil</code> æ—¶<strong>å¾—ä½“åœ°</strong>å¤±è´¥ï¼Œè€Œå¼ºåˆ¶å±•å¼€åˆ™åœ¨å¯é€‰é¡¹ä¸º <code>nil</code> æ—¶è§¦å‘è¿è¡Œæ—¶é”™è¯¯ã€‚</p>
<p>ä¸ºäº†æ˜¾ç¤ºå‡ºå¯é€‰é“¾å¯ä»¥åœ¨ <code>nil</code> å€¼ä¸Šè°ƒç”¨ï¼Œå¯é€‰é“¾è°ƒç”¨çš„ç»“æœä¸€å®šæ˜¯ä¸€ä¸ªå¯é€‰å€¼ï¼Œå°±ç®—ä½ æŸ¥è¯¢çš„å±æ€§ã€æ–¹æ³•æˆ–è€…ä¸‹æ ‡è¿”å›çš„æ˜¯éå¯é€‰å€¼ã€‚ä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªå¯é€‰é¡¹è¿”å›å€¼æ¥æ£€æŸ¥å¯é€‰é“¾è°ƒç”¨æ˜¯æˆåŠŸï¼ˆè¿”å›çš„å¯é€‰é¡¹åŒ…å«å€¼ï¼‰ï¼Œè¿˜æ˜¯ç”±äºé“¾ä¸­å‡ºç°äº† <code>nil</code> è€Œå¯¼è‡´æ²¡æœ‰æˆåŠŸï¼ˆè¿”å›çš„å¯é€‰å€¼æ˜¯ <code>nil</code> ï¼‰ã€‚</p>
<p>å¦å¤–ï¼Œå¯é€‰é“¾è°ƒç”¨çš„ç»“æœä¸æœŸæœ›çš„è¿”å›å€¼ç±»å‹ç›¸åŒï¼Œ<em>åªæ˜¯åŒ…è£…æˆäº†å¯é€‰é¡¹</em>ã€‚é€šå¸¸è¿”å› <code>Int</code> çš„å±æ€§é€šè¿‡å¯é€‰é“¾åä¼šè¿”å›ä¸€ä¸ª <code>Int?</code> ã€‚</p>
<p>æ¥ä¸‹æ¥çš„ä¸€äº›ä»£ç ç‰‡æ®µæ¼”ç¤ºäº†å¯é€‰é“¾ä¸å¼ºåˆ¶å±•å¼€çš„ä¸åŒå¹¶å…è®¸ä½ æ£€æŸ¥æ˜¯å¦æˆåŠŸã€‚é¦–å…ˆï¼Œå®šä¹‰ä¸¤ä¸ªç±»ï¼Œ <code>Person</code> å’Œ <code>Residence</code> ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> residence: <span class="type">Residence</span>?</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Residence</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> numberOfRooms = <span class="number">1</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>Residence</code> å®ä¾‹æœ‰ä¸€ä¸ª <code>Int</code> å±æ€§å«åš <code>numberOfRooms</code> ï¼Œå®ƒå¸¦æœ‰é»˜è®¤å€¼ 1 . <code>Person</code> å®ä¾‹æœ‰ä¸€ä¸ª <code>Residence?</code> ç±»å‹çš„å¯é€‰ <code>residence</code> å±æ€§ã€‚<br>å¦‚æœä½ åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Person</code> å®ä¾‹ï¼Œå¾—ç›Šäºå¯é€‰é¡¹çš„ç‰¹æ€§ï¼Œå®ƒçš„ <code>residence</code> å±æ€§ä¼šé»˜è®¤åˆå§‹åŒ–ä¸º <code>nil</code> ã€‚ä¸‹é¢çš„ä»£ç ä¸­ï¼Œ <code>john</code> æ‹¥æœ‰å€¼ä¸º <code>nil</code> çš„ <code>residence</code> å±æ€§ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> john = <span class="type">Person</span>()</div></pre></td></tr></table></figure>
<p>å¦‚æœä½ å°è¯•è®¿é—®è¿™ä¸ªäººçš„ <code>residence</code> é‡Œçš„ <code>numberOfRooms</code> å±æ€§ï¼Œé€šè¿‡åœ¨ <code>residence</code> åæ”¾ä¸€ä¸ªå¹å·æ¥å¼ºåˆ¶å±•å¼€å®ƒçš„å€¼ï¼Œä½ ä¼šè§¦å‘ä¸€ä¸ªè¿è¡Œæ—¶é”™è¯¯ï¼Œå› ä¸º <code>residence</code> æ ¹æœ¬æ²¡æœ‰å€¼å¯ä»¥å±•å¼€ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> roomCount = john.residence!.numberOfRooms</div><div class="line"><span class="comment">// this triggers a runtime error</span></div></pre></td></tr></table></figure>
<p>ä¸Šè¾¹çš„ä»£ç ä¼šåœ¨ <code>john.residence</code> æœ‰ä¸€ä¸ªé <code>nil</code> å€¼æ—¶æˆåŠŸå¹¶ä¸”ç»™ <code>roomCount</code> èµ‹å€¼ä¸€ä¸ªåŒ…å«åˆé€‚æˆ¿é—´å·çš„ <code>Int</code> å€¼ã€‚æ€»ä¹‹ï¼Œè¿™æ®µä»£ç ä¸€å®šä¼šåœ¨ <code>residence</code> ä¸º <code>nil</code> æ—¶è§¦å‘è¿è¡Œæ—¶é”™è¯¯ï¼Œå¦‚åŒä¸Šè¾¹å±•ç¤ºçš„é‚£æ ·ã€‚<br>å¯é€‰é“¾æä¾›å¦ä¸€ç§è®¿é—® <code>numberOfRooms</code> çš„æ–¹æ³•ã€‚è¦ä½¿ç”¨å¯é€‰é“¾ï¼Œä½¿ç”¨é—®å·è€Œä¸æ˜¯å¹å·ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> roomCount = john.residence?.numberOfRooms &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"John's residence has <span class="subst">\(roomCount)</span> room(s)."</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Unable to retrieve the number of rooms."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// Prints "Unable to retrieve the number of rooms."</span></div></pre></td></tr></table></figure>
<p>äº‹å®ä¸Šé€šè¿‡å¯é€‰é“¾æŸ¥è¯¢å°±æ„å‘³ç€å¯¹ <code>numberOfRooms</code> çš„è°ƒç”¨ä¸€å®šä¼šè¿”å› <code>Int?</code> è€Œä¸æ˜¯ <code>Int</code> ã€‚</p>
<p>ä½ å¯ä»¥èµ‹å€¼ä¸€ä¸ª <code>Residence</code> å®ä¾‹ç»™ <code>john.residence</code> ï¼Œè¿™æ ·å®ƒå°±ä¸ä¼šå†æœ‰ <code>nil</code> å€¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">john.residence = <span class="type">Residence</span>()</div></pre></td></tr></table></figure>
<p><code>john.residence</code> ç°åœ¨åŒ…å«äº†å®é™…çš„ <code>Residence</code> å®ä¾‹ï¼Œè€Œä¸æ˜¯ <code>nil</code> ã€‚å¦‚æœä½ å°è¯•ç”¨ä¸ä¹‹å‰ç›¸åŒçš„å¯é€‰é“¾è®¿é—® <code>numberOfRooms</code> ï¼Œå®ƒå°±ä¼šè¿”å›ä¸€ä¸ª <code>Int?</code> åŒ…å«é»˜è®¤ <code>numberOfRooms</code> å€¼ 1 ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> roomCount = john.residence?.numberOfRooms &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"John's residence has <span class="subst">\(roomCount)</span> room(s)."</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Unable to retrieve the number of rooms."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// Prints "John's residence has 1 room(s)."</span></div></pre></td></tr></table></figure>
<h4 id="ä¸ºå¯é€‰é“¾å®šä¹‰æ¨¡å‹ç±»"><a href="#ä¸ºå¯é€‰é“¾å®šä¹‰æ¨¡å‹ç±»" class="headerlink" title="ä¸ºå¯é€‰é“¾å®šä¹‰æ¨¡å‹ç±»"></a>ä¸ºå¯é€‰é“¾å®šä¹‰æ¨¡å‹ç±»</h4><p>ä½ å¯ä»¥ä½¿ç”¨å¯é€‰é“¾æ¥è°ƒç”¨å±æ€§ã€æ–¹æ³•å’Œä¸‹æ ‡ä¸æ­¢ä¸€ä¸ªå±‚çº§ã€‚è¿™å…è®¸ä½ åœ¨ç›¸å…³ç±»å‹çš„å¤æ‚æ¨¡å‹ä¸­æ·±å…¥åˆ°å­å±æ€§ï¼Œå¹¶æ£€æŸ¥æ˜¯å¦å¯ä»¥åœ¨è¿™äº›å­å±æ€§é‡Œè®¿é—®å±æ€§ã€æ–¹æ³•å’Œä¸‹æ ‡ã€‚</p>
<p>ä¸‹è¾¹çš„ä»£ç æ®µå®šä¹‰äº†å››ä¸ªæ¨¡å‹ç±»ç”¨äºéšåçš„æ —å­ï¼ŒåŒ…æ‹¬å¤šå±‚å¯é€‰é“¾çš„æ —å­ã€‚è¿™äº›æ —å­é€šè¿‡æ·»åŠ  <code>Room</code> å’Œ <code>Address</code> ç±»æ‰©å±•äº†ä¸Šè¾¹çš„ <code>Person</code> å’Œ <code>Residence</code> æ¨¡å‹ï¼Œä»¥åŠç›¸å…³çš„å±æ€§ã€æ–¹æ³•å’Œä¸‹æ ‡ã€‚</p>
<p><code>Person</code> ç±»ä¸ä¹‹å‰çš„å®šä¹‰æ–¹å¼ç›¸åŒï¼Œ<code>Residence</code> ç±»æ¯”ä»¥å‰è¦å¤æ‚ä¸€äº›ã€‚è¿™æ¬¡ï¼Œ <code>Residence</code> ç±»å®šä¹‰äº†ä¸€ä¸ªå«åš <code>rooms</code> çš„å˜é‡å±æ€§ï¼Œå®ƒä½¿ç”¨ä¸€ä¸ªç©ºçš„ <code>[Room]</code> ç±»å‹ç©ºæ•°ç»„åˆå§‹åŒ–ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Residence</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> rooms = [<span class="type">Room</span>]()</div><div class="line">    <span class="keyword">var</span> numberOfRooms: <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> rooms.<span class="built_in">count</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">subscript</span>(i: <span class="type">Int</span>) -&gt; <span class="type">Room</span> &#123;</div><div class="line">        <span class="keyword">get</span> &#123;</div><div class="line">            <span class="keyword">return</span> rooms[i]</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">set</span> &#123;</div><div class="line">            rooms[i] = newValue</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">printNumberOfRooms</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"The number of rooms is <span class="subst">\(numberOfRooms)</span>"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">var</span> address: <span class="type">Address</span>?</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç”±äºè¿™ä¸ªç‰ˆæœ¬çš„ <code>Residence</code> å‚¨å­˜äº† <code>Room</code> å®ä¾‹çš„æ•°ç»„ï¼Œå®ƒçš„ <code>numberOfRooms</code> å±æ€§ä½¿ç”¨è®¡ç®—å±æ€§æ¥å®ç°ï¼Œè€Œä¸æ˜¯å‚¨å­˜å±æ€§ã€‚è®¡ç®—å±æ€§ <code>numberOfRooms</code> åªæ˜¯è¿”å›<code>rooms</code>æ•°ç»„çš„ <code>count</code> å±æ€§å€¼ã€‚<br>ä½œä¸ºç»™å®ƒçš„ <code>rooms</code> æ•°ç»„èµ‹å€¼çš„å¿«æ·æ–¹å¼ï¼Œè¿™ä¸ªç‰ˆæœ¬çš„ <code>Residence</code> æä¾›äº†ä¸€ä¸ªå¯è¯»å†™çš„ä¸‹æ ‡æ¥è®¿é—® <code>rooms</code> æ•°ç»„çš„ç´¢å¼•ä½ç½®ã€‚</p>
<p>è¿™ä¸ªç‰ˆæœ¬çš„ <code>Residence</code> åŒæ ·æä¾›äº†ä¸€ä¸ªå«åš <code>printNumberOfRooms</code> çš„æ–¹æ³•ï¼Œå®ƒæ‰“å°ä½æ‰€ä¸­çš„æˆ¿é—´å·ã€‚æœ€ç»ˆï¼Œ <code>Residence</code> å®šä¹‰äº†ä¸€ä¸ªå¯é€‰å±æ€§å«åš <code>address</code> ï¼Œå®ƒæ˜¯ä¸€ä¸ª <code>Address?</code> ç±»å‹ï¼Œè¿™ä¸ªå±æ€§çš„ <code>Address</code> ç±»ç±»å‹åœ¨ä¸‹é¢å®šä¹‰ã€‚</p>
<p><code>rooms</code> æ•°ç»„ä½¿ç”¨çš„ <code>Room</code> ç±»å‹ä»…æœ‰ä¸€ä¸ªå±æ€§å«åš <code>name</code> ï¼Œè¿˜æœ‰ä¸€ä¸ªåˆå§‹åŒ–å™¨æ¥ç»™è¿™ä¸ªå±æ€§è®¾ç½®åˆé€‚çš„æˆ¿é—´åï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Room</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123; <span class="keyword">self</span>.name = name &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ¨¡å‹çš„æœ€åä¸€ä¸ªç±»å‹å«åš <code>Address</code> ã€‚è¿™ä¸ªç±»å‹æœ‰ä¸‰ä¸ª <code>String?</code> ç±»å‹å¯é€‰å±æ€§ã€‚å‰ä¸¤ä¸ªå±æ€§ï¼Œ <code>buildingName</code> å’Œ <code>buildingNumber</code> ï¼Œæ˜¯å®šä¹‰åœ°å€ä¸­ç‰¹å®šå»ºç­‘éƒ¨åˆ†çš„ä»£æ›¿æ–¹å¼ã€‚ç¬¬ä¸‰ä¸ªå±æ€§ï¼Œ <code>street</code> ï¼Œæ˜¯ç»™åœ°å€é‡Œè¡—é“å‘½åçš„ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Address</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> buildingName: <span class="type">String</span>?</div><div class="line">    <span class="keyword">var</span> buildingNumber: <span class="type">String</span>?</div><div class="line">    <span class="keyword">var</span> street: <span class="type">String</span>?</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">buildingIdentifier</span><span class="params">()</span></span> -&gt; <span class="type">String</span>? &#123;</div><div class="line">        <span class="keyword">if</span> buildingName != <span class="literal">nil</span> &#123;</div><div class="line">            <span class="keyword">return</span> buildingName</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> buildingNumber != <span class="literal">nil</span> &amp;&amp; street != <span class="literal">nil</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">"<span class="subst">\(buildingNumber)</span> <span class="subst">\(street)</span>"</span></div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">nil</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>Address</code> ç±»åŒæ ·æä¾›äº†ä¸€ä¸ªæ–¹æ³•å«åš <code>buildingIdentifier()</code> ï¼Œå®ƒæœ‰ä¸€ä¸ª <code>String?</code> ç±»å‹çš„è¿”å›å€¼ã€‚è¿™ä¸ªæ–¹æ³•æ£€æŸ¥åœ°å€çš„å±æ€§å¹¶è¿”å› <code>buildingName</code> å¦‚æœå®ƒæœ‰å€¼çš„è¯ï¼Œæˆ–è€…æŠŠ <code>buildingNumber</code> ä¸ <code>street</code> ä¸²è”èµ·æ¥ï¼Œå¦‚æœå®ƒä»¬éƒ½æœ‰å€¼çš„è¯ï¼Œæˆ–è€…å°±æ˜¯ <code>nil</code> ã€‚</p>
<h3 id="é€šè¿‡å¯é€‰é“¾è®¿é—®å±æ€§"><a href="#é€šè¿‡å¯é€‰é“¾è®¿é—®å±æ€§" class="headerlink" title="é€šè¿‡å¯é€‰é“¾è®¿é—®å±æ€§"></a>é€šè¿‡å¯é€‰é“¾è®¿é—®å±æ€§</h3><p>å¦‚åŒå¯é€‰é“¾ä»£æ›¿å¼ºåˆ¶å±•å¼€ä¸­å±•ç¤ºçš„é‚£æ ·ï¼Œä½ å¯ä»¥ä½¿ç”¨å¯é€‰é“¾æ¥è®¿é—®å¯é€‰å€¼é‡Œçš„å±æ€§ï¼Œå¹¶ä¸”æ£€æŸ¥è¿™ä¸ªå±æ€§çš„è®¿é—®æ˜¯å¦æˆåŠŸã€‚<br>ä½¿ç”¨ä¸Šè¾¹å®šä¹‰çš„ç±»æ¥åˆ›å»ºä¸€ä¸ªæ–°å¾— <code>Person</code> å®ä¾‹ï¼Œå¹¶ä¸”å°è¯•å¦‚ä¹‹å‰ä¸€æ ·è®¿é—®å®ƒçš„ <code>numberOfRooms</code> å±æ€§ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">let</span> john = <span class="type">Person</span>()</div><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> roomCount = john.residence?.numberOfRooms &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"John's residence has <span class="subst">\(roomCount)</span> room(s)."</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Unable to retrieve the number of rooms."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// Prints "Unable to retrieve the number of rooms."</span></div></pre></td></tr></table></figure>
<p>ç”±äº <code>john.residence</code> æ˜¯ <code>nil</code> ï¼Œè¿™ä¸ªå¯é€‰é“¾è°ƒç”¨ä¸ä¹‹å‰ä¸€æ ·å¤±è´¥äº†ã€‚<br>ä½ åŒæ ·å¯ä»¥å°è¯•é€šè¿‡å¯é€‰é“¾æ¥ç»™å±æ€§èµ‹å€¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> someAddress = <span class="type">Address</span>()</div><div class="line">someAddress.buildingNumber = <span class="string">"29"</span></div><div class="line">someAddress.street = <span class="string">"Acacia Road"</span></div><div class="line">john.residence?.address = someAddress</div></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªæ —å­ä¸­ï¼Œç»™ <code>john.residence</code> çš„ <code>address</code> å±æ€§èµ‹å€¼ä¼šå¤±è´¥ï¼Œå› ä¸º <code>john.residence</code> ç›®å‰æ˜¯ <code>nil</code> ã€‚<br>è¿™ä¸ªèµ‹å€¼æ˜¯å¯é€‰é“¾çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯è¯´ <code>=</code> è¿ç®—ç¬¦å³æ‰‹ä¾§çš„ä»£ç éƒ½ä¸ä¼šè¢«è¯„åˆ¤ã€‚åœ¨å…ˆå‰çš„æ —å­ä¸­ï¼Œä¸å®¹æ˜“çœ‹å‡º <code>someAddress</code> æ²¡æœ‰è¢«è¯„åˆ¤ï¼Œå› ä¸ºèµ‹å€¼ä¸€ä¸ªå¸¸é‡ä¸ä¼šæœ‰ä»»ä½•å‰¯ä½œç”¨ã€‚ä¸‹è¾¹çš„æ —å­åšåŒæ ·çš„èµ‹å€¼ï¼Œä½†å®ƒä½¿ç”¨ä¸€ä¸ªå‡½æ•°æ¥åˆ›å»ºåœ°å€ã€‚<strong>å‡½æ•°ä¼šåœ¨è¿”å›å€¼ä¹‹å‰æ‰“å°â€œå‡½æ•°è¢«è°ƒç”¨äº†â€</strong>ï¼Œè¿™å¯ä»¥è®©ä½ çœ‹åˆ° <code>=</code> è¿ç®—ç¬¦å³æ‰‹ä¾§æ˜¯å¦è¢«è¯„åˆ¤ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">createAddress</span><span class="params">()</span></span> -&gt; <span class="type">Address</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Function was called."</span>)</div><div class="line">    </div><div class="line">    <span class="keyword">let</span> someAddress = <span class="type">Address</span>()</div><div class="line">    someAddress.buildingNumber = <span class="string">"29"</span></div><div class="line">    someAddress.street = <span class="string">"Acacia Road"</span></div><div class="line">    </div><div class="line">    <span class="keyword">return</span> someAddress</div><div class="line">&#125;</div><div class="line">john.residence?.address = createAddress()</div></pre></td></tr></table></figure>
<p>ä½ å¯ä»¥çœ‹åˆ° <code>createAddress()</code> å‡½æ•°æ²¡æœ‰è¢«è°ƒç”¨ï¼Œå› ä¸ºæ²¡æœ‰ä»»ä½•ä¸œè¥¿æ‰“å°å‡ºæ¥ã€‚</p>
<h3 id="é€šè¿‡å¯é€‰é“¾è°ƒç”¨æ–¹æ³•"><a href="#é€šè¿‡å¯é€‰é“¾è°ƒç”¨æ–¹æ³•" class="headerlink" title="é€šè¿‡å¯é€‰é“¾è°ƒç”¨æ–¹æ³•"></a>é€šè¿‡å¯é€‰é“¾è°ƒç”¨æ–¹æ³•</h3><p>ä½ å¯ä»¥ä½¿ç”¨å¯é€‰é“¾æ¥è°ƒç”¨å¯é€‰é¡¹é‡Œçš„æ–¹æ³•ï¼Œå¹¶ä¸”æ£€æŸ¥è°ƒç”¨æ˜¯å¦æˆåŠŸã€‚<strong>ä½ ç”šè‡³å¯ä»¥åœ¨æ²¡æœ‰å®šä¹‰è¿”å›å€¼çš„æ–¹æ³•ä¸Šè¿™ä¹ˆåš</strong>ã€‚</p>
<p><code>Residence</code> ç±»ä¸­çš„ <code>printNumberOfRooms()</code> æ–¹æ³•æ‰“å°äº†å½“å‰ <code>numberOfRooms</code> çš„å€¼ã€‚æ–¹æ³•çœ‹èµ·æ¥é•¿è¿™æ ·ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">printNumberOfRooms</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"The number of rooms is <span class="subst">\(numberOfRooms)</span>"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•æ²¡æœ‰æŒ‡å®šè¿”å›ç±»å‹ã€‚æ€»ä¹‹ï¼Œå¦‚æ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°ä¸­æè¿°çš„é‚£æ ·ï¼Œ<strong>å‡½æ•°å’Œæ–¹æ³•æ²¡æœ‰è¿”å›ç±»å‹å°±éšå¼åœ°æŒ‡æ˜ä¸º Void ç±»å‹</strong>ã€‚æ„æ€æ˜¯è¯´å®ƒä»¬è¿”å›ä¸€ä¸ª <code>()</code>çš„å€¼æˆ–è€…æ˜¯ä¸€ä¸ªç©ºçš„å…ƒç»„ã€‚</p>
<p>å¦‚æœä½ ç”¨å¯é€‰é“¾åœ¨å¯é€‰é¡¹é‡Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œæ–¹æ³•çš„è¿”å›ç±»å‹å°†ä¼šæ˜¯ <code>Void?</code> ï¼Œè€Œä¸æ˜¯ <code>Void</code> ï¼Œå› ä¸ºå½“ä½ é€šè¿‡å¯é€‰é“¾è°ƒç”¨çš„æ—¶å€™è¿”å›å€¼ä¸€å®šä¼šæ˜¯ä¸€ä¸ªå¯é€‰ç±»å‹ã€‚è¿™å…è®¸ä½ ä½¿ç”¨ <code>if</code> è¯­å¥æ¥æ£€æŸ¥æ˜¯å¦èƒ½è°ƒç”¨ <code>printNumberOfRooms()</code> æ–¹æ³•ï¼Œå°±ç®—æ˜¯æ–¹æ³•è‡ªèº«æ²¡æœ‰å®šä¹‰è¿”å›å€¼ä¹Ÿå¯ä»¥ã€‚é€šè¿‡å¯¹æ¯”è°ƒç”¨ <code>printNumberOfRooms</code> è¿”å›çš„å€¼æ˜¯å¦ä¸º <code>nil</code> æ¥ç¡®å®šæ–¹æ³•çš„è°ƒç”¨æ˜¯å¦æˆåŠŸï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> john.residence?.printNumberOfRooms() != <span class="literal">nil</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"It was possible to print the number of rooms."</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"It was not possible to print the number of rooms."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// Prints "It was not possible to print the number of rooms."</span></div></pre></td></tr></table></figure>
<p>å¦‚æœä½ å°è¯•é€šè¿‡å¯é€‰é“¾æ¥è®¾ç½®å±æ€§ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚ä¸Šè¾¹é€šè¿‡å¯é€‰é“¾è®¿é—®å±æ€§ä¸­çš„ä¾‹å­å°è¯•è®¾ç½® <code>address</code> å€¼ç»™ <code>john.residence</code> ï¼Œå°±ç®—æ˜¯ <code>residence</code> å±æ€§æ˜¯ <code>nil</code> ä¹Ÿè¡Œã€‚<strong>ä»»ä½•é€šè¿‡å¯é€‰é“¾è®¾ç½®å±æ€§çš„å°è¯•éƒ½ä¼šè¿”å›ä¸€ä¸ª (Void?) ç±»å‹å€¼ï¼Œå®ƒå…è®¸ä½ ä¸ <code>nil</code> æ¯”è¾ƒæ¥æ£€æŸ¥å±æ€§æ˜¯å¦è®¾ç½®æˆåŠŸ</strong>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (john.residence?.address = someAddress) != <span class="literal">nil</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"It was possible to set the address."</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"It was not possible to set the address."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// Prints "It was not possible to set the address."</span></div></pre></td></tr></table></figure>
<h3 id="é€šè¿‡å¯é€‰é“¾è®¿é—®ä¸‹æ ‡"><a href="#é€šè¿‡å¯é€‰é“¾è®¿é—®ä¸‹æ ‡" class="headerlink" title="é€šè¿‡å¯é€‰é“¾è®¿é—®ä¸‹æ ‡"></a>é€šè¿‡å¯é€‰é“¾è®¿é—®ä¸‹æ ‡</h3><p>ä½ å¯ä»¥ä½¿ç”¨å¯é€‰é“¾æ¥ç»™å¯é€‰é¡¹ä¸‹æ ‡å–å›æˆ–è®¾ç½®å€¼ï¼Œå¹¶ä¸”æ£€æŸ¥ä¸‹æ ‡çš„è°ƒç”¨æ˜¯å¦æˆåŠŸã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼š<br>å½“ä½ é€šè¿‡å¯é€‰é“¾è®¿é—®ä¸€ä¸ªå¯é€‰é¡¹çš„ä¸‹æ ‡æ—¶ï¼Œä½ éœ€è¦æŠŠé—®å·æ”¾åœ¨ä¸‹æ ‡æ‹¬å·çš„å‰è¾¹ï¼Œè€Œä¸æ˜¯åè¾¹ã€‚å¯é€‰é“¾çš„é—®å·ä¸€å®šæ˜¯ç´§è·Ÿåœ¨å¯é€‰é¡¹è¡¨è¾¾å¼çš„åè¾¹çš„ã€‚</p>
</blockquote>
<p>ä¸‹è¾¹çš„æ —å­å°è¯•ä½¿ç”¨ä¸‹æ ‡å–å› <code>Residence</code> ç±»é‡Œ <code>john.residence</code> å±æ€§çš„æ•°ç»„ <code>rooms</code> é‡Œç¬¬ä¸€ä¸ªæˆ¿é—´çš„åå­—ã€‚ç”±äº <code>john.residence</code> ç›®å‰æ˜¯ <code>nil</code> ï¼Œä¸‹æ ‡çš„è°ƒç”¨å¤±è´¥äº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> firstRoomName = john.residence?[<span class="number">0</span>].name &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"The first room name is <span class="subst">\(firstRoomName)</span>."</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Unable to retrieve the first room name."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// Prints "Unable to retrieve the first room name."</span></div></pre></td></tr></table></figure>
<p>å¯é€‰é“¾é—®å·åœ¨ä¸‹æ ‡çš„è°ƒç”¨ä¸­ç´§è·Ÿ <code>john.residence</code> ï¼Œ<strong>åœ¨ä¸‹æ ‡çš„æ–¹æ‹¬å·ä¹‹å‰</strong>ï¼Œå› ä¸º <code>john.residence</code> åœ¨å¯é€‰é“¾è¢«è®¿é—®æ—¶æ˜¯å¯é€‰å€¼ã€‚<br>åŒæ ·çš„ï¼Œä½ å¯ä»¥å°è¯•é€šè¿‡åœ¨å¯é€‰é“¾é‡Œç”¨ä¸‹æ ‡æ¥è®¾ç½®ä¸€ä¸ªæ–°å€¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">john.residence?[<span class="number">0</span>] = <span class="type">Room</span>(name: <span class="string">"Bathroom"</span>)</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªä¸‹æ ‡è®¾ç½®çš„å°è¯•åŒæ ·å¤±è´¥äº†ï¼Œå› ä¸º <code>residence</code> ç›®å‰è¿˜æ˜¯ <code>nil</code> ã€‚</p>
<p>å¦‚æœä½ åˆ›å»ºå¹¶ä¸”èµ‹å€¼ä¸€ä¸ªå®é™…çš„ <code>Residence</code> å®ä¾‹ç»™ <code>john.residence</code> ï¼Œåœ¨ <code>rooms</code> æ•°ç»„é‡Œæ·»åŠ ä¸€ä¸ªæˆ–è€…å¤šä¸ª <code>Room</code> å®ä¾‹ï¼Œä½ å°±å¯ä»¥é€šè¿‡å¯é€‰é“¾ä½¿ç”¨ <code>Residence</code> ä¸‹æ ‡æ¥è®¿é—® <code>rooms</code> æ•°ç»„é‡Œçš„å®é™…å…ƒç´ äº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> johnsHouse = <span class="type">Residence</span>()</div><div class="line">johnsHouse.rooms.append(<span class="type">Room</span>(name: <span class="string">"Living Room"</span>))</div><div class="line">johnsHouse.rooms.append(<span class="type">Room</span>(name: <span class="string">"Kitchen"</span>))</div><div class="line">john.residence = johnsHouse</div><div class="line"> </div><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> firstRoomName = john.residence?[<span class="number">0</span>].name &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"The first room name is <span class="subst">\(firstRoomName)</span>."</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Unable to retrieve the first room name."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// Prints "The first room name is Living Room."</span></div></pre></td></tr></table></figure>
<h4 id="è®¿é—®å¯é€‰ç±»å‹çš„ä¸‹æ ‡"><a href="#è®¿é—®å¯é€‰ç±»å‹çš„ä¸‹æ ‡" class="headerlink" title="è®¿é—®å¯é€‰ç±»å‹çš„ä¸‹æ ‡"></a>è®¿é—®å¯é€‰ç±»å‹çš„ä¸‹æ ‡</h4><p>å¦‚æœä¸‹æ ‡è¿”å›ä¸€ä¸ªå¯é€‰ç±»å‹çš„å€¼â€”â€”æ¯”å¦‚è¯´ Swift çš„ <code>Dictionary</code> ç±»å‹çš„é”®ä¸‹æ ‡â€”â€”æ”¾ä¸€ä¸ªé—®å·åœ¨ä¸‹æ ‡çš„æ–¹æ‹¬å·åè¾¹æ¥é“¾æ¥å®ƒçš„å¯é€‰è¿”å›å€¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ar testScores = [<span class="string">"Dave"</span>: [<span class="number">86</span>, <span class="number">82</span>, <span class="number">84</span>], <span class="string">"Bev"</span>: [<span class="number">79</span>, <span class="number">94</span>, <span class="number">81</span>]]</div><div class="line">testScores[<span class="string">"Dave"</span>]?[<span class="number">0</span>] = <span class="number">91</span></div><div class="line">testScores[<span class="string">"Bev"</span>]?[<span class="number">0</span>] += <span class="number">1</span></div><div class="line">testScores[<span class="string">"Brian"</span>]?[<span class="number">0</span>] = <span class="number">72</span></div><div class="line"><span class="comment">// the "Dave" array is now [91, 82, 84] and the "Bev" array is now [80, 94, 81]</span></div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„æ —å­ä¸­å®šä¹‰äº†ä¸€ä¸ªå«åš <code>testScores</code> çš„å­—å…¸ï¼Œå®ƒåŒ…å«ä¸¤ä¸ªé”®å€¼å¯¹æŠŠ <code>String</code> ç±»å‹çš„é”®æ˜ å°„åˆ°ä¸€ä¸ªæ•´å‹å€¼çš„æ•°ç»„ã€‚è¿™ä¸ªæ —å­ç”¨å¯é€‰é“¾æŠŠ â€œDaveâ€ æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ è®¾ä¸º 91 ï¼›æŠŠ â€œBevâ€ æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¢åŠ  1 ï¼›ç„¶åå°è¯•è®¾ç½® â€œBrianâ€ æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚å‰ä¸¤ä¸ªè°ƒç”¨æ˜¯æˆåŠŸäº†ï¼Œå› ä¸º <code>testScores</code> å­—å…¸åŒ…å«äº† â€œDaveâ€ å’Œ â€œBevâ€ è¿™ä¸¤ä¸ªé”®ã€‚ç¬¬ä¸‰ä¸ªè°ƒç”¨å¤±è´¥äº†ï¼Œå› ä¸ºå­—å…¸ <code>testScores</code> å¹¶æ²¡æœ‰åŒ…å« â€œBrianâ€ é”®ã€‚</p>
<h3 id="é“¾çš„å¤šå±‚è¿æ¥"><a href="#é“¾çš„å¤šå±‚è¿æ¥" class="headerlink" title="é“¾çš„å¤šå±‚è¿æ¥"></a>é“¾çš„å¤šå±‚è¿æ¥</h3><p>ä½ å¯ä»¥é€šè¿‡è¿æ¥å¤šä¸ªå¯é€‰é“¾æ¥åœ¨æ¨¡å‹ä¸­æ·±å…¥è®¿é—®å±æ€§ã€æ–¹æ³•ä»¥åŠä¸‹æ ‡ã€‚æ€»ä¹‹ï¼Œå¤šå±‚å¯é€‰é“¾ä¸ä¼šç»™è¿”å›çš„å€¼æ·»åŠ å¤šå±‚çš„å¯é€‰æ€§ã€‚</p>
<ul>
<li>å¦‚æœä½ è®¿é—®çš„å€¼ä¸æ˜¯å¯é€‰é¡¹ï¼Œå®ƒä¼šå› ä¸ºå¯é€‰é“¾è€Œå˜æˆå¯é€‰é¡¹ï¼›</li>
<li>å¦‚æœä½ è®¿é—®çš„å€¼å·²ç»æ˜¯å¯é€‰çš„ï¼Œå®ƒä¸ä¼šå› ä¸ºå¯é€‰é“¾è€Œå˜å¾—æ›´åŠ å¯é€‰ã€‚</li>
</ul>
<p>å› æ­¤ï¼š</p>
<ul>
<li>å¦‚æœä½ å°è¯•é€šè¿‡å¯é€‰é“¾å–å›ä¸€ä¸ª <code>Int</code> å€¼ï¼Œå°±ä¸€å®šä¼šè¿”å› <code>Int?</code> ï¼Œä¸è®ºé€šè¿‡äº†å¤šå°‘å±‚çš„å¯é€‰é“¾ï¼›</li>
<li>ç±»ä¼¼åœ°ï¼Œå¦‚æœä½ å°è¯•é€šè¿‡å¯é€‰é“¾è®¿é—® <em>Int?</em> å€¼ï¼Œ <code>Int?</code> ä¸€å®šå°±æ˜¯è¿”å›çš„ç±»å‹ï¼Œæ— è®ºé€šè¿‡äº†å¤šå°‘å±‚çš„å¯é€‰é“¾ã€‚</li>
</ul>
<h4 id="ç”¨å¯é€‰è¿”å›å€¼é“¾æ¥æ–¹æ³•"><a href="#ç”¨å¯é€‰è¿”å›å€¼é“¾æ¥æ–¹æ³•" class="headerlink" title="ç”¨å¯é€‰è¿”å›å€¼é“¾æ¥æ–¹æ³•"></a>ç”¨å¯é€‰è¿”å›å€¼é“¾æ¥æ–¹æ³•</h4><p>å…ˆå‰çš„ä¾‹å­è¯´æ˜äº†å¦‚ä½•é€šè¿‡å¯é€‰é“¾æ¥è·å–å¯é€‰ç±»å‹å±æ€§çš„å€¼ã€‚ä½ è¿˜å¯ä»¥é€šè¿‡å¯é€‰é“¾æ¥è°ƒç”¨è¿”å›å¯é€‰ç±»å‹çš„æ–¹æ³•ï¼Œå¹¶ä¸”å¦‚æœéœ€è¦çš„è¯å¯ä»¥ç»§ç»­å¯¹æ–¹æ³•çš„è¿”å›å€¼è¿›è¡Œé“¾æ¥ã€‚</p>
<p>åœ¨ä¸‹é¢çš„æ —å­é€šè¿‡å¯é€‰é“¾æ¥è°ƒç”¨ <code>Address</code> çš„ <code>buildingIdentifier()</code> æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•è¿”å› <code>String?</code> ç±»å‹å€¼ã€‚æ­£å¦‚ä¸Šé¢æ‰€è¯´ï¼Œé€šè¿‡å¯é€‰é“¾è°ƒç”¨çš„æ–¹æ³•çš„æœ€ç»ˆè¿”å›çš„ç±»å‹è¿˜æ˜¯ <code>String?</code> ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> buildingIdentifier = john.residence?.address?.buildingIdentifier() &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"John's building identifier is <span class="subst">\(buildingIdentifier)</span>."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// Prints "John's building identifier is The Larches."</span></div></pre></td></tr></table></figure>
<blockquote>
<p>æ‘˜è‡ªï¼š<a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/index.html#//apple_ref/doc/uid/TP40014097-CH3-ID0" target="_blank" rel="external">Swift å®˜ç½‘</a><br>æ‰€æœ‰ä»£ç åœ¨Xcode9 Swift4 ç¯å¢ƒç¼–è¯‘æ²¡é—®é¢˜ï¼Œä»£ç <a href="https://github.com/keshiim/LearnSwift4" target="_blank" rel="external">æˆ³è¿™é‡Œ https://github.com/keshiim/LearnSwift4</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;å¯é€‰é“¾&lt;/strong&gt;æ˜¯ä¸€ä¸ªè°ƒç”¨å’ŒæŸ¥è¯¢å¯é€‰å±æ€§ã€æ–¹æ³•å’Œä¸‹æ ‡çš„è¿‡ç¨‹ï¼Œå®ƒå¯èƒ½ä¸º &lt;code&gt;nil&lt;/code&gt; ã€‚&lt;em&gt;å¦‚æœå¯é€‰é¡¹åŒ…å«å€¼&lt;/em&gt;ï¼Œå±æ€§ã€æ–¹æ³•æˆ–è€…ä¸‹æ ‡çš„è°ƒç”¨æˆåŠŸï¼›å¦‚æœå¯é€‰é¡¹æ˜¯ &lt;code&gt;nil&lt;/code&gt; ï¼Œå±æ€§ã€æ–¹æ³•æˆ–è€…ä¸‹æ ‡çš„è°ƒç”¨ä¼šè¿”
    
    </summary>
    
      <category term="å­¦ä¹ " scheme="https://keshiim.github.io/categories/%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="Swift" scheme="https://keshiim.github.io/categories/%E5%AD%A6%E4%B9%A0/Swift/"/>
    
    
      <category term="Swift" scheme="https://keshiim.github.io/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode-673 number of Longest Increasing Subsequence</title>
    <link href="https://keshiim.github.io/2017/12/06/Leetcode-673-number-of-Longest-Increasing-Subsequence/"/>
    <id>https://keshiim.github.io/2017/12/06/Leetcode-673-number-of-Longest-Increasing-Subsequence/</id>
    <published>2017-12-06T07:39:47.000Z</published>
    <updated>2018-03-20T09:56:53.644Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://leetcode.com/problems/number-of-longest-increasing-subsequence/description/" target="_blank" rel="external">Number of Longest Increasing Subsequence</a></p>
<h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><p>Given an unsorted array of integers, find the number of longest increasing subsequence.</p>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Input: [<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">7</span>]</div><div class="line">Output: <span class="number">2</span></div><div class="line">Explanation: The two longest increasing subsequence are [<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">7</span>] <span class="keyword">and</span> [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>].</div><div class="line"></div><div class="line">Input: [<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>]</div><div class="line">Output: <span class="number">5</span></div><div class="line">Explanation: The length of longest continuous increasing subsequence is <span class="number">1</span>, <span class="keyword">and</span> there are <span class="number">5</span> subsequences' length is <span class="number">1</span>, so output <span class="number">5.</span></div></pre></td></tr></table></figure>
<h3 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h3><p>Length of the given array will be not exceed 2000 and the answer is guaranteed to be fit in 32-bit signed int.</p>
<h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>åŠ¨æ€è§„åˆ’æ±‚è§£ï¼Œå»ºç«‹ä¸¤ä¸ªæ•°ç»„ <code>len</code>ã€<code>cnt</code>ï¼š </p>
<ul>
<li><code>len[k]</code>: è¡¨ç¤ºä»¥ <code>nums[k]</code> ä¸ºæœ«å°¾çš„æœ€é•¿å­åºåˆ—é•¿åº¦ã€‚ </li>
<li><code>cnt[k]</code>: è¡¨ç¤ºä»¥ <code>nums[k]</code> ä¸ºæœ«å°¾çš„æœ€é•¿å­åºåˆ—ä¸ªæ•°ã€‚</li>
</ul>
<p>å¯¹äºæ¯ä¸€ä¸ª <code>nums[i]</code>ï¼Œåªéœ€è¦éå†å…¶å‰é¢çš„æ‰€æœ‰æ•°å­— <code>nums[j] (0 &lt;= j &lt; i)</code>ï¼Œæ‰¾åˆ°æ¯”å®ƒå°ä¸”é•¿åº¦æœ€é•¿çš„ <code>nums[k]</code>ï¼Œå°±å¯å¾—å‡ºä»¥ <code>nums[i]</code> ä¸ºæœ«å°¾çš„å­åºåˆ—çš„æœ€å¤§é•¿åº¦ len[i] = <code>len[k] + 1</code> ã€‚</p>
<p>åŒæ—¶ï¼Œä»¥ <code>nums[i]</code> ä¸ºæœ«å°¾çš„æœ€é•¿å­åºåˆ—ä¸ªæ•°åº”è¯¥ç­‰äº <code>nums[j] (0 &lt;= j &lt; i)</code>ä¸­ï¼Œæ¯”å®ƒå°ä¸”é•¿åº¦æœ€é•¿çš„æ‰€æœ‰ <code>nums[k]</code> çš„æœ€é•¿å­åºåˆ—ä¸ªæ•°ä¹‹å’Œã€‚</p>
<p>ç”¨ä¸¤æ¡å…¬å¼æ¥é˜è¿°ä¸Šé¢ä¸€æ®µéš¾ä»¥ç†è§£çš„è¯</p>
<ul>
<li><code>len[i] = max(len[i], len[k] + 1), for all 0 &lt;= k &lt; i and nums[k] &lt; nums[i] and len[j] + 1 &gt; len[i]</code></li>
<li><code>cnt[i] = sum(cnt[k]), for all 0 &lt;= k &lt; i and len[i] = len[k] + 1</code></li>
</ul>
<hr>
<p>ä¸¾ä¸ªæ —å­ï¼š<br><code>nums = {1, 3, 5, 4, 7}</code></p>
<p>åˆå§‹çŠ¶æ€ï¼Œ<code>len = {1, 1, 1, 1, 1}</code>ï¼Œ<code>cnt = {1, 1, 1, 1, 1}</code></p>
<p>å¼€å§‹éå†</p>
<ul>
<li>æ•°å­— 3ï¼Œæ¯”å®ƒå°çš„åªæœ‰ 1 =&gt; <code>len[1] = len[0] + 1 = 2ï¼Œcnt[1] = cnt[0] = 1</code>ï¼›</li>
<li>æ•°å­— 5ï¼Œæ¯”å®ƒå°ä¸”é•¿åº¦æœ€é•¿çš„ä¸º 3 =&gt; <code>len[2] = len[1] + 1 = 3ï¼Œcnt[2] = cnt[1] = 1</code>ï¼› </li>
<li>æ•°å­— 4ï¼Œ æ¯”å®ƒå°ä¸”é•¿åº¦æœ€é•¿çš„ä¸º 3 =&gt; <code>len[3] = len[1] + 1 = 3ï¼Œcnt[3] = cnt[1] = 1</code>ï¼› </li>
<li>æ•°å­— 7ï¼Œæ¯”å®ƒå°ä¸”é•¿åº¦æœ€é•¿çš„ä¸º 5 å’Œ 4 =&gt; <code>len[4] = len[2] + 1 = 4ï¼Œcnt[4] = cnt[2] + cnt[3] = 2</code></li>
</ul>
<p>æœ€ç»ˆçŠ¶æ€ï¼Œ<code>len = {1, 2, 3, 3, 4}</code>ï¼Œ<code>cnt = {1, 1, 1, 1, 2}</code></p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><h4 id="cpp"><a href="#cpp" class="headerlink" title="cpp"></a>cpp</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findNumberOfLIS</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> maxLen = <span class="number">1</span>, res = <span class="number">0</span>, n = nums.size();</div><div class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; len(n, <span class="number">1</span>);</div><div class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; cnt(n, <span class="number">1</span>);</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</div><div class="line">                <span class="keyword">if</span> (nums[j] &lt; nums[i]) &#123;</div><div class="line">                    <span class="keyword">if</span> (len[j] + <span class="number">1</span> &gt; len[i]) &#123;</div><div class="line">                        len[i] = len[j] + <span class="number">1</span>;</div><div class="line">                        cnt[i] = cnt[j];</div><div class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (len[j] + <span class="number">1</span> == len[i]) &#123;</div><div class="line">                        cnt[i] += cnt[j];</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            maxLen = max(maxLen, len[i]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">            <span class="keyword">if</span> (maxLen == len[i]) res += cnt[i];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Swift"><a href="#Swift" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">findNumberOfLIS</span><span class="params">(<span class="number">_</span> nums: [Int])</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">if</span> nums.isEmpty &#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">var</span> maxLen = <span class="number">1</span>, res = <span class="number">0</span></div><div class="line">        <span class="keyword">let</span> n = nums.<span class="built_in">count</span></div><div class="line">        <span class="keyword">var</span> len = [<span class="type">Int</span>](repeating: <span class="number">1</span>, <span class="built_in">count</span>: n)</div><div class="line">        <span class="keyword">var</span> cnt = [<span class="type">Int</span>](repeating: <span class="number">1</span>, <span class="built_in">count</span>: n)</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span>..&lt;n &#123;</div><div class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="number">0</span>..&lt;i &#123;</div><div class="line">                <span class="keyword">if</span> nums[j] &lt; nums[i] &#123;</div><div class="line">                    <span class="keyword">if</span> len[j] + <span class="number">1</span> &gt; len[i] &#123;</div><div class="line">                        len[i] = len[j] + <span class="number">1</span></div><div class="line">                        cnt[i] = cnt[j]</div><div class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> len[j] + <span class="number">1</span> == len[i] &#123;</div><div class="line">                        cnt[i] += cnt[j]</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            maxLen = <span class="built_in">max</span>(maxLen, len[i])</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;n &#123;</div><div class="line">            <span class="keyword">if</span> maxLen == len[i] &#123; res += cnt[i] &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ç±»ä¼¼é¢˜ç›®"><a href="#ç±»ä¼¼é¢˜ç›®" class="headerlink" title="ç±»ä¼¼é¢˜ç›®"></a>ç±»ä¼¼é¢˜ç›®</h3><p><a href="https://keshiim.github.io/2017/12/06/Leetcode-674-Longest-Continuous-Increasing/">Longest continuous increasing</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://leetcode.com/problems/number-of-longest-increasing-subsequence/description/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Number of Lo
    
    </summary>
    
      <category term="LeetCode" scheme="https://keshiim.github.io/categories/LeetCode/"/>
    
    
      <category term="LeetCode" scheme="https://keshiim.github.io/tags/LeetCode/"/>
    
      <category term="algorithm" scheme="https://keshiim.github.io/tags/algorithm/"/>
    
      <category term="ç®—æ³•" scheme="https://keshiim.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="Dynamic Programming" scheme="https://keshiim.github.io/tags/Dynamic-Programming/"/>
    
      <category term="Medium" scheme="https://keshiim.github.io/tags/Medium/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode-674 Longest Continuous Increasing</title>
    <link href="https://keshiim.github.io/2017/12/06/Leetcode-674-Longest-Continuous-Increasing/"/>
    <id>https://keshiim.github.io/2017/12/06/Leetcode-674-Longest-Continuous-Increasing/</id>
    <published>2017-12-06T07:08:55.000Z</published>
    <updated>2018-03-20T09:56:53.645Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://leetcode.com/problems/longest-continuous-increasing-subsequence/description/" target="_blank" rel="external">Longest Continuous Increasing</a></p>
<h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><p>Given an unsorted array of integers, find the length of longest <code>continuous</code> increasing subsequence(subarray).</p>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Input: [<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">7</span>]</div><div class="line">Output: <span class="number">3</span></div><div class="line">Explanation: The longest continuous increasing subsequence is [<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>], its length is <span class="number">3.</span> </div><div class="line">Even though [<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>] is also an increasing subsequence, it's <span class="keyword">not</span> a continuous one where <span class="number">5</span> <span class="keyword">and</span> <span class="number">7</span> are separated by <span class="number">4.</span> </div><div class="line"></div><div class="line">Input: [<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>]</div><div class="line">Output: <span class="number">1</span></div><div class="line">Explanation: The longest continuous increasing subsequence is [<span class="number">2</span>], its length is <span class="number">1.</span></div></pre></td></tr></table></figure>
<h3 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h3><p>Length of the array will not exceed 10,000</p>
<h3 id="è§£æ³•1"><a href="#è§£æ³•1" class="headerlink" title="è§£æ³•1"></a>è§£æ³•1</h3><p>è¿™é“é¢˜è®©æˆ‘ä»¬æ±‚ä¸€ä¸ªæ•°ç»„çš„æœ€é•¿è¿ç»­é€’å¢åºåˆ—ï¼Œç”±äºæœ‰äº†è¿ç»­è¿™ä¸ªæ¡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå¦‚æœé‡åˆ°å¤§çš„æ•°å­—ï¼Œè®¡æ•°å™¨è‡ªå¢1ï¼›å¦‚æœæ˜¯ä¸€ä¸ªå°çš„æ•°å­—ï¼Œåˆ™è®¡æ•°å™¨é‡ç½®ä¸º1ã€‚æˆ‘ä»¬ç”¨ä¸€ä¸ªå˜é‡curæ¥è¡¨ç¤ºå‰ä¸€ä¸ªæ•°å­—ï¼Œåˆå§‹åŒ–ä¸ºæ•´å‹æœ€å¤§å€¼ï¼Œå½“å‰éå†åˆ°çš„æ•°å­—numå°±å’Œcuræ¯”è¾ƒå°±è¡Œäº†ï¼Œæ¯æ¬¡ç”¨cntæ¥æ›´æ–°ç»“æœresï¼Œå‚è§ä»£ç å¦‚ä¸‹ï¼š</p>
<h4 id="cpp"><a href="#cpp" class="headerlink" title="cpp"></a>cpp</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findLengthOfLCIS</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> res = <span class="number">0</span>, cnt = <span class="number">0</span>, pre = INT_MAX;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> num : nums) &#123;</div><div class="line">            <span class="keyword">if</span> (num &gt; pre) ++cnt;</div><div class="line">            <span class="keyword">else</span> cnt = <span class="number">1</span>;</div><div class="line">            res = max(res, cnt);</div><div class="line">            pre = num;    </div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Swift"><a href="#Swift" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">findLengthOfLCIS</span><span class="params">(<span class="number">_</span> nums: [Int])</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">var</span> res = <span class="number">0</span>, cnt = <span class="number">0</span>, pre = <span class="type">Int</span>.<span class="built_in">max</span></div><div class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> nums &#123;</div><div class="line">            <span class="keyword">if</span> pre &lt; num &#123; cnt += <span class="number">1</span> &#125;</div><div class="line">            <span class="keyword">else</span> &#123; cnt = <span class="number">1</span> &#125;</div><div class="line">            res = <span class="built_in">max</span>(res, cnt)</div><div class="line">            pre = num</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="è§£æ³•2"><a href="#è§£æ³•2" class="headerlink" title="è§£æ³•2"></a>è§£æ³•2</h3><p>ä¸‹é¢è¿™ç§æ–¹æ³•çš„æ€è·¯å’Œä¸Šé¢çš„è§£æ³•ä¸€æ ·ï¼Œæ¯æ¬¡éƒ½å’Œå‰é¢ä¸€ä¸ªæ•°å­—æ¥æ¯”è¾ƒï¼Œæ³¨æ„å¤„ç†æ— æ³•å–åˆ°é’±ä¸€ä¸ªæ•°å­—çš„æƒ…å†µï¼Œå‚è§ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findLengthOfLCIS</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;nums)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> res = <span class="number">0</span>, cnt = <span class="number">0</span>, n = nums.size();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">            <span class="keyword">if</span> (i == <span class="number">0</span> || nums[i - <span class="number">1</span>] &lt; nums[i]) res = max(res, ++cnt);</div><div class="line">            <span class="keyword">else</span> cnt = <span class="number">1</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Swift-1"><a href="#Swift-1" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">findLengthOfLCIS</span><span class="params">(<span class="number">_</span> nums: [Int])</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">var</span> res = <span class="number">0</span>, cnt = <span class="number">0</span>, n = nums.<span class="built_in">count</span></div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;n &#123;</div><div class="line">            <span class="keyword">if</span> i == <span class="number">0</span> || nums[i - <span class="number">1</span>] &lt; nums[i] &#123;</div><div class="line">                cnt += <span class="number">1</span></div><div class="line">                res = <span class="built_in">max</span>(res, cnt)</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                cnt = <span class="number">1</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ç±»ä¼¼é¢˜ç›®"><a href="#ç±»ä¼¼é¢˜ç›®" class="headerlink" title="ç±»ä¼¼é¢˜ç›®"></a>ç±»ä¼¼é¢˜ç›®</h3><p><a href="https://keshiim.github.io/2017/12/06/Leetcode-673-number-of-Longest-Increasing-Subsequence/">Number of Longest Increasing Subsequence</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://leetcode.com/problems/longest-continuous-increasing-subsequence/description/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Longest Con
    
    </summary>
    
      <category term="LeetCode" scheme="https://keshiim.github.io/categories/LeetCode/"/>
    
    
      <category term="LeetCode" scheme="https://keshiim.github.io/tags/LeetCode/"/>
    
      <category term="algorithm" scheme="https://keshiim.github.io/tags/algorithm/"/>
    
      <category term="ç®—æ³•" scheme="https://keshiim.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="Array" scheme="https://keshiim.github.io/tags/Array/"/>
    
      <category term="Easy" scheme="https://keshiim.github.io/tags/Easy/"/>
    
  </entry>
  
  <entry>
    <title>Swiftï¼šè‡ªåŠ¨å¼•ç”¨è®¡æ•°</title>
    <link href="https://keshiim.github.io/2017/12/06/Swift-automatic-reference-counting/"/>
    <id>https://keshiim.github.io/2017/12/06/Swift-automatic-reference-counting/</id>
    <published>2017-12-06T02:59:35.000Z</published>
    <updated>2018-03-20T09:56:53.652Z</updated>
    
    <content type="html"><![CDATA[<p>Swift ä½¿ç”¨<strong>è‡ªåŠ¨å¼•ç”¨è®¡æ•°(ARC)æœºåˆ¶</strong>æ¥è¿½è¸ªå’Œç®¡ç†ä½ çš„ App çš„å†…å­˜ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™æ„å‘³ç€ Swift çš„å†…å­˜ç®¡ç†æœºåˆ¶ä¼šä¸€ç›´èµ·ä½œç”¨ï¼Œä½ ä¸éœ€è¦è‡ªå·±è€ƒè™‘å†…å­˜ç®¡ç†ã€‚å½“è¿™äº›å®ä¾‹ä¸åœ¨éœ€è¦æ—¶ï¼ŒARCä¼šè‡ªåŠ¨é‡Šæ”¾ç±»å®ä¾‹æ‰€å ç”¨çš„å†…å­˜ã€‚</p>
<p>æ€»ä¹‹ï¼Œåœ¨å°‘æ•°æƒ…å†µä¸‹ï¼Œä¸ºäº†èƒ½å¸®åŠ©ä½ ç®¡ç†å†…å­˜ï¼ŒARCéœ€è¦æ›´å¤šå…³äºä½ ä»£ç ä¹‹é—´çš„å…³ç³»ä¿¡æ¯ã€‚è¿™é‡Œå°†æè¿°äº†è¿™äº›æƒ…å†µå¹¶å‘ä½ å±•ç¤ºå¦‚ä½•å¯ç”¨ARCæ¥ç®¡ç†ä½  App çš„å†…å­˜ã€‚åœ¨ Swift ä¸­ä½¿ç”¨ ARC ä¸ _<a href="https://developer.apple.com/library/prerelease/content/releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226" target="_blank" rel="external">Transitioning to ARC Release Notes</a>_ ä¸­æè¿°çš„åœ¨ Objective-C ä¸­ä½¿ç”¨ ARC ååˆ†ç›¸ä¼¼ã€‚</p>
<blockquote>
<p><em>å¼•ç”¨è®¡æ•°åªåº”ç”¨äºç±»çš„å®ä¾‹</em>ã€‚ç»“æ„ä½“å’Œæšä¸¾æ˜¯å€¼ç±»å‹ï¼Œä¸æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ²¡æœ‰é€šè¿‡å¼•ç”¨å­˜å‚¨å’Œä¼ é€’</p>
</blockquote>
<h3 id="ARCçš„å·¥ä½œæœºåˆ¶"><a href="#ARCçš„å·¥ä½œæœºåˆ¶" class="headerlink" title="ARCçš„å·¥ä½œæœºåˆ¶"></a>ARCçš„å·¥ä½œæœºåˆ¶</h3><p>æ¯æ¬¡ä½ åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹ï¼ŒARC ä¼šåˆ†é…ä¸€å¤§å—å†…å­˜æ¥å­˜å‚¨è¿™ä¸ªå®ä¾‹çš„ä¿¡æ¯ã€‚è¿™äº›å†…å­˜ä¸­ä¿ç•™æœ‰å®ä¾‹çš„ç±»å‹ä¿¡æ¯ï¼Œä»¥åŠè¯¥å®ä¾‹æ‰€æœ‰å­˜å‚¨å±æ€§å€¼çš„ä¿¡æ¯ã€‚</p>
<p>æ­¤å¤–ï¼Œå½“å®ä¾‹ä¸éœ€è¦æ—¶ï¼ŒARC ä¼šé‡Šæ”¾è¯¥å®ä¾‹æ‰€å ç”¨çš„å†…å­˜ï¼Œé‡Šæ”¾çš„å†…å­˜ç”¨äºå…¶ä»–ç”¨é€”ã€‚è¿™ç¡®ä¿ç±»å®ä¾‹å½“å®ƒä¸åœ¨éœ€è¦æ—¶ï¼Œä¸ä¼šä¸€ç›´å ç”¨å†…å­˜ã€‚</p>
<p>ç„¶è€Œï¼Œå¦‚æœ ARC é‡Šæ”¾äº†æ­£åœ¨ä½¿ç”¨çš„å®ä¾‹å†…å­˜ï¼Œé‚£ä¹ˆå®ƒå°†ä¸ä¼šè®¿é—®å®ä¾‹çš„å±æ€§ï¼Œæˆ–è€…è°ƒç”¨å®ä¾‹çš„æ–¹æ³•ã€‚ç¡®å®ï¼Œå¦‚æœä½ è¯•å›¾è®¿é—®è¯¥å®ä¾‹ï¼Œ<em>ä½ çš„appå¾ˆå¯èƒ½ä¼šå´©æºƒ</em>ã€‚</p>
<p>ä¸ºäº†ç¡®ä¿ä½¿ç”¨ä¸­çš„å®ä¾‹ä¸ä¼šæ¶ˆå¤±ï¼ŒARC ä¼šè·Ÿè¸ªå’Œè®¡ç®—å½“å‰å®ä¾‹è¢«å¤šå°‘å±æ€§ï¼Œå¸¸é‡å’Œå˜é‡æ‰€å¼•ç”¨ã€‚åªè¦å­˜åœ¨å¯¹è¯¥ç±»å®ä¾‹çš„å¼•ç”¨ï¼ŒARC å°†ä¸ä¼šé‡Šæ”¾è¯¥å®ä¾‹ã€‚</p>
<p>ä¸ºäº†ä½¿è¿™äº›æˆä¸ºå¯èƒ½ï¼Œ<strong>æ— è®ºä½ å°†å®ä¾‹åˆ†é…ç»™å±æ€§ï¼Œå¸¸é‡æˆ–å˜é‡ï¼Œå®ƒä»¬éƒ½ä¼šåˆ›å»ºè¯¥å®ä¾‹çš„å¼ºå¼•ç”¨</strong>ã€‚ä¹‹æ‰€ä»¥ç§°ä¹‹ä¸º<strong>â€œå¼ºâ€</strong>å¼•ç”¨ï¼Œæ˜¯å› ä¸ºå®ƒä¼šå°†å®ä¾‹ä¿æŒä½ï¼Œåªè¦å¼ºå¼•ç”¨è¿˜åœ¨ï¼Œå®ä¾‹æ˜¯ä¸å…è®¸è¢«é”€æ¯çš„ã€‚</p>
<h3 id="ARC"><a href="#ARC" class="headerlink" title="ARC"></a>ARC</h3><p>ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†è‡ªåŠ¨å¼•ç”¨è®¡æ•°çš„å·¥ä½œæœºåˆ¶ã€‚è¿™ä¸ªä¾‹å­ç”±ä¸€ä¸ªç®€å•çš„ <code>Person</code> ç±»å¼€å§‹ï¼Œå®šä¹‰äº†ä¸€ä¸ªåä¸º <code>name</code> çš„å­˜å‚¨å¸¸é‡å±æ€§:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">        <span class="built_in">print</span>(<span class="string">"<span class="subst">\(name)</span> is being initialized"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">deinit</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"<span class="subst">\(name)</span> is being deinitialized"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>Person</code> ç±»æœ‰ä¸€ä¸ªåˆå§‹åŒ–å™¨ï¼Œå®ƒè®¾ç½®äº†å®ä¾‹çš„ <code>name</code> å±æ€§å¹¶ä¸”è¾“å‡ºä¸€æ¡ä¿¡æ¯è¡¨æ˜åˆå§‹åŒ–å™¨ç”Ÿæ•ˆã€‚ <code>Person</code> ç±»ä¹Ÿæœ‰ä¸€ä¸ªååˆå§‹åŒ–å™¨ï¼Œä¼šåœ¨ç±»çš„å®ä¾‹è¢«é”€æ¯çš„æ—¶å€™æ‰“å°ä¸€æ¡ä¿¡æ¯ã€‚</p>
<p>ä¸‹é¢çš„ä»£ç ç‰‡æ®µå®šä¹‰äº†ä¸‰ä¸ª <code>Peroson?</code> ç±»å‹çš„å˜é‡ï¼Œç”¨æ¥æŒ‰ç…§ä»£ç ä¸­çš„é¡ºåºï¼Œä¸ºæ–°çš„ <code>Person</code> å®ä¾‹è®¾ç½®å¤šä¸ªå¼•ç”¨ã€‚ç”±äº<em>å¯é€‰ç±»å‹çš„å˜é‡ä¼šè¢«è‡ªåŠ¨åˆå§‹åŒ–ä¸ºä¸€ä¸ª</em> <code>nil</code> <em>å€¼</em>ï¼Œç›®å‰è¿˜ä¸ä¼šå¼•ç”¨åˆ° <code>Person</code> ç±»çš„å®ä¾‹ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> reference1: <span class="type">Person</span>?</div><div class="line"><span class="keyword">var</span> reference2: <span class="type">Person</span>?</div><div class="line"><span class="keyword">var</span> reference3: <span class="type">Person</span>?</div></pre></td></tr></table></figure>
<p>ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Person</code> å®ä¾‹å¹¶ä¸”å°†å®ƒèµ‹å€¼ç»™ä¸‰ä¸ªå˜é‡ä¸­çš„ä¸€ä¸ªï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">reference1 = <span class="type">Person</span>(name: <span class="string">"John Appleseed"</span>)</div><div class="line"><span class="comment">// prints "John Appleseed is being initialized"</span></div></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œå½“è°ƒç”¨ <code>person</code> ç±»çš„å‡ºåˆå§‹åŒ–å™¨çš„æ—¶å€™ï¼Œä¼šè¾“å‡º â€œJohn Appleseed is being initializedâ€ ä¿¡æ¯ã€‚è¿™å°±è¯´æ˜åˆå§‹åŒ–æ‰§è¡Œäº†ã€‚</p>
<p>å› ä¸º <code>Person</code> å®ä¾‹å·²ç»èµ‹å€¼ç»™äº† <code>reference1</code> å˜é‡ï¼Œç°åœ¨å°±æœ‰äº†ä¸€ä¸ªä» <code>reference1</code> åˆ°è¯¥å®ä¾‹çš„å¼ºå¼•ç”¨ã€‚å› ä¸ºè‡³å°‘æœ‰ä¸€ä¸ªå¼ºå¼•ç”¨ï¼ŒARCå¯ä»¥ç¡®ä¿ <code>Person</code> ä¸€ç›´ä¿æŒåœ¨å†…å­˜ä¸­ä¸è¢«é”€æ¯ã€‚</p>
<p>å¦‚æœä½ å°†åŒä¸€ä¸ª <code>Person</code> å®ä¾‹åˆ†é…ç»™äº†ä¸¤ä¸ªå˜é‡ï¼Œåˆ™è¯¥å®ä¾‹åˆä¼šå¤šå‡ºä¸¤ä¸ªå¼ºå¼•ç”¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">reference2 = reference1</div><div class="line">reference3 = reference1</div></pre></td></tr></table></figure>
<p>å¦‚æœä½ é€šè¿‡ç»™å…¶ä¸­ä¸¤ä¸ªå˜é‡èµ‹å€¼ <code>nil</code> çš„æ–¹å¼æ–­å¼€ä¸¤ä¸ªå¼ºå¼•ç”¨ï¼ˆåŒ…æ‹¬æœ€å…ˆçš„é‚£ä¸ªå¼ºå¼•ç”¨ï¼‰ï¼Œåªç•™ä¸‹ä¸€ä¸ªå¼ºå¼•ç”¨ï¼Œ <code>Person</code> å®ä¾‹ä¸ä¼šè¢«é”€æ¯ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">reference1 = <span class="literal">nil</span></div><div class="line">reference2 = <span class="literal">nil</span></div></pre></td></tr></table></figure>
<p>åœ¨ä½ æ¸…æ¥šåœ°è¡¨æ˜ä¸å†ä½¿ç”¨è¿™ä¸ª <code>Person</code> å®ä¾‹æ—¶ï¼Œç›´åˆ°ç¬¬ä¸‰ä¸ªä¹Ÿå°±æ˜¯æœ€åä¸€ä¸ªå¼ºå¼•ç”¨è¢«æ–­å¼€æ—¶ ARC ä¼šé”€æ¯å®ƒã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">reference3 = <span class="literal">nil</span></div><div class="line"><span class="comment">// prints "John Appleseed is being deinitialized"</span></div></pre></td></tr></table></figure>
<h3 id="ç±»å®ä¾‹ä¹‹é—´çš„å¾ªç¯å¼ºå¼•ç”¨"><a href="#ç±»å®ä¾‹ä¹‹é—´çš„å¾ªç¯å¼ºå¼•ç”¨" class="headerlink" title="ç±»å®ä¾‹ä¹‹é—´çš„å¾ªç¯å¼ºå¼•ç”¨"></a>ç±»å®ä¾‹ä¹‹é—´çš„å¾ªç¯å¼ºå¼•ç”¨</h3><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒARC èƒ½å¤Ÿè¿½è¸ªä½ æ‰€åˆ›å»ºçš„ <code>Person</code> å®ä¾‹çš„å¼•ç”¨æ•°é‡ï¼Œå¹¶ä¸”ä¼šåœ¨ <code>Person</code> å®ä¾‹ä¸åœ¨ä½¿ç”¨æ—¶é”€æ¯ã€‚</p>
<p>æ€»ä¹‹ï¼Œå†™å‡ºæŸä¸ªç±»<strong>æ°¸è¿œ</strong>ä¸ä¼šå˜æˆé›¶å¼ºå¼•ç”¨çš„ä»£ç æ˜¯å¯èƒ½çš„ã€‚å¦‚æœä¸¤ä¸ªç±»å®ä¾‹å½¼æ­¤æŒæœ‰å¯¹æ–¹çš„å¼ºå¼•ç”¨ï¼Œå› è€Œæ¯ä¸ªå®ä¾‹éƒ½è®©å¯¹æ–¹ä¸€ç›´å­˜åœ¨ï¼Œå°±ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚è¿™å°±æ˜¯æ‰€è°“çš„<strong>å¾ªç¯å¼ºå¼•ç”¨</strong>ã€‚</p>
<p>è§£å†³å¾ªç¯å¼ºå¼•ç”¨é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡å®šä¹‰ç±»ä¹‹é—´çš„å…³ç³»ä¸º<em>å¼±å¼•ç”¨( <code>weak</code> )</em>æˆ–<em>æ— ä¸»å¼•ç”¨( <code>unowned</code> )</em>æ¥ä»£æ›¿å¼ºå¼•ç”¨ã€‚è¿™ä¸ªè¿‡ç¨‹åœ¨è§£å†³ç±»å®ä¾‹ä¹‹é—´çš„å¾ªç¯å¼ºå¼•ç”¨ä¸­æœ‰æè¿°ã€‚æ€»ä¹‹ï¼Œåœ¨ä½ å­¦ä¹ å¦‚ä½•è§£å†³å¾ªç¯å¼ºå¼•ç”¨é—®é¢˜å‰ï¼Œäº†è§£ä¸€ä¸‹å®ƒæ˜¯å¦‚ä½•äº§ç”Ÿçš„ä¹Ÿæ˜¯å¾ˆæœ‰æ„ä¹‰çš„äº‹æƒ…ã€‚</p>
<p>ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†ä¸€ä¸ªå¦‚ä½•æ„å¤–åœ°åˆ›å»ºå¾ªç¯å¼ºå¼•ç”¨çš„ä¾‹å­ã€‚è¿™ä¸ªä¾‹å­å®šä¹‰äº†ä¸¤ä¸ªç±»ï¼Œåˆ†åˆ«æ˜¯ <code>Person</code> å’Œ <code>Apartment</code> ï¼Œç”¨æ¥å»ºæ¨¡å…¬å¯“å’Œå®ƒå…¶ä¸­çš„å±…æ°‘ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123; <span class="keyword">self</span>.name = name &#125;</div><div class="line">    <span class="keyword">var</span> apartment: <span class="type">Apartment</span>?</div><div class="line">    <span class="keyword">deinit</span> &#123; <span class="built_in">print</span>(<span class="string">"<span class="subst">\(name)</span> is being deinitialized"</span>) &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Apartment</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> unit: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(unit: <span class="type">String</span>) &#123; <span class="keyword">self</span>.unit = unit &#125;</div><div class="line">    <span class="keyword">var</span> tenant: <span class="type">Person</span>?</div><div class="line">    <span class="keyword">deinit</span> &#123; <span class="built_in">print</span>(<span class="string">"Apartment <span class="subst">\(unit)</span> is being deinitialized"</span>) &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ¯ä¸€ä¸ª <code>Person</code> å®ä¾‹æœ‰ä¸€ä¸ªç±»å‹ä¸º <code>String</code> ï¼Œåå­—ä¸º <code>name</code> çš„å±æ€§ï¼Œå¹¶æœ‰ä¸€ä¸ªå¯é€‰çš„åˆå§‹åŒ–ä¸º <code>nil</code> çš„ <code>apartment</code> å±æ€§ã€‚ <code>apartment</code> å±æ€§æ˜¯å¯é€‰é¡¹ï¼Œå› ä¸ºä¸€ä¸ªäººå¹¶ä¸æ€»æ˜¯æ‹¥æœ‰å…¬å¯“ã€‚</p>
<p>ç±»ä¼¼çš„ï¼Œæ¯ä¸ª <code>Apartment</code> å®ä¾‹éƒ½æœ‰ä¸€ä¸ªå« <code>unit</code> ï¼Œç±»å‹ä¸º <code>String</code> çš„å±æ€§ï¼Œå¹¶æœ‰ä¸€ä¸ªå¯é€‰çš„åˆå§‹åŒ–ä¸º <code>nil</code> çš„ <code>tenant</code> å±æ€§ã€‚ <code>tenant</code> å±æ€§æ˜¯å¯é€‰çš„ï¼Œå› ä¸ºä¸€æ ‹å…¬å¯“å¹¶ä¸æ€»æ˜¯æœ‰å±…æ°‘ã€‚</p>
<p>è¿™ä¸¤ä¸ªç±»éƒ½å®šä¹‰äº†ååˆå§‹åŒ–å™¨ï¼Œç”¨ä»¥åœ¨ç±»å®ä¾‹è¢«ååˆå§‹åŒ–æ—¶è¾“å‡ºä¿¡æ¯ã€‚è¿™è®©ä½ èƒ½å¤ŸçŸ¥æ™“ <code>Person</code> å’Œ <code>Apartment</code> çš„å®ä¾‹æ˜¯å¦åƒé¢„æœŸçš„é‚£æ ·è¢«é‡Šæ”¾ã€‚</p>
<p>æ¥ä¸‹æ¥çš„ä»£ç ç‰‡æ®µå®šä¹‰äº†ä¸¤ä¸ªå¯é€‰é¡¹å˜é‡ <code>john</code> å’Œ <code>unit4A</code> ï¼Œå®ƒä»¬åˆ†åˆ«è¢«èµ‹å€¼ä¸ºä¸‹é¢çš„ <code>Apartment</code> å’Œ <code>Person</code> çš„å®ä¾‹ã€‚è¿™ä¸¤ä¸ªå˜é‡éƒ½è¢«åˆå§‹åŒ–ä¸º <code>nil</code> ï¼Œè¿™æ­£æ˜¯å¯é€‰é¡¹çš„ä¼˜ç‚¹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> john: <span class="type">Person</span>?</div><div class="line"><span class="keyword">var</span> unit4A: <span class="type">Apartment</span>?</div></pre></td></tr></table></figure>
<p>åœ¨ä¸¤ä¸ªå®ä¾‹çš„å¼ºå¼•ç”¨åˆ›å»ºå’Œåˆ†é…ä¹‹åï¼Œä¸‹å›¾è¡¨ç°äº†å¼ºå¼•ç”¨çš„å…³ç³»ã€‚ <code>John</code> å˜é‡å¯¹ <code>Person</code> å®ä¾‹æœ‰ä¸€ä¸ªå¼ºå¼•ç”¨ï¼Œ <code>unit4A</code> å˜é‡å¯¹ <code>Apartment</code> å®ä¾‹æœ‰ä¸€ä¸ªå¼ºå¼•ç”¨:<br><img style="margin: auto" src="/2017/12/06/Swift-automatic-reference-counting/referenceCycle01_2x.png" alt="referenceCycle01_2x" title="John unit4Aå¼•ç”¨å…³ç³»å›¾"><br>ç°åœ¨ä½ å°±å¯ä»¥æŠŠè¿™ä¸¤ä¸ªå®ä¾‹å…³è”åœ¨ä¸€èµ·ï¼Œè¿™æ ·äººå°±æœ‰å…¬å¯“äº†ï¼Œè€Œä¸”å…¬å¯“æœ‰æˆ¿é—´å·ã€‚æ³¨æ„ï¼Œ<strong>æ„Ÿå¹å·</strong>( <code>!</code> )æ˜¯ç”¨æ¥å±•å¼€å’Œè®¿é—®å¯é€‰å˜é‡ <code>john</code> å’Œ <code>unit4A</code> é‡Œçš„å®ä¾‹çš„ï¼Œæ‰€ä»¥è¿™äº›å®ä¾‹çš„å±æ€§å¯ä»¥è®¾ç½®ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">john!.apartment = unit4A</div><div class="line">unit4A!.tenant = john</div></pre></td></tr></table></figure>
<p>åœ¨å°†ä¸¤ä¸ªå®ä¾‹è”ç³»åœ¨ä¸€èµ·ä¹‹åï¼Œå¼ºå¼•ç”¨çš„å…³ç³»å¦‚å›¾æ‰€ç¤ºï¼š<br><img style="margin: auto" src="/2017/12/06/Swift-automatic-reference-counting/referenceCycle02_2x.png" alt="referenceCycle02_2x" title="å¼ºå¼•ç”¨å…³ç³»å›¾"></p>
<p>ä¸å¹¸çš„æ˜¯ï¼Œè¿™ä¸¤ä¸ªå®ä¾‹å…³è”åä¼šäº§ç”Ÿä¸€ä¸ªå¾ªç¯å¼ºå¼•ç”¨ã€‚ <code>Person</code> å®ä¾‹ç°åœ¨æœ‰äº†ä¸€ä¸ªæŒ‡å‘ <code>Apartment</code> å®ä¾‹çš„å¼ºå¼•ç”¨ï¼Œè€Œ <code>Apartment</code> å®ä¾‹ä¹Ÿæœ‰äº†ä¸€ä¸ªæŒ‡å‘ <code>Person</code> å®ä¾‹çš„å¼ºå¼•ç”¨ã€‚å› æ­¤ï¼Œå½“ä½ æ–­å¼€ <code>john</code> å’Œ <code>unit4A</code> å˜é‡æ‰€æŒæœ‰çš„å¼ºå¼•ç”¨æ—¶ï¼Œå¼•ç”¨è®¡æ•°å¹¶ä¸ä¼šé™é›¶ï¼Œå®ä¾‹ä¹Ÿä¸ä¼šè¢« <code>ARC</code> é‡Šæ”¾ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">john = <span class="literal">nil</span></div><div class="line">unit4A = <span class="literal">nil</span></div></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œå½“ä½ æŠŠè¿™ä¸¤ä¸ªå˜é‡è®¾ä¸º <code>nil</code> æ—¶ï¼Œæ²¡æœ‰ä»»ä½•ä¸€ä¸ªååˆå§‹åŒ–å™¨è¢«è°ƒç”¨ã€‚å¾ªç¯å¼ºå¼•ç”¨ä¼šä¸€ç›´é˜»æ­¢ <code>Person</code> å’Œ <code>Apartment</code> ç±»å®ä¾‹çš„é‡Šæ”¾ï¼Œè¿™å°±åœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­é€ æˆäº†å†…å­˜æ³„æ¼ã€‚<br>åœ¨ä½ å°† <code>john</code> å’Œ <code>unit4A</code> èµ‹å€¼ä¸º <code>nil</code> åï¼Œå¼ºå¼•ç”¨å…³ç³»å¦‚ä¸‹å›¾ï¼š<br><img style="margin: auto" src="/2017/12/06/Swift-automatic-reference-counting/referenceCycle03_2x.png" alt="referenceCycle03_2x" title="å¼ºå¼•ç”¨ç¯è·¯"><br><code>Person</code> å’Œ <code>Apartment</code> å®ä¾‹ä¹‹é—´çš„å¼ºå¼•ç”¨å…³ç³»ä¿ç•™äº†ä¸‹æ¥å¹¶ä¸”ä¸ä¼šè¢«æ–­å¼€ã€‚</p>
<h3 id="è§£å†³å®ä¾‹ä¹‹é—´çš„å¾ªç¯å¼ºå¼•ç”¨"><a href="#è§£å†³å®ä¾‹ä¹‹é—´çš„å¾ªç¯å¼ºå¼•ç”¨" class="headerlink" title="è§£å†³å®ä¾‹ä¹‹é—´çš„å¾ªç¯å¼ºå¼•ç”¨"></a>è§£å†³å®ä¾‹ä¹‹é—´çš„å¾ªç¯å¼ºå¼•ç”¨</h3><p>Swift æä¾›äº†ä¸¤ç§åŠæ³•ç”¨æ¥è§£å†³ä½ åœ¨ä½¿ç”¨ç±»çš„å±æ€§æ—¶æ‰€é‡åˆ°çš„å¾ªç¯å¼ºå¼•ç”¨é—®é¢˜ï¼š<strong>å¼±å¼•ç”¨ï¼ˆ <code>weak</code> reference ï¼‰å’Œæ— ä¸»å¼•ç”¨ï¼ˆ <code>unowned</code> reference )</strong>ã€‚</p>
<p>å¼±å¼•ç”¨å’Œæ— ä¸»å¼•ç”¨å…è®¸å¾ªç¯å¼•ç”¨ä¸­çš„ä¸€ä¸ªå®ä¾‹å¼•ç”¨å¦å¤–ä¸€ä¸ªå®ä¾‹è€Œä¸ä¿æŒå¼ºå¼•ç”¨ã€‚è¿™æ ·å®ä¾‹èƒ½å¤Ÿäº’ç›¸å¼•ç”¨è€Œä¸äº§ç”Ÿå¾ªç¯å¼ºå¼•ç”¨ã€‚</p>
<p><em>å¯¹äºç”Ÿå‘½å‘¨æœŸä¸­ä¼šå˜ä¸º <code>nil</code> çš„å®ä¾‹ä½¿ç”¨å¼±å¼•ç”¨ã€‚ç›¸åï¼Œå¯¹äºåˆå§‹åŒ–èµ‹å€¼åå†ä¹Ÿä¸ä¼šè¢«èµ‹å€¼ä¸º nil çš„å®ä¾‹ï¼Œä½¿ç”¨æ— ä¸»å¼•ç”¨ã€‚</em>åœ¨å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œå½“å¼•ç”¨å¯èƒ½â€œæ²¡æœ‰å€¼â€çš„æ—¶å€™ï¼Œå°±ä½¿ç”¨å¼±å¼•ç”¨æ¥é¿å…å¾ªç¯å¼•ç”¨ã€‚å¦‚åŒåœ¨æ— ä¸»å¼•ç”¨ä¸­æè¿°çš„é‚£æ ·ï¼Œå¦‚æœå¼•ç”¨å§‹ç»ˆæœ‰å€¼ï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ— ä¸»å¼•ç”¨æ¥ä»£æ›¿ã€‚ä¸Šé¢çš„ <code>Apartment</code> ä¾‹å­ä¸­ï¼Œåœ¨å®ƒçš„å£°æ˜å‘¨æœŸä¸­ï¼Œæœ‰æ—¶æ˜¯â€æ²¡æœ‰å±…æ°‘â€çš„ï¼Œå› æ­¤é€‚åˆä½¿ç”¨å¼±å¼•ç”¨æ¥è§£å†³å¾ªç¯å¼ºå¼•ç”¨ã€‚</p>
<h4 id="å¼±å¼•ç”¨"><a href="#å¼±å¼•ç”¨" class="headerlink" title="å¼±å¼•ç”¨"></a>å¼±å¼•ç”¨</h4><p><em>å¼±å¼•ç”¨</em>ä¸ä¼šå¯¹å…¶å¼•ç”¨çš„å®ä¾‹ä¿æŒå¼ºå¼•ç”¨ï¼Œå› è€Œä¸ä¼šé˜»æ­¢ ARC é‡Šæ”¾è¢«å¼•ç”¨çš„å®ä¾‹ã€‚è¿™ä¸ªç‰¹æ€§é˜»æ­¢äº†å¼•ç”¨å˜ä¸ºå¾ªç¯å¼ºå¼•ç”¨ã€‚å£°æ˜å±æ€§æˆ–è€…å˜é‡æ—¶ï¼Œåœ¨å‰é¢åŠ ä¸Š <code>weak</code> å…³é”®å­—è¡¨æ˜è¿™æ˜¯ä¸€ä¸ªå¼±å¼•ç”¨ã€‚</p>
<p>ç”±äºå¼±å¼•ç”¨ä¸ä¼šå¼ºä¿æŒå¯¹å®ä¾‹çš„å¼•ç”¨ï¼Œæ‰€ä»¥è¯´å®ä¾‹è¢«é‡Šæ”¾äº†å¼±å¼•ç”¨ä»æ—§å¼•ç”¨ç€è¿™ä¸ªå®ä¾‹ä¹Ÿæ˜¯æœ‰å¯èƒ½çš„ã€‚å› æ­¤ï¼ŒARC ä¼šåœ¨è¢«å¼•ç”¨çš„å®ä¾‹è¢«é‡Šæ”¾æ—¶è‡ªåŠ¨åœ°è®¾ç½®å¼±å¼•ç”¨ä¸º <code>nil</code> ã€‚ç”±äºå¼±å¼•ç”¨éœ€è¦å…è®¸å®ƒä»¬çš„å€¼ä¸º <code>nil</code> ï¼Œå®ƒä»¬<strong>ä¸€å®šå¾—æ˜¯å¯é€‰ç±»å‹</strong>ã€‚</p>
<p>ä½ å¯ä»¥æ£€æŸ¥å¼±å¼•ç”¨çš„å€¼æ˜¯å¦å­˜åœ¨ï¼Œå°±åƒå…¶ä»–å¯é€‰é¡¹çš„å€¼ä¸€æ ·ï¼Œå¹¶ä¸”ä½ å°†æ°¸è¿œä¸ä¼šé‡åˆ°â€œé‡æŒ‡é’ˆâ€ã€‚</p>
<blockquote>
<p>åœ¨ ARC ç»™å¼±å¼•ç”¨è®¾ç½® <code>nil</code> æ—¶ä¸ä¼šè°ƒç”¨å±æ€§è§‚å¯Ÿè€…</p>
</blockquote>
<p>ä¸‹é¢çš„ä¾‹å­è·Ÿä¸Šé¢ <code>Person</code> å’Œ <code>Apartment</code> çš„ä¾‹å­ä¸€è‡´ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ã€‚è¿™æ¬¡ï¼Œ <code>Apartment</code> çš„ <code>tenant</code> å±æ€§è¢«å£°æ˜ä¸ºå¼±å¼•ç”¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123; <span class="keyword">self</span>.name = name &#125;</div><div class="line">    <span class="keyword">var</span> apartment: <span class="type">Apartment</span>?</div><div class="line">    <span class="keyword">deinit</span> &#123; <span class="built_in">print</span>(<span class="string">"<span class="subst">\(name)</span> is being deinitialized"</span>) &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Apartment</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> unit: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(unit: <span class="type">String</span>) &#123; <span class="keyword">self</span>.unit = unit &#125;</div><div class="line">    <span class="keyword">weak</span> <span class="keyword">var</span> tenant: <span class="type">Person</span>?</div><div class="line">    <span class="keyword">deinit</span> &#123; <span class="built_in">print</span>(<span class="string">"Apartment <span class="subst">\(unit)</span> is being deinitialized"</span>) &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸¤ä¸ªå˜é‡ï¼ˆ <code>john</code> å’Œ <code>unit4A</code> ï¼‰ä¹‹é—´çš„å¼ºå¼•ç”¨å’Œå…³è”åˆ›å»ºå¾—ä¸ä¸Šæ¬¡ç›¸åŒï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> john: <span class="type">Person</span>?</div><div class="line"><span class="keyword">var</span> unit4A: <span class="type">Apartment</span>?</div><div class="line"> </div><div class="line">john = <span class="type">Person</span>(name: <span class="string">"John Appleseed"</span>)</div><div class="line">unit4A = <span class="type">Apartment</span>(unit: <span class="string">"4A"</span>)</div><div class="line"> </div><div class="line">john!.apartment = unit4A</div><div class="line">unit4A!.tenant = john</div></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œä¸¤ä¸ªå…³è”åœ¨ä¸€èµ·çš„å®ä¾‹çš„å¼•ç”¨å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img style="margin: auto" src="/2017/12/06/Swift-automatic-reference-counting/weakReference01_2x.png" alt="weakReference01_2x" title="ç¤ºä¾‹å…³ç³»"><br><code>Person</code> å®ä¾‹ä¾ç„¶ä¿æŒå¯¹ <code>Apartment</code> å®ä¾‹çš„å¼ºå¼•ç”¨ï¼Œä½†æ˜¯ <code>Apartment</code> å®ä¾‹ç°åœ¨å¯¹ <code>Person</code> å®ä¾‹æ˜¯<strong>å¼±å¼•ç”¨</strong>ã€‚è¿™æ„å‘³ç€å½“ä½ æ–­å¼€ <code>john</code> å˜é‡æ‰€ä¿æŒçš„å¼ºå¼•ç”¨æ—¶ï¼Œå†ä¹Ÿæ²¡æœ‰æŒ‡å‘ <code>Person</code> å®ä¾‹çš„å¼ºå¼•ç”¨äº†ï¼Œç”±äºå†ä¹Ÿæ²¡æœ‰æŒ‡å‘ <code>Person</code> å®ä¾‹çš„å¼ºå¼•ç”¨ï¼Œè¯¥å®ä¾‹ä¼šè¢«é‡Šæ”¾ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">john = <span class="literal">nil</span></div><div class="line"><span class="comment">// prints "John Appleseed is being deinitialized"</span></div></pre></td></tr></table></figure>
<p><strong>**ç”±äºå†ä¹Ÿæ²¡æœ‰å¼ºå¼•ç”¨åˆ° <code>Person</code> å®ƒè¢«é‡Šæ”¾æ‰äº†å¹¶ä¸” <code>tenant</code> å±æ€§è¢«è®¾ç½®ä¸º <code>nil</code></strong> ï¼š<br><img style="margin: auto" src="/2017/12/06/Swift-automatic-reference-counting/weakReference02_2x.png" alt="weakReference02_2x" title="é‡Šæ”¾"><br>ç°åœ¨åªå‰©ä¸‹æ¥è‡ª <code>unit4A</code> å˜é‡å¯¹ <code>Apartment</code> å®ä¾‹çš„å¼ºå¼•ç”¨ã€‚å¦‚æœä½ æ‰“æ–­è¿™ä¸ªå¼ºå¼•ç”¨ï¼Œé‚£ä¹ˆ <code>Apartment</code> å®ä¾‹å°±å†ä¹Ÿæ²¡æœ‰å¼ºå¼•ç”¨äº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">unit4A = <span class="literal">nil</span></div><div class="line"><span class="comment">// prints "Apartment 4A is being deinitialized"</span></div></pre></td></tr></table></figure>
<p>ç”±äºå†ä¹Ÿæ²¡æœ‰æŒ‡å‘ <code>Apartment</code> å®ä¾‹çš„å¼ºå¼•ç”¨ï¼Œè¯¥å®ä¾‹ä¹Ÿä¼šè¢«é‡Šæ”¾ï¼š<br><img style="margin: auto" src="/2017/12/06/Swift-automatic-reference-counting/weakReference03_2x.png" alt="weakReference03_2x" title="å…¨éƒ¨é‡Šæ”¾"></p>
<blockquote>
<p>åœ¨ä½¿ç”¨åƒåœ¾å›æ”¶æœºåˆ¶çš„ç³»ç»Ÿä¸­ï¼Œç”±äºæ²¡æœ‰å¼ºå¼•ç”¨çš„å¯¹è±¡ä¼šåœ¨å†…å­˜æœ‰å‹åŠ›æ—¶è§¦å‘åƒåœ¾å›æ”¶è€Œè¢«é‡Šæ”¾ï¼Œ<strong>å¼±æŒ‡é’ˆæœ‰æ—¶ç”¨æ¥å®ç°ç®€å•çš„ç¼“å­˜æœºåˆ¶</strong>ã€‚æ€»ä¹‹ï¼Œ<em>å¯¹äº ARC æ¥è¯´ï¼Œä¸€æ—¦æœ€åçš„å¼ºå¼•ç”¨è¢«ç§»é™¤ï¼Œå€¼å°±ä¼šè¢«é‡Šæ”¾ï¼Œè¿™æ ·çš„è¯å¼±å¼•ç”¨å°±ä¸å†é€‚åˆè¿™ç±»ç”¨æ³•äº†</em>ã€‚</p>
</blockquote>
<h4 id="æ— ä¸»å¼•ç”¨"><a href="#æ— ä¸»å¼•ç”¨" class="headerlink" title="æ— ä¸»å¼•ç”¨"></a>æ— ä¸»å¼•ç”¨</h4><p>å’Œå¼±å¼•ç”¨ç±»ä¼¼ï¼Œ <em>æ— ä¸»å¼•ç”¨</em> ä¸ä¼šç‰¢ç‰¢ä¿æŒä½å¼•ç”¨çš„å®ä¾‹ã€‚ä½†æ˜¯ä¸åƒå¼±å¼•ç”¨ï¼Œæ€»ä¹‹ï¼Œæ— ä¸»å¼•ç”¨å‡å®šæ˜¯<strong>æ°¸è¿œ</strong>æœ‰å€¼çš„ã€‚å› æ­¤ï¼Œæ— ä¸»å¼•ç”¨æ€»æ˜¯è¢«å®šä¹‰ä¸º<strong>éå¯é€‰ç±»å‹</strong>ã€‚ä½ å¯ä»¥åœ¨å£°æ˜å±æ€§æˆ–è€…å˜é‡æ—¶ï¼Œåœ¨å‰é¢åŠ ä¸Šå…³é”®å­— <code>unowned</code> è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæ— ä¸»å¼•ç”¨ã€‚</p>
<p>ç”±äºæ— ä¸»å¼•ç”¨æ˜¯éå¯é€‰ç±»å‹ï¼Œä½ ä¸éœ€è¦åœ¨ä½¿ç”¨å®ƒçš„æ—¶å€™å°†å®ƒå±•å¼€ã€‚æ— ä¸»å¼•ç”¨æ€»æ˜¯å¯ä»¥ç›´æ¥è®¿é—®ã€‚ä¸è¿‡ ARC æ— æ³•åœ¨å®ä¾‹è¢«é‡Šæ”¾åå°†æ— ä¸»å¼•ç”¨è®¾ä¸º <code>nil</code> ï¼Œå› ä¸ºéå¯é€‰ç±»å‹çš„å˜é‡ä¸å…è®¸è¢«èµ‹å€¼ä¸º <code>nil</code> ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼š<br>å¦‚æœä½ è¯•å›¾åœ¨å®ä¾‹çš„è¢«é‡Šæ”¾åè®¿é—®æ— ä¸»å¼•ç”¨ï¼Œé‚£ä¹ˆä½ å°†è§¦å‘è¿è¡Œæ—¶é”™è¯¯ã€‚åªæœ‰åœ¨ä½ ç¡®ä¿å¼•ç”¨ä¼šä¸€ç›´å¼•ç”¨å®ä¾‹çš„æ—¶å€™æ‰ä½¿ç”¨æ— ä¸»å¼•ç”¨ã€‚</p>
<p>è¿˜è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ è¯•å›¾è®¿é—®å¼•ç”¨çš„å®ä¾‹å·²ç»è¢«é‡Šæ”¾äº†çš„æ— ä¸»å¼•ç”¨ï¼ŒSwift ä¼šç¡®ä¿ç¨‹åºç›´æ¥å´©æºƒã€‚ä½ ä¸ä¼šå› æ­¤è€Œé­é‡æ— æ³•é¢„æœŸçš„è¡Œä¸ºã€‚æ‰€ä»¥ä½ åº”å½“é¿å…è¿™æ ·çš„äº‹æƒ…å‘ç”Ÿã€‚</p>
</blockquote>
<p>ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ä¸¤ä¸ªç±»ï¼Œ <code>Customer</code> å’Œ <code>CreditCard</code> ï¼Œæ¨¡æ‹Ÿäº†é“¶è¡Œå®¢æˆ·å’Œå®¢æˆ·çš„ä¿¡ç”¨å¡ã€‚è¿™ä¸¤ä¸ªç±»ä¸­ï¼Œæ¯ä¸€ä¸ªéƒ½å°†å¦å¤–ä¸€ä¸ªç±»çš„å®ä¾‹ä½œä¸ºè‡ªèº«çš„å±æ€§ã€‚è¿™ç§å…³ç³»å¯èƒ½ä¼šé€ æˆå¾ªç¯å¼ºå¼•ç”¨ã€‚</p>
<p><code>Customer</code> å’Œ <code>CreditCard</code> ä¹‹é—´çš„å…³ç³»ä¸å‰é¢å¼±å¼•ç”¨ä¾‹å­ä¸­ <code>Apartment</code> å’Œ <code>Person</code> çš„å…³ç³»ç•¥å¾®ä¸åŒã€‚åœ¨è¿™ä¸ªæ•°æ®æ¨¡å‹ä¸­ï¼Œä¸€ä¸ªå®¢æˆ·å¯èƒ½æœ‰æˆ–è€…æ²¡æœ‰ä¿¡ç”¨å¡ï¼Œä½†æ˜¯ä¸€å¼ ä¿¡ç”¨å¡æ€»æ˜¯å…³è”ç€ä¸€ä¸ªå®¢æˆ·ã€‚ä¸ºäº†è¡¨ç¤ºè¿™ç§å…³ç³»ï¼Œ <code>Customer</code> ç±»æœ‰ä¸€ä¸ªå¯é€‰ç±»å‹çš„ <code>card</code> å±æ€§ï¼Œä½†æ˜¯ <code>CreditCard</code> ç±»æœ‰ä¸€ä¸ªéå¯é€‰ç±»å‹çš„ <code>customer</code> å±æ€§ã€‚</p>
<p>å¦å¤–ï¼Œæ–°çš„ <code>CreditCard</code> å®ä¾‹åªæœ‰é€šè¿‡ä¼ é€ <code>number</code> å€¼å’Œä¸€ä¸ª <code>customer</code> å®ä¾‹åˆ° <code>CreditCard</code> çš„åˆå§‹åŒ–å™¨æ‰èƒ½åˆ›å»ºã€‚è¿™å°±ç¡®ä¿äº† <code>CreditCard</code> å®ä¾‹åœ¨åˆ›å»ºæ—¶æ€»æ˜¯æœ‰ä¸ä¹‹å…³è”çš„ <code>customer</code> å®ä¾‹ã€‚</p>
<p>ç”±äºä¿¡ç”¨å¡æ€»æ˜¯å…³è”ç€ä¸€ä¸ªå®¢æˆ·ï¼Œå› æ­¤å°† <code>customer</code> å±æ€§å®šä¹‰ä¸º<em>æ— ä¸»å¼•ç”¨</em>ï¼Œä»¥é¿å…å¾ªç¯å¼ºå¼•ç”¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">var</span> card: <span class="type">CreditCard</span>?</div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">deinit</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"<span class="subst">\(name)</span> is being deinitialized"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CreditCard</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> number: <span class="type">UInt64</span></div><div class="line">    <span class="keyword">unowned</span> <span class="keyword">let</span> customer: <span class="type">Customer</span></div><div class="line">    <span class="keyword">init</span>(number: <span class="type">UInt64</span>, customer: <span class="type">Customer</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.number = number</div><div class="line">        <span class="keyword">self</span>.customer = customer</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">deinit</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Card #<span class="subst">\(number)</span> is being deinitialized"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸‹é¢çš„ä»£ç ç‰‡æ®µå®šä¹‰äº†ä¸€ä¸ªå« <code>john</code> çš„å¯é€‰ <code>Customer</code> å˜é‡ï¼Œç”¨æ¥ä¿å­˜æŸä¸ªç‰¹å®šå®¢æˆ·çš„å¼•ç”¨ã€‚ç”±äºæ˜¯å¯é€‰é¡¹ï¼Œæ‰€ä»¥å˜é‡è¢«åˆå§‹åŒ–ä¸º <code>nil</code> ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> john: <span class="type">Customer</span>?</div></pre></td></tr></table></figure>
<p>ç°åœ¨ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª <code>Customer</code> å®ä¾‹ï¼Œç”¨å®ƒåˆå§‹åŒ–å’Œåˆ†é…ä¸€ä¸ªæ–°çš„ <code>CreditCard</code> å®ä¾‹ä½œä¸º <code>customer</code> çš„ <code>card</code> å±æ€§ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">john = <span class="type">Customer</span>(name: <span class="string">"John Appleseed"</span>)</div><div class="line">john!.card = <span class="type">CreditCard</span>(number: <span class="number">1234_5678_9012_3456</span>ï¼Œ customer: john!)</div></pre></td></tr></table></figure>
<p>å¦‚ä¸‹å›¾ï¼Œæ˜¯ä½ å…³è”äº†ä¸¤ä¸ªå®ä¾‹åçš„å›¾ç¤ºå…³ç³»:<br><img style="margin: auto" src="/2017/12/06/Swift-automatic-reference-counting/unownedReference01_2x.png" alt="unownedReference01_2x" title="å…³è”å›¾"><br>ç°åœ¨ <code>Customer</code> å®ä¾‹å¯¹ <code>CreditCard</code> å®ä¾‹æœ‰ä¸€ä¸ªå¼ºå¼•ç”¨ï¼Œå¹¶ä¸” <code>CreditCard</code> å®ä¾‹å¯¹ <code>Customer</code> å®ä¾‹æœ‰ä¸€ä¸ªæ— ä¸»å¼•ç”¨ã€‚</p>
<p>ç”±äº <code>Customer</code> çš„æ— ä¸»å¼•ç”¨ï¼Œå½“ä½ æ–­å¼€ <code>john</code> å˜é‡æŒæœ‰çš„å¼ºå¼•ç”¨æ—¶ï¼Œé‚£ä¹ˆå°±å†ä¹Ÿæ²¡æœ‰æŒ‡å‘ <code>Customer</code> å®ä¾‹çš„å¼ºå¼•ç”¨äº†ã€‚<br><img style="margin: auto" src="/2017/12/06/Swift-automatic-reference-counting/unownedReference02_2x.png" alt="unownedReference02_2x" title="æ–­å¼€Johnçš„å¼ºå¼•ç”¨"><br>å› ä¸ºä¸å†æœ‰ <code>Customer</code> çš„å¼ºå¼•ç”¨ï¼Œè¯¥å®ä¾‹è¢«é‡Šæ”¾äº†ã€‚å…¶åï¼Œå†ä¹Ÿæ²¡æœ‰æŒ‡å‘ <code>CreditCard</code> å®ä¾‹çš„å¼ºå¼•ç”¨ï¼Œè¯¥å®ä¾‹ä¹Ÿéšä¹‹è¢«é‡Šæ”¾äº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">john = <span class="literal">nil</span></div><div class="line"><span class="comment">// prints "John Appleseed is being deinitialized"</span></div><div class="line"><span class="comment">// prints "Card #1234567890123456 is being deinitialized"</span></div></pre></td></tr></table></figure>
<blockquote>
<p>ä¸Šè¾¹çš„ä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨å®‰å…¨æ— ä¸»å¼•ç”¨ã€‚Swift è¿˜ä¸ºä½ éœ€è¦å…³é—­è¿è¡Œæ—¶å®‰å…¨æ£€æŸ¥çš„æƒ…å†µæä¾›äº†ä¸å®‰å…¨æ— ä¸»å¼•ç”¨â€”â€”ä¸¾ä¾‹æ¥è¯´ï¼Œæ€§èƒ½ä¼˜åŒ–çš„æ—¶å€™ã€‚å¯¹äºæ‰€æœ‰çš„ä¸å®‰å…¨æ“ä½œï¼Œä½ è¦è‡ªå·±è´Ÿè´£æ£€æŸ¥ä»£ç å®‰å…¨æ€§ã€‚</p>
<p>ä½¿ç”¨ <code>unowned(unsafe)</code> æ¥æ˜ç¡®ä½¿ç”¨äº†ä¸€ä¸ªä¸å®‰å…¨æ— ä¸»å¼•ç”¨ã€‚å¦‚æœä½ åœ¨å®ä¾‹çš„å¼•ç”¨è¢«é‡Šæ”¾åè®¿é—®è¿™ä¸ªä¸å®‰å…¨æ— ä¸»å¼•ç”¨ï¼Œä½ çš„ç¨‹åºå°±ä¼šå°è¯•è®¿é—®è¿™ä¸ªå®ä¾‹æ›¾ä»Šå­˜åœ¨è¿‡çš„å†…å­˜åœ°å€ï¼Œè¿™å°±æ˜¯ä¸å®‰å…¨æ“ä½œã€‚</p>
</blockquote>
<h4 id="æ— ä¸»å¼•ç”¨å’Œéšå¼å±•å¼€çš„å¯é€‰å±æ€§"><a href="#æ— ä¸»å¼•ç”¨å’Œéšå¼å±•å¼€çš„å¯é€‰å±æ€§" class="headerlink" title="æ— ä¸»å¼•ç”¨å’Œéšå¼å±•å¼€çš„å¯é€‰å±æ€§"></a>æ— ä¸»å¼•ç”¨å’Œéšå¼å±•å¼€çš„å¯é€‰å±æ€§</h4><p>ä¸Šé¢å¼±å¼•ç”¨å’Œæ— ä¸»å¼•ç”¨ä¾‹å­æ¶µç›–äº†ä¸¤ç§å¸¸ç”¨çš„éœ€è¦æ‰“ç ´å¾ªç¯å¼ºå¼•ç”¨çš„åœºæ™¯ã€‚</p>
<p><code>Person</code> å’Œ <code>Apartment</code> çš„ä¾‹å­å±•ç¤ºäº†ä¸¤ä¸ªå±æ€§çš„å€¼éƒ½å…è®¸ä¸º <code>nil</code> ï¼Œå¹¶ä¼šæ½œåœ¨çš„äº§ç”Ÿå¾ªç¯å¼ºå¼•ç”¨ã€‚<strong>è¿™ç§åœºæ™¯æœ€é€‚åˆç”¨å¼±å¼•ç”¨æ¥è§£å†³</strong>ã€‚</p>
<p><code>Customer</code> å’Œ <code>CreditCard</code> çš„ä¾‹å­å±•ç¤ºäº†ä¸€ä¸ªå±æ€§çš„å€¼å…è®¸ä¸º <code>nil</code> ï¼Œè€Œå¦ä¸€ä¸ªå±æ€§çš„å€¼ä¸å…è®¸ä¸º <code>nil</code> ï¼Œè¿™ä¹Ÿå¯èƒ½å¯¼è‡´å¾ªç¯å¼ºå¼•ç”¨ã€‚<strong>è¿™ç§åœºæ™¯æœ€å¥½ä½¿ç”¨æ— ä¸»å¼•ç”¨æ¥è§£å†³</strong>ã€‚</p>
<p>æ€»ä¹‹ï¼Œ è¿˜æœ‰ç¬¬ä¸‰ç§åœºæ™¯ï¼Œåœ¨è¿™ç§åœºæ™¯ä¸­ï¼Œä¸¤ä¸ªå±æ€§éƒ½å¿…é¡»æœ‰å€¼ï¼Œå¹¶ä¸”åˆå§‹åŒ–å®Œæˆåæ°¸è¿œä¸ä¼šä¸º <code>nil</code> ã€‚åœ¨è¿™ç§åœºæ™¯ä¸­ï¼Œ<strong>éœ€è¦ä¸€ä¸ªç±»ä½¿ç”¨æ— ä¸»å±æ€§ï¼Œè€Œå¦å¤–ä¸€ä¸ªç±»ä½¿ç”¨éšå¼å±•å¼€çš„å¯é€‰å±æ€§</strong>ã€‚<br>ä¸€æ—¦åˆå§‹åŒ–å®Œæˆï¼Œè¿™ä¸¤ä¸ªå±æ€§èƒ½è¢«ç›´æ¥è®¿é—®(ä¸éœ€è¦å¯é€‰å±•å¼€)ï¼ŒåŒæ—¶é¿å…äº†å¾ªç¯å¼•ç”¨ã€‚è¿™ä¸€èŠ‚å°†ä¸ºä½ å±•ç¤ºå¦‚ä½•å»ºç«‹è¿™ç§å…³ç³»ã€‚</p>
<p>ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ä¸¤ä¸ªç±»ï¼Œ <code>Country</code> å’Œ <code>City</code> ï¼Œæ¯ä¸ªç±»å°†å¦å¤–ä¸€ä¸ªç±»çš„å®ä¾‹ä¿å­˜ä¸ºå±æ€§ã€‚åœ¨è¿™ä¸ªæ•°æ®æ¨¡å‹ä¸­ï¼Œæ¯ä¸ªå›½å®¶å¿…é¡»æœ‰é¦–éƒ½ï¼Œæ¯ä¸ªåŸå¸‚å¿…é¡»å±äºä¸€ä¸ªå›½å®¶ã€‚ä¸ºäº†å®ç°è¿™ç§å…³ç³»ï¼Œ <code>Country</code> ç±»æ‹¥æœ‰ä¸€ä¸ª <code>capitalCity</code> å±æ€§ï¼Œè€Œ <code>City</code> ç±»æœ‰ä¸€ä¸ª <code>country</code> å±æ€§ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Country</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">var</span> capiitalCity: <span class="type">City</span>!</div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>, capitalName: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">        <span class="keyword">self</span>.capiitalCity = <span class="type">City</span>(name: capitalName, country: <span class="keyword">self</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">City</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">unowned</span> <span class="keyword">let</span> country: <span class="type">Country</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>, country: <span class="type">Country</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">        <span class="keyword">self</span>.country = country</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸ºäº†å»ºç«‹ä¸¤ä¸ªç±»çš„ä¾èµ–å…³ç³»ï¼Œ <code>City</code> çš„åˆå§‹åŒ–å™¨æ¥æ”¶ä¸€ä¸ª <code>Country</code> å®ä¾‹ï¼Œå¹¶ä¸”å°†å®ä¾‹ä¿å­˜åˆ° <code>country</code> å±æ€§ã€‚</p>
<p><code>Country</code> çš„åˆå§‹åŒ–å™¨è°ƒç”¨äº† <code>City</code> çš„åˆå§‹åŒ–å™¨ã€‚æ€»ä¹‹ï¼Œå¦‚åŒåœ¨ä¸¤æ®µå¼åˆå§‹åŒ–ä¸­æè¿°çš„é‚£æ ·ï¼Œåªæœ‰ <code>Country</code> çš„å®ä¾‹å®Œå…¨åˆå§‹åŒ–å®Œåï¼Œ <code>Country</code> çš„åˆå§‹åŒ–å™¨æ‰èƒ½æŠŠ <code>self</code> ä¼ ç»™ <code>City</code> çš„åˆå§‹åŒ–å™¨ã€‚</p>
<p>ä¸ºäº†æ»¡è¶³è¿™ç§éœ€æ±‚ï¼Œé€šè¿‡åœ¨ç±»å‹ç»“å°¾å¤„åŠ ä¸Šæ„Ÿå¹å·ï¼ˆ<code>City!</code> ï¼‰çš„æ–¹å¼ï¼Œä»¥å£°æ˜ <code>Country</code> çš„ <code>capitalCity</code> å±æ€§ä¸ºä¸€ä¸ªéšå¼å±•å¼€çš„å¯é€‰å±æ€§ã€‚å¦‚åŒåœ¨éšå¼å±•å¼€å¯é€‰é¡¹ä¸­æè¿°çš„é‚£æ ·ï¼Œè¿™æ„å‘³ç€åƒå…¶ä»–å¯é€‰é¡¹ä¸€æ ·ï¼Œ <strong><code>capitalCity</code> å±æ€§æœ‰ä¸€ä¸ªé»˜è®¤å€¼ <code>nil</code></strong> ï¼Œä½†æ˜¯ä¸éœ€è¦å±•å¼€å®ƒçš„å€¼å°±èƒ½è®¿é—®å®ƒã€‚</p>
<p>ç”±äº <code>capitalCity</code> é»˜è®¤å€¼ä¸º <code>nil</code> ï¼Œä¸€æ—¦ <code>Country</code> çš„å®ä¾‹åœ¨åˆå§‹åŒ–å™¨ä¸­ç»™ <code>name</code> å±æ€§èµ‹å€¼åï¼Œæ•´ä¸ªåˆå§‹åŒ–è¿‡ç¨‹å°±å®Œæˆäº†ã€‚è¿™æ„å‘³ç€ä¸€æ—¦ <code>name</code> å±æ€§è¢«èµ‹å€¼åï¼Œ <code>Country</code> çš„åˆå§‹åŒ–å™¨å°±èƒ½å¼•ç”¨å¹¶ä¼ é€’éšå¼çš„ <code>self</code> ã€‚ <code>Country</code> çš„åˆå§‹åŒ–å™¨åœ¨èµ‹å€¼ <code>capitalCity</code> æ—¶ï¼Œå°±èƒ½å°† <code>self</code> ä½œä¸ºå‚æ•°ä¼ é€’ç»™ <code>City</code> çš„åˆå§‹åŒ–å™¨ã€‚</p>
<p>ä»¥ä¸Šçš„æ„ä¹‰åœ¨äºä½ å¯ä»¥é€šè¿‡ä¸€æ¡è¯­å¥åŒæ—¶åˆ›å»º <code>Country</code> å’Œ <code>City</code> çš„å®ä¾‹ï¼Œè€Œä¸äº§ç”Ÿå¾ªç¯å¼ºå¼•ç”¨ï¼Œå¹¶ä¸” <code>capitalCity</code> çš„å±æ€§èƒ½è¢«ç›´æ¥è®¿é—®ï¼Œè€Œä¸éœ€è¦é€šè¿‡æ„Ÿå¹å·æ¥å±•å¼€å®ƒçš„å¯é€‰å€¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> country = <span class="type">Country</span>(name: <span class="string">"China"</span>, capitalName: <span class="string">"Beijing"</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"<span class="subst">\(country.name)</span>`s capital city is called <span class="subst">\(country.capiitalCity.name)</span>"</span>)</div><div class="line"><span class="comment">// prints "China`s capital city is called Beijing"</span></div></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œä½¿ç”¨éšå¼å±•å¼€çš„å¯é€‰å±æ€§çš„æ„ä¹‰åœ¨äºæ»¡è¶³äº†ä¸¤æ®µå¼ç±»åˆå§‹åŒ–å™¨çš„éœ€æ±‚ã€‚ <code>capitalCity</code> å±æ€§åœ¨åˆå§‹åŒ–å®Œæˆåï¼Œå°±èƒ½åƒéå¯é€‰é¡¹ä¸€æ ·ä½¿ç”¨å’Œå­˜å–åŒæ—¶è¿˜é¿å…äº†å¾ªç¯å¼ºå¼•ç”¨ã€‚</p>
<h3 id="é—­åŒ…çš„å¾ªç¯å¼ºå¼•ç”¨"><a href="#é—­åŒ…çš„å¾ªç¯å¼ºå¼•ç”¨" class="headerlink" title="é—­åŒ…çš„å¾ªç¯å¼ºå¼•ç”¨"></a>é—­åŒ…çš„å¾ªç¯å¼ºå¼•ç”¨</h3><p>ä¸Šé¢æˆ‘ä»¬çœ‹åˆ°äº†å¾ªç¯å¼ºå¼•ç”¨æ˜¯å¦‚ä½•åœ¨ä¸¤ä¸ªå®ä¾‹å±æ€§äº’ç›¸ä¿æŒå¯¹æ–¹çš„å¼ºå¼•ç”¨æ—¶äº§ç”Ÿçš„ï¼Œè¿˜çŸ¥é“äº†å¦‚ä½•ç”¨å¼±å¼•ç”¨å’Œæ— ä¸»å¼•ç”¨æ¥æ‰“ç ´è¿™äº›å¾ªç¯å¼ºå¼•ç”¨ã€‚</p>
<p>å¾ªç¯å¼ºå¼•ç”¨è¿˜ä¼šå‡ºç°åœ¨ä½ æŠŠä¸€ä¸ªé—­åŒ…åˆ†é…ç»™ç±»å®ä¾‹å±æ€§çš„æ—¶å€™ï¼Œå¹¶ä¸”è¿™ä¸ªé—­åŒ…ä¸­åˆæ•è·äº†è¿™ä¸ªå®ä¾‹ã€‚æ•è·å¯èƒ½å‘ç”Ÿäºè¿™ä¸ªé—­åŒ…å‡½æ•°ä½“ä¸­è®¿é—®äº†å®ä¾‹çš„æŸä¸ªå±æ€§ï¼Œæ¯”å¦‚ <code>self.someProperty</code> ï¼Œæˆ–è€…è¿™ä¸ªé—­åŒ…è°ƒç”¨äº†ä¸€ä¸ªå®ä¾‹çš„æ–¹æ³•ï¼Œä¾‹å¦‚ <code>self.someMethod()</code> ã€‚è¿™ä¸¤ç§æƒ…å†µéƒ½å¯¼è‡´äº†é—­åŒ… â€œæ•è·â€äº†  <code>self</code> ï¼Œä»è€Œäº§ç”Ÿäº†å¾ªç¯å¼ºå¼•ç”¨ã€‚</p>
<p>å¾ªç¯å¼ºå¼•ç”¨çš„äº§ç”Ÿï¼Œæ˜¯å› ä¸º<em>é—­åŒ…å’Œç±»ç›¸ä¼¼</em>ï¼Œéƒ½æ˜¯<strong>å¼•ç”¨ç±»å‹</strong>ã€‚å½“ä½ æŠŠé—­åŒ…èµ‹å€¼ç»™äº†ä¸€ä¸ªå±æ€§ï¼Œä½ å®é™…ä¸Šæ˜¯æŠŠä¸€ä¸ªå¼•ç”¨èµ‹å€¼ç»™äº†è¿™ä¸ªé—­åŒ…ã€‚å®è´¨ä¸Šï¼Œè¿™è·Ÿä¹‹å‰ä¸Šé¢çš„é—®é¢˜æ˜¯ä¸€æ ·çš„â€”â€”<em>ä¸¤ä¸ªå¼ºå¼•ç”¨è®©å½¼æ­¤ä¸€ç›´æœ‰æ•ˆ</em>ã€‚æ€»ä¹‹ï¼Œå’Œä¸¤ä¸ªç±»å®ä¾‹ä¸åŒï¼Œè¿™æ¬¡ä¸€ä¸ªæ˜¯ç±»å®ä¾‹å’Œä¸€ä¸ªé—­åŒ…äº’ç›¸å¼•ç”¨ã€‚</p>
<p>Swift æä¾›äº†ä¸€ç§ä¼˜é›…çš„æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç§°ä¹‹ä¸º<strong>é—­åŒ…æ•è·åˆ—è¡¨ï¼ˆ closuer capture list ï¼‰</strong>ã€‚ä¸è¿‡ï¼Œåœ¨å­¦ä¹ å¦‚ä½•ç”¨é—­åŒ…æ•è·åˆ—è¡¨æ‰“ç ´å¾ªç¯å¼ºå¼•ç”¨ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆæ¥äº†è§£ä¸€ä¸‹è¿™ä¸ªå¾ªç¯å¼ºå¼•ç”¨æ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Œè¿™å¯¹æˆ‘ä»¬å¾ˆæœ‰å¸®åŠ©ã€‚</p>
<p>ä¸‹é¢çš„ä¾‹å­ä¸ºä½ å±•ç¤ºäº†å½“ä¸€ä¸ªé—­åŒ…å¼•ç”¨äº† <code>self</code> åæ˜¯å¦‚ä½•äº§ç”Ÿä¸€ä¸ªå¾ªç¯å¼ºå¼•ç”¨çš„ã€‚ä¾‹å­ä¸­å®šä¹‰äº†ä¸€ä¸ªå« <code>HTMLElement</code> çš„ç±»ï¼Œç”¨ä¸€ç§ç®€å•çš„æ¨¡å‹è¡¨ç¤º <code>HTML</code> ä¸­çš„ä¸€ä¸ªå•ç‹¬çš„å…ƒç´ ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">HTMLElement</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">let</span> text: <span class="type">String</span>?</div><div class="line">    </div><div class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> asHTML: () -&gt; <span class="type">String</span> = &#123;</div><div class="line">        <span class="keyword">if</span> <span class="keyword">let</span> text = <span class="keyword">self</span>.text &#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">"&lt;<span class="subst">\(<span class="keyword">self</span>.name)</span>&gt;<span class="subst">\(text)</span>&lt;/<span class="subst">\(<span class="keyword">self</span>.name)</span>&gt;"</span></div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">"&lt;<span class="subst">\(<span class="keyword">self</span>.name)</span>&gt;"</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>, text: <span class="type">String</span>? = <span class="literal">nil</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">        <span class="keyword">self</span>.text = text</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">deinit</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"<span class="subst">\(name)</span> is being deinitiallized"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>HTMLElement</code> ç±»å®šä¹‰äº†ä¸€ä¸ª <code>name</code> å±æ€§æ¥è¡¨ç¤ºè¿™ä¸ªå…ƒç´ çš„åç§°ï¼Œä¾‹å¦‚è¡¨ç¤ºæ ‡é¢˜å…ƒç´ çš„ â€œh1â€ ã€ä»£è¡¨æ®µè½å…ƒç´ çš„ â€œpâ€ ã€æˆ–è€…ä»£è¡¨æ¢è¡Œå…ƒç´ çš„ â€œbrâ€ ã€‚ <code>HTMLElement</code> è¿˜å®šä¹‰äº†ä¸€ä¸ªå¯é€‰çš„å±æ€§ <code>text</code> ï¼Œå®ƒå¯ä»¥ç”¨æ¥è®¾ç½®å’Œå±•ç° HTML  å…ƒç´ çš„æ–‡æœ¬ã€‚</p>
<p>é™¤äº†ä¸Šé¢çš„ä¸¤ä¸ªå±æ€§ï¼Œ <code>HTMLElement</code> è¿˜å®šä¹‰äº†ä¸€ä¸ª <code>lazy</code> å±æ€§ <code>asHTML</code> ã€‚è¿™ä¸ªå±æ€§å¼•ç”¨äº†ä¸€ä¸ªå°† <code>name</code> å’Œ <code>text</code> ç»„åˆæˆ HTML  å­—ç¬¦ä¸²ç‰‡æ®µçš„é—­åŒ…ã€‚è¯¥å±æ€§æ˜¯ <code>Void -&gt; String</code> ç±»å‹ï¼Œæˆ–è€…å¯ä»¥ç†è§£ä¸ºâ€œä¸€ä¸ªæ²¡æœ‰å‚æ•°ï¼Œä½†è¿”å› <code>String</code> çš„å‡½æ•°â€ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œé—­åŒ…èµ‹å€¼ç»™äº† <code>asHTML</code> å±æ€§ï¼Œè¿™ä¸ªé—­åŒ…è¿”å›ä¸€ä¸ªä»£è¡¨ HTML æ ‡ç­¾çš„å­—ç¬¦ä¸²ã€‚å¦‚æœ <code>text</code> å€¼å­˜åœ¨ï¼Œè¯¥æ ‡ç­¾å°±åŒ…å«å¯é€‰å€¼ <code>text</code> ï¼›å¦‚æœ <code>text</code> ä¸å­˜åœ¨ï¼Œè¯¥æ ‡ç­¾å°±ä¸åŒ…å«æ–‡æœ¬ã€‚å¯¹äºæ®µè½å…ƒç´ ï¼Œæ ¹æ® <code>text</code> æ˜¯ â€œsome textâ€ è¿˜æ˜¯ <code>nil</code> ï¼Œé—­åŒ…ä¼šè¿”å› <code>&quot;&lt;p&gt;some text&lt;/p&gt;&quot; æˆ–è€… &quot;&lt;p /&gt;&quot;</code> ã€‚</p>
<p>å¯ä»¥åƒå®ä¾‹æ–¹æ³•é‚£æ ·å»å‘½åã€ä½¿ç”¨ <code>asHTML</code> å±æ€§ã€‚æ€»ä¹‹ï¼Œç”±äº <code>asHTML</code> æ˜¯é—­åŒ…è€Œä¸æ˜¯å®ä¾‹æ–¹æ³•ï¼Œå¦‚æœä½ æƒ³æ”¹å˜ç‰¹å®šå…ƒç´ çš„ HTML å¤„ç†çš„è¯ï¼Œå¯ä»¥ç”¨è‡ªå®šä¹‰çš„é—­åŒ…æ¥å–ä»£é»˜è®¤å€¼ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> heading = <span class="type">HTMLElement</span>(name: <span class="string">"h1"</span>)</div><div class="line"><span class="keyword">let</span> defaultText = <span class="string">"some default text"</span></div><div class="line">heading.asHTML = &#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">"&lt;<span class="subst">\(heading.name)</span>&gt;<span class="subst">\(heading.text ?? defaultText)</span>&lt;/<span class="subst">\(heading.name)</span>&gt;"</span></div><div class="line">&#125;</div><div class="line"><span class="built_in">print</span>(heading.asHTML())</div><div class="line"><span class="comment">// prints "&lt;h1&gt;some default text&lt;/h1&gt;"</span></div></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„:<br> å£°æ˜ä¸º lazy å±æ€§ï¼Œå› ä¸ºåªæœ‰å½“å…ƒç´ ç¡®å®éœ€è¦å¤„ç†ä¸º HTML è¾“å‡ºçš„å­—ç¬¦ä¸²æ—¶ï¼Œæ‰éœ€è¦ä½¿ç”¨ asHTML ã€‚å®é™…ä¸Š asHTML æ˜¯å»¶è¿ŸåŠ è½½å±æ€§æ„å‘³ç€ä½ åœ¨é»˜è®¤çš„é—­åŒ…ä¸­å¯ä»¥ä½¿ç”¨ self ï¼Œå› ä¸ºåªæœ‰å½“åˆå§‹åŒ–å®Œæˆä»¥åŠ self ç¡®å®å­˜åœ¨åï¼Œæ‰èƒ½è®¿é—®å»¶è¿ŸåŠ è½½å±æ€§ã€‚</p>
</blockquote>
<p><code>HTMLElement</code> ç±»åªæä¾›ä¸€ä¸ªåˆå§‹åŒ–å™¨ï¼Œé€šè¿‡ <code>name</code> å’Œ <code>text</code> ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰å‚æ•°æ¥åˆå§‹åŒ–ä¸€ä¸ªå…ƒç´ ã€‚è¯¥ç±»ä¹Ÿå®šä¹‰äº†ä¸€ä¸ªåˆå§‹åŒ–å™¨ï¼Œå½“ <code>HTMLElement</code> å®ä¾‹è¢«é‡Šæ”¾æ—¶æ‰“å°ä¸€æ¡æ¶ˆæ¯ã€‚</p>
<p>ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†å¦‚ä½•ç”¨ <code>HTMLElement</code> ç±»åˆ›å»ºå®ä¾‹å¹¶æ‰“å°æ¶ˆæ¯ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> paragraph: <span class="type">HTMLElement</span>? = <span class="type">HTMLElement</span>(name: <span class="string">"p"</span>, text: <span class="string">"hello, world"</span>)</div><div class="line"><span class="built_in">print</span>(paragraph!.asHTML())</div><div class="line"><span class="comment">// prints"hello, world"</span></div></pre></td></tr></table></figure>
<blockquote>
<p>ä¸Šé¢çš„ <code>paragraph</code> å˜é‡å®šä¹‰ä¸ºå¯é€‰ <code>HTMLElement</code> ï¼Œå› æ­¤æˆ‘ä»¬æ¥ä¸‹æ¥å¯ä»¥èµ‹å€¼ <code>nil</code> ç»™å®ƒæ¥æ¼”ç¤ºå¾ªç¯å¼ºå¼•ç”¨ã€‚</p>
</blockquote>
<p>ä¸å¹¸çš„æ˜¯ï¼Œä¸Šé¢å†™çš„ <code>HTMLElement</code> ç±»äº§ç”Ÿäº†ç±»å®ä¾‹å’Œ <code>asHTML</code> é»˜è®¤å€¼çš„é—­åŒ…ä¹‹é—´çš„å¾ªç¯å¼ºå¼•ç”¨ã€‚å¾ªç¯å¼ºå¼•ç”¨å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img style="margin: auto" src="/2017/12/06/Swift-automatic-reference-counting/closureReferenceCycle01_2x.png" alt="closureReferenceCycle01_2x" title="é—­åŒ…çš„å¼ºå¼•ç”¨å…³ç³»å›¾"><br>å®ä¾‹çš„ <code>asHTML</code> å±æ€§æŒæœ‰é—­åŒ…çš„å¼ºå¼•ç”¨ã€‚ä½†æ˜¯ï¼Œé—­åŒ…åœ¨å…¶é—­åŒ…ä½“å†…ä½¿ç”¨äº† <code>self</code> ï¼ˆå¼•ç”¨äº† <code>self.name</code> å’Œ <code>self.text</code> ï¼‰ï¼Œå› æ­¤é—­åŒ…æ•è·äº† <code>self</code> ï¼Œè¿™æ„å‘³ç€é—­åŒ…åˆåè¿‡æ¥æŒæœ‰äº† <code>HTMLElement</code> å®ä¾‹çš„å¼ºå¼•ç”¨ã€‚è¿™æ ·ä¸¤ä¸ªå¯¹è±¡å°±äº§ç”Ÿäº†å¾ªç¯å¼ºå¼•ç”¨ã€‚</p>
<blockquote>
<p>å°½ç®¡é—­åŒ…å¤šæ¬¡å¼•ç”¨äº† <code>self</code> ï¼Œå®ƒåªæ•è· <code>HTMLElement</code> å®ä¾‹çš„ä¸€ä¸ªå¼ºå¼•ç”¨ã€‚</p>
</blockquote>
<p>å¦‚æœè®¾ç½® <code>paragraph</code> å˜é‡ä¸º <code>nil</code> ï¼Œæ‰“ç ´å®ƒæŒæœ‰çš„ <code>HTMLElement</code> å®ä¾‹çš„å¼ºå¼•ç”¨ï¼Œ <code>HTMLElement</code> å®ä¾‹å’Œå®ƒçš„é—­åŒ…éƒ½ä¸ä¼šè¢«é‡Šæ”¾ï¼Œä¹Ÿæ˜¯å› ä¸ºå¾ªç¯å¼ºå¼•ç”¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">paragraph = <span class="literal">nil</span></div></pre></td></tr></table></figure>
<p>æ³¨æ„ <code>HTMLElement</code> çš„ååˆå§‹åŒ–å™¨ä¸­çš„æ¶ˆæ¯å¹¶æ²¡æœ‰è¢«æ‰“å°ï¼Œè¯æ˜äº† <code>HTMLElement</code> å®ä¾‹å¹¶æ²¡æœ‰è¢«é”€æ¯ã€‚</p>
<h3 id="è§£å†³é—­åŒ…çš„å¾ªç¯å¼ºå¼•ç”¨"><a href="#è§£å†³é—­åŒ…çš„å¾ªç¯å¼ºå¼•ç”¨" class="headerlink" title="è§£å†³é—­åŒ…çš„å¾ªç¯å¼ºå¼•ç”¨"></a>è§£å†³é—­åŒ…çš„å¾ªç¯å¼ºå¼•ç”¨</h3><p>ä½ å¯ä»¥é€šè¿‡å®šä¹‰æ•è·åˆ—è¡¨ä½œä¸ºé—­åŒ…çš„å®šä¹‰æ¥è§£å†³åœ¨é—­åŒ…å’Œç±»å®ä¾‹ä¹‹é—´çš„å¾ªç¯å¼ºå¼•ç”¨ã€‚æ•è·åˆ—è¡¨å®šä¹‰äº†å½“åœ¨é—­åŒ…ä½“é‡Œæ•è·ä¸€ä¸ªæˆ–å¤šä¸ªå¼•ç”¨ç±»å‹çš„è§„åˆ™ã€‚æ­£å¦‚åœ¨ä¸¤ä¸ªç±»å®ä¾‹ä¹‹é—´çš„å¾ªç¯å¼ºå¼•ç”¨ï¼Œå£°æ˜æ¯ä¸ªæ•è·çš„å¼•ç”¨ä¸ºå¼±å¼•ç”¨æˆ–æ— ä¸»å¼•ç”¨è€Œä¸æ˜¯å¼ºå¼•ç”¨ã€‚åº”å½“æ ¹æ®ä»£ç å…³ç³»æ¥å†³å®šä½¿ç”¨å¼±å¼•ç”¨è¿˜æ˜¯æ— ä¸»å¼•ç”¨ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šSwift è¦æ±‚ä½ åœ¨é—­åŒ…ä¸­å¼•ç”¨selfæˆå‘˜æ—¶ä½¿ç”¨ self.someProperty æˆ–è€… self.someMethod ï¼ˆè€Œä¸åªæ˜¯ someProperty æˆ– someMethod ï¼‰ã€‚è¿™æœ‰åŠ©äºæé†’ä½ å¯èƒ½ä¼šä¸€ä¸å°å¿ƒå°±æ•è·äº† self ã€‚</p>
</blockquote>
<h4 id="å®šä¹‰æ•è·åˆ—è¡¨"><a href="#å®šä¹‰æ•è·åˆ—è¡¨" class="headerlink" title="å®šä¹‰æ•è·åˆ—è¡¨"></a>å®šä¹‰æ•è·åˆ—è¡¨</h4><p>æ•è·åˆ—è¡¨ä¸­çš„æ¯ä¸€é¡¹éƒ½ç”± <code>weak</code> æˆ– <code>unowned</code> å…³é”®å­—ä¸ç±»å®ä¾‹çš„å¼•ç”¨ï¼ˆå¦‚ <code>self</code> ï¼‰æˆ–åˆå§‹åŒ–è¿‡çš„å˜é‡ï¼ˆå¦‚<code>delegate = self.delegate!</code> ï¼‰æˆå¯¹ç»„æˆã€‚<em>è¿™äº›é¡¹å†™åœ¨æ–¹æ‹¬å·ä¸­ç”¨é€—å·åˆ†å¼€</em>ã€‚</p>
<p>æŠŠæ•è·åˆ—è¡¨æ”¾åœ¨å½¢å¼å‚æ•°å’Œè¿”å›ç±»å‹å‰è¾¹ï¼Œå¦‚æœå®ƒä»¬å­˜åœ¨çš„è¯ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">lazy</span> <span class="keyword">var</span> someClosure: (<span class="type">Int</span>, <span class="type">String</span>) -&gt; <span class="type">String</span> = &#123;</div><div class="line">   [<span class="keyword">unowned</span> <span class="keyword">self</span>, <span class="keyword">weak</span> delegate = <span class="keyword">self</span>.delegate!] <span class="keyword">in</span></div><div class="line">    <span class="comment">//closure body goes here</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœé—­åŒ…æ²¡æœ‰æŒ‡æ˜å½¢å¼å‚æ•°åˆ—è¡¨æˆ–è€…è¿”å›ç±»å‹ï¼Œæ˜¯å› ä¸ºå®ƒä»¬ä¼šé€šè¿‡ä¸Šä¸‹æ–‡æ¨æ–­ï¼Œé‚£ä¹ˆå°±æŠŠæ•è·åˆ—è¡¨æ”¾åœ¨å…³é”®å­— <code>in</code> å‰è¾¹ï¼Œé—­åŒ…æœ€å¼€å§‹çš„åœ°æ–¹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">lazy</span> <span class="keyword">var</span> someClosure: () -&gt; <span class="type">String</span> = &#123;</div><div class="line">    [<span class="keyword">unowned</span> <span class="keyword">self</span>, <span class="keyword">weak</span> delegate = <span class="keyword">self</span>.delegate!] <span class="keyword">in</span></div><div class="line">    <span class="comment">// closure body goes here</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="å¼±å¼•ç”¨å’Œæ— ä¸»å¼•ç”¨"><a href="#å¼±å¼•ç”¨å’Œæ— ä¸»å¼•ç”¨" class="headerlink" title="å¼±å¼•ç”¨å’Œæ— ä¸»å¼•ç”¨"></a>å¼±å¼•ç”¨å’Œæ— ä¸»å¼•ç”¨</h4><p><em>åœ¨é—­åŒ…å’Œæ•è·çš„å®ä¾‹æ€»æ˜¯äº’ç›¸å¼•ç”¨å¹¶ä¸”æ€»æ˜¯åŒæ—¶é‡Šæ”¾æ—¶ï¼Œå°†é—­åŒ…å†…çš„æ•è·å®šä¹‰ä¸ºæ— ä¸»å¼•ç”¨ã€‚</em></p>
<p>ç›¸åï¼Œ<em>åœ¨è¢«æ•è·çš„å¼•ç”¨å¯èƒ½ä¼šå˜ä¸º <code>nil</code> æ—¶ï¼Œå®šä¹‰ä¸€ä¸ªå¼±å¼•ç”¨çš„æ•è·</em>ã€‚ <em>å¼±å¼•ç”¨æ€»æ˜¯å¯é€‰é¡¹</em> ï¼Œå½“å®ä¾‹çš„å¼•ç”¨é‡Šæ”¾æ—¶ä¼šè‡ªåŠ¨å˜ä¸º <code>nil</code> ã€‚è¿™ä½¿æˆ‘ä»¬å¯ä»¥åœ¨é—­åŒ…ä½“å†…æ£€æŸ¥å®ƒä»¬æ˜¯å¦å­˜åœ¨ã€‚</p>
<blockquote>
<p>å¦‚æœè¢«æ•è·çš„å¼•ç”¨æ°¸è¿œä¸ä¼šå˜ä¸º <code>nil</code> ï¼Œåº”è¯¥ç”¨æ— ä¸»å¼•ç”¨è€Œä¸æ˜¯å¼±å¼•ç”¨ã€‚</p>
</blockquote>
<p>å‰é¢çš„ <code>HTMLElement</code> ä¾‹å­ä¸­ï¼Œæ— ä¸»å¼•ç”¨æ˜¯æ­£ç¡®çš„è§£å†³å¾ªç¯å¼ºå¼•ç”¨çš„æ–¹æ³•ã€‚è¿™æ ·ç¼–å†™ <code>HTMLElement</code> ç±»æ¥é¿å…å¾ªç¯å¼ºå¼•ç”¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">HTMLElement</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">let</span> text: <span class="type">String</span>?</div><div class="line">    </div><div class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> asHTML: () -&gt; <span class="type">String</span> = &#123;</div><div class="line">        [<span class="keyword">unowned</span> <span class="keyword">self</span>] <span class="keyword">in</span></div><div class="line">        <span class="keyword">if</span> <span class="keyword">let</span> text = <span class="keyword">self</span>.text &#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">"&lt;<span class="subst">\(<span class="keyword">self</span>.name)</span>&gt;<span class="subst">\(text)</span>&lt;/<span class="subst">\(<span class="keyword">self</span>.name)</span>&gt;"</span></div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">"&lt;<span class="subst">\(<span class="keyword">self</span>.name)</span>&gt;"</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>, text: <span class="type">String</span>? = <span class="literal">nil</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">        <span class="keyword">self</span>.text = text</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">deinit</span> &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"<span class="subst">\(name)</span> is being deinitiallized"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ <code>HTMLElement</code> å®ç°å’Œä¹‹å‰çš„å®ç°ä¸€è‡´ï¼Œé™¤äº†åœ¨ <code>asHTML</code> é—­åŒ…ä¸­å¤šäº†ä¸€ä¸ªæ•è·åˆ—è¡¨ã€‚è¿™é‡Œï¼Œæ•è·åˆ—è¡¨æ˜¯ <code>[unowned self]</code> ï¼Œè¡¨ç¤ºâ€œç”¨æ— ä¸»å¼•ç”¨è€Œä¸æ˜¯å¼ºå¼•ç”¨æ¥æ•è· <code>self</code> â€</p>
<p>å’Œä¹‹å‰ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºå¹¶æ‰“å° <code>HTMLElement</code> å®ä¾‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> paragraph: <span class="type">HTMLElement</span>? = <span class="type">HTMLElement</span>(name: <span class="string">"p"</span>, text: <span class="string">"hello, world"</span>)</div><div class="line"><span class="built_in">print</span>(paragraph!.asHTML())</div><div class="line"><span class="comment">// prints "&lt;p&gt;hello, world&lt;/p&gt;"</span></div></pre></td></tr></table></figure>
<p>ä½¿ç”¨æ•è·åˆ—è¡¨åå¼•ç”¨å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤º:<br><img style="margin: auto" src="/2017/12/06/Swift-automatic-reference-counting/closureReferenceCycle02_2x.png" alt="closureReferenceCycle02_2x" title="æ— ä¸»å¼•ç”¨é—­åŒ…"><br>è¿™æ¬¡ï¼Œé—­åŒ…ä»¥æ— ä¸»å¼•ç”¨çš„å½¢å¼æ•è· <code>self</code> ï¼Œå¹¶ä¸ä¼šæŒæœ‰ <code>HTMLElement</code> å®ä¾‹çš„å¼ºå¼•ç”¨ã€‚å¦‚æœå°† <code>paragraph</code> èµ‹å€¼ä¸º <code>nil</code> ï¼Œ <code>HTMLElement</code> å®ä¾‹å°†ä¼šè¢«é‡Šæ”¾ï¼Œå¹¶èƒ½çœ‹åˆ°å®ƒçš„ååˆå§‹åŒ–å™¨æ‰“å°å‡ºçš„æ¶ˆæ¯ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">paragraph = <span class="literal">nil</span></div><div class="line"><span class="comment">// prints "p is being deinitialized"</span></div></pre></td></tr></table></figure>
<blockquote>
<p>æ‘˜è‡ªï¼š<a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/index.html#//apple_ref/doc/uid/TP40014097-CH3-ID0" target="_blank" rel="external">Swift å®˜ç½‘</a><br>æ‰€æœ‰ä»£ç åœ¨Xcode9 Swift4 ç¯å¢ƒç¼–è¯‘æ²¡é—®é¢˜ï¼Œä»£ç <a href="https://github.com/keshiim/LearnSwift4" target="_blank" rel="external">æˆ³è¿™é‡Œ https://github.com/keshiim/LearnSwift4</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Swift ä½¿ç”¨&lt;strong&gt;è‡ªåŠ¨å¼•ç”¨è®¡æ•°(ARC)æœºåˆ¶&lt;/strong&gt;æ¥è¿½è¸ªå’Œç®¡ç†ä½ çš„ App çš„å†…å­˜ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™æ„å‘³ç€ Swift çš„å†…å­˜ç®¡ç†æœºåˆ¶ä¼šä¸€ç›´èµ·ä½œç”¨ï¼Œä½ ä¸éœ€è¦è‡ªå·±è€ƒè™‘å†…å­˜ç®¡ç†ã€‚å½“è¿™äº›å®ä¾‹ä¸åœ¨éœ€è¦æ—¶ï¼ŒARCä¼šè‡ªåŠ¨é‡Šæ”¾ç±»å®ä¾‹æ‰€å ç”¨çš„å†…å­˜ã€‚&lt;/p&gt;
&lt;p
    
    </summary>
    
      <category term="å­¦ä¹ " scheme="https://keshiim.github.io/categories/%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="Swift" scheme="https://keshiim.github.io/categories/%E5%AD%A6%E4%B9%A0/Swift/"/>
    
    
      <category term="Swift" scheme="https://keshiim.github.io/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>Swiftï¼šååˆå§‹åŒ–</title>
    <link href="https://keshiim.github.io/2017/12/05/Swift-deinitialization/"/>
    <id>https://keshiim.github.io/2017/12/05/Swift-deinitialization/</id>
    <published>2017-12-05T10:26:12.000Z</published>
    <updated>2018-03-20T09:56:53.663Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨<strong>ç±»å®ä¾‹è¢«é‡Šæ”¾</strong>çš„æ—¶å€™ï¼Œååˆå§‹åŒ–å™¨å°±ä¼šç«‹å³è¢«è°ƒç”¨ã€‚ä½ å¯ä»¥æ˜¯ç”¨ <code>deinit</code> å…³é”®å­—æ¥å†™ååˆå§‹åŒ–å™¨ï¼Œå°±å¦‚åŒå†™åˆå§‹åŒ–å™¨è¦ç”¨ <code>init</code> å…³é”®å­—ä¸€æ ·ã€‚<strong>ååˆå§‹åŒ–å™¨åªåœ¨ç±»ç±»å‹ä¸­æœ‰æ•ˆ</strong>ã€‚</p>
<h3 id="ååˆå§‹åŒ–å™¨åŸç†"><a href="#ååˆå§‹åŒ–å™¨åŸç†" class="headerlink" title="ååˆå§‹åŒ–å™¨åŸç†"></a>ååˆå§‹åŒ–å™¨åŸç†</h3><p>å½“å®ä¾‹ä¸å†è¢«éœ€è¦çš„æ—¶å€™ Swiftä¼šè‡ªåŠ¨å°†å…¶é‡Šæ”¾æ‰ï¼Œä»¥èŠ‚çœèµ„æºã€‚å¦‚åŒè‡ªåŠ¨å¼•ç”¨è®¡æ•°ä¸­æè¿°çš„é‚£æ ·ï¼ŒSwift é€šè¿‡<em>è‡ªåŠ¨å¼•ç”¨è®¡æ•°ï¼ˆARCï¼‰</em>æ¥å¤„ç†å®ä¾‹çš„å†…å­˜ç®¡ç†ã€‚åŸºæœ¬ä¸Šï¼Œå½“ä½ çš„å®ä¾‹è¢«é‡Šæ”¾æ—¶ï¼Œä½ ä¸éœ€è¦æ‰‹åŠ¨æ¸…é™¤å®ƒä»¬ã€‚æ€»ä¹‹ï¼Œå½“ä½ åœ¨æ“ä½œè‡ªå·±çš„èµ„æºæ—¶ï¼Œä½ å¯èƒ½è¿˜æ˜¯éœ€è¦åœ¨é‡Šæ”¾å®ä¾‹æ—¶æ‰§è¡Œä¸€äº›é¢å¤–çš„æ¸…ç†å·¥ä½œã€‚æ¯”å¦‚è¯´ï¼Œå¦‚æœä½ åˆ›å»ºäº†ä¸€ä¸ªè‡ªå®šä¹‰ç±»æ¥æ‰“å¼€æŸæ–‡ä»¶å†™ç‚¹æ•°æ®è¿›å»ï¼Œä½ å°±å¾—åœ¨å®ä¾‹é‡Šæ”¾ä¹‹å‰å…³é—­è¿™ä¸ªæ–‡ä»¶ã€‚</p>
<p>æ¯ä¸ªç±»å½“ä¸­åªèƒ½æœ‰ä¸€ä¸ªååˆå§‹åŒ–å™¨ã€‚ååˆå§‹åŒ–å™¨ä¸æ¥æ”¶ä»»ä½•å½¢å¼å‚æ•°ï¼Œå¹¶ä¸”ä¸éœ€è¦å†™åœ†æ‹¬å·ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">deinit</span> &#123;</div><div class="line">    <span class="comment">// perform the deinitialization</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ååˆå§‹åŒ–å™¨ä¼šåœ¨å®ä¾‹è¢«é‡Šæ”¾ä¹‹å‰è‡ªåŠ¨è¢«è°ƒç”¨ã€‚ä½ ä¸èƒ½è‡ªè¡Œè°ƒç”¨ååˆå§‹åŒ–å™¨ã€‚çˆ¶ç±»çš„ååˆå§‹åŒ–å™¨å¯ä»¥è¢«å­ç±»ç»§æ‰¿ï¼Œå¹¶ä¸”å­ç±»çš„ååˆå§‹åŒ–å™¨å®ç°ç»“æŸä¹‹åçˆ¶ç±»çš„ååˆå§‹åŒ–å™¨ä¼šè¢«è°ƒç”¨ã€‚çˆ¶ç±»çš„ååˆå§‹åŒ–å™¨æ€»ä¼šè¢«è°ƒç”¨ï¼Œå°±ç®—å­ç±»æ²¡æœ‰ååˆå§‹åŒ–å™¨ã€‚</p>
<p><em>ç”±äºå®ä¾‹åœ¨ååˆå§‹åŒ–å™¨è¢«è°ƒç”¨ä¹‹å‰éƒ½ä¸ä¼šè¢«é‡Šæ”¾ï¼Œååˆå§‹åŒ–å™¨å¯ä»¥è®¿é—®å®ä¾‹ä¸­çš„æ‰€æœ‰å±æ€§å¹¶ä¸”å¯ä»¥åŸºäºè¿™äº›å±æ€§ä¿®æ”¹è‡ªèº«è¡Œä¸ºï¼ˆæ¯”å¦‚è¯´æŸ¥æ‰¾éœ€è¦è¢«å…³é—­çš„é‚£ä¸ªæ–‡ä»¶çš„æ–‡ä»¶åï¼‰ã€‚</em></p>
<h3 id="åº”ç”¨ååˆå§‹åŒ–å™¨"><a href="#åº”ç”¨ååˆå§‹åŒ–å™¨" class="headerlink" title="åº”ç”¨ååˆå§‹åŒ–å™¨"></a>åº”ç”¨ååˆå§‹åŒ–å™¨</h3><p>è¿™é‡Œæœ‰ä¸€ä¸ªåº”ç”¨ååˆå§‹åŒ–å™¨çš„æ —å­ã€‚è¿™é‡Œæ —å­ç»™ä¸€ä¸ªç®€å•çš„æ¸¸æˆå®šä¹‰äº†ä¸¤ä¸ªæ–°çš„ç±»å‹ï¼Œ <code>Bank</code>å’Œ <code>Player</code>ã€‚ <code>Bank</code>ç±»ç”¨æ¥ç®¡ç†è™šæ‹Ÿè´§å¸ï¼Œå®ƒåœ¨æµé€šè¿‡ç¨‹ä¸­æ°¸è¿œéƒ½ä¸èƒ½æ‹¥æœ‰è¶…è¿‡10000é‡‘å¸ã€‚æ¸¸æˆå½“ä¸­åªèƒ½æœ‰ä¸€ä¸ª <code>Bank</code>ï¼Œæ‰€ä»¥ <code>Bank</code>ä»¥å…·æœ‰ç±»å‹å±æ€§å’Œæ–¹æ³•çš„ç±»æ¥å®ç°å½“å‰çŠ¶æ€çš„å‚¨å­˜å’Œç®¡ç†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bank</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">var</span> coinsInBank = <span class="number">10_000</span></div><div class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">distribute</span><span class="params">(coins numberOfCoinsRequested: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">let</span> numberOfCoinsToVend = <span class="built_in">min</span>(numberOfCoinsRequested, coinsInBank)</div><div class="line">        coinsInBank -= numberOfCoinsToVend</div><div class="line">        <span class="keyword">return</span> numberOfCoinsToVend</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">receive</span><span class="params">(coins: Int)</span></span> &#123;</div><div class="line">        coinsInBank += coins</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>Bank</code>ä¼šä¸€ç›´ç”¨ <code>CoinsInBank</code>å±æ€§æ¥è¿½è¸ªå½“å‰é‡‘å¸æ•°é‡ã€‚å®ƒåŒæ ·ä¹Ÿæä¾›äº†ä¸¤ä¸ªæ–¹æ³•â€”â€” <code>distribute(coins:)</code>å’Œ <code>receive(coins:)</code>â€”â€”æ¥å¤„ç†é‡‘å¸çš„<strong>æ”¶é›†å’Œåˆ†å‘</strong>ã€‚</p>
<p><code>distribute(coins:)</code>åœ¨åˆ†å‘é‡‘å¸ä¹‹å‰æ£€æŸ¥é“¶è¡Œå½“ä¸­æ˜¯å¦æœ‰è¶³å¤Ÿçš„é‡‘å¸ã€‚å¦‚æœé‡‘å¸ä¸è¶³ï¼Œ <code>Bank</code>è¿”å›ä¸€ä¸ªæ¯”éœ€è¦çš„æ•°å°ä¸€äº›çš„æ•°å€¼ï¼ˆå¹¶ä¸”é›¶å¦‚æœé“¶è¡Œé‡Œæ²¡æœ‰é‡‘å¸çš„è¯ï¼‰ã€‚ <code>distribute(coins:)</code>å£°æ˜äº†ä¸€ä¸ª <code>numberOfCoinsToVend</code>çš„å˜é‡å½¢å¼å‚æ•°ï¼Œæ‰€ä»¥æ•°å€¼å¯ä»¥åœ¨æ–¹æ³•ä½“å†…ä¿®æ”¹è€Œä¸éœ€è¦å†å£°æ˜ä¸€ä¸ªæ–°çš„å˜é‡ã€‚å®ƒè¿”å›ä¸€ä¸ªæ•´æ•°å€¼æ¥æ˜ç¡®æä¾›çš„é‡‘å¸çš„å®é™…æ•°é‡ã€‚<br><code>receive(coins:)</code>æ–¹æ³•åªæ˜¯æ·»åŠ äº†æ¥å—çš„é‡‘å¸æ•°é‡åˆ°é“¶è¡Œçš„é‡‘å¸å‚¨å­˜é‡Œå»ã€‚</p>
<p><code>Player</code>ç±»æè¿°äº†æ¸¸æˆä¸­çš„ä¸€ä¸ªç©å®¶ã€‚æ¯ä¸ªç©å®¶éƒ½æœ‰ç¡®å®šæ•°é‡çš„é‡‘å¸å‚¨å­˜åœ¨å®ƒä»¬çš„é’±åŒ…ä¸­ã€‚è¿™ä¸ªä»¥ç©å®¶çš„ <code>coinsInPurse</code>å±æ€§è¡¨ç¤ºï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Player</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> coinsInPurse: <span class="type">Int</span></div><div class="line">    <span class="keyword">init</span>(coins: <span class="type">Int</span>) &#123;</div><div class="line">        coinsInPurse = <span class="type">Bank</span>.distribute(coins: coins)</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">win</span><span class="params">(coins: Int)</span></span> &#123;</div><div class="line">        coinsInPurse += <span class="type">Bank</span>.distribute(coins: coins)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">deinit</span> &#123;</div><div class="line">        <span class="type">Bank</span>.receive(coins: coinsInPurse)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ¯ä¸€ä¸ª <code>Player</code>å®ä¾‹éƒ½ä¼šç”¨é“¶è¡ŒæŒ‡å®šçš„é‡‘å¸æ•°é‡æ¥ä½œä¸ºä¸€å¼€å§‹çš„é™å®šæ¥åˆå§‹åŒ–ï¼Œå°½ç®¡ <code>Player</code>å®ä¾‹å¯èƒ½ä¼šåœ¨æ²¡æœ‰è¶³å¤Ÿå¤šé‡‘å¸çš„æ—¶å€™æ”¶åˆ°æ›´å°‘çš„æ•°é‡ã€‚</p>
<p><code>Player</code>ç±»å®šä¹‰äº†ä¸€ä¸ª <code>win(coins:)</code>æ–¹æ³•ï¼Œå®ƒä»é“¶è¡Œå–å›ç¡®å®šæ•°é‡çš„é‡‘å¸å¹¶ä¸”æŠŠå®ƒä»¬æ·»åŠ åˆ°ç©å®¶çš„é’±åŒ…å½“ä¸­ã€‚ <code>Player</code>ç±»åŒæ ·å®ç°äº†ä¸€ä¸ªååˆå§‹åŒ–å™¨ï¼Œå®ƒä¼šåœ¨ <code>Player</code>å®ä¾‹é‡Šæ”¾ä¹‹å‰è¢«è°ƒç”¨ã€‚è¿™æ—¶ï¼Œååˆå§‹åŒ–å™¨ä¼šæŠŠç©å®¶å¤šæœ‰çš„é‡‘å¸è¿”å›åˆ°é“¶è¡Œå½“ä¸­ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> playerOne: <span class="type">Player</span>? = <span class="type">Player</span>(coins: <span class="number">100</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"A new player has joined the game with <span class="subst">\(playerOne!.coinsInPurse)</span> coins"</span>)</div><div class="line"><span class="comment">// Prints "A new player has joined the game with 100 coins"</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"There are now <span class="subst">\(Bank.coinsInBank)</span> coins left in the bank"</span>)</div><div class="line"><span class="comment">// Prints "There are now 9900 coins left in the bank"</span></div></pre></td></tr></table></figure>
<p>æ–°çš„ <code>Player</code>å®ä¾‹åˆ›å»ºå‡ºæ¥äº†ï¼ŒåŒæ—¶å¦‚æœå¯ä»¥çš„è¯ä¼šè·å–100ä¸ªé‡‘å¸ã€‚è¿™ä¸ª <code>Player</code>å®ä¾‹å‚¨å­˜äº†ä¸€ä¸ªå¯é€‰çš„ <code>Player</code>å˜é‡å«åš <code>playerOne</code>ã€‚è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªå¯é€‰å˜é‡ï¼Œæ˜¯å› ä¸ºç©å®¶å¯ä»¥åœ¨ä»»ä½•æ—¶å€™ç¦»å¼€æ¸¸æˆã€‚å¯é€‰é¡¹å…è®¸ä½ è¿½è¸ªå½“å‰æ¸¸æˆä¸­æ˜¯å¦æœ‰ç©å®¶ã€‚</p>
<p>å› ä¸º <code>playerOne</code>æ˜¯å¯é€‰é¡¹ï¼Œå½“å®ƒçš„ <code>coinsInPurse</code>å±ç›¸è¢«è®¿é—®æ¥æ‰“å°é»˜è®¤é‡‘å¸æ—¶ï¼Œ<strong>å¿…é¡»ä½¿ç”¨å¹å·</strong> (<code>!</code>)æ‰èƒ½å®Œå…¨ç¬¦åˆï¼Œå¹¶ä¸”æ— è®º <code>win(coins:)</code>æ–¹æ³•æ˜¯å¦è¢«è°ƒç”¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">playerOne!.win(coins: <span class="number">2_000</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"PlayerOne won 2000 coins &amp; now has <span class="subst">\(playerOne!.coinsInPurse)</span> coins"</span>)</div><div class="line"><span class="comment">// Prints "PlayerOne won 2000 coins &amp; now has 2100 coins"</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"The bank now only has <span class="subst">\(Bank.coinsInBank)</span> coins left"</span>)</div><div class="line"><span class="comment">// Prints "The bank now only has 7900 coins left"</span></div></pre></td></tr></table></figure>
<p>è¿™æ—¶ï¼Œç©å®¶æ‹¥æœ‰äº†2000ä¸ªé‡‘å¸ã€‚ç©å®¶çš„é’±åŒ…å½“ä¸­ä¿å­˜äº†2100ä¸ªé‡‘å¸ï¼Œå¹¶ä¸”é“¶è¡Œåªå‰©ä¸‹7900ä¸ªé‡‘å¸ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">playerOne = <span class="literal">nil</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"PlayerOne has left the game"</span>)</div><div class="line"><span class="comment">// prints "PlayerOne has left the game"</span></div><div class="line"> </div><div class="line"><span class="built_in">print</span>(<span class="string">"The bank now has <span class="subst">\(Bank.coinsInBank)</span> coins"</span>)</div><div class="line"><span class="comment">// prints "The bank now has 10000 coins"</span></div></pre></td></tr></table></figure>
<p>ç°åœ¨ç©å®¶ç¦»å¼€äº†æ¸¸æˆã€‚è¿™é€šè¿‡è®¾ç½® <code>playerOne</code>å˜é‡ä¸º <code>nil</code>æ¥æ˜ç¡®ï¼Œæ„å‘³ç€â€œæ—  <code>Player</code>å®ä¾‹ã€‚â€å½“è¿™ä¸ªæ—¶å€™ï¼Œ <code>playerOne</code>å˜é‡åˆ° <code>Player</code>å®ä¾‹çš„å¼•ç”¨è¢«ç ´åæ‰äº†ã€‚æ²¡æœ‰å…¶ä»–çš„å±æ€§æˆ–è€…å˜é‡ä»åœ¨å¼•ç”¨ <code>Player</code>å®ä¾‹ï¼Œæ‰€ä»¥å®ƒå°†ä¼šè¢«é‡Šæ”¾æ‰ä»¥èŠ‚çº¦å†…å­˜ã€‚åœ¨é‡Šæ”¾æ‰çš„ç¬é—´ï¼Œå®ƒçš„ååˆå§‹åŒ–å™¨ä¼šè‡ªåŠ¨è¢«è°ƒç”¨ï¼Œç„¶åå®ƒçš„é‡‘å¸è¢«é€å›ç»™äº†é“¶è¡Œã€‚</p>
<blockquote>
<p>æ‘˜è‡ªï¼š<a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/index.html#//apple_ref/doc/uid/TP40014097-CH3-ID0" target="_blank" rel="external">swift å®˜ç½‘</a><br>æ‰€æœ‰ä»£ç åœ¨Xcode9 Swift4 ç¯å¢ƒç¼–è¯‘æ²¡é—®é¢˜ï¼Œä»£ç <a href="https://github.com/keshiim/LearnSwift4" target="_blank" rel="external">æˆ³è¿™é‡Œ https://github.com/keshiim/LearnSwift4</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨&lt;strong&gt;ç±»å®ä¾‹è¢«é‡Šæ”¾&lt;/strong&gt;çš„æ—¶å€™ï¼Œååˆå§‹åŒ–å™¨å°±ä¼šç«‹å³è¢«è°ƒç”¨ã€‚ä½ å¯ä»¥æ˜¯ç”¨ &lt;code&gt;deinit&lt;/code&gt; å…³é”®å­—æ¥å†™ååˆå§‹åŒ–å™¨ï¼Œå°±å¦‚åŒå†™åˆå§‹åŒ–å™¨è¦ç”¨ &lt;code&gt;init&lt;/code&gt; å…³é”®å­—ä¸€æ ·ã€‚&lt;strong&gt;ååˆå§‹åŒ–å™¨åªåœ¨ç±»ç±»å‹ä¸­æœ‰æ•ˆ&lt;/s
    
    </summary>
    
      <category term="å­¦ä¹ " scheme="https://keshiim.github.io/categories/%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="Swift" scheme="https://keshiim.github.io/categories/%E5%AD%A6%E4%B9%A0/Swift/"/>
    
    
      <category term="Swift" scheme="https://keshiim.github.io/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>Leedcode-697 Degree of an Array</title>
    <link href="https://keshiim.github.io/2017/12/04/Leedcode-697-Degree-of-an-Array/"/>
    <id>https://keshiim.github.io/2017/12/04/Leedcode-697-Degree-of-an-Array/</id>
    <published>2017-12-04T06:47:00.000Z</published>
    <updated>2018-03-20T09:56:53.642Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://leetcode.com/problems/degree-of-an-array/description/" target="_blank" rel="external">Degree of an Array</a></p>
<h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><p>Given a non-empty array of non-negative integers <code>nums</code>, the <strong>degree</strong> of this array is defined as the maximum frequency of any one of its elements.</p>
<p>Your task is to find the smallest possible length of a (contiguous) subarray of <code>nums</code>, that has the same degree as <code>nums</code>.</p>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Input: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>]</div><div class="line">Output: <span class="number">2</span></div><div class="line">Explanation: </div><div class="line">The input <span class="built_in">array</span> has a degree of <span class="number">2</span> because both elements <span class="number">1</span> <span class="keyword">and</span> <span class="number">2</span> appear twice.</div><div class="line">Of the subarrays that have the same degree:</div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>], [<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">2</span>, <span class="number">2</span>]</div><div class="line">The shortest length is <span class="number">2.</span> So <span class="keyword">return</span> <span class="number">2.</span></div><div class="line">------------------------</div><div class="line">Input: [<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>]</div><div class="line">Output: <span class="number">6</span></div></pre></td></tr></table></figure>
<h3 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h3><ul>
<li><code>nums.length</code> will be between 1 and 50,000.</li>
<li><code>nums[i]</code> will be an integer between 0 and 49,999.</li>
</ul>
<h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>è¿™é“é¢˜ç»™æˆ‘ä¸€ä¸ªæ•°ç»„ï¼Œå®šä¹‰æ•°ç»„çš„åº¦ä¸ºæŸä¸ªæˆ–æŸäº›æ•°å­—å‡ºç°<strong>æœ€å¤š</strong>çš„æ¬¡æ•°ï¼Œç°è®©æˆ‘ä»¬æ‰¾åˆ°æœ€çŸ­çš„å­æ•°ç»„ä½¿å…¶ä¸åŸæ•°ç»„æ‹¥æœ‰ç›¸åŒçš„åº¦ã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬éœ€è¦ç»Ÿè®¡æ¯ä¸ªæ•°å­—å‡ºç°çš„æ¬¡æ•°ï¼Œ<strong>ç”¨å“ˆå¸Œè¡¨<code>map&lt;æ•°å­—, æ¬¡æ•°&gt; m</code>æ¥å»ºç«‹èµ·æ•°å­—å’Œå‡ºç°æ¬¡æ•°çš„æ˜ å°„</strong>ã€‚ç”±äºæˆ‘ä»¬è¦æ±‚åŒ…å«æœ€å¤§åº¦çš„æœ€å°é•¿åº¦å­æ•°ç»„ï¼Œé‚£ä¹ˆæœ€å¥½çš„æƒ…å†µå°±æ˜¯å­æ•°ç»„é¦–ä½æ•°å­—å°±æ˜¯ç»Ÿè®¡åº¦çš„æ•°å­—ï¼Œå³å‡ºç°æœ€å¤šçš„æ•°å­—ã€‚é‚£ä¹ˆæˆ‘ä»¬è‚¯å®šè¦çŸ¥é“è¯¥æ•°å­—ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®å’Œæœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œç”±äºæˆ‘ä»¬å¼€å§‹çš„æ—¶å€™å¹¶ä¸çŸ¥é“é‚£ä¸ªæ•°å­—å‡ºç°æ¬¡æ•°æœ€å¤šï¼Œæ‰€ä»¥æˆ‘ä»¬ç»Ÿè®¡æ‰€æœ‰æ•°å­—çš„é¦–ä½å‡ºç°ä½ç½®ï¼Œé‚£ä¹ˆæˆ‘ç”¨å†ç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨<code>map&lt;æ•°å­—, pair&lt;é¦–, å°¾&gt;&gt; pos</code>æ¥å»ºç«‹æ¯ä¸ªæ•°å­—ä¸å…¶é¦–ä½å‡ºç°ä½ç½®çš„å…³ç³»ã€‚æˆ‘ä»¬ç”¨å˜é‡<code>degree</code>æ¥è¡¨ç¤ºæ•°ç»„çš„åº¦ã€‚</p>
<h3 id="è§£æ³•1"><a href="#è§£æ³•1" class="headerlink" title="è§£æ³•1"></a>è§£æ³•1</h3><p>ç°åœ¨æˆ‘ä»¬éå†åŸæ•°ç»„ï¼Œç´¯åŠ å½“å‰æ•°å­—å‡ºç°çš„æ¬¡æ•°ï¼Œå½“æŸä¸ªæ•°å­—æ˜¯ç¬¬ä¸€æ¬¡å‡ºç°ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç”¨å½“å‰ä½ç½®æ¥æ›´æ–°æ”¹æ•°å­—å‡ºç°çš„é¦–ä½ç½®ï¼Œå¦åˆ™æ›´æ–°å°¾ä½ç½®ã€‚æ²¡éå†ä¸€ä¸ªæ•°ï¼Œæˆ‘ä»¬å°±æ›´æ–°ä¸€ä¸ªdegreeã€‚å½“å‰éå†å®Œæˆåï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†æ•°ç»„çš„åº¦ï¼Œè¿˜æœ‰æ¯ä¸ªæ•°å­—é¦–ä½å‡ºç°çš„ä½ç½®ï¼Œä¸‹é¢å°±æ¥æ‰¾å‡ºå‡ºç°æ¬¡æ•°ç­‰äº<code>degree</code>çš„æ•°å­—ï¼Œç„¶åè®¡ç®—å…¶é¦–ä½ä½ç½®å·®åŠ ä¸Š<code>1</code>ï¼Œç”±äºå‡ºç°æ¬¡æ•°ä¸º<code>degree</code>çš„æ•°å­—ä¸ä¸€å®šåªæœ‰ä¸€ä¸ªï¼Œæˆ‘ä»¬éå†æ‰€æœ‰çš„ï¼Œæ‰¾å‡ºå…¶ä¸­æœ€å°çš„å³å¯ã€‚ä»£ç å¦‚ä¸‹</p>
<h4 id="cpp"><a href="#cpp" class="headerlink" title="cpp"></a>cpp</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sulotion</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findShortestSubArray</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;nums)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> n = nums.size(), res = INT_MAX, degree = <span class="number">0</span>;</div><div class="line">        <span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; m;</div><div class="line">        unrodered_map&lt;<span class="keyword">int</span>, pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; pos;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">            <span class="keyword">if</span> (++m[nums[i]] == <span class="number">1</span>) &#123;</div><div class="line">                pos[nums[i]] = &#123;i, i&#125;;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                pos[nums[i]].second = i;</div><div class="line">            &#125;</div><div class="line">            degree = max(degree, m[nums[i]]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> a : m) &#123;</div><div class="line">            <span class="keyword">if</span> (degree == a.second) &#123;   </div><div class="line">                res = min(res, pos[a.first].second - pos[a.first].first + <span class="number">1</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Swift"><a href="#Swift" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">findShortestSubArray</span><span class="params">(<span class="number">_</span> nums: [Int])</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">let</span> n = nums.<span class="built_in">count</span></div><div class="line">        <span class="keyword">var</span> degree = <span class="number">0</span>, res = <span class="type">Int</span>.<span class="built_in">max</span></div><div class="line">        <span class="keyword">var</span> m = [<span class="type">Int</span>: <span class="type">Int</span>]();</div><div class="line">        <span class="keyword">var</span> pos = [<span class="type">Int</span>: [<span class="type">Int</span>]]()</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;n &#123;</div><div class="line">            <span class="keyword">let</span> num = nums[i]</div><div class="line">            <span class="keyword">let</span> <span class="built_in">count</span> = (m[num] ?? <span class="number">0</span>) + <span class="number">1</span> <span class="comment">//æ¬¡æ•°ç´¯åŠ </span></div><div class="line">            m[num] = <span class="built_in">count</span></div><div class="line">            <span class="keyword">if</span> <span class="built_in">count</span> == <span class="number">1</span> &#123;</div><div class="line">                <span class="comment">//è¯´æ˜ç¬¬ä¸€æ¬¡è®°å½•</span></div><div class="line">                pos[num] = [i, i]</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">let</span> position = pos[num]</div><div class="line">                pos[num] = [(position?.first)!, i];</div><div class="line">            &#125;</div><div class="line">            degree = <span class="built_in">max</span>(degree, <span class="built_in">count</span>)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (num, <span class="built_in">count</span>) <span class="keyword">in</span> m &#123;</div><div class="line">            <span class="keyword">if</span> <span class="built_in">count</span> == degree &#123;</div><div class="line">                res = <span class="built_in">min</span>(res, (pos[num]?.last)! - (pos[num]?.first)! + <span class="number">1</span>)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="è§£æ³•2"><a href="#è§£æ³•2" class="headerlink" title="è§£æ³•2"></a>è§£æ³•2</h3><p>ä¸‹é¢è¿™ç§æ–¹æ³•åªç”¨äº†ä¸€æ¬¡éå†ï¼Œæ€è·¯ä¸Šè·Ÿä¸Šé¢çš„è§£æ³•ç±»ä¼¼ï¼Œè¿˜æ˜¯è¦å»ºç«‹æ•°å­—å‡ºç°æ¬¡æ•°çš„å“ˆå¸Œè¡¨ï¼Œè¿˜æœ‰å°±æ˜¯å»ºç«‹æ¯ä¸ªæ•°å­—å’Œå…¶<strong>ç¬¬ä¸€æ¬¡</strong>å‡ºç°ä½ç½®ä¹‹é—´çš„æ˜ å°„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å½“å‰éå†çš„ä½ç½®å…¶å®å¯ä»¥çœ‹ä½œæ˜¯å°¾ä½ç½®ï¼Œè¿˜æ˜¯å¯ä»¥è®¡ç®—å­æ•°ç»„çš„é•¿åº¦çš„ã€‚æˆ‘ä»¬éå†æ•°ç»„ï¼Œç´¯åŠ å½“å‰æ•°å­—å‡ºç°çš„æ¬¡æ•°ï¼Œå¦‚æœæŸä¸ªæ•°å­—æ˜¯ç¬¬ä¸€æ¬¡å‡ºç°ï¼Œå»ºç«‹è¯¥æ•°å­—å’Œå½“å‰ä½ç½®çš„æ˜ å°„ï¼Œå¦‚æœå½“å‰æ•°å­—çš„å‡ºç°æ¬¡æ•°ç­‰äº<code>degree</code>æ—¶ï¼Œå½“å‰ä½ç½®ä¸ºå°¾ä½ç½®ï¼Œé¦–ä½ç½®åœ¨<code>startIdx</code>ä¸­å–çš„ï¼ŒäºŒè€…åšå·®åŠ 1æ¥æ›´æ–°ç»“æœ<code>res</code>ï¼›å¦‚æœå½“å‰æ•°å­—çš„å‡ºç°æ¬¡æ•°å¤§äº<code>degree</code>ï¼Œè¯´æ˜ä¹‹å‰çš„ç»“æœä»£è¡¨çš„æ•°å­—ä¸æ˜¯å‡ºç°æœ€å¤šçš„ï¼Œç›´æ¥å°†ç»“æœ<code>res</code>æ›´æ–°ä¸ºå½“å‰æ•°å­—çš„é¦–å°¾å·®åŠ <code>1</code>çš„é•¿åº¦ï¼Œç„¶å<code>degree</code>ä¹Ÿæ›´æ–°ä¸ºå½“å‰æ•°å­—å‡ºç°çš„æ¬¡æ•°ã€‚</p>
<h4 id="cpp-1"><a href="#cpp-1" class="headerlink" title="cpp"></a>cpp</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findShortestSubArray</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &amp;nums)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> n = nums.size(), res = INT_MAX, degree = <span class="number">0</span></div><div class="line">        <span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; m, startIdx;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">            ++m[nums[i]];</div><div class="line">            <span class="keyword">if</span> (!startIdx.<span class="built_in">cout</span>(nums[i])) &#123;</div><div class="line">                startIdx[i] = i;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (m[nums[i]] == degree) &#123;</div><div class="line">                res = min(res, i - startIdx[nums[i]] + <span class="number">1</span>);</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (m[nums[i] &gt; degree) &#123;</div><div class="line">                res = i - startIdx[nums[i]] + <span class="number">1</span>;</div><div class="line">                degree = m[nums[i]];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Swift-1"><a href="#Swift-1" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">findShortestSubArray</span><span class="params">(<span class="number">_</span> nums: [Int])</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">let</span> n = nums.<span class="built_in">count</span></div><div class="line">        <span class="keyword">var</span> res = <span class="type">Int</span>.<span class="built_in">max</span>, degree = <span class="number">0</span></div><div class="line">        <span class="keyword">var</span> m = [<span class="type">Int</span>: <span class="type">Int</span>](), startIdx = [<span class="type">Int</span>: <span class="type">Int</span>]()</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;n &#123;</div><div class="line">            m[nums[i]] = (m[nums[i]] ?? <span class="number">0</span>) + <span class="number">1</span> <span class="comment">//å…ˆè®¾ç½®å‡ºç°æ¬¡æ•°</span></div><div class="line">            <span class="keyword">if</span> startIdx[nums[i]] == <span class="literal">nil</span> &#123;</div><div class="line">                startIdx[nums[i]] = i  <span class="comment">//è®¾ç½®åˆå§‹ä½ç½®</span></div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> m[nums[i]] == degree &#123;</div><div class="line">                res = <span class="built_in">min</span>(res, i - startIdx[nums[i]]! + <span class="number">1</span>)</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> m[nums[i]]! &gt; degree &#123;</div><div class="line">                res = i - startIdx[nums[i]]! + <span class="number">1</span></div><div class="line">                degree = m[nums[i]]!</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://leetcode.com/problems/degree-of-an-array/description/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Degree of an Array&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=
    
    </summary>
    
      <category term="LeetCode" scheme="https://keshiim.github.io/categories/LeetCode/"/>
    
    
      <category term="LeetCode" scheme="https://keshiim.github.io/tags/LeetCode/"/>
    
      <category term="algorithm" scheme="https://keshiim.github.io/tags/algorithm/"/>
    
      <category term="ç®—æ³•" scheme="https://keshiim.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="Array" scheme="https://keshiim.github.io/tags/Array/"/>
    
      <category term="Easy" scheme="https://keshiim.github.io/tags/Easy/"/>
    
  </entry>
  
  <entry>
    <title>Swiftï¼šåˆå§‹åŒ–</title>
    <link href="https://keshiim.github.io/2017/11/28/Swift-initialization/"/>
    <id>https://keshiim.github.io/2017/11/28/Swift-initialization/</id>
    <published>2017-11-28T08:44:45.000Z</published>
    <updated>2018-03-20T09:56:53.664Z</updated>
    
    <content type="html"><![CDATA[<p><em>åˆå§‹åŒ–</em>æ˜¯ä¸ºç±»ã€ç»“æ„ä½“æˆ–è€…æšä¸¾å‡†å¤‡å®ä¾‹çš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡éœ€è¦ç»™å®ä¾‹é‡Œçš„æ¯ä¸€ä¸ªå­˜å‚¨å±æ€§è®¾ç½®ä¸€ä¸ªåˆå§‹å€¼å¹¶ä¸”åœ¨æ–°å®ä¾‹å¯ä»¥ä½¿ç”¨ä¹‹å‰æ‰§è¡Œä»»ä½•å…¶ä»–æ‰€å¿…é¡»çš„é…ç½®æˆ–åˆå§‹åŒ–ã€‚</p>
<p>ä½ é€šè¿‡å®šä¹‰<strong>åˆå§‹åŒ–å™¨</strong>æ¥å®ç°è¿™ä¸ªåˆå§‹åŒ–è¿‡ç¨‹ï¼Œå®ƒæ›´åƒæ˜¯ä¸€ä¸ªç”¨æ¥åˆ›å»ºç‰¹å®šç±»å‹æ–°å®ä¾‹çš„ç‰¹æ®Šçš„æ–¹æ³•ã€‚<strong>ä¸åŒäº Objective-C çš„åˆå§‹åŒ–å™¨ï¼ŒSwift åˆå§‹åŒ–å™¨ä¸è¿”å›å€¼</strong>ã€‚è¿™äº›åˆå§‹åŒ–å™¨ä¸»è¦çš„è§’è‰²å°±æ˜¯ç¡®ä¿åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨ä¹‹å‰æŸç±»å‹çš„æ–°å®ä¾‹èƒ½å¤Ÿæ­£ç¡®åˆå§‹åŒ–ã€‚</p>
<p><em>ç±»</em> ç±»å‹çš„å®ä¾‹åŒæ ·å¯ä»¥å®ç°ä¸€ä¸ª<strong>ååˆå§‹åŒ–å™¨</strong>ï¼Œå®ƒä¼šåœ¨è¿™ä¸ªç±»çš„å®ä¾‹è¢«é‡Šæ”¾ä¹‹å‰æ‰§è¡Œä»»æ„çš„è‡ªå®šä¹‰æ¸…ç†ã€‚</p>
<h3 id="ä¸ºå­˜å‚¨å±æ€§è®¾ç½®åˆå§‹åŒ–å€¼"><a href="#ä¸ºå­˜å‚¨å±æ€§è®¾ç½®åˆå§‹åŒ–å€¼" class="headerlink" title="ä¸ºå­˜å‚¨å±æ€§è®¾ç½®åˆå§‹åŒ–å€¼"></a>ä¸ºå­˜å‚¨å±æ€§è®¾ç½®åˆå§‹åŒ–å€¼</h3><p>åœ¨åˆ›å»ºç±»å’Œç»“æ„ä½“çš„å®ä¾‹æ—¶<strong>å¿…é¡»</strong>ä¸ºæ‰€æœ‰çš„å­˜å‚¨å±æ€§è®¾ç½®ä¸€ä¸ªåˆé€‚çš„åˆå§‹å€¼ã€‚<em>å­˜å‚¨å±æ€§ä¸èƒ½é—ç•™åœ¨ä¸ç¡®å®šçš„çŠ¶æ€ä¸­ã€‚</em></p>
<p>ä½ å¯ä»¥åœ¨åˆå§‹åŒ–å™¨é‡Œä¸ºå­˜å‚¨å±æ€§è®¾ç½®ä¸€ä¸ªåˆå§‹å€¼ï¼Œæˆ–è€…é€šè¿‡åˆ†é…ä¸€ä¸ªé»˜è®¤çš„å±æ€§å€¼ä½œä¸ºå±æ€§å®šä¹‰çš„ä¸€éƒ¨åˆ†ã€‚åœ¨ä¸‹é¢çš„å°èŠ‚ä¸­ä¼šæè¿°è¿™äº›åŠ¨ä½œã€‚</p>
<blockquote>
<p>æ³¨æ„<br>å½“ä½ ç»™ä¸€ä¸ªå­˜å‚¨å±æ€§åˆ†é…é»˜è®¤å€¼ï¼Œæˆ–è€…åœ¨ä¸€ä¸ªåˆå§‹åŒ–å™¨é‡Œè®¾ç½®å®ƒçš„åˆå§‹å€¼çš„æ—¶å€™ï¼Œå±æ€§çš„å€¼å°±ä¼šè¢«ç›´æ¥è®¾ç½®ï¼Œä¸ä¼šè°ƒç”¨ä»»ä½•å±æ€§ç›‘å¬å™¨ã€‚</p>
</blockquote>
<h4 id="åˆå§‹åŒ–å™¨"><a href="#åˆå§‹åŒ–å™¨" class="headerlink" title="åˆå§‹åŒ–å™¨"></a>åˆå§‹åŒ–å™¨</h4><p><em>åˆå§‹åŒ–å™¨</em>åœ¨åˆ›å»ºç‰¹å®šç±»å‹çš„å®ä¾‹æ—¶è¢«è°ƒç”¨ã€‚åœ¨è¿™ä¸ªç®€å•çš„å½¢å¼ä¸­ï¼Œåˆå§‹åŒ–å™¨å°±åƒä¸€ä¸ªæ²¡æœ‰å½¢å¼å‚æ•°çš„å®ä¾‹æ–¹æ³•ï¼Œä½¿ç”¨ <code>init</code> å…³é”®å­—æ¥å†™ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">init</span>() &#123;</div><div class="line">    <span class="comment">// perform some initialization here</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸‹é¢çš„æ —å­å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>Fahrenheit</code> ç»“æ„ä½“ä»¥å‚¨å­˜åæ°åº¦è¡¨ç¤ºçš„æ¸©åº¦ã€‚ <code>Fahrenheit</code> ç»“æ„ä½“æœ‰ä¸€ä¸ª <code>Double</code> ç±»å‹çš„å­˜å‚¨å±æ€§ <code>temperature</code> ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Fahrenheit</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> temperature: <span class="type">Double</span></div><div class="line">    <span class="keyword">init</span>() &#123;</div><div class="line">        temperature = <span class="number">32.0</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> f = <span class="type">Fahrenheit</span>()</div><div class="line"><span class="built_in">print</span>(<span class="string">"The default temperature is <span class="subst">\(f.temperature)</span>Â° Fahrenheit"</span>)</div><div class="line"><span class="comment">// prints "The default temperature is 32.0Â° Fahrenheit"</span></div></pre></td></tr></table></figure>
<p>è¿™ä¸ªç»“æ„ä½“å®šä¹‰äº†ä¸€ä¸ªåˆå§‹åŒ–å™¨ï¼Œ <code>init</code> ï¼Œæ²¡æœ‰å½¢å¼å‚æ•°ï¼Œå®ƒåˆå§‹åŒ–å‚¨å­˜æ¸©åº¦çš„å€¼ä¸º 32.0 (åœ¨åæ°æ¸©åº¦ä¸‹æ°´çš„å†°ç‚¹)ã€‚</p>
<h4 id="é»˜è®¤çš„å±æ€§å€¼"><a href="#é»˜è®¤çš„å±æ€§å€¼" class="headerlink" title="é»˜è®¤çš„å±æ€§å€¼"></a>é»˜è®¤çš„å±æ€§å€¼</h4><p>å¦‚ä¸Šæ‰€è¿°ï¼Œä½ å¯ä»¥åœ¨åˆå§‹åŒ–å™¨é‡Œä¸ºå­˜å‚¨å±æ€§è®¾ç½®åˆå§‹å€¼ã€‚å¦å¤–ï¼Œ<em>æŒ‡å®šä¸€ä¸ªé»˜è®¤å±æ€§å€¼ä½œä¸ºå±æ€§å£°æ˜çš„ä¸€éƒ¨åˆ†</em>ã€‚å½“å±æ€§è¢«å®šä¹‰çš„æ—¶å€™ä½ å¯ä»¥é€šè¿‡ä¸ºè¿™ä¸ªå±æ€§åˆ†é…ä¸€ä¸ªåˆå§‹å€¼æ¥æŒ‡å®šé»˜è®¤çš„å±æ€§å€¼ã€‚</p>
<blockquote>
<p>æ³¨æ„<br>å¦‚æœä¸€ä¸ªå±æ€§ä¸€ç›´ä¿æŒç›¸åŒçš„åˆå§‹å€¼ï¼Œå¯ä»¥æä¾›ä¸€ä¸ªé»˜è®¤å€¼è€Œä¸æ˜¯åœ¨åˆå§‹åŒ–å™¨é‡Œè®¾ç½®è¿™ä¸ªå€¼ã€‚æœ€ç»ˆç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯é»˜è®¤å€¼å°†å±æ€§çš„åˆå§‹åŒ–ä¸å£°æ˜æ›´ç´§å¯†åœ°è”ç³»åˆ°ä¸€èµ·ã€‚å®ƒä½¿å¾—ä½ çš„åˆå§‹åŒ–å™¨æ›´çŸ­æ›´æ¸…æ™°ï¼Œå¹¶ä¸”å¯ä»¥è®©ä½ å±æ€§æ ¹æ®é»˜è®¤å€¼æ¨æ–­ç±»å‹ã€‚å¦‚åè¾¹çš„ç« èŠ‚æ‰€è¿°ï¼Œ<strong>é»˜è®¤å€¼ä¹Ÿè®©ä½ ä½¿ç”¨é»˜è®¤åˆå§‹åŒ–å™¨å’Œåˆå§‹åŒ–å™¨ç»§æ‰¿æ›´åŠ å®¹æ˜“</strong>ã€‚</p>
</blockquote>
<p>é€šè¿‡æä¾› <code>temperature</code> å±æ€§çš„é»˜è®¤å€¼ï¼Œä½ å¯ä»¥æŠŠä¸Šé¢çš„ <code>Fahrenheit</code> ç»“æ„ä½“å†™çš„æ›´ç®€å•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Fahrenheit</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> temperature = <span class="number">32.0</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="è‡ªå®šä¹‰åˆå§‹åŒ–"><a href="#è‡ªå®šä¹‰åˆå§‹åŒ–" class="headerlink" title="è‡ªå®šä¹‰åˆå§‹åŒ–"></a>è‡ªå®šä¹‰åˆå§‹åŒ–</h3><p>å¦‚åŒä¸‹é¢ç« èŠ‚æ‰€è¿°ï¼Œä½ å¯ä»¥é€šè¿‡<em>è¾“å…¥å½¢å¼å‚æ•°</em>å’Œ<em>å¯é€‰ç±»å‹</em>æ¥è‡ªå®šä¹‰åˆå§‹åŒ–è¿‡ç¨‹ï¼Œæˆ–è€…åœ¨åˆå§‹åŒ–çš„æ—¶å€™åˆ†é…å¸¸é‡å±æ€§ã€‚</p>
<h4 id="åˆå§‹åŒ–å½¢å¼å‚æ•°"><a href="#åˆå§‹åŒ–å½¢å¼å‚æ•°" class="headerlink" title="åˆå§‹åŒ–å½¢å¼å‚æ•°"></a>åˆå§‹åŒ–å½¢å¼å‚æ•°</h4><p>ä½ å¯ä»¥<strong>æä¾›åˆå§‹åŒ–å½¢å¼å‚æ•°ä½œä¸ºåˆå§‹åŒ–å™¨</strong>çš„ä¸€éƒ¨åˆ†ï¼Œæ¥å®šä¹‰åˆå§‹åŒ–è¿‡ç¨‹ä¸­çš„ç±»å‹å’Œå€¼çš„åç§°ã€‚åˆå§‹åŒ–å½¢å¼å‚æ•°ä¸å‡½æ•°å’Œæ–¹æ³•çš„å½¢å¼å‚æ•°å…·æœ‰ç›¸åŒçš„åŠŸèƒ½å’Œè¯­æ³•ã€‚</p>
<p>ä¸‹é¢çš„æ —å­å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>Celsius</code> çš„ç»“æ„ä½“ï¼Œå®ƒç”¨æ‘„æ°åº¦è¡¨ç¤ºå‚¨å­˜æ¸©åº¦ã€‚ <code>Celsius</code> ç»“æ„ä½“å®ç°äº†ä¸¤ä¸ªè‡ªå®šä¹‰çš„åˆå§‹åŒ–å™¨ <code>init(fromFahrenheit:)</code> å’Œ <code>init(fromKelvin:)</code> ï¼Œ å®ƒä»¬ç”¨ä¸åŒçš„æ¸©åº¦å•ä½åˆå§‹åŒ–æ–°çš„ç»“æ„ä½“å®ä¾‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Celsius</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> temperatureInCelsius: <span class="type">Double</span></div><div class="line">    <span class="keyword">init</span>(fromFahrenheit fahrenheit: <span class="type">Double</span>) &#123;</div><div class="line">        temperatureInCelsius = (fahrenheit - <span class="number">32.0</span>) / <span class="number">1.8</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">init</span>(fromKelvin kelvin: <span class="type">Double</span>) &#123;</div><div class="line">        temperatureInCelsius = kelvin - <span class="number">273.15</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> boilingPointOfWater = <span class="type">Celsius</span>(fromFahrenheit: <span class="number">212.0</span>)</div><div class="line"><span class="comment">// boilingPointOfWater.temperatureInCelsius is 100.0</span></div><div class="line"><span class="keyword">let</span> freezingPointOfWater = <span class="type">Celsius</span>(fromKelvin: <span class="number">273.15</span>)</div><div class="line"><span class="comment">// freezingPointOfWater.temperatureInCelsius is 0.0</span></div></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ªåˆå§‹åŒ–å™¨åªæœ‰ä¸€ä¸ªå¤–éƒ¨å˜é‡å <code>fromFahrenheit</code> å’Œä¸€ä¸ªå±€éƒ¨å˜é‡å <code>fahrenheit</code> çš„åˆå§‹åŒ–å½¢å¼å‚æ•°ã€‚ç¬¬äºŒä¸ªåˆå§‹åŒ–å™¨åªæœ‰ä¸€ä¸ªå¤–éƒ¨å˜é‡å <code>fromKelvin</code> å’Œä¸€ä¸ªå±€éƒ¨å˜é‡å <code>kelvin</code> çš„åˆå§‹åŒ–å½¢å¼å‚æ•°ã€‚è¿™ä¸¤ä¸ªåˆå§‹åŒ–å™¨éƒ½æŠŠå®ƒä»¬çš„å®é™…å‚æ•°è½¬æ¢ä¸ºäº†æ‘„æ°åº¦å¹¶ä¸”æŠŠè¿™ä¸ªå€¼å‚¨å­˜åˆ°äº†åä¸º <code>temperatureInCelsius</code> çš„å±æ€§é‡Œã€‚</p>
<h4 id="å½¢å¼å‚æ•°åå’Œå®é™…å‚æ•°æ ‡ç­¾"><a href="#å½¢å¼å‚æ•°åå’Œå®é™…å‚æ•°æ ‡ç­¾" class="headerlink" title="å½¢å¼å‚æ•°åå’Œå®é™…å‚æ•°æ ‡ç­¾"></a>å½¢å¼å‚æ•°åå’Œå®é™…å‚æ•°æ ‡ç­¾</h4><p>ä¸å‡½æ•°å’Œæ–¹æ³•çš„å½¢å¼å‚æ•°ä¸€æ ·ï¼Œåˆå§‹åŒ–å½¢å¼å‚æ•°ä¹Ÿå¯ä»¥åœ¨åˆå§‹åŒ–å™¨å†…éƒ¨æœ‰ä¸€ä¸ªå±€éƒ¨å˜é‡åä»¥åŠå®é™…å‚æ•°æ ‡ç­¾ä¾›è°ƒç”¨çš„æ—¶å€™ä½¿ç”¨ã€‚</p>
<p>æ€»ä¹‹ï¼Œåˆå§‹åŒ–å™¨å¹¶ä¸èƒ½åƒå‡½æ•°å’Œæ–¹æ³•é‚£æ ·åœ¨åœ†æ‹¬å·å‰é¢æœ‰ä¸€ä¸ªç”¨æ¥åŒºåˆ†çš„å‡½æ•°åã€‚å› æ­¤ï¼Œä¸€ä¸ªåˆå§‹åŒ–å™¨çš„å‚æ•°åç§°å’Œç±»å‹åœ¨è¯†åˆ«è¯¥è°ƒç”¨å“ªä¸ªåˆå§‹åŒ–å™¨çš„æ—¶å€™å°±æ‰®æ¼”äº†ä¸€ä¸ªéå¸¸é‡è¦çš„è§’è‰²ã€‚å› æ­¤ï¼Œ<strong>å¦‚æœä½ æ²¡æœ‰æä¾›å¤–éƒ¨å Swift ä¼šè‡ªåŠ¨ä¸ºæ¯ä¸€ä¸ªå½¢å¼å‚æ•°æä¾›ä¸€ä¸ªå¤–éƒ¨åç§°</strong>ã€‚</p>
<p>ä¸‹é¢çš„æ —å­å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>Color</code> çš„ç»“æ„ä½“ï¼Œå®ƒæœ‰ä¸‰ä¸ªå¸¸é‡å±æ€§ï¼Œåˆ†åˆ«ä¸º <code>red</code> ï¼Œ <code>green</code> å’Œ <code>blue</code> ã€‚è¿™äº›å±æ€§å‚¨å­˜äº†ä¸€ä¸ªä»‹äº 0.0 åˆ° 1.0 ä¹‹é—´çš„å€¼æ¥è¡¨ç¤ºé¢œè‰²é‡Œçš„çº¢ã€ç»¿ã€è“ã€‚</p>
<p><code>Color</code> ç»™å®ƒçš„çº¢ç»¿è“ç»„åˆæä¾›äº†ä¸€ä¸ªåˆå§‹åŒ–å™¨ï¼Œå®ƒå¸¦æœ‰ä¸‰ä¸ªåˆé€‚åç§°çš„ <code>Double</code> ç±»å‹å½¢å¼å‚æ•°ã€‚ <code>Color</code> åŒæ ·æä¾›äº†ç¬¬äºŒä¸ªåªæœ‰ä¸€ä¸ª <code>white</code> å½¢å¼å‚æ•°çš„åˆå§‹åŒ–å™¨ï¼Œå®ƒç”¨æ¥ç»™ä¸‰ä¸ªé¢œè‰²ç»„åˆè®¾ç½®ç›¸åŒçš„å€¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Color</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> red, green, blue: <span class="type">Double</span></div><div class="line">    <span class="keyword">init</span>(red: <span class="type">Double</span>, green: <span class="type">Double</span>, blue: <span class="type">Double</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.red   = red</div><div class="line">        <span class="keyword">self</span>.green = green</div><div class="line">        <span class="keyword">self</span>.blue  = blue</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">init</span>(white: <span class="type">Double</span>) &#123;</div><div class="line">        red   = white</div><div class="line">        green = white</div><div class="line">        blue  = white</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é€šè¿‡ä¸ºæ¯ä¸€ä¸ªåˆå§‹åŒ–å™¨çš„å½¢å¼å‚æ•°æä¾›ä¸€ä¸ªåˆå§‹å€¼ï¼Œåˆå§‹åŒ–å™¨å¯ä»¥ç”¨æ¥åˆ›å»ºæ–°çš„ <code>Color</code> å®ä¾‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> magenta = <span class="type">Color</span>(red: <span class="number">1.0</span>, green: <span class="number">0.0</span>, blue: <span class="number">1.0</span>)</div><div class="line"><span class="keyword">let</span> halfGray = <span class="type">Color</span>(white: <span class="number">0.5</span>)</div></pre></td></tr></table></figure>
<p><strong>æ³¨æ„ä¸ä½¿ç”¨å¤–éƒ¨åç§°æ˜¯ä¸èƒ½è°ƒç”¨è¿™äº›åˆå§‹åŒ–å™¨çš„</strong>ã€‚å¦‚æœå®šä¹‰äº†å¤–éƒ¨å‚æ•°åå°±å¿…é¡»ç”¨åœ¨åˆå§‹åŒ–å™¨é‡Œï¼Œçœç•¥çš„è¯ä¼šæŠ¥ä¸€ä¸ªç¼–è¯‘æ—¶é”™è¯¯ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> veryGreen = <span class="type">Color</span>(<span class="number">0.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span>) <span class="comment">//ç¼–è¯‘æŠ¥é”™</span></div><div class="line"><span class="comment">// this reports a compile-time error - external names are required</span></div></pre></td></tr></table></figure>
<h4 id="æ— å®é™…å‚æ•°æ ‡ç­¾çš„åˆå§‹åŒ–å™¨å½¢å¼å‚æ•°"><a href="#æ— å®é™…å‚æ•°æ ‡ç­¾çš„åˆå§‹åŒ–å™¨å½¢å¼å‚æ•°" class="headerlink" title="æ— å®é™…å‚æ•°æ ‡ç­¾çš„åˆå§‹åŒ–å™¨å½¢å¼å‚æ•°"></a>æ— å®é™…å‚æ•°æ ‡ç­¾çš„åˆå§‹åŒ–å™¨å½¢å¼å‚æ•°</h4><p>å¦‚æœä½ ä¸æƒ³ä¸ºåˆå§‹åŒ–å™¨å½¢å¼å‚æ•°ä½¿ç”¨å®é™…å‚æ•°æ ‡ç­¾ï¼Œå¯ä»¥å†™ä¸€ä¸ªä¸‹åˆ’çº¿( <code>_</code> )æ›¿ä»£æ˜ç¡®çš„å®é™…å‚æ•°æ ‡ç­¾ä»¥é‡å†™é»˜è®¤è¡Œä¸ºã€‚</p>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªä¹‹å‰ <code>Celsius</code> ç±»çš„æ‰©å±•ç‰ˆæœ¬æ —å­ï¼Œå®ƒæœ‰ä¸€ä¸ªé¢å¤–çš„åˆå§‹åŒ–å™¨æ¥ä»å·²ç»æ˜¯æ‘„æ°åº¦çš„ <code>Double</code> å€¼åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Celsius</code> ç±»å®ä¾‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Celsius</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> temperatureInCelsius: <span class="type">Double</span></div><div class="line">    <span class="keyword">init</span>(fromFahrenheit fahrenheit: <span class="type">Double</span>) &#123;</div><div class="line">        temperatureInCelsius = (fahrenheit - <span class="number">32.0</span>) / <span class="number">1.8</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">init</span>(fromKelvin kelvin: <span class="type">Double</span>) &#123;</div><div class="line">        temperatureInCelsius = kelvin - <span class="number">273.15</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">init</span>(<span class="number">_</span> celsius: <span class="type">Double</span>) &#123;</div><div class="line">        temperatureInCelsius = celsius</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> bodyTemperature = <span class="type">Celsius</span>(<span class="number">37.0</span>)</div></pre></td></tr></table></figure>
<p>è°ƒç”¨åˆå§‹åŒ–å™¨<code>Celsius(37.0)</code> æœ‰ç€æ¸…æ¥šçš„æ„å›¾è€Œ<em>ä¸éœ€è¦å¤–éƒ¨å½¢å¼å‚æ•°å</em>ã€‚å› æ­¤ï¼ŒæŠŠåˆå§‹åŒ–å™¨å†™ä¸º <code>init(_ celsius: Double)</code> æ˜¯åˆé€‚çš„ï¼Œå®ƒä¹Ÿå°±å¯ä»¥é€šè¿‡æä¾›æœªå‘½åçš„ <code>Double</code> å€¼è¢«è°ƒç”¨äº†ã€‚</p>
<h4 id="å¯é€‰å±æ€§ç±»å‹"><a href="#å¯é€‰å±æ€§ç±»å‹" class="headerlink" title="å¯é€‰å±æ€§ç±»å‹"></a>å¯é€‰å±æ€§ç±»å‹</h4><p>å¦‚æœä½ çš„è‡ªå®šä¹‰ç±»å‹æœ‰ä¸€ä¸ªé€»è¾‘ä¸Šæ˜¯å…è®¸â€œæ— å€¼â€çš„å­˜å‚¨å±æ€§â€”â€”å¤§æ¦‚å› ä¸ºå®ƒçš„å€¼åœ¨åˆå§‹åŒ–æœŸé—´ä¸èƒ½è¢«è®¾ç½®ï¼Œæˆ–è€…å› ä¸ºå®ƒåœ¨ç¨åå…è®¸è®¾ç½®ä¸ºâ€œæ— å€¼â€â€”â€”å£°æ˜å±æ€§ä¸º<strong>å¯é€‰ç±»å‹</strong>ã€‚å¯é€‰ç±»å‹çš„å±æ€§è‡ªåŠ¨åœ°åˆå§‹åŒ–ä¸º <code>nil</code> ï¼Œè¡¨ç¤ºè¯¥å±æ€§åœ¨åˆå§‹åŒ–æœŸé—´æ•…æ„è®¾ä¸ºâ€œè¿˜æ²¡æœ‰å€¼â€ã€‚</p>
<p>ä¸‹é¢çš„æ —å­å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>SurveyQuestion</code> çš„ç±»ï¼Œæœ‰ä¸€ä¸ªå¯é€‰ <code>String</code> å±æ€§ï¼Œåä¸º <code>response</code> ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SurveyQuestion</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> text: <span class="type">String</span></div><div class="line">    <span class="keyword">var</span> response: <span class="type">String</span>?</div><div class="line">    <span class="keyword">init</span>(text: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.text = text</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">ask</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(text)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> cheeseQuestion = <span class="type">SurveyQuestion</span>(text: <span class="string">"Do you like cheese?"</span>)</div><div class="line">cheeseQuestion.ask()</div><div class="line"><span class="comment">// prints "Do you like cheese?"</span></div><div class="line">cheeseQuestion.response = <span class="string">"Yes, I do like cheese."</span></div></pre></td></tr></table></figure>
<p>å¯¹è°ƒæŸ¥é—®é¢˜çš„å›ç­”ç›´åˆ°è¢«é—®çš„æ—¶å€™æ‰èƒ½çŸ¥é“ï¼Œæ‰€ä»¥ <code>response</code> å±æ€§è¢«å£°æ˜ä¸º <code>String?</code> ç±»å‹ï¼Œæˆ–è€…æ˜¯â€œå¯é€‰ Stirng â€ã€‚å½“æ–°çš„ <code>SurveyQuestion</code> å®ä¾‹è¢«åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå®ƒä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªä¸º <code>nil</code> çš„é»˜è®¤å€¼ï¼Œ<strong>æ„å‘³ç€â€œè¿˜æ²¡æœ‰å­—ç¬¦ä¸²â€</strong>ã€‚</p>
<h4 id="åœ¨åˆå§‹åŒ–ä¸­åˆ†é…å¸¸é‡å±æ€§"><a href="#åœ¨åˆå§‹åŒ–ä¸­åˆ†é…å¸¸é‡å±æ€§" class="headerlink" title="åœ¨åˆå§‹åŒ–ä¸­åˆ†é…å¸¸é‡å±æ€§"></a>åœ¨åˆå§‹åŒ–ä¸­åˆ†é…å¸¸é‡å±æ€§</h4><p><strong>åœ¨åˆå§‹åŒ–çš„ä»»æ„æ—¶åˆ»ï¼Œä½ éƒ½å¯ä»¥ç»™å¸¸é‡å±æ€§èµ‹å€¼</strong>ï¼Œåªè¦å®ƒåœ¨åˆå§‹åŒ–ç»“æŸæ˜¯è®¾ç½®äº†ç¡®å®šçš„å€¼å³å¯ã€‚ä¸€æ—¦ä¸ºå¸¸é‡å±æ€§è¢«èµ‹å€¼ï¼Œå®ƒå°±ä¸èƒ½å†è¢«ä¿®æ”¹äº†ã€‚</p>
<blockquote>
<p>å¯¹äºç±»å®ä¾‹æ¥è¯´ï¼Œå¸¸é‡å±æ€§åœ¨åˆå§‹åŒ–ä¸­åªèƒ½é€šè¿‡å¼•ç”¨çš„ç±»æ¥ä¿®æ”¹ã€‚å®ƒä¸èƒ½è¢«å­ç±»ä¿®æ”¹ã€‚</p>
</blockquote>
<p>ä½ å¯ä»¥ä¿®æ”¹ä¸Šé¢ <code>SurveyQuestion</code> çš„ä¾‹å­ï¼Œç»™ <code>text</code> ä½¿ç”¨å¸¸é‡å±æ€§è€Œä¸æ˜¯å˜é‡å±æ€§æ¥è¡¨ç¤ºé—®é¢˜ï¼Œæ¥æ˜ç¡®ä¸€æ—¦ <code>SurveyQuestion</code> çš„å®ä¾‹è¢«åˆ›å»ºï¼Œé‚£ä¸ªé—®é¢˜å°†ä¸ä¼šæ”¹å˜ã€‚å°½ç®¡ç°åœ¨ <code>text</code> å±æ€§æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œä½†æ˜¯å®ƒä¾ç„¶å¯ä»¥åœ¨ç±»çš„åˆå§‹åŒ–å™¨é‡Œè®¾ç½®ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SurveyQuestion</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> text: <span class="type">String</span></div><div class="line">    <span class="keyword">var</span> response: <span class="type">String</span>?</div><div class="line">    <span class="keyword">init</span>(text: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.text = text</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">ask</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">print</span>(text)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> beetsQuestion = <span class="type">SurveyQuestion</span>(text: <span class="string">"How about beets?"</span>)</div><div class="line">beetsQuestion.ask()</div><div class="line"><span class="comment">// prints "How about beets?"</span></div><div class="line">beetsQuestion.response = <span class="string">"I also like beets. (But not with cheese.)"</span></div></pre></td></tr></table></figure>
<h3 id="é»˜è®¤åˆå§‹åŒ–å™¨"><a href="#é»˜è®¤åˆå§‹åŒ–å™¨" class="headerlink" title="é»˜è®¤åˆå§‹åŒ–å™¨"></a>é»˜è®¤åˆå§‹åŒ–å™¨</h3><p>Swift ä¸ºæ‰€æœ‰æ²¡æœ‰æä¾›åˆå§‹åŒ–å™¨çš„<em>ç»“æ„ä½“</em>æˆ–<em>ç±»</em>æä¾›äº†ä¸€ä¸ª<strong>é»˜è®¤çš„åˆå§‹åŒ–å™¨</strong>æ¥ç»™æ‰€æœ‰çš„å±æ€§æä¾›äº†<em>é»˜è®¤å€¼</em>ã€‚è¿™ä¸ªé»˜è®¤çš„åˆå§‹åŒ–å™¨åªæ˜¯ç®€å•åœ°åˆ›å»ºäº†ä¸€ä¸ªæ‰€æœ‰å±æ€§éƒ½æœ‰é»˜è®¤å€¼çš„æ–°å®ä¾‹ã€‚</p>
<p>è¿™ä¸ªæ —å­å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>ShoppingListItem</code> çš„ç±»ï¼Œå®ƒåœ¨è´­ç‰©åˆ—è¡¨çš„ç‰©å“é‡Œå°è£…äº†åç§°ï¼Œæ•°é‡å’Œè´­ä¹°çŠ¶æ€å±æ€§ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ShoppingListItem</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span>?</div><div class="line">    <span class="keyword">var</span> quantity = <span class="number">1</span></div><div class="line">    <span class="keyword">var</span> purchased = <span class="literal">false</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> item = <span class="type">ShoppingListItem</span>()</div><div class="line"><span class="built_in">print</span>(item.name + <span class="string">" "</span> + item.quantity + <span class="string">" "</span> + item.purchased)</div></pre></td></tr></table></figure>
<p>ç”±äº <code>ShoppingListItem</code> ç±»çš„<strong>æ‰€æœ‰å±æ€§éƒ½æœ‰é»˜è®¤å€¼</strong>ï¼Œåˆç”±äºå®ƒæ˜¯ä¸€ä¸ªæ²¡æœ‰çˆ¶ç±»çš„åŸºç±»ï¼Œ <code>ShoppingListItem</code> ç±»è‡ªåŠ¨åœ°è·å¾—äº†ä¸€ä¸ªé»˜è®¤çš„åˆå§‹åŒ–å™¨ï¼Œä½¿ç”¨é»˜è®¤å€¼è®¾ç½®äº†å®ƒçš„æ‰€æœ‰å±æ€§ç„¶ååˆ›å»ºäº†æ–°çš„å®ä¾‹ã€‚( <code>name</code> å±æ€§æ˜¯ä¸€ä¸ªå¯é€‰ <code>String</code> å±æ€§ï¼Œæ‰€ä»¥å®ƒä¼šè‡ªåŠ¨è®¾ç½®ä¸º <code>nil</code> é»˜è®¤å€¼ï¼Œå°½ç®¡è¿™ä¸ªå€¼æ²¡æœ‰å†™åœ¨ä»£ç é‡Œã€‚)ä¸Šé¢çš„æ —å­ç»™ <code>ShoppingListItem</code> ç±»ä½¿ç”¨é»˜è®¤åˆå§‹åŒ–å™¨ä»¥åŠåˆå§‹åŒ–å™¨è¯­æ³•åˆ›å»ºæ–°çš„å®ä¾‹ï¼Œå†™ä½œ <code>ShoppingListItem()</code> ï¼Œå¹¶ä¸”ç»™è¿™ä¸ªæ–°å®ä¾‹èµ‹äº†ä¸€ä¸ªåä¸º <code>item</code> çš„å˜é‡ã€‚</p>
<h4 id="ç»“æ„ä½“ç±»å‹çš„æˆå‘˜åˆå§‹åŒ–å™¨"><a href="#ç»“æ„ä½“ç±»å‹çš„æˆå‘˜åˆå§‹åŒ–å™¨" class="headerlink" title="ç»“æ„ä½“ç±»å‹çš„æˆå‘˜åˆå§‹åŒ–å™¨"></a>ç»“æ„ä½“ç±»å‹çš„æˆå‘˜åˆå§‹åŒ–å™¨</h4><p>å¦‚æœç»“æ„ä½“ç±»å‹ä¸­<strong>æ²¡æœ‰å®šä¹‰ä»»ä½•è‡ªå®šä¹‰åˆå§‹åŒ–å™¨</strong>ï¼Œ<strong>å®ƒä¼šè‡ªåŠ¨è·å¾—ä¸€ä¸ªæˆå‘˜åˆå§‹åŒ–å™¨</strong>ã€‚ä¸åŒäºé»˜è®¤åˆå§‹åŒ–å™¨ï¼Œç»“æ„ä½“ä¼šæ¥æ”¶æˆå‘˜åˆå§‹åŒ–å™¨<em>å³ä½¿å®ƒçš„å­˜å‚¨å±æ€§æ²¡æœ‰é»˜è®¤å€¼</em>ã€‚</p>
<p>è¿™ä¸ªæˆå‘˜åˆå§‹åŒ–å™¨æ˜¯ä¸€ä¸ªå¿«é€Ÿåˆå§‹åŒ–æ–°ç»“æ„ä½“å®ä¾‹æˆå‘˜å±æ€§çš„æ–¹å¼ã€‚æ–°å®ä¾‹çš„å±æ€§åˆå§‹å€¼å¯ä»¥é€šè¿‡åç§°ä¼ é€’åˆ°æˆå‘˜åˆå§‹åŒ–å™¨é‡Œã€‚</p>
<p>ä¸‹é¢çš„æ —å­å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>Size</code> æœ‰ä¸¤ä¸ªå±æ€§åˆ†åˆ«æ˜¯ <code>width</code> å’Œ <code>height</code> çš„ç»“æ„ä½“ï¼Œè¿™ä¸¤ä¸ªå±æ€§é€šè¿‡åˆ†é…é»˜è®¤å€¼ <code>0.0</code> ï¼Œä»è€Œè¢«æ¨æ–­ä¸º <code>Double</code> ç±»å‹ã€‚</p>
<p><code>Size</code> ç»“æ„ä½“è‡ªåŠ¨æ¥æ”¶ä¸€ä¸ª <code>init(width:heght:)</code> æˆå‘˜åˆå§‹åŒ–å™¨ï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒæ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ <code>Size</code> å®ä¾‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Size</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> width = <span class="number">0.0</span>, height = <span class="number">0.0</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> twoByTwo = <span class="type">Size</span>(width: <span class="number">2.0</span>, height: <span class="number">2.0</span>)</div></pre></td></tr></table></figure>
<h3 id="å€¼ç±»å‹çš„åˆå§‹åŒ–å™¨å§”æ‰˜"><a href="#å€¼ç±»å‹çš„åˆå§‹åŒ–å™¨å§”æ‰˜" class="headerlink" title="å€¼ç±»å‹çš„åˆå§‹åŒ–å™¨å§”æ‰˜"></a>å€¼ç±»å‹çš„åˆå§‹åŒ–å™¨å§”æ‰˜</h3><p><strong>åˆå§‹åŒ–å™¨å¯ä»¥è°ƒç”¨å…¶ä»–åˆå§‹åŒ–å™¨æ¥æ‰§è¡Œéƒ¨åˆ†å®ä¾‹çš„åˆå§‹åŒ–</strong>ã€‚è¿™ä¸ªè¿‡ç¨‹ï¼Œ<strong>å°±æ˜¯æ‰€è°“çš„åˆå§‹åŒ–å™¨å§”æ‰˜</strong>ï¼Œé¿å…äº†å¤šä¸ªåˆå§‹åŒ–å™¨é‡Œå†—ä½™ä»£ç ã€‚</p>
<p>åˆå§‹åŒ–å™¨å§”æ‰˜çš„è¿ä½œï¼Œä»¥åŠå…è®¸é‚£äº›å½¢å¼çš„å§”æ‰˜ï¼Œè¿™äº›è§„åˆ™å¯¹äº<em>å€¼ç±»å‹å’Œç±»ç±»å‹</em>æ˜¯<strong>ä¸åŒçš„</strong>ã€‚å€¼ç±»å‹(ç»“æ„ä½“å’Œæšä¸¾)ä¸æ”¯æŒç»§æ‰¿ï¼Œæ‰€ä»¥ä»–å®ƒä»¬çš„åˆå§‹åŒ–å™¨å§”æ‰˜çš„è¿‡ç¨‹ç›¸å½“ç®€å•ï¼Œå› ä¸ºå®ƒä»¬åªèƒ½æä¾›å®ƒä»¬è‡ªå·±ä¸ºå¦ä¸€ä¸ªåˆå§‹åŒ–å™¨å§”æ‰˜ã€‚å¦‚åŒç»§æ‰¿é‡Œæè¿°çš„é‚£æ ·ï¼Œæ€»ä¹‹ï¼Œç±»å¯ä»¥ä»å…¶ä»–ç±»ç»§æ‰¿ã€‚è¿™å°±æ„å‘³ç€ç±»æœ‰é¢å¤–çš„è´£ä»»æ¥ç¡®ä¿å®ƒä»¬ç»§æ‰¿çš„æ‰€æœ‰å­˜å‚¨å±æ€§åœ¨åˆå§‹åŒ–æœŸé—´éƒ½åˆ†é…äº†ä¸€ä¸ªåˆé€‚çš„å€¼ã€‚</p>
<p><strong>å¯¹äºå€¼ç±»å‹</strong>ï¼Œå½“ä½ å†™è‡ªå·±è‡ªå®šä¹‰çš„åˆå§‹åŒ–å™¨æ—¶å¯ä»¥ä½¿ç”¨ <code>self.init</code> ä»ç›¸åŒçš„å€¼ç±»å‹é‡Œå¼•ç”¨å…¶ä»–åˆå§‹åŒ–å™¨ã€‚ä½ åªèƒ½ä»åˆå§‹åŒ–å™¨é‡Œè°ƒç”¨ <code>self.init</code> ã€‚</p>
<blockquote>
<p>æ³¨æ„å¦‚æœä½ ä¸ºå€¼ç±»å‹å®šä¹‰äº†è‡ªå®šä¹‰åˆå§‹åŒ–å™¨ï¼Œ<strong>ä½ å°±ä¸èƒ½è®¿é—®é‚£ä¸ªç±»å‹çš„é»˜è®¤åˆå§‹åŒ–å™¨</strong>(æˆ–è€…æ˜¯æˆå‘˜åˆå§‹åŒ–å™¨ï¼Œå¦‚æœæ˜¯ç»“æ„ä½“çš„è¯)ã€‚è¿™ä¸ªé™åˆ¶é˜²æ­¢åˆ«äººæ„å¤–åœ°ä½¿ç”¨è‡ªåŠ¨åˆå§‹åŒ–å™¨è€ŒæŠŠå¤æ‚åˆå§‹åŒ–å™¨é‡Œæä¾›çš„é¢å¤–å¿…è¦é…ç½®ç»™è¦†ç›–æ‰çš„æƒ…å†µå‘ç”Ÿã€‚</p>
<ul>
<li>å¦‚æœä½ æƒ³è¦ä½ è‡ªå·±çš„è‡ªå®šä¹‰å€¼ç±»å‹èƒ½å¤Ÿä½¿ç”¨é»˜è®¤åˆå§‹åŒ–å™¨å’Œæˆå‘˜åˆå§‹åŒ–å™¨åˆå§‹åŒ–ï¼Œä»¥åŠä½ çš„è‡ªå®šä¹‰åˆå§‹åŒ–å™¨æ¥åˆå§‹åŒ–ï¼ŒæŠŠä½ çš„è‡ªå®šä¹‰åˆå§‹åŒ–å™¨å†™åœ¨æ‰©å±•é‡Œè€Œä¸æ˜¯ä½œä¸ºå€¼ç±»å‹åŸå§‹å®çš„ä¸€éƒ¨åˆ†ã€‚</li>
</ul>
</blockquote>
<p>ä¸‹é¢çš„æ —å­å®šä¹‰äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„ <code>Rect</code> ç»“æ„ä½“ä»£è¡¨å‡ ä½•çŸ©å½¢ã€‚è¿™ä¸ªæ —å­éœ€è¦ä¸¤ä¸ªç»“æ„ä½“ï¼Œåˆ†åˆ«æ˜¯ <code>Size</code> å’Œ <code>Point</code> ï¼Œéƒ½ä¸ºä»–ä»¬å„è‡ªçš„å±æ€§é»˜è®¤å€¼éƒ½æ˜¯ <code>0.0</code> ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Size</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> width = <span class="number">0.0</span>, height = <span class="number">0.0</span></div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> x = <span class="number">0.0</span>, y = <span class="number">0.0</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½ å¯ä»¥ç”¨ä¸‰ä¸ªæ–¹å¼ä¸­çš„ä»»æ„ä¸€ä¸ªæ¥åˆå§‹åŒ–ä¸‹é¢çš„ <code>Rect</code> ç»“æ„ä½“â€”â€”é€šè¿‡ä½¿ç”¨é»˜è®¤èµ‹é›¶åˆå§‹åŒ– <code>origin</code> å’Œ <code>size</code> å±æ€§å€¼ï¼Œé€šè¿‡æä¾›ä¸€ä¸ªå…·ä½“çš„åŸç‚¹åæ ‡å’Œå¤§å°ï¼Œæˆ–è€…æä¾›ä¸€ä¸ªå…·ä½“çš„ä¸­å¿ƒç‚¹å’Œå¤§å°ã€‚è¿™ä¸‰ç§åˆå§‹åŒ–é€‰é¡¹é€šè¿‡ä¸‰ä¸ªå†™åœ¨ <code>Rect</code> ç»“æ„ä½“å®šä¹‰é‡Œçš„è‡ªå®šä¹‰åˆå§‹åŒ–å™¨ä»£è¡¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Rect</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> origin = <span class="type">Point</span>()</div><div class="line">    <span class="keyword">var</span> size = <span class="type">Size</span>()</div><div class="line">    <span class="keyword">init</span>() &#123;&#125;</div><div class="line">    <span class="keyword">init</span>(origin: <span class="type">Point</span>, size: <span class="type">Size</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.origin = origin</div><div class="line">        <span class="keyword">self</span>.size = size</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">init</span>(center: <span class="type">Point</span>, size: <span class="type">Size</span>) &#123;</div><div class="line">        <span class="keyword">let</span> originX = center.x - (size.width / <span class="number">2</span>)</div><div class="line">        <span class="keyword">let</span> originY = center.y - (size.height / <span class="number">2</span>)</div><div class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(origin: <span class="type">Point</span>(x: originX, y: originY), size: size)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ª <code>Rect</code> åˆå§‹åŒ–å™¨ï¼Œ <code>init()</code> ï¼Œå’Œé»˜è®¤åˆå§‹åŒ–å™¨æœ‰ä¸€æ ·çš„åŠŸèƒ½ï¼Œå°±æ˜¯é‚£ä¸ªå¦‚æœ <code>Rect</code> æ²¡æœ‰è‡ªå®šä¹‰åˆå§‹åŒ–å™¨ï¼Œå®ƒå°†ä¼šä½¿ç”¨çš„é‚£ä¸ªé»˜è®¤åˆå§‹åŒ–å™¨ã€‚è¿™ä¸ªåˆå§‹åŒ–å™¨æ˜¯ç©ºçš„ï¼Œç”¨ä¸€ä¸ªå¤§æ‹¬å· <code>{}</code> æ¥è¡¨ç¤ºï¼Œå¹¶ä¸”ä¸ä¼šæ‰§è¡Œä»»ä½•åˆå§‹åŒ–ã€‚è°ƒç”¨è¿™ä¸ªåˆå§‹åŒ–å™¨ä¼šè¿”å›ä¸€ä¸ª <code>origin</code> å’Œ <code>size</code> å±æ€§éƒ½è¢«åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼ <code>0.0</code> çš„ <code>Rect</code> å®ä¾‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> basicRect = <span class="type">Rect</span>()</div><div class="line"><span class="comment">// basicRect's origin is (0.0, 0.0) and its size is (0.0, 0.0)</span></div></pre></td></tr></table></figure>
<p>ç¬¬äºŒä¸ª <code>Rect</code> åˆå§‹åŒ–å™¨ï¼Œ <code>init(origin:size)</code> ï¼Œå’Œæˆå‘˜åˆå§‹åŒ–å™¨åŠŸèƒ½ç›¸åŒï¼Œå°±æ˜¯å¦‚æœ <code>Rect</code> æ²¡æœ‰è‡ªå®šä¹‰çš„åˆå§‹åŒ–å™¨ï¼Œå®ƒå°†ä½¿ç”¨çš„é‚£ä¸ªåˆå§‹åŒ–å™¨ã€‚è¿™ä¸ªåˆå§‹åŒ–å™¨åªæ˜¯æŠŠ origin å’Œ size å®é™…å‚æ•°å€¼èµ‹å€¼ç»™åˆé€‚çš„å­˜å‚¨å±æ€§ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> originRect = <span class="type">Rect</span>(origin: <span class="type">Point</span>(x: <span class="number">2.0</span>, y: <span class="number">2.0</span>),</div><div class="line">    size: <span class="type">Size</span>(width: <span class="number">5.0</span>, height: <span class="number">5.0</span>))</div><div class="line"><span class="comment">// originRect's origin is (2.0, 2.0) and its size is (5.0, 5.0)</span></div></pre></td></tr></table></figure>
<p>ç¬¬ä¸‰ä¸ª <code>Rect</code> çš„åˆå§‹åŒ–å™¨ï¼Œ <code>init(center:size:)</code>ï¼Œç•¥æ˜¾å¤æ‚ã€‚å®ƒä»¥è®¡ç®—ä¸€ä¸ªåŸºäº center å’Œ size å€¼çš„åŸç‚¹å¼€å§‹ã€‚ç„¶åè°ƒç”¨(<em>æˆ–æ˜¯å§”æ‰˜</em>) <code>init(origin:size:)</code> åˆå§‹åŒ–å™¨ï¼Œå®ƒåœ¨åˆé€‚çš„å±æ€§é‡Œå‚¨å­˜äº†æ–°çš„åŸç‚¹å’Œå¤§å°å€¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> centerRect = <span class="type">Rect</span>(center: <span class="type">Point</span>(x: <span class="number">4.0</span>, y: <span class="number">4.0</span>),</div><div class="line">    size: <span class="type">Size</span>(width: <span class="number">3.0</span>, height: <span class="number">3.0</span>))</div><div class="line"><span class="comment">// centerRect's origin is (2.5, 2.5) and its size is (3.0, 3.0)</span></div></pre></td></tr></table></figure>
<p><code>init(center:size:)</code> åˆå§‹åŒ–å™¨å¯èƒ½è‡ªå·±å·²ç»ä¸º <code>origin</code> å’Œ <code>size</code> å±æ€§èµ‹å€¼äº†æ–°å€¼ã€‚æ€»ä¹‹ï¼Œå¯¹äº <code>init(center:size:)</code> åˆå§‹åŒ–å™¨æ¥è¯´ï¼Œå¯ä»¥æ›´æ–¹ä¾¿(æ›´æ¸…æ¥š)åœ°åˆ©ç”¨ç°æœ‰å·²ç»æä¾›äº†å‡†ç¡®åŠŸèƒ½çš„åˆå§‹åŒ–å™¨ã€‚</p>
<h3 id="ç±»çš„ç»§æ‰¿å’Œåˆå§‹åŒ–"><a href="#ç±»çš„ç»§æ‰¿å’Œåˆå§‹åŒ–" class="headerlink" title="ç±»çš„ç»§æ‰¿å’Œåˆå§‹åŒ–"></a>ç±»çš„ç»§æ‰¿å’Œåˆå§‹åŒ–</h3><p>æ‰€æœ‰ç±»çš„å­˜å‚¨å±æ€§â€”â€”åŒ…æ‹¬ä»å®ƒçš„çˆ¶ç±»ç»§æ‰¿çš„æ‰€æœ‰å±æ€§â€”â€”<strong>éƒ½å¿…é¡»åœ¨åˆå§‹åŒ–æœŸé—´åˆ†é…åˆå§‹å€¼</strong>ã€‚</p>
<p>Swift ä¸ºç±»ç±»å‹å®šä¹‰äº†ä¸¤ç§åˆå§‹åŒ–å™¨ä»¥ç¡®ä¿æ‰€æœ‰çš„å­˜å‚¨å±æ€§æ¥æ”¶ä¸€ä¸ªåˆå§‹å€¼ã€‚<strong>è¿™äº›å°±æ˜¯æ‰€è°“çš„æŒ‡å®šåˆå§‹åŒ–å™¨å’Œä¾¿æ·åˆå§‹åŒ–å™¨</strong>ã€‚</p>
<h4 id="æŒ‡å®šåˆå§‹åŒ–å™¨å’Œä¾¿æ·åˆå§‹åŒ–å™¨"><a href="#æŒ‡å®šåˆå§‹åŒ–å™¨å’Œä¾¿æ·åˆå§‹åŒ–å™¨" class="headerlink" title="æŒ‡å®šåˆå§‹åŒ–å™¨å’Œä¾¿æ·åˆå§‹åŒ–å™¨"></a>æŒ‡å®šåˆå§‹åŒ–å™¨å’Œä¾¿æ·åˆå§‹åŒ–å™¨</h4><p><em>æŒ‡å®šåˆå§‹åŒ–å™¨</em>æ˜¯ç±»çš„<strong>ä¸»è¦åˆå§‹åŒ–å™¨</strong>ã€‚æŒ‡å®šçš„åˆå§‹åŒ–å™¨å¯ä»¥åˆå§‹åŒ–æ‰€æœ‰é‚£ä¸ªç±»å¼•ç”¨çš„å±æ€§å¹¶ä¸”è°ƒç”¨åˆé€‚çš„çˆ¶ç±»åˆå§‹åŒ–å™¨æ¥ç»§ç»­è¿™ä¸ªåˆå§‹åŒ–è¿‡ç¨‹ç»™çˆ¶ç±»é“¾ã€‚</p>
<p><strong>ç±»åå‘äºå°‘é‡æŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œå¹¶ä¸”ä¸€ä¸ªç±»é€šå¸¸åªæœ‰ä¸€ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨ã€‚æŒ‡å®šåˆå§‹åŒ–å™¨æ˜¯åˆå§‹åŒ–å¼€å§‹å¹¶æŒç»­åˆå§‹åŒ–è¿‡ç¨‹åˆ°çˆ¶ç±»é“¾çš„â€œä¼ é€â€ç‚¹</strong>ã€‚</p>
<p>æ¯ä¸ªç±»è‡³å°‘å¾—æœ‰ä¸€ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨ã€‚å¦‚åŒåœ¨è‡ªåŠ¨åˆå§‹åŒ–å™¨çš„ç»§æ‰¿é‡Œæè¿°çš„é‚£æ ·ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™äº›éœ€æ±‚é€šè¿‡ä»çˆ¶ç±»ç»§æ‰¿ä¸€ä¸ªæˆ–å¤šä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨æ¥æ»¡è¶³ã€‚</p>
<p><strong>ä¾¿æ·åˆå§‹åŒ–å™¨</strong>æ˜¯æ¬¡è¦çš„ï¼Œä¸ºä¸€ä¸ªç±»æ”¯æŒåˆå§‹åŒ–å™¨ã€‚ä½ å¯ä»¥åœ¨ç›¸åŒçš„ç±»é‡Œå®šä¹‰ä¸€ä¸ª<strong>ä¾¿æ·åˆå§‹åŒ–å™¨æ¥è°ƒç”¨ä¸€ä¸ªæŒ‡å®šçš„åˆå§‹åŒ–å™¨ä½œä¸ºä¾¿æ·åˆå§‹åŒ–å™¨æ¥ç»™æŒ‡å®šåˆå§‹åŒ–å™¨</strong>è®¾ç½®é»˜è®¤å½¢å¼å‚æ•°ã€‚ä½ ä¹Ÿå¯ä»¥ä¸ºå…·ä½“çš„ä½¿ç”¨æƒ…å†µæˆ–è¾“å…¥çš„å€¼ç±»å‹å®šä¹‰ä¸€ä¸ªä¾¿æ·åˆå§‹åŒ–å™¨ä»è€Œåˆ›å»ºè¿™ä¸ªç±»çš„å®ä¾‹ã€‚<br>å¦‚æœä½ çš„ç±»ä¸éœ€è¦ä¾¿æ·åˆå§‹åŒ–å™¨ä½ å¯ä»¥ä¸æä¾›å®ƒã€‚åœ¨ä¸ºé€šç”¨çš„åˆå§‹åŒ–æ¨¡å¼åˆ›å»ºå¿«æ·æ–¹å¼ä»¥èŠ‚çœæ—¶é—´æˆ–è€…ç±»çš„åˆå§‹åŒ–æ›´åŠ æ¸…æ™°æ˜äº†çš„æ—¶å€™æ—¶å€™ä¾¿æ·åˆå§‹åŒ–å™¨ã€‚</p>
<h4 id="æŒ‡å®šåˆå§‹åŒ–å™¨å’Œä¾¿æ·åˆå§‹åŒ–å™¨è¯­æ³•"><a href="#æŒ‡å®šåˆå§‹åŒ–å™¨å’Œä¾¿æ·åˆå§‹åŒ–å™¨è¯­æ³•" class="headerlink" title="æŒ‡å®šåˆå§‹åŒ–å™¨å’Œä¾¿æ·åˆå§‹åŒ–å™¨è¯­æ³•"></a>æŒ‡å®šåˆå§‹åŒ–å™¨å’Œä¾¿æ·åˆå§‹åŒ–å™¨è¯­æ³•</h4><p>ç”¨ä¸å€¼ç±»å‹çš„ç®€å•åˆå§‹åŒ–å™¨ç›¸åŒçš„æ–¹å¼æ¥å†™ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">init</span>(parameters) &#123;</div><div class="line">    statements</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¾¿æ·åˆå§‹åŒ–å™¨æœ‰ç€ç›¸åŒçš„ä¹¦å†™æ–¹å¼ï¼Œä½†æ˜¯è¦ç”¨ <code>convenience</code> ä¿®é¥°ç¬¦æ”¾åˆ° <code>init</code> å…³é”®å­—å‰ï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">convenience</span> <span class="keyword">init</span>(parameters) &#123;</div><div class="line">    statements</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="ç±»ç±»å‹çš„åˆå§‹åŒ–å™¨å§”æ‰˜"><a href="#ç±»ç±»å‹çš„åˆå§‹åŒ–å™¨å§”æ‰˜" class="headerlink" title="ç±»ç±»å‹çš„åˆå§‹åŒ–å™¨å§”æ‰˜"></a>ç±»ç±»å‹çš„åˆå§‹åŒ–å™¨å§”æ‰˜</h4><p>ä¸ºäº†<em>ç®€åŒ–æŒ‡å®šå’Œä¾¿æ·åˆå§‹åŒ–å™¨ä¹‹é—´çš„è°ƒç”¨å…³ç³»</em>ï¼ŒSwift åœ¨åˆå§‹åŒ–å™¨ä¹‹é—´çš„å§”æ‰˜è°ƒç”¨æœ‰ä¸‹é¢çš„ä¸‰ä¸ªè§„åˆ™:</p>
<h5 id="è§„åˆ™1"><a href="#è§„åˆ™1" class="headerlink" title="è§„åˆ™1"></a>è§„åˆ™1</h5><p>æŒ‡å®šåˆå§‹åŒ–å™¨å¿…é¡»ä»å®ƒçš„ç›´ç³»çˆ¶ç±»è°ƒç”¨æŒ‡å®šåˆå§‹åŒ–å™¨ã€‚</p>
<h5 id="è§„åˆ™-2"><a href="#è§„åˆ™-2" class="headerlink" title="è§„åˆ™ 2"></a>è§„åˆ™ 2</h5><p>ä¾¿æ·åˆå§‹åŒ–å™¨å¿…é¡»ä»ç›¸åŒçš„ç±»é‡Œè°ƒç”¨å¦ä¸€ä¸ªåˆå§‹åŒ–å™¨ã€‚</p>
<h5 id="è§„åˆ™-3"><a href="#è§„åˆ™-3" class="headerlink" title="è§„åˆ™ 3"></a>è§„åˆ™ 3</h5><p>ä¾¿æ·åˆå§‹åŒ–å™¨æœ€ç»ˆå¿…é¡»è°ƒç”¨ä¸€ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨ã€‚</p>
<p>ç®€å•è®°å¿†çš„è¿™äº›è§„åˆ™çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<ul>
<li>æŒ‡å®šåˆå§‹åŒ–å™¨å¿…é¡»æ€»æ˜¯å‘ä¸Šå§”æ‰˜ã€‚</li>
<li>ä¾¿æ·åˆå§‹åŒ–å™¨å¿…é¡»æ€»æ˜¯æ¨ªå‘å§”æ‰˜ã€‚</li>
</ul>
<p>ä¸‹å›¾ä¸­è¡¨ç¤ºäº†è¿™äº›è§„åˆ™ï¼š<br><img style="margin: auto" src="/2017/11/28/Swift-initialization/initializerDelegation01_2x.png" ,="" alt="initializerDelegation01_2x.png" title="åˆå§‹åŒ–å™¨è§„åˆ™è¡¨"><br>å¦‚å›¾æ‰€ç¤ºï¼Œçˆ¶ç±»åŒ…å«ä¸€ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨å’Œä¸¤ä¸ªä¾¿æ·åˆå§‹åŒ–å™¨ã€‚ä¸€ä¸ªä¾¿æ·åˆå§‹åŒ–å™¨è°ƒç”¨å¦ä¸€ä¸ªä¾¿æ·åˆå§‹åŒ–å™¨ï¼Œè€Œåè€…åˆè°ƒç”¨äº†æŒ‡å®šåˆå§‹åŒ–å™¨ã€‚è¿™æ»¡è¶³äº†ä¸Šè¾¹çš„è§„åˆ™2å’Œè§„åˆ™3ã€‚çˆ¶ç±»æœ¬èº«æ²¡æœ‰å…¶ä»–çˆ¶ç±»ï¼Œæ‰€ä»¥è§„åˆ™1ä¸é€‚ç”¨ã€‚</p>
<p>è¿™ä¸ªå›¾ä¸­çš„å­ç±»æœ‰ä¸¤ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨å’Œä¸€ä¸ªä¾¿æ·åˆå§‹åŒ–å™¨ã€‚ä¾¿æ·åˆå§‹åŒ–å™¨å¿…é¡»è°ƒç”¨è¿™ä¸¤ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨ä¹‹ä¸€ï¼Œå› ä¸ºå®ƒåªèƒ½ä¸­åŒä¸€ä¸ªç±»ä¸­è°ƒç”¨åˆå§‹åŒ–å™¨ã€‚è¿™æ»¡è¶³äº†ä¸Šè¾¹çš„è§„åˆ™2å’Œè§„åˆ™3ã€‚ä¸¤ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨åˆå¿…é¡»ä»çˆ¶ç±»è°ƒç”¨ä¸€ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œè¿™æ»¡è¶³äº†ä¸Šè¾¹æ‰€è¯´çš„è§„åˆ™1ã€‚</p>
<blockquote>
<p>è¿™äº›è§„åˆ™ä¸ä¼šå½±å“ä½ çš„ç±»çš„ä½¿ç”¨è€…ä¸ºæ¯ä¸ªç±»åˆ›å»ºå®ä¾‹ã€‚ä»»ä½•ä¸Šå›¾çš„åˆå§‹åŒ–å™¨éƒ½å¯ä»¥ç”¨æ¥å®Œæ•´åˆ›å»ºå¯¹åº”ç±»çš„å®ä¾‹ã€‚è¿™ä¸ªè§„åˆ™åªåœ¨ç±»çš„å®ç°æ—¶æœ‰å½±å“ã€‚</p>
</blockquote>
<p>ä¸‹å›¾å±•ç¤ºäº†å››ä¸ªç±»ä¹‹é—´æ›´å¤æ‚çš„å±‚çº§ç»“æ„ã€‚å®ƒæ¼”ç¤ºäº†æŒ‡å®šåˆå§‹åŒ–å™¨æ˜¯å¦‚ä½•åœ¨æ­¤å±‚çº§ç»“æ„ä¸­å……å½“<strong>â€ç®¡é“â€</strong>ä½œç”¨ï¼Œåœ¨ç±»çš„åˆå§‹åŒ–é“¾ä¸Šç®€åŒ–äº†ç±»ä¹‹é—´çš„å†…éƒ¨å…³ç³»ï¼š<br><img style="margin: auto" src="/2017/11/28/Swift-initialization/initializerDelegation02_2x.png" ,="" alt="initializerDelegation02_2x" title="å¤šç»§æ‰¿ç®¡é“å†…éƒ¨å…³ç³»"></p>
<h4 id="ä¸¤æ®µå¼åˆå§‹åŒ–"><a href="#ä¸¤æ®µå¼åˆå§‹åŒ–" class="headerlink" title="ä¸¤æ®µå¼åˆå§‹åŒ–"></a>ä¸¤æ®µå¼åˆå§‹åŒ–</h4><p>Swift çš„ç±»åˆå§‹åŒ–æ˜¯ä¸€ä¸ªä¸¤æ®µå¼è¿‡ç¨‹ã€‚åœ¨ç¬¬ä¸€ä¸ªé˜¶æ®µï¼Œæ¯ä¸€ä¸ªå­˜å‚¨å±æ€§è¢«å¼•å…¥ç±»ä¸ºåˆ†é…äº†ä¸€ä¸ªåˆå§‹å€¼ã€‚ä¸€æ—¦æ¯ä¸ªå­˜å‚¨å±æ€§çš„åˆå§‹çŠ¶æ€è¢«ç¡®å®šï¼Œç¬¬äºŒä¸ªé˜¶æ®µå°±å¼€å§‹äº†ï¼Œæ¯ä¸ªç±»éƒ½æœ‰æœºä¼šåœ¨æ–°çš„å®ä¾‹å‡†å¤‡ä½¿ç”¨ä¹‹å‰æ¥å®šåˆ¶å®ƒçš„å­˜å‚¨å±æ€§ã€‚<br>ä¸¤æ®µå¼åˆå§‹åŒ–è¿‡ç¨‹çš„ä½¿ç”¨è®©åˆå§‹åŒ–æ›´åŠ å®‰å…¨ï¼ŒåŒæ—¶åœ¨æ¯ä¸ªç±»çš„å±‚çº§ç»“æ„ç»™ä¸äº†å®Œå¤‡çš„çµæ´»æ€§ã€‚ä¸¤æ®µå¼åˆå§‹åŒ–è¿‡ç¨‹å¯ä»¥é˜²æ­¢å±æ€§å€¼åœ¨åˆå§‹åŒ–ä¹‹å‰è¢«è®¿é—®ï¼Œè¿˜å¯ä»¥é˜²æ­¢å±æ€§å€¼è¢«å¦ä¸€ä¸ªåˆå§‹åŒ–å™¨æ„å¤–åœ°èµ‹äºˆä¸åŒçš„å€¼ã€‚</p>
<blockquote>
<p>Swift çš„ä¸¤æ®µå¼åˆå§‹åŒ–è¿‡ç¨‹ä¸ Objective-C çš„åˆå§‹åŒ–ç±»ä¼¼ã€‚ä¸»è¦çš„ä¸åŒç‚¹æ˜¯åœ¨ç¬¬ä¸€é˜¶æ®µï¼ŒObjective-C ä¸ºæ¯ä¸€ä¸ªå±æ€§åˆ†é…é›¶æˆ–ç©ºå€¼(ä¾‹å¦‚ 0 æˆ– nil )ã€‚Swift çš„åˆå§‹åŒ–æµç¨‹æ›´åŠ çµæ´»ï¼Œå®ƒå…è®¸ä½ è®¾ç½®è‡ªå®šä¹‰çš„åˆå§‹å€¼ï¼Œå¹¶å¯ä»¥è‡ªå¦‚åº”å¯¹ 0 æˆ– nil ä¸ä¸ºåˆæ³•å€¼çš„æƒ…å†µã€‚</p>
</blockquote>
<p>Swiftç¼–è¯‘å™¨æ‰§è¡Œå››ç§æœ‰æ•ˆçš„å®‰å…¨æ£€æŸ¥æ¥ç¡®ä¿ä¸¤æ®µå¼åˆå§‹åŒ–è¿‡ç¨‹èƒ½å¤Ÿé¡ºåˆ©å®Œæˆï¼š</p>
<h5 id="å®‰å…¨æ£€æŸ¥-1"><a href="#å®‰å…¨æ£€æŸ¥-1" class="headerlink" title="å®‰å…¨æ£€æŸ¥ 1"></a>å®‰å…¨æ£€æŸ¥ 1</h5><p><strong>æŒ‡å®šåˆå§‹åŒ–å™¨å¿…é¡»ä¿è¯åœ¨å‘ä¸Šå§”æ‰˜ç»™çˆ¶ç±»åˆå§‹åŒ–å™¨ä¹‹å‰ï¼Œå…¶æ‰€åœ¨ç±»å¼•å…¥çš„æ‰€æœ‰å±æ€§éƒ½è¦åˆå§‹åŒ–å®Œæˆã€‚</strong><br>å¦‚ä¸Šæ‰€è¿°ï¼Œä¸€ä¸ªå¯¹è±¡çš„å†…å­˜åªæœ‰åœ¨å…¶æ‰€æœ‰å‚¨å­˜å‹å±æ€§ç¡®å®šä¹‹åæ‰èƒ½å®Œå…¨åˆå§‹åŒ–ã€‚ä¸ºäº†æ»¡è¶³è¿™ä¸€è§„åˆ™ï¼ŒæŒ‡å®šåˆå§‹åŒ–å™¨å¿…é¡»ä¿è¯å®ƒè‡ªå·±çš„å±æ€§åœ¨å®ƒä¸Šäº¤å§”æ‰˜ä¹‹å‰å…ˆå®Œæˆåˆå§‹åŒ–ã€‚</p>
<h5 id="å®‰å…¨æ£€æŸ¥-2"><a href="#å®‰å…¨æ£€æŸ¥-2" class="headerlink" title="å®‰å…¨æ£€æŸ¥ 2"></a>å®‰å…¨æ£€æŸ¥ 2</h5><p><strong>æŒ‡å®šåˆå§‹åŒ–å™¨å¿…é¡»å…ˆå‘ä¸Šå§”æ‰˜çˆ¶ç±»åˆå§‹åŒ–å™¨ï¼Œç„¶åæ‰èƒ½ä¸ºç»§æ‰¿çš„å±æ€§è®¾ç½®æ–°å€¼ã€‚å¦‚æœä¸è¿™æ ·åšï¼ŒæŒ‡å®šåˆå§‹åŒ–å™¨èµ‹äºˆçš„æ–°å€¼å°†è¢«çˆ¶ç±»ä¸­çš„åˆå§‹åŒ–å™¨æ‰€è¦†ç›–ã€‚</strong></p>
<h5 id="å®‰å…¨æ£€æŸ¥-3"><a href="#å®‰å…¨æ£€æŸ¥-3" class="headerlink" title="å®‰å…¨æ£€æŸ¥ 3"></a>å®‰å…¨æ£€æŸ¥ 3</h5><p><strong>ä¾¿æ·åˆå§‹åŒ–å™¨å¿…é¡»å…ˆå§”æ‰˜åŒç±»ä¸­çš„å…¶å®ƒåˆå§‹åŒ–å™¨ï¼Œç„¶åå†ä¸ºä»»æ„å±æ€§èµ‹æ–°å€¼ï¼ˆåŒ…æ‹¬åŒç±»é‡Œå®šä¹‰çš„å±æ€§ï¼‰ã€‚å¦‚æœæ²¡è¿™ä¹ˆåšï¼Œä¾¿æ·æ„åˆå§‹åŒ–å™¨èµ‹äºˆçš„æ–°å€¼å°†è¢«è‡ªå·±ç±»ä¸­å…¶å®ƒæŒ‡å®šåˆå§‹åŒ–å™¨æ‰€è¦†ç›–ã€‚</strong></p>
<h5 id="å®‰å…¨æ£€æŸ¥-4"><a href="#å®‰å…¨æ£€æŸ¥-4" class="headerlink" title="å®‰å…¨æ£€æŸ¥ 4"></a>å®‰å…¨æ£€æŸ¥ 4</h5><p><strong>åˆå§‹åŒ–å™¨åœ¨ç¬¬ä¸€é˜¶æ®µåˆå§‹åŒ–å®Œæˆä¹‹å‰ï¼Œä¸èƒ½è°ƒç”¨ä»»ä½•å®ä¾‹æ–¹æ³•ã€ä¸èƒ½è¯»å–ä»»ä½•å®ä¾‹å±æ€§çš„å€¼ï¼Œä¹Ÿä¸èƒ½å¼•ç”¨ <code>self</code> ä½œä¸ºå€¼ã€‚</strong></p>
<p>ç›´åˆ°ç¬¬ä¸€é˜¶æ®µç»“æŸç±»å®ä¾‹æ‰å®Œå…¨åˆæ³•ã€‚å±æ€§åªèƒ½è¢«è¯»å–ï¼Œæ–¹æ³•ä¹Ÿåªèƒ½è¢«è°ƒç”¨ï¼Œç›´åˆ°ç¬¬ä¸€é˜¶æ®µç»“æŸçš„æ—¶å€™ï¼Œè¿™ä¸ªç±»å®ä¾‹æ‰è¢«çœ‹åšæ˜¯åˆæ³•çš„ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸¤æ®µåˆå§‹åŒ–è¿‡ç¨‹ï¼ŒåŸºäºä¸Šè¿°å››ç§æ£€æŸ¥çš„æµç¨‹ï¼š</p>
<h5 id="é˜¶æ®µ-1"><a href="#é˜¶æ®µ-1" class="headerlink" title="é˜¶æ®µ 1"></a>é˜¶æ®µ 1</h5><ul>
<li>æŒ‡å®šæˆ–ä¾¿æ·åˆå§‹åŒ–å™¨åœ¨ç±»ä¸­è¢«è°ƒç”¨ï¼›</li>
<li>ä¸ºè¿™ä¸ªç±»çš„æ–°å®ä¾‹åˆ†é…å†…å­˜ã€‚å†…å­˜è¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼›</li>
<li>è¿™ä¸ªç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨ç¡®ä¿æ‰€æœ‰ç”±æ­¤ç±»å¼•å…¥çš„å­˜å‚¨å±æ€§éƒ½æœ‰ä¸€ä¸ªå€¼ã€‚ç°åœ¨è¿™äº›å­˜å‚¨å±æ€§çš„å†…å­˜è¢«åˆå§‹åŒ–äº†ï¼›</li>
<li>æŒ‡å®šåˆå§‹åŒ–å™¨ä¸Šäº¤çˆ¶ç±»çš„åˆå§‹åŒ–å™¨ä¸ºå…¶å­˜å‚¨å±æ€§æ‰§è¡Œç›¸åŒçš„ä»»åŠ¡ï¼›</li>
<li>è¿™ä¸ªè°ƒç”¨çˆ¶ç±»åˆå§‹åŒ–å™¨çš„è¿‡ç¨‹å°†æ²¿ç€åˆå§‹åŒ–å™¨é“¾ä¸€ç›´å‘ä¸Šè¿›è¡Œï¼Œç›´åˆ°åˆ°è¾¾åˆå§‹åŒ–å™¨é“¾çš„æœ€é¡¶éƒ¨ï¼›</li>
<li>ä¸€æ—¦è¾¾äº†åˆå§‹åŒ–å™¨é“¾çš„æœ€é¡¶éƒ¨ï¼Œåœ¨é“¾é¡¶éƒ¨çš„ç±»ç¡®ä¿æ‰€æœ‰çš„å­˜å‚¨å±æ€§éƒ½æœ‰ä¸€ä¸ªå€¼ï¼Œæ­¤å®ä¾‹çš„å†…å­˜è¢«è®¤ä¸ºå®Œå…¨åˆå§‹åŒ–äº†ï¼Œæ­¤æ—¶ç¬¬ä¸€é˜¶æ®µå®Œæˆã€‚</li>
</ul>
<h5 id="é˜¶æ®µ-2"><a href="#é˜¶æ®µ-2" class="headerlink" title="é˜¶æ®µ 2"></a>é˜¶æ®µ 2</h5><ul>
<li>ä»é¡¶éƒ¨åˆå§‹åŒ–å™¨å¾€ä¸‹ï¼Œé“¾ä¸­çš„æ¯ä¸€ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨éƒ½æœ‰æœºä¼šè¿›ä¸€æ­¥å®šåˆ¶å®ä¾‹ã€‚åˆå§‹åŒ–å™¨ç°åœ¨èƒ½å¤Ÿè®¿é—® self å¹¶ä¸”å¯ä»¥ä¿®æ”¹å®ƒçš„å±æ€§ï¼Œè°ƒç”¨å®ƒçš„å®ä¾‹æ–¹æ³•ç­‰ç­‰ï¼›</li>
<li>æœ€ç»ˆï¼Œé“¾ä¸­ä»»ä½•ä¾¿æ·åˆå§‹åŒ–å™¨éƒ½æœ‰æœºä¼šå®šåˆ¶å®ä¾‹ä»¥åŠä½¿ç”¨ slef ã€‚</li>
</ul>
<p>ä¸‹é¢å±•ç¤ºäº†<strong>ç¬¬ä¸€é˜¶æ®µ</strong>å‡å®šçš„å­ç±»å’Œçˆ¶ç±»ä¹‹é—´çš„åˆå§‹åŒ–è°ƒç”¨å…³ç³»ï¼š<br><img style="margin: auto" src="/2017/11/28/Swift-initialization/twoPhaseInitialization01_2x.png" alt="twoPhaseInitialization01_2x" title="å­ç±»ä¸çˆ¶ç±»é˜¶æ®µ1å…³ç³»å›¾"></p>
<p>åœ¨è¿™ä¸ªæ —å­ä¸­ï¼Œåˆå§‹åŒ–è¿‡ç¨‹ä»ä¸€ä¸ªå­ç±»çš„ä¾¿æ·åˆå§‹åŒ–å™¨å¼€å§‹ã€‚è¿™ä¸ªä¾¿æ·åˆå§‹åŒ–å™¨è¿˜ä¸èƒ½ä¿®æ”¹ä»»ä½•å±æ€§ã€‚å®ƒå§”æ‰˜ç»™äº†åŒä¸€ç±»é‡Œçš„æŒ‡å®šåˆå§‹åŒ–å™¨ã€‚</p>
<p>æŒ‡å®šåˆå§‹åŒ–å™¨ç¡®ä¿æ‰€æœ‰çš„å­ç±»å±æ€§éƒ½æœ‰å€¼ï¼Œå¦‚<em>å®‰å…¨æ£€æŸ¥1</em>ã€‚ç„¶åå®ƒè°ƒç”¨çˆ¶ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨æ¥æ²¿ç€åˆå§‹åŒ–å™¨é“¾ä¸€ç›´å¾€ä¸Šå®Œæˆçˆ¶ç±»çš„åˆå§‹åŒ–è¿‡ç¨‹ã€‚çˆ¶ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨ç¡®ä¿æ‰€æœ‰çš„çˆ¶ç±»å±æ€§éƒ½æœ‰å€¼ã€‚ç”±äºæ²¡æœ‰æ›´å¤šçš„çˆ¶ç±»æ¥åˆå§‹åŒ–ï¼Œä¹Ÿå°±ä¸éœ€è¦æ›´å¤šçš„å§”æ‰˜ã€‚ä¸€æ—¦çˆ¶ç±»ä¸­æ‰€æœ‰å±æ€§éƒ½æœ‰åˆå§‹å€¼ï¼Œå®ƒçš„å†…å­˜å°±è¢«è®¤ä¸ºå®Œå…¨åˆå§‹åŒ–äº†ï¼Œ<em>ç¬¬1é˜¶æ®µå®Œæˆ</em>ã€‚</p>
<p>ä¸‹å›¾æ˜¯ç›¸åŒçš„åˆå§‹åŒ–è¿‡ç¨‹åœ¨<strong>ç¬¬äºŒé˜¶æ®µ</strong>çš„æ ·å­ï¼š<br><img style="margin: auto" src="/2017/11/28/Swift-initialization/twoPhaseInitialization02_2x.png" alt="twoPhaseInitialization02_2x" title="åˆå§‹åŒ–ç¬¬äºŒé˜¶æ®µå…³ç³»å›¾"><br>ç°åœ¨çˆ¶ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨æœ‰æœºä¼šæ¥å®šåˆ¶æ›´å¤šå®ä¾‹(å°½ç®¡æ²¡æœ‰è¿™ç§å¿…è¦)ã€‚ä¸€æ—¦çˆ¶ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨å®Œæˆäº†è°ƒç”¨ï¼Œå­ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨å°±å¯ä»¥æ‰§è¡Œé¢å¤–çš„å®šåˆ¶(åŒæ ·ï¼Œå°½ç®¡æ²¡æœ‰è¿™ç§å¿…è¦)ã€‚</p>
<p>æœ€åï¼Œä¸€æ—¦å­ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨å®Œæˆï¼Œæœ€åˆè°ƒç”¨çš„ä¾¿æ·åˆå§‹åŒ–å™¨å°†ä¼šæ‰§è¡Œé¢å¤–çš„å®šåˆ¶æ“ä½œã€‚</p>
<h4 id="åˆå§‹åŒ–å™¨çš„ç»§æ‰¿å’Œé‡å†™"><a href="#åˆå§‹åŒ–å™¨çš„ç»§æ‰¿å’Œé‡å†™" class="headerlink" title="åˆå§‹åŒ–å™¨çš„ç»§æ‰¿å’Œé‡å†™"></a>åˆå§‹åŒ–å™¨çš„ç»§æ‰¿å’Œé‡å†™</h4><p>ä¸åƒåœ¨ Objective-C ä¸­çš„å­ç±»ï¼ŒSwift çš„å­ç±»ä¸ä¼šé»˜è®¤ç»§æ‰¿çˆ¶ç±»çš„åˆå§‹åŒ–å™¨ã€‚Swift çš„è¿™ç§æœºåˆ¶é˜²æ­¢çˆ¶ç±»çš„ç®€å•åˆå§‹åŒ–å™¨è¢«ä¸€ä¸ªæ›´ä¸“ç”¨çš„å­ç±»ç»§æ‰¿å¹¶è¢«ç”¨æ¥åˆ›å»ºä¸€ä¸ªæ²¡æœ‰å®Œå…¨æˆ–é”™è¯¯åˆå§‹åŒ–çš„æ–°å®ä¾‹çš„æƒ…å†µå‘ç”Ÿã€‚</p>
<p>å¦‚æœä½ æƒ³è‡ªå®šä¹‰å­ç±»æ¥å®ç°ä¸€ä¸ªæˆ–å¤šä¸ªå’Œçˆ¶ç±»ç›¸åŒçš„åˆå§‹åŒ–å™¨ï¼Œä½ å¯ä»¥åœ¨å­ç±»ä¸­ä¸ºé‚£äº›åˆå§‹åŒ–å™¨æä¾›å®šåˆ¶çš„å®ç°ã€‚<br>å½“ä½ å†™çš„å­ç±»åˆå§‹åŒ–å™¨åŒ¹é…çˆ¶ç±»<em>æŒ‡å®šåˆå§‹åŒ–å™¨çš„æ—¶å€™</em>ï¼Œä½ å®é™…ä¸Šå¯ä»¥é‡å†™é‚£ä¸ªåˆå§‹åŒ–å™¨ã€‚å› æ­¤ï¼Œåœ¨å­ç±»çš„åˆå§‹åŒ–å™¨å®šä¹‰ä¹‹å‰ä½ å¿…é¡»å†™ <code>override</code> ä¿®é¥°ç¬¦ã€‚å¦‚åŒé»˜è®¤åˆå§‹åŒ–å™¨æ‰€æè¿°çš„é‚£æ ·ï¼Œå³ä½¿æ˜¯è‡ªåŠ¨æä¾›çš„é»˜è®¤åˆå§‹åŒ–å™¨ä½ ä¹Ÿå¯ä»¥é‡å†™ã€‚</p>
<p>ç›¸åï¼Œå¦‚åŒä¸Šè¾¹ç±»ç±»å‹çš„åˆå§‹åŒ–å™¨å§”æ‰˜æ‰€æè¿°çš„è§„åˆ™é‚£æ ·ï¼Œå¦‚æœä½ å†™äº†<strong>ä¸€ä¸ªåŒ¹é…çˆ¶ç±»ä¾¿æ·åˆå§‹åŒ–å™¨çš„å­ç±»åˆå§‹åŒ–å™¨</strong>ï¼Œçˆ¶ç±»çš„ä¾¿æ·åˆå§‹åŒ–å™¨å°†æ°¸è¿œä¸ä¼šé€šè¿‡ä½ çš„å­ç±»ç›´æ¥è°ƒç”¨ã€‚å› æ­¤ï¼Œä½ çš„å­ç±»ä¸èƒ½(ä¸¥æ ¼æ¥è®²)æä¾›çˆ¶ç±»åˆå§‹åŒ–å™¨çš„é‡å†™ã€‚å½“æä¾›ä¸€ä¸ªåŒ¹é…çš„çˆ¶ç±»ä¾¿æ·åˆå§‹åŒ–å™¨çš„å®ç°æ—¶ï¼Œä½ ä¸ç”¨å†™ <code>override</code> ä¿®é¥°ç¬¦ã€‚</p>
<p>ä¸‹é¢çš„æ —å­å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>Vehicle</code> çš„åŸºç±»ã€‚åŸºç±»å£°æ˜äº†ä¸€ä¸ªåä¸º <code>numberOfWheels</code> çš„å­˜å‚¨å±æ€§ï¼Œç±»å‹ä¸º <code>Int</code> çš„é»˜è®¤å€¼ <code>0</code> ã€‚ <code>numberOfWheels</code> å±æ€§é€šè¿‡ä¸€ä¸ªåä¸º <code>description</code> çš„è®¡ç®—å±æ€§æ¥åˆ›å»ºä¸€ä¸ª <code>String</code> ç±»å‹çš„è½¦è¾†ç‰¹å¾å­—ç¬¦ä¸²æè¿°ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vehicle</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> numberOfWheels = <span class="number">0</span></div><div class="line">    <span class="keyword">var</span> description: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"<span class="subst">\(numberOfWheels)</span> wheel(s)"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>Vehicle</code> ç±»åªä¸ºå®ƒçš„å­˜å‚¨å±æ€§æä¾›äº†é»˜è®¤å€¼ï¼Œå¹¶ä¸”æ²¡æœ‰æä¾›è‡ªå®šä¹‰çš„åˆå§‹åŒ–å™¨ã€‚å› æ­¤ï¼Œå¦‚åŒé»˜è®¤åˆå§‹åŒ–å™¨ä¸­æè¿°çš„é‚£æ ·ï¼Œå®ƒä¼šè‡ªåŠ¨æ”¶åˆ°ä¸€ä¸ªé»˜è®¤åˆå§‹åŒ–å™¨ã€‚é»˜è®¤åˆå§‹åŒ–å™¨(å¦‚æœå¯ç”¨çš„è¯)æ€»æ˜¯ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Vehicle</code> å®ä¾‹ï¼Œ <code>numberOfWheels</code> é»˜è®¤ä¸º <code>0</code> ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> vehicle = <span class="type">Vehicle</span>()</div><div class="line"><span class="built_in">print</span>(<span class="string">"Vehicle: <span class="subst">\(vehicle.description)</span>"</span>)</div><div class="line"><span class="comment">// Vehicle: 0 wheel(s)</span></div></pre></td></tr></table></figure>
<p>ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>Bicycle</code> ç»§æ‰¿è‡ª <code>Vehicle</code> çš„å­ç±»ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bicycle</span>: <span class="title">Vehicle</span> </span>&#123;</div><div class="line">    <span class="keyword">override</span> <span class="keyword">init</span>() &#123;</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>()</div><div class="line">        numberOfWheels = <span class="number">2</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å­ç±» <code>Bicycle</code> å®šä¹‰äº†ä¸€ä¸ªè‡ªå®šä¹‰åˆå§‹åŒ–å™¨ <code>init()</code> ã€‚è¿™ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨å’Œ <code>Bicycle</code> çš„çˆ¶ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨ç›¸åŒ¹é…ï¼Œæ‰€ä»¥ <code>Bicycle</code> ä¸­çš„æŒ‡å®šåˆå§‹åŒ–å™¨éœ€è¦å¸¦ä¸Š <code>override</code> ä¿®é¥°ç¬¦ã€‚</p>
<p><code>Bicycle</code> ç±»çš„ <code>init()</code> åˆå§‹åŒ–å™¨ä»¥è°ƒç”¨ <code>super.init()</code> å¼€å§‹ï¼Œè¿™ä¸ªæ–¹æ³•ä½œç”¨æ˜¯è°ƒç”¨çˆ¶ç±»çš„åˆå§‹åŒ–å™¨ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿ <code>Bicycle</code> åœ¨ä¿®æ”¹å±æ€§ä¹‹å‰å®ƒæ‰€ç»§æ‰¿çš„å±æ€§ <code>numberOfWheels</code> èƒ½è¢« <code>Vehicle</code> ç±»åˆå§‹åŒ–ã€‚åœ¨è°ƒç”¨ <code>super.init()</code> ä¹‹åï¼Œä¸€å¼€å§‹çš„ <code>numberOfWheels</code> å€¼ä¼šè¢«æ–°å€¼ <code>2</code> æ›¿æ¢ã€‚</p>
<p>å¦‚æœä½ åˆ›å»ºä¸€ä¸ª <code>Bicycle</code> å®ä¾‹ï¼Œä½ å¯ä»¥è°ƒç”¨ç»§æ‰¿çš„ <code>description</code> è®¡ç®—å±æ€§æ¥æŸ¥çœ‹å±æ€§ <code>numberOfWheels</code> æ˜¯å¦æœ‰æ”¹å˜ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> bicycle = <span class="type">Bicycle</span>()</div><div class="line"><span class="built_in">print</span>(<span class="string">"Bicycle: <span class="subst">\(bicycle.description)</span>"</span>)</div><div class="line"><span class="comment">// Bicycle: 2 wheel(s)</span></div></pre></td></tr></table></figure>
<h4 id="è‡ªåŠ¨åˆå§‹åŒ–å™¨çš„ç»§æ‰¿"><a href="#è‡ªåŠ¨åˆå§‹åŒ–å™¨çš„ç»§æ‰¿" class="headerlink" title="è‡ªåŠ¨åˆå§‹åŒ–å™¨çš„ç»§æ‰¿"></a>è‡ªåŠ¨åˆå§‹åŒ–å™¨çš„ç»§æ‰¿</h4><p>å¦‚ä¸Šæ‰€è¿°ï¼Œ<strong>å­ç±»é»˜è®¤ä¸ä¼šç»§æ‰¿çˆ¶ç±»åˆå§‹åŒ–å™¨</strong>ã€‚æ€»ä¹‹ï¼Œ<em>åœ¨ç‰¹å®šçš„æƒ…å†µä¸‹çˆ¶ç±»åˆå§‹åŒ–å™¨æ˜¯å¯ä»¥è¢«è‡ªåŠ¨ç»§æ‰¿çš„</em>ã€‚å®é™…ä¸Šï¼Œè¿™æ„å‘³ç€åœ¨è®¸å¤šåœºæ™¯ä¸­ä½ ä¸å¿…é‡å†™çˆ¶ç±»åˆå§‹åŒ–å™¨ï¼Œåªè¦å¯ä»¥å®‰å…¨æ“ä½œï¼Œä½ å°±å¯ä»¥æ¯«ä¸è´¹åŠ›åœ°ç»§æ‰¿çˆ¶ç±»çš„åˆå§‹åŒ–å™¨ã€‚</p>
<p>å‡è®¾ä½ ä¸ºä½ å­ç±»å¼•å…¥çš„ä»»ä½•æ–°çš„å±æ€§éƒ½æä¾›äº†é»˜è®¤å€¼ï¼Œè¯·éµå®ˆä»¥ä¸‹2ä¸ªè§„åˆ™ï¼š</p>
<h5 id="è§„åˆ™-1"><a href="#è§„åˆ™-1" class="headerlink" title="è§„åˆ™ 1"></a>è§„åˆ™ 1</h5><p><strong>å¦‚æœä½ çš„å­ç±»æ²¡æœ‰å®šä¹‰ä»»ä½•æŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œå®ƒä¼šè‡ªåŠ¨ç»§æ‰¿çˆ¶ç±»æ‰€æœ‰çš„æŒ‡å®šåˆå§‹åŒ–å™¨ã€‚</strong></p>
<h5 id="è§„åˆ™-2-1"><a href="#è§„åˆ™-2-1" class="headerlink" title="è§„åˆ™ 2"></a>è§„åˆ™ 2</h5><p>å¦‚æœä½ çš„å­ç±»æä¾›äº†æ‰€æœ‰çˆ¶ç±»<strong>æŒ‡å®šåˆå§‹åŒ–å™¨çš„å®ç°</strong>â€”â€”è¦ä¹ˆæ˜¯é€šè¿‡è§„åˆ™1ç»§æ‰¿æ¥çš„ï¼Œè¦ä¹ˆé€šè¿‡åœ¨å®šä¹‰ä¸­æä¾›è‡ªå®šä¹‰å®ç°çš„â€”â€”é‚£ä¹ˆå®ƒè‡ªåŠ¨ç»§æ‰¿æ‰€æœ‰çš„çˆ¶ç±»ä¾¿æ·åˆå§‹åŒ–å™¨ã€‚</p>
<p>å°±ç®—ä½ çš„å­ç±»æ·»åŠ äº†æ›´å¤šçš„ä¾¿æ·åˆå§‹åŒ–å™¨ï¼Œè¿™äº›è§„åˆ™ä»ç„¶é€‚ç”¨ã€‚</p>
<blockquote>
<p>å­ç±»èƒ½å¤Ÿä»¥ä¾¿æ·åˆå§‹åŒ–å™¨çš„å½¢å¼å®ç°çˆ¶ç±»æŒ‡å®šåˆå§‹åŒ–å™¨æ¥ä½œä¸ºæ»¡è¶³è§„åˆ™2çš„ä¸€éƒ¨åˆ†ã€‚</p>
</blockquote>
<h4 id="æŒ‡å®šå’Œä¾¿æ·åˆå§‹åŒ–å™¨çš„æ“ä½œ"><a href="#æŒ‡å®šå’Œä¾¿æ·åˆå§‹åŒ–å™¨çš„æ“ä½œ" class="headerlink" title="æŒ‡å®šå’Œä¾¿æ·åˆå§‹åŒ–å™¨çš„æ“ä½œ"></a>æŒ‡å®šå’Œä¾¿æ·åˆå§‹åŒ–å™¨çš„æ“ä½œ</h4><p>ä¸‹é¢çš„æ —å­å±•ç¤ºäº†åœ¨æ“ä½œä¸­<em>æŒ‡å®šåˆå§‹åŒ–å™¨</em>ï¼Œ<em>ä¾¿æ·åˆå§‹åŒ–å™¨</em>å’Œ<em>è‡ªåŠ¨åˆå§‹åŒ–å™¨</em>çš„ç»§æ‰¿ã€‚è¿™ä¸ªæ —å­å®šä¹‰äº† <code>Food</code> ï¼Œ <code>RecipeIngredient</code> å’Œ <code>ShoppingListItem</code> ä¸‰ä¸ªç±»çš„å±‚çº§å…³ç³»ï¼Œå¹¶æ¼”ç¤ºäº†å®ƒä»¬çš„ç»§æ‰¿å…³ç³»æ˜¯å¦‚ä½•ç›¸äº’ä½œç”¨çš„ã€‚</p>
<p>åœ¨å±‚çº§å…³ç³»ä¸­çš„åŸºç±»ç§°ä¸º <code>Food</code> ï¼Œå®ƒæ˜¯ä¸€ä¸ªç®€å•çš„ç±»ç”¨æ¥å°è£…äº†é£Ÿå“çš„åç§°ã€‚ <code>Food</code> ç±»å¼•å…¥äº†ä¸€ä¸ªåä¸º <code>name</code> çš„ <code>String</code> å±æ€§è¿˜æä¾›äº†ä¸¤ä¸ªåˆ›å»º <code>Food</code> å®ä¾‹çš„åˆå§‹åŒ–å™¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Food</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123; <span class="comment">//æŒ‡å®šåˆå§‹åŒ–å™¨</span></div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">convenience</span> <span class="keyword">init</span>() &#123;<span class="comment">//ä¾¿æºåˆå§‹åŒ–å™¨</span></div><div class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(name: <span class="string">"[Unnamed]"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸‹é¢çš„å›¾è¡¨å±•ç¤ºäº† <code>Food</code> ç±»çš„åˆå§‹åŒ–é“¾ï¼š<br><img style="margin: auto" src="/2017/11/28/Swift-initialization/initializersExample01_2x.png" alt="initializersExample01_2x" title="Foodç±»çš„åˆå§‹åŒ–é“¾"></p>
<p><em>ç±»æ²¡æœ‰é»˜è®¤æˆå‘˜åˆå§‹åŒ–å™¨</em>ï¼Œæ‰€ä»¥ <code>Food</code> ç±»æä¾›äº†ä¸€ä¸ªæ¥å—å•ä¸€å®é™…å‚æ•°çš„æŒ‡å®šåˆå§‹åŒ–å™¨å«åš <code>name</code> ã€‚è¿™ä¸ªåˆå§‹åŒ–å™¨å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå…·ä½“çš„åç§°æ¥åˆ›å»ºæ–°çš„ <code>Food</code> å®ä¾‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> namedMeat = <span class="type">Food</span>(name: <span class="string">"Bacon"</span>)</div><div class="line"><span class="comment">// namedMeat's name is "Bacon"</span></div></pre></td></tr></table></figure>
<p><code>Food</code> ç±»çš„ i<code>nit(name: String)</code> åˆå§‹åŒ–å™¨æ˜¯ä¸€ä¸ª<strong>æŒ‡å®šåˆå§‹åŒ–å™¨</strong>ï¼Œå› ä¸ºå®ƒç¡®ä¿ <code>Food</code> ç±»æ–°å®ä¾‹çš„æ‰€æœ‰å­˜å‚¨å±æ€§éƒ½è¢«å®Œå…¨åˆå§‹åŒ–ã€‚ <code>Food</code> ç±»æ²¡æœ‰çˆ¶ç±»ï¼Œæ‰€ä»¥ <code>init(name: String)</code>åˆå§‹åŒ–å™¨ä¸ç”¨è°ƒç”¨ <code>super.init()</code> æ¥å®Œæˆå®ƒçš„åˆå§‹åŒ–ã€‚</p>
<p>Food ç±»ä¹Ÿæä¾›äº†æ²¡æœ‰å®é™…å‚æ•°çš„<strong>ä¾¿æ·åˆå§‹åŒ–å™¨</strong> <code>init()</code> ã€‚ <code>init()</code> åˆå§‹åŒ–å™¨é€šè¿‡å§”æ‰˜è°ƒç”¨åŒä¸€ç±»ä¸­å®šä¹‰çš„æŒ‡å®šåˆå§‹åŒ–å™¨ <code>init(name: String)</code> å¹¶ç»™å‚æ•° <code>name</code> ä¼ å€¼ <code>[Unnamed]</code> æ¥å®ç°æä¾›é»˜è®¤çš„åç§°å ä½ç¬¦ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> mysteryMeat = <span class="type">Food</span>()</div><div class="line"><span class="comment">// mysteryMeat's name is "[Unnamed]"</span></div></pre></td></tr></table></figure>
<p>ç±»å±‚çº§ä¸­çš„ç¬¬äºŒä¸ªç±»æ˜¯ <code>Food</code> çš„å­ç±» <code>RecipeIngredient</code> ã€‚ <code>RecipeIngredient</code> ç±»æ¨¡å‹æ„å»ºäº†é£Ÿè°±ä¸­ä¸€ä¸ªè°ƒå‘³å‰‚ã€‚å®ƒå¼•å…¥äº† <code>Int</code> ç±»å‹çš„æ•°é‡å±æ€§ <code>quantity</code> ï¼ˆä»¥åŠä» <code>Food</code> ç»§æ‰¿è¿‡æ¥çš„ <code>name</code> å±æ€§)å¹¶ä¸”å®šä¹‰äº†ä¸¤ä¸ªåˆå§‹åŒ–å™¨æ¥åˆ›å»º <code>RecipeIngredient</code> å®ä¾‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">RecipeIngredient</span>: <span class="title">Food</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> quantity: <span class="type">Int</span></div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>, quantity: <span class="type">Int</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.quantity = quantity</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(name: name)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">override</span> <span class="keyword">convenience</span> <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(name: name, quantity: <span class="number">1</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸‹é¢çš„å›¾æ ‡å±•ç¤ºäº† <code>RecipeIngredient</code> äº†çš„åˆå§‹åŒ–é“¾:<br><img style="margin: auto" src="/2017/11/28/Swift-initialization/initializersExample02_2x.png" alt="initializersExample02_2x" title="RecipeIngredientåˆå§‹åŒ–é“¾"></p>
<p><code>RecipeIngredient</code> ç±»åªæœ‰ä¸€ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œ <code>init(name: String, quantity: Int)</code> ï¼Œå®ƒå¯ä»¥ç”¨æ¥å¡«å……æ–°çš„ <code>RecipeIngredient</code> å®ä¾‹ä¸­æ‰€æœ‰çš„å±æ€§ã€‚è¿™ä¸ªåˆå§‹åŒ–å™¨ä¸€å¼€å§‹å…ˆå°†ä¼ å…¥çš„ <code>quantity</code> å®é™…å‚æ•°èµ‹å€¼ç»™ <code>quantity</code> å±æ€§ï¼Œè¿™ä¸ªå±æ€§ä¹Ÿæ˜¯å”¯ä¸€ä¸€ä¸ªé€šè¿‡ <code>RecipeIngredient</code> å¼•å…¥çš„æ–°å±æ€§ã€‚éšåï¼Œ<strong>åˆå§‹åŒ–å™¨å°†å‘ä¸Šå§”æ‰˜ç»™çˆ¶ç±»</strong> <code>Food</code> çš„ <code>init(name: String)</code> åˆå§‹åŒ–å™¨ã€‚è¿™ä¸ªè¿‡ç¨‹æ»¡è¶³ä¸Šè¾¹æ‰€è¿°çš„ä¸¤æ®µå¼åˆå§‹åŒ–çš„<em>å®‰å…¨æ£€æŸ¥1</em>ã€‚</p>
<p><code>RecipeIngredient</code> åŒæ ·å®šä¹‰äº†ä¸€ä¸ªä¾¿æ·åˆå§‹åŒ–å™¨ï¼Œ <code>init(name: String)</code> ï¼Œå®ƒåªé€šè¿‡<code>name</code>æ¥åˆ›å»º <code>RecipeIngredient</code> çš„å®ä¾‹ã€‚è¿™ä¸ªä¾¿æ·åˆå§‹åŒ–å™¨å‡è®¾ä»»æ„ <code>RecipeIngredient</code> æ²¡æœ‰æ˜ç¡®æ•°é‡çš„å®ä¾‹çš„ <code>quantity</code> å€¼éƒ½ä¸º <code>1</code>ã€‚ä¾¿æ·åˆå§‹åŒ–å™¨çš„å®šä¹‰è®© <code>RecipeIngredient</code> å®ä¾‹åˆ›å»ºçš„æ–¹ä¾¿æ›´å¿«æ·ï¼Œå¹¶ä¸”å½“åˆ›å»ºå¤šä¸ªå•æ•°å®ä¾‹æ—¶å¯ä»¥é¿å…ä»£ç å†—ä½™ã€‚è¿™ä¸ªä¾¿æ·åˆå§‹åŒ–å™¨åªæ˜¯ç®€å•çš„å§”æ‰˜äº†ç±»çš„æŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œä¼ é€’äº†å€¼ä¸º <code>1</code> çš„ <code>quantity</code> ã€‚</p>
<p><code>RecipeIngredient</code> ç±»æä¾›çš„ <code>init(name: String)</code> ä¾¿æ·åˆå§‹åŒ–å™¨æ¥æ”¶ä¸ <code>Food</code> ä¸­æŒ‡å®šåˆå§‹åŒ–å™¨ <code>init(name: String)</code> ç›¸åŒçš„å½¢å¼å‚æ•°ã€‚å› ä¸ºè¿™ä¸ªä¾¿æ·åˆå§‹åŒ–å™¨ä»å®ƒçš„çˆ¶ç±»é‡å†™äº†ä¸€ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œå®ƒå¿…é¡»ä½¿ç”¨ <code>override</code> ä¿®é¥°ç¬¦ã€‚</p>
<p>å°½ç®¡ <code>RecipeIngredient</code> æä¾›äº† <code>init(name: String)</code> åˆå§‹åŒ–å™¨ä½œä¸ºä¸€ä¸ª<strong>ä¾¿æ·åˆå§‹åŒ–å™¨</strong>ï¼Œç„¶è€Œ <code>RecipeIngredient</code> ç±»ä¸ºæ‰€æœ‰çš„<em>çˆ¶ç±»æŒ‡å®šåˆå§‹åŒ–å™¨</em>æä¾›äº†å®ç°ã€‚å› æ­¤ï¼Œ <code>RecipeIngredient</code> ç±»<strong>ä¹Ÿè‡ªåŠ¨ç»§æ‰¿äº†çˆ¶ç±»æ‰€æœ‰çš„ä¾¿æ·åˆå§‹åŒ–å™¨</strong>ã€‚</p>
<p>åœ¨è¿™ä¸ªæ —å­ä¸­ï¼Œ <code>RecipeIngredient</code> çš„çˆ¶ç±»æ˜¯ <code>Food</code> ï¼Œå®ƒåªæœ‰ä¸€ä¸ª <code>init()</code> <strong>ä¾¿æ·åˆå§‹åŒ–å™¨</strong>ã€‚å› æ­¤è¿™ä¸ªåˆå§‹åŒ–å™¨ä¹Ÿè¢« <code>RecipeIngredient</code> ç±»ç»§æ‰¿ã€‚è¿™ä¸ªç»§æ‰¿çš„ <code>init()</code> å‡½æ•°å’Œ <code>Food</code> æä¾›çš„æ˜¯ä¸€æ ·çš„ï¼Œé™¤äº†å®ƒæ˜¯å§”æ‰˜ç»™ <code>RecipeIngredient</code> ç‰ˆæœ¬çš„ <code>init(name: String)</code> è€Œä¸æ˜¯ <code>Food</code> ç‰ˆæœ¬ã€‚</p>
<p>æ‰€æœ‰çš„è¿™ä¸‰ç§åˆå§‹åŒ–å™¨éƒ½å¯ä»¥ç”¨æ¥åˆ›å»ºæ–°çš„ <code>RecipeIngredient</code> å®ä¾‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> oneMysteryItem = <span class="type">RecipeIngredient</span>()</div><div class="line"><span class="keyword">let</span> oneBacon = <span class="type">RecipeIngredient</span>(name: <span class="string">"Bacon"</span>)</div><div class="line"><span class="keyword">let</span> sixEggs = <span class="type">RecipeIngredient</span>(name: <span class="string">"Eggs"</span>, quantity: <span class="number">6</span>)</div></pre></td></tr></table></figure>
<p>ç±»å±‚çº§ä¸­ç¬¬ä¸‰ä¸ªä¹Ÿæ˜¯æœ€åä¸€ä¸ªç±»æ˜¯ <code>RecipeIngredient</code> çš„å­ç±»ï¼Œå«åš <code>ShoppingListItem</code> ã€‚è¿™ä¸ªç±»æ„å»ºäº†è´­ç‰©å•ä¸­å‡ºç°çš„æŸä¸€ç§è°ƒå‘³æ–™ã€‚</p>
<p>åœ¨è´­ç‰©è¡¨é‡Œæ¯ä¸€é¡¹éƒ½æ˜¯ä»æœªè´­ä¹°çŠ¶æ€å¼€å§‹çš„ã€‚ä¸ºäº†å±•ç°è¿™ä¸€äº‹å®ï¼Œ <code>ShoppingListItem</code> å¼•å…¥äº†ä¸€ä¸ªå¸ƒå°”ç±»å‹çš„å±æ€§ <code>purchased</code> ï¼Œé»˜è®¤å€¼ <code>false</code> ã€‚ <code>ShoppingListItem</code> ä¹Ÿæ·»åŠ äº†ä¸€ä¸ªè®¡ç®—å±æ€§ <code>description</code> å±æ€§ï¼Œå®ƒæä¾›äº†å…³äº <code>ShoppingListItem</code> å®ä¾‹çš„ä¸€äº›æ–‡å­—æè¿°ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ShoppingListItem1</span>: <span class="title">RecipeIngredient</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> purchased = <span class="literal">false</span></div><div class="line">    <span class="keyword">var</span> description: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">var</span> output = <span class="string">"<span class="subst">\(quantity)</span> x <span class="subst">\(name)</span>"</span></div><div class="line">        output += purchased ? <span class="string">" âœ”"</span> : <span class="string">" âœ˜"</span></div><div class="line">        <span class="keyword">return</span> output</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p><code>ShoppingListItem</code> æ²¡æœ‰å®šä¹‰åˆå§‹åŒ–å™¨æ¥ç»™ <code>purchased</code> ä¸€ä¸ªåˆå§‹å€¼ï¼Œè¿™æ˜¯å› ä¸ºä»»ä½•æ·»åŠ åˆ°è´­ç‰©å•ï¼ˆè¿™é‡Œçš„æ¨¡å‹ï¼‰çš„é¡¹çš„åˆå§‹çŠ¶æ€æ€»æ˜¯æœªè´­ä¹°ã€‚</p>
</blockquote>
<p>ç”±äºå®ƒä¸ºè‡ªå·±å¼•å…¥çš„æ‰€æœ‰å±æ€§æä¾›äº†ä¸€ä¸ªé»˜è®¤å€¼å¹¶ä¸”è‡ªå·±æ²¡æœ‰å®šä¹‰ä»»ä½•åˆå§‹åŒ–å™¨ï¼Œ <code>ShoppingListItem</code> ä¼šè‡ªåŠ¨ä»<em>çˆ¶ç±»**</em>ç»§æ‰¿æ‰€æœ‰çš„æŒ‡å®šå’Œä¾¿æ·åˆå§‹åŒ–å™¨**ã€‚</p>
<p>ä¸‹å›¾å±•ç¤ºäº†ä¸‰ä¸ªç±»çš„åˆå§‹åŒ–é“¾ï¼š<br><img style="margin: auto" src="/2017/11/28/Swift-initialization/initializersExample03_2x.png" alt="initializersExample03_2x" title="åˆå§‹åŒ–é“¾å›¾"></p>
<p>ä½ å¯ä»¥ä½¿ç”¨å…¨éƒ¨ä¸‰ä¸ªç»§æ‰¿æ¥çš„åˆå§‹åŒ–å™¨æ¥åˆ›å»º <code>ShoppingListItem</code> çš„æ–°å®ä¾‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> breakfastList = [</div><div class="line">    <span class="type">ShoppingListItem1</span>(),</div><div class="line">    <span class="type">ShoppingListItem1</span>(name: <span class="string">"Bacon"</span>),</div><div class="line">    <span class="type">ShoppingListItem1</span>(name: <span class="string">"Eggs"</span>, quantity: <span class="number">6</span>),</div><div class="line">]</div><div class="line">breakfastList[<span class="number">0</span>].name = <span class="string">"Orange juice"</span></div><div class="line">breakfastList[<span class="number">0</span>].purchased = <span class="literal">true</span></div><div class="line"><span class="keyword">for</span> item <span class="keyword">in</span> breakfastList &#123;</div><div class="line">    <span class="built_in">print</span>(item.description)</div><div class="line">&#125;</div><div class="line"><span class="comment">// 1 x Orange juice âœ”</span></div><div class="line"><span class="comment">// 1 x Bacon âœ˜</span></div><div class="line"><span class="comment">// 6 x Eggs âœ˜</span></div></pre></td></tr></table></figure>
<p>è¿™é‡Œï¼Œåä¸º <code>breakfastList</code> çš„æ•°ç»„é€šè¿‡åŒ…å«ä¸‰ä¸ª <code>ShoppingListItem</code> å®ä¾‹çš„æ•°ç»„å­—é¢é‡åˆ›å»ºã€‚æ•°ç»„çš„ç±»å‹è¢«æ¨æ–­ä¸º <code>[ShoppingListItem]</code>ã€‚æ•°ç»„åˆ›å»ºä¹‹åï¼Œæ•°ç»„ç¬¬ä¸€ä¸ª <code>ShoppingListItem</code> çš„ <code>name</code> ä» â€œ<code>[Unnamed]</code>â€œ ä¿®æ”¹ä¸º <code>&quot;Orange juice&quot;</code> ï¼Œå¹¶ä¸”å®ƒçš„ <code>purchased</code> ä¹Ÿæ ‡è®°ä¸ºäº† <code>true</code> ã€‚ç„¶åé€šè¿‡éå†æ‰“å°æ¯ä¸ªæ•°ç»„çš„æè¿°ï¼Œå±•ç¤ºäº†å®ƒä»¬çš„é»˜è®¤çŠ¶æ€éƒ½æŒ‰ç…§é¢„æœŸè¢«è®¾ç½®äº†ã€‚</p>
<h3 id="å¯å¤±è´¥åˆå§‹åŒ–å™¨"><a href="#å¯å¤±è´¥åˆå§‹åŒ–å™¨" class="headerlink" title="å¯å¤±è´¥åˆå§‹åŒ–å™¨"></a>å¯å¤±è´¥åˆå§‹åŒ–å™¨</h3><p>å®šä¹‰ç±»ã€ç»“æ„ä½“æˆ–æšä¸¾åˆå§‹åŒ–æ—¶å¯ä»¥å¤±è´¥åœ¨æŸäº›æƒ…å†µä¸‹ä¼šç®¡å¤§ç”¨ã€‚è¿™ä¸ªå¤±è´¥å¯èƒ½ç”±ä»¥ä¸‹å‡ ç§æ–¹å¼è§¦å‘ï¼ŒåŒ…æ‹¬ç»™åˆå§‹åŒ–ä¼ å…¥æ— æ•ˆçš„å½¢å¼å‚æ•°å€¼ï¼Œæˆ–ç¼ºå°‘æŸç§å¤–éƒ¨æ‰€éœ€çš„èµ„æºï¼Œåˆæˆ–æ˜¯å…¶ä»–é˜»æ­¢åˆå§‹åŒ–çš„æƒ…å†µã€‚</p>
<p>ä¸ºäº†å¦¥å–„å¤„ç†è¿™ç§å¯èƒ½å¤±è´¥çš„æƒ…å†µï¼Œåœ¨ç±»ã€ç»“æ„ä½“æˆ–æšä¸¾ä¸­å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªå¯å¤±è´¥çš„åˆå§‹åŒ–å™¨ã€‚é€šè¿‡åœ¨ <code>init</code> <strong>å…³é”®å­—åé¢æ·»åŠ é—®å·( <code>init?</code> )æ¥å†™</strong>ã€‚</p>
<blockquote>
<p>ä½ ä¸èƒ½å®šä¹‰å¯å¤±è´¥å’Œéå¯å¤±è´¥çš„åˆå§‹åŒ–å™¨ä¸ºç›¸åŒçš„å½¢å¼å‚æ•°ç±»å‹å’Œåç§°ã€‚</p>
</blockquote>
<p>å¯å¤±è´¥çš„åˆå§‹åŒ–å™¨åˆ›å»ºäº†ä¸€ä¸ªåˆå§‹åŒ–ç±»å‹çš„<strong>å¯é€‰å€¼</strong>ã€‚ä½ é€šè¿‡åœ¨å¯å¤±è´¥åˆå§‹åŒ–å™¨å†™ <code>return nil</code> è¯­å¥ï¼Œæ¥è¡¨æ˜å¯å¤±è´¥åˆå§‹åŒ–å™¨åœ¨ä½•ç§æƒ…å†µä¸‹ä¼šè§¦å‘åˆå§‹åŒ–å¤±è´¥ã€‚</p>
<blockquote>
<p>ä¸¥æ ¼æ¥è®²ï¼Œåˆå§‹åŒ–å™¨ä¸ä¼šæœ‰è¿”å›å€¼ã€‚ç›¸åï¼Œå®ƒä»¬çš„è§’è‰²æ˜¯ç¡®ä¿åœ¨åˆå§‹åŒ–ç»“æŸæ—¶ï¼Œ <code>self</code> èƒ½å¤Ÿè¢«æ­£ç¡®åˆå§‹åŒ–ã€‚è™½ç„¶ä½ å†™äº† <code>return nil</code> æ¥è§¦å‘åˆå§‹åŒ–å¤±è´¥ï¼Œä½†æ˜¯ä½ ä¸èƒ½ä½¿ç”¨ <code>return</code> å…³é”®å­—æ¥è¡¨ç¤ºåˆå§‹åŒ–æˆåŠŸäº†ã€‚</p>
</blockquote>
<p>æ¯”å¦‚è¯´ï¼Œå¯å¤±è´¥åˆå§‹åŒ–å™¨ä¸ºæ•°å­—ç±»å‹è½¬æ¢å™¨åšå®ç°ã€‚ä¸ºäº†ç¡®ä¿æ•°å­—ç±»å‹ä¹‹é—´çš„è½¬æ¢ä¿æŒå€¼ä¸å˜ï¼Œä½¿ç”¨ <code>init(exactly:)</code>  åˆå§‹åŒ–å™¨ã€‚å¦‚æœç±»å‹è½¬æ¢ä¸èƒ½ä¿æŒå€¼ä¸å˜ï¼Œåˆå§‹åŒ–å™¨å¤±è´¥ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> wholeNumber: <span class="type">Double</span> = <span class="number">12345.0</span></div><div class="line"><span class="keyword">let</span> pi = <span class="number">3.14159</span></div><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> valueMaintained = <span class="type">Int</span>(exactly: wholeNumber) &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"<span class="subst">\(wholeNumber)</span> conversion to int maintains value"</span>)</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> valueChanged = <span class="type">Int</span>(exactly: pi)</div><div class="line"><span class="comment">// valueChanged is of type Int?, not Int</span></div><div class="line"><span class="keyword">if</span> valueChanged == <span class="literal">nil</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"<span class="subst">\(pi)</span> conversion to int does not maintain value"</span>);</div><div class="line">&#125;</div><div class="line"><span class="comment">// Prints "3.14159 conversion to int does not maintain value"</span></div></pre></td></tr></table></figure>
<p>é¢çš„æ —å­å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>Animal</code> çš„ç»“æ„ä½“ï¼Œæœ‰ä¸€ä¸ªåä¸º <code>species</code> çš„ <code>String</code> ç±»å‹å¸¸é‡å±æ€§ã€‚ <code>Animal</code> ç»“æ„ä½“ä¹Ÿå®šä¹‰äº†ä¸€ä¸ªå¯å¤±è´¥åˆå§‹åŒ–å™¨ï¼Œæœ‰ä¸€ä¸ªå½¢å¼å‚æ•° <code>species</code> ã€‚è¿™ä¸ªåˆå§‹åŒ–å™¨ç”¨æ¥æ£€æŸ¥ä¼ å…¥ <code>species</code> çš„å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºã€‚å¦‚æœå‘ç°äº†ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œåˆå§‹åŒ–å¤±è´¥è¢«è§¦å‘ã€‚å¦åˆ™ï¼Œå°±è®¾ç½® <code>species</code> å±æ€§çš„å€¼ï¼Œç„¶ååˆå§‹åŒ–æˆåŠŸï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Animal</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> species: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>?(species: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">if</span> species.isEmpty &#123; <span class="keyword">return</span> <span class="literal">nil</span> &#125;</div><div class="line">        <span class="keyword">self</span>.species = species</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½ å¯ä»¥é€šè¿‡å¯å¤±è´¥åˆå§‹åŒ–å™¨æ¥å°è¯•åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ <code>Animal</code> å®ä¾‹å¹¶ä¸”æ£€æŸ¥åˆå§‹åŒ–æ˜¯å¦æˆåŠŸï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> someCreature = <span class="type">Animal</span>(species: <span class="string">"Giraffe"</span>)</div><div class="line"><span class="comment">// someCreature is of type Animal?, not Animal</span></div><div class="line"> </div><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> giraffe = someCreature &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"An animal was initialized with a species of <span class="subst">\(giraffe.species)</span>"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// prints "An animal was initialized with a species of Giraffe"</span></div></pre></td></tr></table></figure>
<p>æœä½ ç»™å¯å¤±è´¥åˆå§‹åŒ–å™¨çš„ <code>species</code> å½¢å¼å‚æ•°ä¼ äº†ä¸€ä¸ªå­—ç¬¦ä¸²å€¼ï¼Œå§‹åŒ–å™¨è§¦å‘åˆå§‹åŒ–å¤±è´¥ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> anonymousCreature = <span class="type">Animal</span>(species: <span class="string">""</span>)</div><div class="line"><span class="comment">// anonymousCreature is of type Animal?, not Animal</span></div><div class="line"> </div><div class="line"><span class="keyword">if</span> anonymousCreature == <span class="literal">nil</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"The anonymous creature could not be initialized"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// prints "The anonymous creature could not be initialized"</span></div></pre></td></tr></table></figure>
<h4 id="æšä¸¾çš„å¯å¤±è´¥åˆå§‹åŒ–å™¨"><a href="#æšä¸¾çš„å¯å¤±è´¥åˆå§‹åŒ–å™¨" class="headerlink" title="æšä¸¾çš„å¯å¤±è´¥åˆå§‹åŒ–å™¨"></a>æšä¸¾çš„å¯å¤±è´¥åˆå§‹åŒ–å™¨</h4><p>ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå¯å¤±è´¥åˆå§‹åŒ–å™¨æ¥åœ¨å¸¦ä¸€ä¸ªæˆ–å¤šä¸ªå½¢å¼å‚æ•°çš„æšä¸¾ä¸­é€‰æ‹©åˆé€‚çš„æƒ…å†µã€‚å¦‚æœæä¾›çš„å½¢å¼å‚æ•°æ²¡æœ‰åŒ¹é…åˆé€‚çš„æƒ…å†µåˆå§‹åŒ–å™¨å°±å¯èƒ½å¤±è´¥ã€‚</p>
<p>ä¸‹é¢çš„æ —å­å®šä¹‰ä¸€ä¸ªåä¸º <code>TemperatureUnit</code> çš„æšä¸¾ï¼Œæœ‰ä¸‰ç§å¯èƒ½çš„çŠ¶æ€( <code>Kelvin</code> ï¼Œ <code>Celsius</code> å’Œ <code>Fahrenheit</code> )ã€‚ä½¿ç”¨ä¸€ä¸ªå¯å¤±è´¥åˆå§‹åŒ–å™¨æ¥æ‰¾ä¸€ä¸ªåˆé€‚ç”¨æ¥è¡¨ç¤ºæ°”æ¸©ç¬¦å·çš„ <code>Character</code> å€¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">TemperatureUnit</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> <span class="type">Kelvin</span>, <span class="type">Celsius</span>, <span class="type">Fahrenheit</span></div><div class="line">    <span class="keyword">init</span>?(symbol: <span class="type">Character</span>) &#123;</div><div class="line">        <span class="keyword">switch</span> symbol &#123;</div><div class="line">        <span class="keyword">case</span> <span class="string">"K"</span>:</div><div class="line">            <span class="keyword">self</span> = .<span class="type">Kelvin</span></div><div class="line">        <span class="keyword">case</span> <span class="string">"C"</span>:</div><div class="line">            <span class="keyword">self</span> = .<span class="type">Celsius</span></div><div class="line">        <span class="keyword">case</span> <span class="string">"F"</span>:</div><div class="line">            <span class="keyword">self</span> = .<span class="type">Fahrenheit</span></div><div class="line">        <span class="keyword">default</span>:</div><div class="line">            <span class="keyword">return</span> <span class="literal">nil</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½ å¯ä»¥ä½¿ç”¨å¯å¤±è´¥åˆå§‹åŒ–å™¨ä¸ºå¯èƒ½çš„ä¸‰ç§çŠ¶æ€æ¥é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„æšä¸¾æƒ…å†µï¼Œå½“å‚æ•°çš„å€¼ä¸èƒ½ä¸ä»»æ„ä¸€æšä¸¾æˆå‘˜ç›¸åŒ¹é…æ—¶ï¼Œè¯¥æšä¸¾ç±»å‹åˆå§‹åŒ–å¤±è´¥ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> fahrenheitUnit = <span class="type">TemperatureUnit</span>(symbol: <span class="string">"F"</span>)</div><div class="line"><span class="keyword">if</span> fahrenheitUnit != <span class="literal">nil</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"This is a defined temperature unit, so initialization succeeded."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// prints "This is a defined temperature unit, so initialization succeeded."</span></div><div class="line"> </div><div class="line"><span class="keyword">let</span> unknownUnit = <span class="type">TemperatureUnit</span>(symbol: <span class="string">"X"</span>)</div><div class="line"><span class="keyword">if</span> unknownUnit == <span class="literal">nil</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"This is not a defined temperature unit, so initialization failed."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// prints "This is not a defined temperature unit, so initialization failed."</span></div></pre></td></tr></table></figure>
<h4 id="å¸¦æœ‰åŸå§‹å€¼æšä¸¾çš„å¯å¤±è´¥åˆå§‹åŒ–å™¨"><a href="#å¸¦æœ‰åŸå§‹å€¼æšä¸¾çš„å¯å¤±è´¥åˆå§‹åŒ–å™¨" class="headerlink" title="å¸¦æœ‰åŸå§‹å€¼æšä¸¾çš„å¯å¤±è´¥åˆå§‹åŒ–å™¨"></a>å¸¦æœ‰åŸå§‹å€¼æšä¸¾çš„å¯å¤±è´¥åˆå§‹åŒ–å™¨</h4><p><strong>å¸¦æœ‰åŸå§‹å€¼çš„æšä¸¾ä¼šè‡ªåŠ¨è·å¾—ä¸€ä¸ªå¯å¤±è´¥åˆå§‹åŒ–å™¨</strong> <code>init?(rawValue:)</code> ï¼Œè¯¥å¯å¤±è´¥åˆå§‹åŒ–å™¨æ¥æ”¶ä¸€ä¸ªåä¸º <code>rawValue</code> çš„åˆé€‚çš„åŸå§‹å€¼ç±»å‹å½¢å¼å‚æ•°å¦‚æœæ‰¾åˆ°äº†åŒ¹é…çš„æšä¸¾æƒ…å†µå°±é€‰æ‹©å…¶ä¸€ï¼Œæˆ–è€…æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å€¼å°±è§¦å‘åˆå§‹åŒ–å¤±è´¥ã€‚</p>
<p>ä½ å¯ä»¥æŠŠä¸Šé¢çš„ <code>TemperatureUnit</code> çš„æ —å­å¯ä»¥é‡å†™ä¸ºä½¿ç”¨ <code>Character</code> åŸå§‹å€¼å¹¶å¸¦æœ‰æ”¹è¿‡çš„ <code>init?(rawValue:)</code> åˆå§‹åŒ–å™¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">TemperatureUnit</span>: <span class="title">Character</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> <span class="type">Kelvin</span> = <span class="string">"K"</span>, <span class="type">Celsius</span> = <span class="string">"C"</span>, <span class="type">Fahrenheit</span> = <span class="string">"F"</span></div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">let</span> fahrenheitUnit = <span class="type">TemperatureUnit</span>(rawValue: <span class="string">"F"</span>)</div><div class="line"><span class="keyword">if</span> fahrenheitUnit != <span class="literal">nil</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"This is a defined temperature unit, so initialization succeeded."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// prints "This is a defined temperature unit, so initialization succeeded."</span></div><div class="line"> </div><div class="line"><span class="keyword">let</span> unknownUnit = <span class="type">TemperatureUnit</span>(rawValue: <span class="string">"X"</span>)</div><div class="line"><span class="keyword">if</span> unknownUnit == <span class="literal">nil</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"This is not a defined temperature unit, so initialization failed."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// prints "This is not a defined temperature unit, so initialization failed."</span></div></pre></td></tr></table></figure>
<h4 id="åˆå§‹åŒ–å¤±è´¥çš„ä¼ é€’"><a href="#åˆå§‹åŒ–å¤±è´¥çš„ä¼ é€’" class="headerlink" title="åˆå§‹åŒ–å¤±è´¥çš„ä¼ é€’"></a>åˆå§‹åŒ–å¤±è´¥çš„ä¼ é€’</h4><p><strong>ç±»ï¼Œç»“æ„ä½“æˆ–æšä¸¾çš„å¯å¤±è´¥åˆå§‹åŒ–å™¨å¯ä»¥æ¨ªå‘å§”æ‰˜åˆ°åŒä¸€ä¸ªç±»ï¼Œç»“æ„ä½“æˆ–æšä¸¾é‡Œçš„å¦ä¸€ä¸ªå¯å¤±è´¥åˆå§‹åŒ–å™¨</strong>ã€‚ç±»ä¼¼åœ°ï¼Œå­ç±»çš„å¯å¤±è´¥åˆå§‹åŒ–å™¨å¯ä»¥å‘ä¸Šå§”æ‰˜åˆ°çˆ¶ç±»çš„å¯å¤±è´¥åˆå§‹åŒ–å™¨ã€‚</p>
<p>æ— è®ºå“ªç§æƒ…å†µï¼Œå¦‚æœä½ å§”æ‰˜åˆ°å¦ä¸€ä¸ªåˆå§‹åŒ–å™¨å¯¼è‡´äº†åˆå§‹åŒ–å¤±è´¥ï¼Œé‚£ä¹ˆæ•´ä¸ªåˆå§‹åŒ–è¿‡ç¨‹ä¹Ÿä¼šç«‹å³å¤±è´¥ï¼Œå¹¶ä¸”ä¹‹åä»»ä½•åˆå§‹åŒ–ä»£ç éƒ½ä¸ä¼šæ‰§è¡Œã€‚</p>
<p>ä¸‹é¢çš„æ —å­å®šä¹‰äº† <code>Product</code> ç±»çš„å­ç±» <code>CartItem</code> ã€‚ <code>CartItem</code> ç±»å»ºç«‹äº†ä¸€ä¸ªåœ¨çº¿è´­ç‰©è½¦ä¸­ç‰©å“çš„æ¨¡å‹ã€‚ <code>CartItem</code> å¼•å…¥äº†ä¸€ä¸ªåä¸º <code>quantity</code> å¸¸é‡å­˜å‚¨å±æ€§ï¼Œå¹¶ä¸”ç¡®ä¿äº†è¿™ä¸ªå±æ€§è‡³å°‘æ˜¯ 1 :</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> name: <span class="type">String</span></div><div class="line">    <span class="keyword">init</span>?(name: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">if</span> name.isEmpty &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">nil</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CartItem</span>: <span class="title">Product</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> quantily: <span class="type">Int</span></div><div class="line">    <span class="keyword">init</span>?(name: <span class="type">String</span>, quantily: <span class="type">Int</span>) &#123;</div><div class="line">        <span class="keyword">if</span> quantily &gt; <span class="number">1</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">nil</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">self</span>.quantily = quantily</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(name: name)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//////////////////////////////////////</span></div><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> twoSocks = <span class="type">CartItem</span>(name: <span class="string">"sock"</span>, quantity: <span class="number">2</span>) &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Item: <span class="subst">\(twoSocks.name)</span>, quantity: <span class="subst">\(twoSocks.quantity)</span>"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// prints "Item: sock, quantity: 2"</span></div><div class="line"></div><div class="line"><span class="comment">//////////////////////////////////////</span></div><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> zeroShirts = <span class="type">CartItem</span>(name: <span class="string">"shirt"</span>, quantity: <span class="number">0</span>) &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Item: <span class="subst">\(zeroShirts.name)</span>, quantity: <span class="subst">\(zeroShirts.quantity)</span>"</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Unable to initialize zero shirts"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// prints "Unable to initialize zero shirts"</span></div><div class="line"></div><div class="line"><span class="comment">//////////////////////////////////////</span></div><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> oneUnnamed = <span class="type">CartItem</span>(name: <span class="string">""</span>, quantity: <span class="number">1</span>) &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Item: <span class="subst">\(oneUnnamed.name)</span>, quantity: <span class="subst">\(oneUnnamed.quantity)</span>"</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Unable to initialize one unnamed product"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// prints "Unable to initialize one unnamed product"</span></div></pre></td></tr></table></figure>
<h4 id="é‡å†™å¯å¤±è´¥åˆå§‹åŒ–å™¨"><a href="#é‡å†™å¯å¤±è´¥åˆå§‹åŒ–å™¨" class="headerlink" title="é‡å†™å¯å¤±è´¥åˆå§‹åŒ–å™¨"></a>é‡å†™å¯å¤±è´¥åˆå§‹åŒ–å™¨</h4><p>ä½ å¯ä»¥åœ¨å­ç±»é‡Œé‡å†™çˆ¶ç±»çš„å¯å¤±è´¥åˆå§‹åŒ–å™¨ã€‚å°±å¥½æ¯”å…¶ä»–çš„åˆå§‹åŒ–å™¨ã€‚æˆ–è€…ï¼Œä½ å¯ä»¥ç”¨å­ç±»çš„éå¯å¤±è´¥åˆå§‹åŒ–å™¨æ¥é‡å†™çˆ¶ç±»å¯å¤±è´¥åˆå§‹åŒ–å™¨ã€‚è¿™æ ·å…è®¸ä½ å®šä¹‰ä¸€ä¸ªåˆå§‹åŒ–ä¸ä¼šå¤±è´¥çš„å­ç±»ï¼Œå°½ç®¡çˆ¶ç±»çš„åˆå§‹åŒ–å…è®¸å¤±è´¥ã€‚</p>
<p><strong>æ³¨æ„å¦‚æœä½ ç”¨éå¯å¤±è´¥çš„å­ç±»åˆå§‹åŒ–å™¨é‡å†™äº†ä¸€ä¸ªå¯å¤±è´¥åˆå§‹åŒ–å™¨ï¼Œå‘ä¸Šå§”æ‰˜åˆ°çˆ¶ç±»åˆå§‹åŒ–å™¨çš„å”¯ä¸€åŠæ³•æ˜¯å¼ºåˆ¶å±•å¼€çˆ¶ç±»åˆå§‹åŒ–å™¨çš„ç»“æœ</strong></p>
<blockquote>
<p>ä½ å¯ä»¥ç”¨ä¸€ä¸ªéå¯å¤±è´¥åˆå§‹åŒ–å™¨é‡å†™ä¸€ä¸ªå¯å¤±è´¥åˆå§‹åŒ–å™¨ï¼Œä½†åè¿‡æ¥æ˜¯ä¸è¡Œçš„ã€‚</p>
</blockquote>
<p>ä¸‹é¢çš„æ —å­å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>Document</code> çš„ç±»ã€‚è¿™ä¸ªç±»å»ºæ¨¡äº†ä¸€ä¸ªæ–‡æ¡£ï¼Œå…¶ä¸­çš„ <code>name</code> å±æ€§è¦ä¹ˆæ˜¯ä¸€ä¸ªéç©ºçš„å­—ç¬¦ä¸²å€¼è¦ä¹ˆä¸º <code>nil</code> ï¼Œä½†ä¸èƒ½æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Document</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span>?</div><div class="line">    <span class="comment">// this initializer creates a document with a nil name value</span></div><div class="line">    <span class="keyword">init</span>() &#123;&#125;</div><div class="line">    <span class="comment">// this initializer creates a document with a non-empty name value</span></div><div class="line">    <span class="keyword">init</span>?(name: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.name = name</div><div class="line">        <span class="keyword">if</span> name.isEmpty &#123; <span class="keyword">return</span> <span class="literal">nil</span> &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸‹é¢è¿™ä¸ªæ —å­å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>AutomaticallyNamedDocument</code> çš„ <code>Document</code> ç±»çš„å­ç±»ã€‚è¿™ä¸ªå­ç±»é‡å†™äº† <code>Document</code> ç±»å¼•å…¥çš„ä¸¤ä¸ªæŒ‡å®šåˆå§‹åŒ–å™¨ã€‚è¿™äº›é‡å†™ç¡®ä¿äº† <code>AutomaticallyNamedDocument</code> å®ä¾‹åœ¨åˆå§‹åŒ–æ—¶æ²¡æœ‰åå­—æˆ–è€…ä¼ ç»™ <code>init(name:)</code> åˆå§‹åŒ–å™¨ä¸€ä¸ªç©ºå­—ç¬¦ä¸²æ—¶ <code>name</code> çš„åˆå§‹å€¼ä¸º â€œ<code>[Untitled]</code>â€œ ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">AutomaticallyNamedDocument</span>: <span class="title">Document</span> </span>&#123;</div><div class="line">    <span class="keyword">override</span> <span class="keyword">init</span>() &#123;</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>()</div><div class="line">        <span class="keyword">self</span>.name = <span class="string">"[Untitled]"</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">override</span> <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>()</div><div class="line">        <span class="keyword">if</span> name.isEmpty &#123;</div><div class="line">            <span class="keyword">self</span>.name = <span class="string">"[Untitled]"</span></div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">self</span>.name = name</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>AutomaticallyNamedDocument</code> ç±»ç”¨éå¯å¤±è´¥çš„ <code>init(name:)</code> åˆå§‹åŒ–å™¨é‡å†™äº†çˆ¶ç±»çš„å¯å¤±è´¥ <code>init?(name:)</code> åˆå§‹åŒ–å™¨ã€‚å› ä¸º <code>AutomaticallyNamedDocument</code> ç±»ç”¨ä¸åŒçš„æ–¹å¼å¤„ç†äº†ç©ºå­—ç¬¦ä¸²çš„æƒ…å†µï¼Œå®ƒçš„åˆå§‹åŒ–å™¨ä¸ä¼šå¤±è´¥ï¼Œæ‰€ä»¥å®ƒæä¾›äº†éå¯å¤±è´¥åˆå§‹åŒ–å™¨æ¥ä»£æ›¿ã€‚</p>
<p>ä½ å¯ä»¥åœ¨åˆå§‹åŒ–å™¨é‡Œä½¿ç”¨å¼ºåˆ¶å±•å¼€æ¥ä»çˆ¶ç±»è°ƒç”¨ä¸€ä¸ªå¯å¤±è´¥åˆå§‹åŒ–å™¨ä½œä¸ºå­ç±»éå¯å¤±è´¥åˆå§‹åŒ–å™¨çš„ä¸€éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œä¸‹è¾¹çš„ <code>UntitledDocument</code> å­ç±»å°†æ€»æ˜¯è¢«å‘½åä¸º â€œ<code>[Untitled]</code>â€œ ï¼Œå¹¶ä¸”åœ¨åˆå§‹åŒ–æœŸé—´å®ƒä½¿ç”¨äº†çˆ¶ç±»çš„å¯å¤±è´¥ <code>init(name:)</code> åˆå§‹åŒ–å™¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">UntitledDocument</span>: <span class="title">Document</span> </span>&#123;</div><div class="line">    <span class="keyword">override</span> <span class="keyword">init</span>() &#123;</div><div class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(name: <span class="string">"[Untitled]"</span>)!</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœçˆ¶ç±»çš„<code>init(name:)</code>åˆå§‹åŒ–å™¨æ›¾ä»¥ç©ºå­—ç¬¦ä¸²åšåå­—è°ƒç”¨ï¼Œå¼ºåˆ¶å±•å¼€æ“ä½œä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ã€‚æ€»ä¹‹ï¼Œç”±äºå®ƒè°ƒç”¨äº†ä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡ï¼Œé‚£ä¹ˆä½ å¯ä»¥çœ‹åˆ°åˆå§‹åŒ–å™¨ä¸ä¼šå¤±è´¥ï¼Œæ‰€ä»¥è¿™æ—¶ä¸ä¼šæœ‰è¿è¡Œæ—¶é”™è¯¯å‘ç”Ÿã€‚</p>
<h4 id="å¯å¤±è´¥åˆå§‹åŒ–å™¨-init"><a href="#å¯å¤±è´¥åˆå§‹åŒ–å™¨-init" class="headerlink" title="å¯å¤±è´¥åˆå§‹åŒ–å™¨ init!"></a>å¯å¤±è´¥åˆå§‹åŒ–å™¨ init!</h4><p>é€šå¸¸æ¥è®²æˆ‘ä»¬é€šè¿‡åœ¨ <code>init</code> å…³é”®å­—åæ·»åŠ é—®å· ( <code>init?</code> )çš„æ–¹å¼æ¥å®šä¹‰ä¸€ä¸ªå¯å¤±è´¥åˆå§‹åŒ–å™¨ä»¥åˆ›å»ºä¸€ä¸ªåˆé€‚ç±»å‹çš„å¯é€‰é¡¹å®ä¾‹ã€‚å¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å¯å¤±è´¥åˆå§‹åŒ–å™¨åˆ›å»ºä¸€ä¸ª<strong>éšå¼å±•å¼€å…·æœ‰åˆé€‚ç±»å‹çš„å¯é€‰é¡¹å®ä¾‹</strong>ã€‚é€šè¿‡åœ¨ <code>init</code> <strong>åé¢æ·»åŠ æƒŠå¹å·</strong>( <code>init!</code> )æ˜¯ä¸æ˜¯é—®å·ã€‚</p>
<p>ä½ å¯ä»¥åœ¨ <code>init?</code> åˆå§‹åŒ–å™¨ä¸­<em>å§”æ‰˜</em>è°ƒç”¨ <code>init!</code> åˆå§‹åŒ–å™¨ï¼Œåä¹‹äº¦ç„¶ã€‚ ä½ ä¹Ÿå¯ä»¥ç”¨ <code>init!</code> é‡å†™ <code>init?</code> ï¼Œåä¹‹äº¦ç„¶ã€‚ ä½ è¿˜å¯ä»¥ç”¨ <code>init</code> å§”æ‰˜è°ƒç”¨ <code>init!</code> ï¼Œå°½ç®¡å½“ <code>init!</code> åˆå§‹åŒ–å™¨å¯¼è‡´åˆå§‹åŒ–å¤±è´¥æ—¶ä¼šè§¦å‘æ–­è¨€ã€‚</p>
<h3 id="å¿…è¦åˆå§‹åŒ–å™¨"><a href="#å¿…è¦åˆå§‹åŒ–å™¨" class="headerlink" title="å¿…è¦åˆå§‹åŒ–å™¨"></a>å¿…è¦åˆå§‹åŒ–å™¨</h3><p>åœ¨ç±»çš„åˆå§‹åŒ–å™¨å‰æ·»åŠ  <code>required</code>  ä¿®é¥°ç¬¦æ¥è¡¨æ˜æ‰€æœ‰è¯¥ç±»çš„å­ç±»éƒ½å¿…é¡»å®ç°è¯¥åˆå§‹åŒ–å™¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span> </span>&#123;</div><div class="line">    <span class="keyword">required</span> <span class="keyword">init</span>() &#123;</div><div class="line">        <span class="comment">// initializer implementation goes here</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å½“å­ç±»é‡å†™çˆ¶ç±»çš„å¿…è¦åˆå§‹åŒ–å™¨æ—¶ï¼Œå¿…é¡»åœ¨å­ç±»çš„åˆå§‹åŒ–å™¨å‰åŒæ ·æ·»åŠ  <code>required</code> ä¿®é¥°ç¬¦ä»¥ç¡®ä¿å½“å…¶å®ƒç±»ç»§æ‰¿è¯¥å­ç±»æ—¶ï¼Œè¯¥åˆå§‹åŒ–å™¨åŒä¸ºå¿…è¦åˆå§‹åŒ–å™¨ã€‚åœ¨é‡å†™çˆ¶ç±»çš„å¿…è¦åˆå§‹åŒ–å™¨æ—¶ï¼Œ<strong>ä¸éœ€è¦æ·»åŠ </strong> <code>override</code> ä¿®é¥°ç¬¦ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeSubclass</span>: <span class="title">SomeClass</span> </span>&#123;</div><div class="line">    <span class="keyword">required</span> <span class="keyword">init</span>() &#123;</div><div class="line">        <span class="comment">// subclass implementation of the required initializer goes here</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="é€šè¿‡é—­åŒ…å’Œå‡½æ•°æ¥è®¾ç½®å±æ€§çš„é»˜è®¤å€¼"><a href="#é€šè¿‡é—­åŒ…å’Œå‡½æ•°æ¥è®¾ç½®å±æ€§çš„é»˜è®¤å€¼" class="headerlink" title="é€šè¿‡é—­åŒ…å’Œå‡½æ•°æ¥è®¾ç½®å±æ€§çš„é»˜è®¤å€¼"></a>é€šè¿‡é—­åŒ…å’Œå‡½æ•°æ¥è®¾ç½®å±æ€§çš„é»˜è®¤å€¼</h3><p>å¦‚æœæŸä¸ªå­˜å‚¨å±æ€§çš„é»˜è®¤å€¼éœ€è¦è‡ªå®šä¹‰æˆ–è®¾ç½®ï¼Œä½ å¯ä»¥ä½¿ç”¨<strong>è¦è‡ª</strong>æˆ–<strong>å…¨å±€å‡½æ•°</strong>æ¥ä¸ºå±æ€§æä¾›é»˜è®¤å€¼ã€‚å½“è¿™ä¸ªå±æ€§å±äºçš„å®ä¾‹åˆå§‹åŒ–æ—¶ï¼Œ<strong>é—­åŒ…</strong>æˆ–<strong>å‡½æ•°</strong>å°±ä¼šè¢«è°ƒç”¨ï¼Œå¹¶ä¸”å®ƒçš„è¿”å›å€¼å°±ä¼šä½œä¸ºå±æ€§çš„é»˜è®¤å€¼ã€‚</p>
<p><em>è¿™ç§é—­åŒ…æˆ–å‡½æ•°é€šå¸¸ä¼šåˆ›å»ºä¸€ä¸ªå’Œå±æ€§ç›¸åŒçš„ä¸´æ—¶å€¼ï¼Œå¤„ç†è¿™ä¸ªå€¼ä»¥è¡¨ç¤ºåˆå§‹çš„çŠ¶æ€ï¼Œå¹¶ä¸”æŠŠè¿™ä¸ªä¸´æ—¶å€¼è¿”å›ä½œä¸ºå±æ€§çš„é»˜è®¤å€¼ã€‚</em></p>
<p>ä¸‹é¢çš„ä»£ç æ¡†æ¶å±•ç¤ºäº†é—­åŒ…æ˜¯å¦‚ä½•æä¾›é»˜è®¤å€¼ç»™å±æ€§çš„ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> someProperty: <span class="type">SomeType</span> = &#123;</div><div class="line">        <span class="comment">// create a default value for someProperty inside this closure</span></div><div class="line">        <span class="comment">// someValue must be of the same type as SomeType</span></div><div class="line">        <span class="keyword">return</span> someValue</div><div class="line">    &#125;()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>æ³¨æ„é—­åŒ…èŠ±æ‹¬å·çš„ç»“å°¾è·Ÿä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„åœ†æ‹¬å·</strong>ã€‚è¿™æ˜¯å‘Šè¯‰ Swift ç«‹å³æ‰§è¡Œé—­åŒ…ã€‚å¦‚æœä½ å¿½ç•¥äº†è¿™å¯¹åœ†æ‹¬å·ï¼Œä½ å°±ä¼šæŠŠé—­åŒ…ä½œä¸ºå€¼èµ‹ç»™äº†å±æ€§ï¼Œå¹¶ä¸”ä¸ä¼šè¿”å›é—­åŒ…çš„å€¼ã€‚</p>
<blockquote>
<p>å¦‚æœä½ ä½¿ç”¨äº†é—­åŒ…æ¥åˆå§‹åŒ–å±æ€§ï¼Œè¯·è®°ä½é—­åŒ…æ‰§è¡Œçš„æ—¶å€™ï¼Œå®ä¾‹çš„å…¶ä»–éƒ¨åˆ†è¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–ã€‚è¿™å°±æ„å‘³ç€ä½ ä¸èƒ½åœ¨é—­åŒ…é‡Œè¯»å–ä»»ä½•å…¶ä»–çš„å±æ€§å€¼ï¼Œå³ä½¿è¿™äº›å±æ€§æœ‰é»˜è®¤å€¼ã€‚ä½ ä¹Ÿä¸èƒ½ä½¿ç”¨éšå¼ <code>self</code> å±æ€§ï¼Œæˆ–è€…è°ƒç”¨å®ä¾‹çš„æ–¹æ³•ã€‚</p>
</blockquote>
<p>ä¸‹é¢çš„æ —å­å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>Checkerboard</code> ç»“æ„ä½“ï¼Œå»ºæ¨¡äº†ä¸€ä¸ªå›½é™…è±¡æ£‹çš„æ£‹ç›˜ã€‚å›½é™…è±¡æ£‹åœ¨ä¸€ä¸ª<code>8Ã—8</code>çš„æ£‹ç›˜ä¸Šè¿›è¡Œï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨é»‘ç™½è‰²å—æ¥ä»£æ›¿ã€‚<br><img style="margin: auto" src="/2017/11/28/Swift-initialization/chessBoard_2x.png" alt="chessBoard_2x" title="æ£‹ç›˜"></p>
<p>ä¸ºäº†å‘ˆç°æ¸¸æˆçš„æ£‹ç›˜ï¼Œ <code>Checkerboard</code> ç»“æ„ä½“åªæœ‰ä¸€ä¸ªåä¸º <code>boardColors</code> çš„å±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒ…å«100ä¸ª <code>Bool</code> å€¼çš„æ•°ç»„ã€‚æ•°ç»„ä¸­çš„ <code>true</code> ä»£è¡¨é»‘è‰²çš„æ ¼å­ï¼Œ <code>false</code> ä»£è¡¨ç™½è‰²çš„æ ¼å­ã€‚æ•°ç»„ä¸­ç¬¬ä¸€é¡¹ä»£è¡¨æ£‹ç›˜çš„å·¦ä¸Šè§’æ–¹æ ¼ï¼Œæ•°ç»„æœ€åä¸€é¡¹ä»£è¡¨æ£‹ç›˜çš„å³ä¸‹è§’æ–¹æ ¼ã€‚</p>
<p><code>boardColors</code> <strong>æ•°ç»„åœ¨ä¸€ä¸ªé—­åŒ…é‡Œåˆå§‹åŒ–ï¼Œæ¥è®¾ç½®å®ƒçš„é¢œè‰²å€¼</strong>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Chessboard</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> boardColors: [<span class="type">Bool</span>] = &#123;</div><div class="line">        <span class="keyword">var</span> temporaryBoard = [<span class="type">Bool</span>]()</div><div class="line">        <span class="keyword">var</span> isBlack = <span class="literal">false</span></div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span>...<span class="number">8</span> &#123;</div><div class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="number">1</span>...<span class="number">8</span> &#123;</div><div class="line">                temporaryBoard.append(isBlack)</div><div class="line">                isBlack = !isBlack</div><div class="line">            &#125;</div><div class="line">            isBlack = !isBlack</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> temporaryBoard</div><div class="line">    &#125;()</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">squareIsBlackAt</span><span class="params">(row: Int, column: Int)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        <span class="keyword">return</span> boardColors[(row * <span class="number">8</span>) + column]</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ— è®ºä½•æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ <code>Checkboard</code> ï¼Œé—­åŒ…å°±ä¼šæ‰§è¡Œï¼Œå¹¶ä¸” <code>boardColors</code> çš„é»˜è®¤å€¼å°±ä¼šè®¡ç®—å’Œè¿”å›ã€‚ä¸Šé¢æ —å­ä¸­çš„é—­åŒ…åœ¨ä¸€ä¸ªåä¸º <code>temporaryBoard</code> çš„ä¸´æ—¶æ•°ç»„ä¸­ä¸ºæ¯ä¸ªæ–¹æ ¼è®¡ç®—å¹¶ä¸”è®¾ç½®åˆé€‚çš„é¢œè‰²ï¼Œç„¶åä¸€æ—¦è®¾ç½®å®Œæ¯•ï¼Œå°±æŠŠè¿™ä¸ªä¸´æ—¶æ•°ç»„ä½œä¸ºé—­åŒ…çš„è¿”å›å€¼è¿”å›ã€‚è¿”å›çš„æ•°ç»„å€¼å‚¨å­˜åœ¨ <code>boardColors</code> ä¸­ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ <code>squareIsBlackAtRow</code> å·¥å…·å‡½æ•°æ¥æŸ¥è¯¢ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> board = <span class="type">Chessboard</span>()</div><div class="line"><span class="built_in">print</span>(board.squareIsBlackAt(row: <span class="number">0</span>, column: <span class="number">1</span>))</div><div class="line"><span class="comment">// Prints "true"</span></div><div class="line"><span class="built_in">print</span>(board.squareIsBlackAt(row: <span class="number">7</span>, column: <span class="number">7</span>))</div><div class="line"><span class="comment">// Prints "false"</span></div></pre></td></tr></table></figure>
<blockquote>
<p>æ‘˜è‡ªï¼š<a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/index.html#//apple_ref/doc/uid/TP40014097-CH3-ID0" target="_blank" rel="external">swift å®˜ç½‘</a><br>æ‰€æœ‰ä»£ç åœ¨Xcode9 Swift4 ç¯å¢ƒç¼–è¯‘æ²¡é—®é¢˜ï¼Œä»£ç <a href="https://github.com/keshiim/LearnSwift4" target="_blank" rel="external">æˆ³è¿™é‡Œ https://github.com/keshiim/LearnSwift4</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;em&gt;åˆå§‹åŒ–&lt;/em&gt;æ˜¯ä¸ºç±»ã€ç»“æ„ä½“æˆ–è€…æšä¸¾å‡†å¤‡å®ä¾‹çš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡éœ€è¦ç»™å®ä¾‹é‡Œçš„æ¯ä¸€ä¸ªå­˜å‚¨å±æ€§è®¾ç½®ä¸€ä¸ªåˆå§‹å€¼å¹¶ä¸”åœ¨æ–°å®ä¾‹å¯ä»¥ä½¿ç”¨ä¹‹å‰æ‰§è¡Œä»»ä½•å…¶ä»–æ‰€å¿…é¡»çš„é…ç½®æˆ–åˆå§‹åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;ä½ é€šè¿‡å®šä¹‰&lt;strong&gt;åˆå§‹åŒ–å™¨&lt;/strong&gt;æ¥å®ç°è¿™ä¸ªåˆå§‹åŒ–è¿‡ç¨‹ï¼Œå®ƒæ›´åƒæ˜¯ä¸€ä¸ªç”¨æ¥
    
    </summary>
    
      <category term="å­¦ä¹ " scheme="https://keshiim.github.io/categories/%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="Swift" scheme="https://keshiim.github.io/categories/%E5%AD%A6%E4%B9%A0/Swift/"/>
    
    
      <category term="Swift" scheme="https://keshiim.github.io/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode-88 Merge Sorted Array</title>
    <link href="https://keshiim.github.io/2017/11/28/Leetcode-88M-erge-Sorted-Array/"/>
    <id>https://keshiim.github.io/2017/11/28/Leetcode-88M-erge-Sorted-Array/</id>
    <published>2017-11-28T06:23:53.000Z</published>
    <updated>2018-03-20T09:56:53.645Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://leetcode.com/problems/merge-sorted-array/description/" target="_blank" rel="external">Merge Sorted Array åˆå¹¶æœ‰åºæ•°ç»„</a></p>
<h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><p>Given two sorted integer arrays <em>nums1</em> and <em>nums2</em>, merge <em>nums2</em> into <em>nums1</em> as one sorted array.</p>
<h3 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h3><p>You may assume that <em>nums1</em> has enough space (size that is greatr or equal to <em>m + n</em>) to hold additional elements from <em>nums2</em>. The number of elements initialized in <em>nums1</em> and <em>nums2</em> are <em>m</em> and <em>n</em> respectively.</p>
<h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>æ··åˆæ’å…¥ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼Œç”±äºä¿©æ•°ç»„éƒ½æ˜¯åç»­çš„ï¼Œåªéœ€è¦æŒ‰é¡ºåºæ¯”è¾ƒå¤§å°å³å¯ã€‚</p>
<h3 id="è§£æ³•ä¸€"><a href="#è§£æ³•ä¸€" class="headerlink" title="è§£æ³•ä¸€"></a>è§£æ³•ä¸€</h3><p>æœ€å…ˆæƒ³åˆ°çš„æ–¹æ³•å°±æ˜¯å»ºç«‹ä¸€ä¸ª<code>m + n</code>å¤§å°çš„æ–°æ•°ç»„ï¼Œç„¶åé€ä¸ªä»<code>num1</code>å’Œ<code>num2</code>æ•°ç»„ä¸­å»é™¤å…ƒç´ æ¯”è¾ƒï¼ŒæŠŠè¾ƒå°çš„åŠ å…¥æ–°æ•°ç»„ä¸­ï¼Œç„¶åè€ƒè™‘<code>nums1</code>æ•°ç»„æœ‰å‰©ä½™å’Œ<code>nums2</code>æ•°ç»„æœ‰å‰©ä½™çš„ä¸¤ç§æƒ…å†µï¼Œæœ€åæŠŠæ–°æ•°ç»„çš„å…ƒç´ é‡æ–°èµ‹å€¼åˆ°<code>nums1</code>æ•°ç»„ä¸­å³å¯ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<h4 id="Cpp"><a href="#Cpp" class="headerlink" title="Cpp"></a>Cpp</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums1, <span class="keyword">int</span> m, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums2, <span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (m &lt;= <span class="number">0</span> &amp;&amp; n &lt;= <span class="number">0</span>) <span class="keyword">return</span>;</div><div class="line">        <span class="keyword">int</span> a = <span class="number">0</span>, b = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> merged[m + n];</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m + n; i++) &#123;</div><div class="line">            <span class="keyword">if</span> (a &lt; m &amp;&amp; b &lt; n) &#123;</div><div class="line">                <span class="keyword">if</span> (nums1[a] &lt; nums2[b]) &#123;</div><div class="line">                    merged[i] = nums1[a];</div><div class="line">                    ++a;</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    merged[i] = nums2[b];</div><div class="line">                    ++b;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (a &lt; m &amp;&amp; b &gt;= n) &#123;</div><div class="line">                merged[i] = nums1[a];</div><div class="line">                ++a;            </div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (a &gt;= m &amp;&amp; b &lt; n) &#123;</div><div class="line">                merged[i] = nums2[b];</div><div class="line">                ++b;          </div><div class="line">            &#125;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m + n; i++) nums1[i] = merged[i];</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Swift"><a href="#Swift" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">merge</span><span class="params">(<span class="number">_</span> nums1: <span class="keyword">inout</span> [Int], <span class="number">_</span> m: Int, <span class="number">_</span> nums2: [Int], <span class="number">_</span> n: Int)</span></span> &#123;</div><div class="line">        <span class="keyword">if</span> m &lt;= <span class="number">0</span> &amp;&amp; n &lt;= <span class="number">0</span> &#123;</div><div class="line">            <span class="keyword">return</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">var</span> a = <span class="number">0</span>, b = <span class="number">0</span></div><div class="line">        <span class="keyword">var</span> merged = [<span class="type">Int</span>](repeatElement(<span class="number">0</span>, <span class="built_in">count</span>: m + n))</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;m + n &#123;</div><div class="line">            <span class="keyword">if</span> a &lt; m &amp;&amp; b &lt; n &#123;</div><div class="line">                <span class="comment">//éƒ½æœ‰æ•°æ®</span></div><div class="line">                <span class="keyword">if</span> nums1[a] &lt; nums2[b] &#123;</div><div class="line">                    merged[i] = nums1[a];</div><div class="line">                    a += <span class="number">1</span></div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    merged[i] = nums2[b]</div><div class="line">                    b += <span class="number">1</span></div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> a &lt; m &amp;&amp; b &gt;= n &#123;</div><div class="line">                <span class="comment">// nums2 è€—å°½</span></div><div class="line">                merged[i] = nums1[a]</div><div class="line">                a += <span class="number">1</span></div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> a &gt;= m &amp;&amp; b &lt; n &#123;</div><div class="line">                <span class="comment">// nums1 è€—å°½</span></div><div class="line">                merged[i] = nums2[b]</div><div class="line">                b += <span class="number">1</span></div><div class="line">            &#125; <span class="keyword">else</span>  &#123;</div><div class="line">                <span class="keyword">return</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;m + n &#123;</div><div class="line">            nums1[i] = merged[i]</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="è§£æ³•äºŒ"><a href="#è§£æ³•äºŒ" class="headerlink" title="è§£æ³•äºŒ"></a>è§£æ³•äºŒ</h3><p>ä¸Šè¿°è§£æ³•å›ºç„¶æ²¡é”™ï¼Œä½†æ˜¯è¿˜æœ‰æ›´ç®€æ´çš„åŠæ³•ï¼Œè€Œä¸”ä¸ç”¨ç”³è¯·æ–°å˜é‡ã€‚ç®—æ³•æ€æƒ³æ˜¯ï¼šç”±äºåˆå¹¶åçš„<code>nums1</code>æ•°ç»„çš„å¤§å°å¿…å®šæ˜¯<code>m + n</code>ï¼Œæ‰€ä»¥ä»æœ€åé¢å¼€å§‹å¾€å‰èµ‹å€¼ï¼Œå…ˆæ¯”è¾ƒ<code>nums1</code>å’Œ<code>nums2</code>ä¸­æœ€åä¸€ä¸ªå…ƒç´ çš„å¤§å°ï¼ŒæŠŠè¾ƒå¤§çš„é‚£ä¸ªæ’å…¥åˆ°<code>m + n - 1</code>çš„ä½ç½®ä¸Šï¼Œå†ä¾æ¬¡å‘å‰æ¨ã€‚å¦‚æœ<code>nums1</code>ä¸­æ‰€æœ‰çš„å…ƒç´ éƒ½æ¯”<code>nums2</code>ä¸­çš„å°ï¼Œé‚£ä¹ˆå‰<code>m</code>ä¸ªå…ƒç´ éƒ½æ˜¯<code>nums1</code>çš„å†…å®¹ï¼Œæ²¡æœ‰æ”¹å˜ã€‚å¦‚æœ<code>nums1</code>ä¸­çš„æ•°ç»„æ¯”<code>nums2</code>å¤§çš„ï¼Œå½“<code>nums1</code>å¾ªç¯å®Œåï¼Œ<code>nums2</code>ä¸­è¿˜æœ‰å‰©ä½™å…ƒç´ æ²¡æœ‰åŠ å…¥åˆ°<code>nums1</code>ï¼Œç›´æ¥ç”¨ä¸ªå¾ªç¯æŠŠ<code>nums2</code>ä¸­æ‰€æœ‰çš„å…ƒç´ è¦†ç›–åˆ°<code>nums1</code>å‰©ä¸‹çš„ä½ç½®ä¸­ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<h4 id="Cpp-1"><a href="#Cpp-1" class="headerlink" title="Cpp"></a>Cpp</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">merge</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums1, <span class="keyword">int</span> m, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums2, <span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> count = m + n - <span class="number">1</span>;</div><div class="line">        --m; --n;</div><div class="line">        <span class="keyword">while</span> (m &gt;= <span class="number">0</span> &amp;&amp; n &gt;= <span class="number">0</span>) nums1[count--] = nums1[m] &gt; nums2[n] ? nums1[m--] : nums2[n--];</div><div class="line">        <span class="keyword">while</span> (n &gt;= <span class="number">0</span>) nums1[count--] = nums2[n--];</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Swift-1"><a href="#Swift-1" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">merge</span><span class="params">(<span class="number">_</span> nums1: <span class="keyword">inout</span> [Int], <span class="number">_</span> m: Int, <span class="number">_</span> nums2: [Int], <span class="number">_</span> n: Int)</span></span> &#123;</div><div class="line">        <span class="keyword">var</span> <span class="built_in">count</span> = m + n - <span class="number">1</span></div><div class="line">        <span class="keyword">var</span> m = m - <span class="number">1</span></div><div class="line">        <span class="keyword">var</span> n = n - <span class="number">1</span></div><div class="line">        <span class="keyword">while</span> m &gt;= <span class="number">0</span> &amp;&amp; n &gt;= <span class="number">0</span> &#123;</div><div class="line">            <span class="keyword">if</span> nums1[m] &gt; nums2[n] &#123;</div><div class="line">                nums1[<span class="built_in">count</span>] = nums1[m];</div><div class="line">                m -= <span class="number">1</span></div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                nums1[<span class="built_in">count</span>] = nums2[n]</div><div class="line">                n -= <span class="number">1</span></div><div class="line">            &#125;</div><div class="line">            <span class="built_in">count</span> -= <span class="number">1</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">while</span> n &gt;= <span class="number">0</span> &#123;</div><div class="line">            nums1[<span class="built_in">count</span>] = nums2[n]</div><div class="line">            <span class="built_in">count</span> -= <span class="number">1</span></div><div class="line">            n -= <span class="number">1</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://leetcode.com/problems/merge-sorted-array/description/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Merge Sorted Array åˆå¹¶æœ‰åºæ•°ç»„&lt;/a&gt;&lt;/p&gt;

    
    </summary>
    
      <category term="LeetCode" scheme="https://keshiim.github.io/categories/LeetCode/"/>
    
    
      <category term="LeetCode" scheme="https://keshiim.github.io/tags/LeetCode/"/>
    
      <category term="algorithm" scheme="https://keshiim.github.io/tags/algorithm/"/>
    
      <category term="ç®—æ³•" scheme="https://keshiim.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="Array" scheme="https://keshiim.github.io/tags/Array/"/>
    
      <category term="Easy" scheme="https://keshiim.github.io/tags/Easy/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode-309 Best Time to Buy and Sell Stock with Cooldown</title>
    <link href="https://keshiim.github.io/2017/11/24/Leetcode-309-Best-Time-to-Buy-and-Sell-Stock-with-Cooldown/"/>
    <id>https://keshiim.github.io/2017/11/24/Leetcode-309-Best-Time-to-Buy-and-Sell-Stock-with-Cooldown/</id>
    <published>2017-11-24T06:14:04.000Z</published>
    <updated>2018-03-20T09:56:53.644Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><p>Say you have an array for which the $i^{th}$ element is the price of a given stock on day i.</p>
<p>Design an algorithm to find the maximum profit. You may complete as many transactions as you like (ie, buy one and sell one share of the stock multiple times) with the following restrictions:</p>
<ul>
<li>You may not engage in multiple transactions at the same time (ie, you must sell the stock before you buy again).</li>
<li>After you sell your stock, you cannot buy stock on next day. (ie, cooldown 1 day)</li>
</ul>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">prices = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">2</span>]</div><div class="line">maxProfit = <span class="number">3</span></div><div class="line">transactions = [buy, sell, cooldown, buy, sell]</div></pre></td></tr></table></figure>
<h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>è€Œè¿™é“é¢˜ä¸ä¸Šé¢è¿™äº›ä¸åŒä¹‹å¤„åœ¨äºåŠ å…¥äº†ä¸€ä¸ªå†·å†»æœŸ<code>Cooldown</code>ä¹‹è¯´ï¼Œå°±æ˜¯å¦‚æœæŸå¤©å–äº†è‚¡ç¥¨ï¼Œé‚£ä¹ˆç¬¬äºŒå¤©ä¸èƒ½ä¹°è‚¡ç¥¨ï¼Œæœ‰ä¸€å¤©çš„å†·å†»æœŸã€‚æ­¤é¢˜éœ€è¦ç»´æŠ¤ä¸‰ä¸ªä¸€ç»´æ•°ç»„<code>buy</code>, <code>sell</code>ï¼Œå’Œ<code>rest</code>ã€‚å…¶ä¸­ï¼š</p>
<ul>
<li><code>buy[i]</code>è¡¨ç¤ºåœ¨ç¬¬<code>i</code>å¤©ä¹‹å‰æœ€åä¸€ä¸ªæ“ä½œæ˜¯ä¹°ï¼Œæ­¤æ—¶çš„æœ€å¤§æ”¶ç›Šã€‚</li>
<li><code>sell[i]</code>è¡¨ç¤ºåœ¨ç¬¬<code>i</code>å¤©ä¹‹å‰æœ€åä¸€ä¸ªæ“ä½œæ˜¯å–ï¼Œæ­¤æ—¶çš„æœ€å¤§æ”¶ç›Šã€‚</li>
<li><code>rest[i]</code>è¡¨ç¤ºåœ¨ç¬¬<code>i</code>å¤©ä¹‹å‰æœ€åä¸€ä¸ªæ“ä½œæ˜¯å†·å†»æœŸï¼Œæ­¤æ—¶çš„æœ€å¤§æ”¶ç›Šã€‚</li>
</ul>
<p>æˆ‘ä»¬å†™å‡ºé€’æ¨å¼ä¸ºï¼š</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">buy[i]  = max(rest[i<span class="number">-1</span>] - price, buy[i<span class="number">-1</span>]) </div><div class="line">sell[i] = max(buy[i<span class="number">-1</span>] + price, sell[i<span class="number">-1</span>])</div><div class="line">rest[i] = max(sell[i<span class="number">-1</span>], buy[i<span class="number">-1</span>], rest[i<span class="number">-1</span>])</div></pre></td></tr></table></figure>
<p>ä¸Šè¿°é€’æ¨å¼å¾ˆå¥½çš„è¡¨ç¤ºäº†åœ¨ä¹°ä¹‹å‰æœ‰å†·å†»æœŸï¼Œä¹°ä¹‹å‰è¦å–æ‰ä¹‹å‰çš„è‚¡ç¥¨ã€‚<strong>ä¸€ä¸ªå°æŠ€å·§æ˜¯å¦‚ä½•ä¿è¯<code>[buy, rest, buy]</code>çš„æƒ…å†µä¸ä¼šå‡ºç°</strong>ï¼Œè¿™æ˜¯ç”±äº<code>buy[i] &lt;= rest[i]</code>ï¼Œ å³<code>rest[i] = max(sell[i-1], rest[i-1])</code>ï¼Œè¿™ä¿è¯äº†<code>[buy, rest, buy]</code>ä¸ä¼šå‡ºç°ã€‚</p>
<p>æ‰€ä»¥é€’æ¨å…¬å¼å¯ä»¥å˜æˆï¼š</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">buy[i]  = max(rest[i<span class="number">-1</span>] - price, buy[i<span class="number">-1</span>]) </div><div class="line">sell[i] = max(buy[i<span class="number">-1</span>] + price, sell[i<span class="number">-1</span>])</div><div class="line">rest[i] = max(sell[i<span class="number">-1</span>], rest[i<span class="number">-1</span>])</div></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œç”±äºå†·å†»æœŸçš„å­˜åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡º<code>rest[i] = sell[i-1]</code>ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸Šé¢ä¸‰ä¸ªé€’æ¨å¼ç²¾ç®€åˆ°ä¸¤ä¸ªï¼š</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">buy[i]  = max(sell[i<span class="number">-2</span>] - price, buy[i<span class="number">-1</span>]) </div><div class="line">sell[i] = max(buy[i<span class="number">-1</span>] + price, sell[i<span class="number">-1</span>])</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬è¿˜å¯ä»¥åšè¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œç”±äº<code>i</code>åªä¾èµ–äº<code>i-1</code>å’Œ<code>i-2</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨<code>O(1)</code>çš„ç©ºé—´å¤æ‚åº¦å®Œæˆç®—æ³•ï¼Œå‚è§ä»£ç å¦‚ä¸‹ï¼š</p>
<h4 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; prices)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> buy = INT_MIN, pre_buy = <span class="number">0</span>, sell = <span class="number">0</span>, pre_sell = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> price : prices) &#123;</div><div class="line">            pre_buy = buy;</div><div class="line">            buy = max(pre_sell - price, pre_buy);</div><div class="line">            pre_sell = sell;</div><div class="line">            sell = max(pre_buy + price, pre_sell);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> sell;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Swift"><a href="#Swift" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">maxProfit</span><span class="params">(<span class="number">_</span> prices: [Int])</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">var</span> pre_buy = <span class="number">0</span>, buy = <span class="type">Int</span>.<span class="built_in">min</span>, pre_sell = <span class="number">0</span>, sell = <span class="number">0</span></div><div class="line">        <span class="keyword">for</span> price <span class="keyword">in</span> prices &#123;</div><div class="line">            pre_buy = buy</div><div class="line">            buy = <span class="built_in">max</span>(pre_sell - price, pre_buy)</div><div class="line">            pre_sell = sell</div><div class="line">            sell = <span class="built_in">max</span>(pre_buy + price, pre_sell)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> sell</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>###å¦ä¸€ç§è§£æ³•<br><a href="http://blog.csdn.net/qingyujean/article/details/51482041" target="_blank" rel="external">å‚è€ƒé“¾æ¥</a></p>
<h3 id="ç›¸å…³é¢˜ç›®ï¼š"><a href="#ç›¸å…³é¢˜ç›®ï¼š" class="headerlink" title="ç›¸å…³é¢˜ç›®ï¼š"></a>ç›¸å…³é¢˜ç›®ï¼š</h3><ul>
<li><a href="https://keshiim.github.io/2017/11/24/Leetcode-188-Best-Time-to-Buy-and-Sell-Stock-IV/">Best Time to Buy and Sell Stock IV</a></li>
<li><a href="https://keshiim.github.io/2017/11/24/Leetcode-123-Best-Time-to-Buy-and-Sell-Stock-III/">Best Time to Buy and Sell Stock III</a></li>
<li><a href="https://keshiim.github.io/2017/11/24/Leetcode-122-Best-Time-to-Buy-and-Sell-Stock-II/">Best Time to Buy and Sell Stock II</a></li>
<li><a href="https://keshiim.github.io/2017/11/24/Leetcode-121-Best-Time-to-Buy-and-Sell-Stock/">Best Time to Buy and Sell Stock</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;é¢˜ç›®æè¿°&quot;&gt;&lt;a href=&quot;#é¢˜ç›®æè¿°&quot; class=&quot;headerlink&quot; title=&quot;é¢˜ç›®æè¿°&quot;&gt;&lt;/a&gt;é¢˜ç›®æè¿°&lt;/h3&gt;&lt;p&gt;Say you have an array for which the $i^{th}$ element is the pr
    
    </summary>
    
      <category term="LeetCode" scheme="https://keshiim.github.io/categories/LeetCode/"/>
    
    
      <category term="LeetCode" scheme="https://keshiim.github.io/tags/LeetCode/"/>
    
      <category term="algorithm" scheme="https://keshiim.github.io/tags/algorithm/"/>
    
      <category term="ç®—æ³•" scheme="https://keshiim.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="Dynamic Programming" scheme="https://keshiim.github.io/tags/Dynamic-Programming/"/>
    
      <category term="Medium" scheme="https://keshiim.github.io/tags/Medium/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode-188 Best Time to Buy and Sell Stock IV</title>
    <link href="https://keshiim.github.io/2017/11/24/Leetcode-188-Best-Time-to-Buy-and-Sell-Stock-IV/"/>
    <id>https://keshiim.github.io/2017/11/24/Leetcode-188-Best-Time-to-Buy-and-Sell-Stock-IV/</id>
    <published>2017-11-24T06:10:23.000Z</published>
    <updated>2018-03-20T09:56:53.643Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iv/description/" target="_blank" rel="external">Best Time to Buy and Sell Stock IV é¢è‚¡ç¥¨çš„æœ€ä½³æ—¶é—´ä¹‹å››</a></p>
<h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><p>Say you have an array for which the $i^{th}$ element is the price of a given stock on day i.</p>
<p>Design an algorithm to find the maximum profit. You may complete at most <strong>K</strong> transactions.</p>
<h3 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h3><p>You may not engage in multiple transactions at the same time (ie, you must sell the stock befor you buy again).</p>
<h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>è¿™é“é¢˜å®é™…ä¸Šæ˜¯ä¹‹å‰é‚£é“<a href="https://keshiim.github.io/2017/11/24/Leetcode-123-Best-Time-to-Buy-and-Sell-Stock-III/">Best Time to Buy and Sell Stock III ä¹°è‚¡ç¥¨çš„æœ€ä½³æ—¶é—´ä¹‹ä¸‰</a>çš„ä¸€åŠæƒ…å†µçš„æ¨å¹¿ï¼Œè¿˜æ˜¯éœ€è¦ç”¨åŠ¨æ€è§„åˆ’ï¼ˆDynamic programmingï¼‰æ¥è§£å†³ï¼Œå…¶æ€è·¯å¦‚ä¸‹ï¼š</p>
<p>è¿™é‡Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸ªé€’æ¨å…¬å¼æ¥åˆ†åˆ«æ›´æ–°ä¸¤ä¸ªå˜é‡<code>local</code>å’Œ<code>global</code>ï¼Œæˆ‘ä»¬å…¶å®å¯ä»¥æ±‚è‡³å°‘<code>k</code>æ¬¡äº¤æ˜“çš„æœ€å¤§åˆ©æ¶¦ã€‚<br>æˆ‘ä»¬å®šä¹‰<code>local[i][j]</code>ä¸ºåœ¨åˆ°è¾¾ç¬¬<code>i</code>å¤©æ—¶æœ€å¤šå¯è¿›è¡Œjæ¬¡äº¤æ˜“å¹¶ä¸”æœ€åä¸€æ¬¡äº¤æ˜“åœ¨æœ€åä¸€å¤©å–å‡ºçš„æœ€å¤§åˆ©æ¶¦ï¼Œæ­¤ä¸ºå±€éƒ¨æœ€ä¼˜ã€‚<br>ç„¶åæˆ‘ä»¬å®šä¹‰<code>global[i][j]</code>ä¸ºåœ¨åˆ°è¾¾ç¬¬iå¤©æ—¶æœ€å¤šå¯è¿›è¡Œjæ¬¡äº¤æ˜“çš„æœ€å¤§åˆ©æ¶¦ï¼Œæ­¤ä¸ºå…¨å±€æœ€ä¼˜ã€‚å®ƒä»¬çš„é€’æ¨å¼ä¸ºï¼š</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">local[i][j] = max(global[i - <span class="number">1</span>][j - <span class="number">1</span>] + max(diff, <span class="number">0</span>), local[i - <span class="number">1</span>][j] + diff)</div><div class="line"></div><div class="line">global[i][j] = max(local[i][j], global[i - <span class="number">1</span>][j])ï¼Œ</div></pre></td></tr></table></figure>
<p>å…¶ä¸­å±€éƒ¨æœ€ä¼˜å€¼æ˜¯æ¯”è¾ƒå‰ä¸€å¤©å¹¶å°‘äº¤æ˜“ä¸€æ¬¡çš„å…¨å±€æœ€ä¼˜åŠ ä¸Š<strong>å¤§äº0çš„å·®å€¼</strong>ï¼Œå’Œå‰ä¸€å¤©çš„å±€éƒ¨æœ€ä¼˜åŠ ä¸Šå·®å€¼åç›¸æ¯”ï¼Œä¸¤è€…ä¹‹ä¸­å–è¾ƒå¤§å€¼ï¼Œè€Œå…¨å±€æœ€ä¼˜æ¯”è¾ƒå±€éƒ¨æœ€ä¼˜å’Œå‰ä¸€å¤©çš„å…¨å±€æœ€ä¼˜ã€‚</p>
<p>ä½†è¿™é“é¢˜è¿˜æœ‰ä¸ªå‘ï¼Œå°±æ˜¯å¦‚æœkçš„å€¼è¿œå¤§äº<code>prices</code>çš„å¤©æ•°ï¼Œæ¯”å¦‚<code>k</code>æ˜¯å¥½å‡ ç™¾ä¸‡ï¼Œè€Œ<code>prices</code>çš„å¤©æ•°å°±ä¸ºè‹¥å¹²å¤©çš„è¯ï¼Œä¸Šé¢çš„<strong>DP</strong>è§£æ³•å°±éå¸¸çš„æ²¡æœ‰æ•ˆç‡ï¼Œåº”è¯¥ç›´æ¥ç”¨<a href="https://keshiim.github.io/2017/11/24/Leetcode-122-Best-Time-to-Buy-and-Sell-Stock-II/">Best Time to Buy and Sell Stock II</a> ä¹°è‚¡ç¥¨çš„æœ€ä½³æ—¶é—´ä¹‹äºŒçš„æ–¹æ³•æ¥æ±‚è§£ï¼Œæ‰€ä»¥å®é™…ä¸Šè¿™é“é¢˜æ˜¯ä¹‹å‰çš„äºŒå’Œä¸‰çš„ç»¼åˆä½“ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<h3 id="è§£é¢˜"><a href="#è§£é¢˜" class="headerlink" title="è§£é¢˜"></a>è§£é¢˜</h3><h4 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span> k, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;prices)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (prices.empty()) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        <span class="keyword">if</span> (k &gt;= prices.size()) <span class="keyword">return</span> solveMaxProfit(prices);</div><div class="line">        <span class="keyword">int</span> g[k + <span class="number">1</span>] = &#123;<span class="number">0</span>&#125;;</div><div class="line">        <span class="keyword">int</span> l[k + <span class="number">1</span>] = &#123;<span class="number">0</span>&#125;;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; prices.size() - <span class="number">1</span>; i++) &#123;</div><div class="line">            <span class="keyword">int</span> diff = prices[i + <span class="number">1</span>] - prices[i];</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = k; j &gt;= <span class="number">1</span>; j--) &#123;</div><div class="line">                l[j] = max(g[j - <span class="number">1</span>] + max(diff, <span class="number">0</span>), l[j] + diff);</div><div class="line">                g[j] = max(g[j], l[j]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> g[k];</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">solveMaxProfit</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;prices)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; prices.size(); i++) &#123;</div><div class="line">            <span class="keyword">if</span> (prices[i] - prices[i - <span class="number">1</span>] &gt; <span class="number">0</span>) &#123;</div><div class="line">                res += prices[i] - prices[i - <span class="number">1</span>];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Swift"><a href="#Swift" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">maxProfit</span><span class="params">(<span class="number">_</span> k: Int, <span class="number">_</span> prices: [Int])</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">if</span> prices.isEmpty &#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> prices.<span class="built_in">count</span> &lt;= k &#123;</div><div class="line">            <span class="keyword">return</span> solveMaxProfit(prices)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">var</span> g = [<span class="type">Int</span>](repeatElement(<span class="number">0</span>, <span class="built_in">count</span>: k + <span class="number">1</span>))</div><div class="line">        <span class="keyword">var</span> l = [<span class="type">Int</span>](repeatElement(<span class="number">0</span>, <span class="built_in">count</span>: k + <span class="number">1</span>))</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;prices.<span class="built_in">count</span> - <span class="number">1</span> &#123;</div><div class="line">            <span class="keyword">let</span> diff = prices[i + <span class="number">1</span>] - prices[i]</div><div class="line">            <span class="keyword">var</span> j = k</div><div class="line">            <span class="keyword">while</span> (j &gt;= <span class="number">1</span>) &#123;</div><div class="line">                l[j] = <span class="built_in">max</span>(g[j - <span class="number">1</span>] + <span class="built_in">max</span>(<span class="number">0</span>, diff), l[j] + diff)</div><div class="line">                g[j] = <span class="built_in">max</span>(l[j], g[j])</div><div class="line">                j -= <span class="number">1</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> g[k]</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">solveMaxProfit</span><span class="params">(<span class="number">_</span> prices: [Int])</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">var</span> res = <span class="number">0</span></div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span>..&lt;prices.<span class="built_in">count</span> &#123;</div><div class="line">            <span class="keyword">if</span> prices[i] - prices[i - <span class="number">1</span>] &gt; <span class="number">0</span> &#123;</div><div class="line">                res += prices[i] - prices[i - <span class="number">1</span>]</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ç›¸å…³é¢˜ç›®"><a href="#ç›¸å…³é¢˜ç›®" class="headerlink" title="ç›¸å…³é¢˜ç›®"></a>ç›¸å…³é¢˜ç›®</h3><ul>
<li><a href="https://keshiim.github.io/2017/11/24/Leetcode-309-Best-Time-to-Buy-and-Sell-Stock-with-Cooldown/">Best Time to Buy and Sell Stock with Cooldown</a></li>
<li><a href="https://keshiim.github.io/2017/11/24/Leetcode-121-Best-Time-to-Buy-and-Sell-Stock/">Best Time to Buy and Sell Stock</a></li>
<li><a href="https://keshiim.github.io/2017/11/24/Leetcode-123-Best-Time-to-Buy-and-Sell-Stock-III/">Best Time to Buy and Sell Stock III</a></li>
<li><a href="https://keshiim.github.io/2017/11/24/Leetcode-122-Best-Time-to-Buy-and-Sell-Stock-II/">Best Time to Buy and Sell Stock II</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iv/description/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Best Time to Buy a
    
    </summary>
    
      <category term="LeetCode" scheme="https://keshiim.github.io/categories/LeetCode/"/>
    
    
      <category term="LeetCode" scheme="https://keshiim.github.io/tags/LeetCode/"/>
    
      <category term="algorithm" scheme="https://keshiim.github.io/tags/algorithm/"/>
    
      <category term="ç®—æ³•" scheme="https://keshiim.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="Dynamic Programming" scheme="https://keshiim.github.io/tags/Dynamic-Programming/"/>
    
      <category term="Hard" scheme="https://keshiim.github.io/tags/Hard/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode-123 Best Time to Buy and Sell Stock III</title>
    <link href="https://keshiim.github.io/2017/11/24/Leetcode-123-Best-Time-to-Buy-and-Sell-Stock-III/"/>
    <id>https://keshiim.github.io/2017/11/24/Leetcode-123-Best-Time-to-Buy-and-Sell-Stock-III/</id>
    <published>2017-11-24T06:06:46.000Z</published>
    <updated>2018-03-20T09:56:53.643Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iii/description/" target="_blank" rel="external">Best Time to Buy and Sell Stock III ä¹°è‚¡ç¥¨çš„æœ€ä½³æ—¶é—´ä¹‹ä¸‰</a></p>
<h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><p>Say you have an array for which the $i^{th}$ element is the price of a given stock on day i.</p>
<p>Design an algorithm to find the maximum profit. You may complete at most <em>two Transactions</em>.</p>
<h3 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h3><p>You may not engage in multiple transactions at the same time(ie, you must sell the stock before you buy again).</p>
<h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>è¿™é“é¢˜æ˜¯ä¹°è‚¡ç¥¨çš„æœ€ä½³æ—¶é—´ç³»åˆ—é—®é¢˜ä¸­æœ€éš¾æœ€å¤æ‚çš„ä¸€é“ï¼Œå‰é¢ä¸¤é“<a href="https://keshiim.github.io/2017/11/24/Leetcode-122-Best-Time-to-Buy-and-Sell-Stock-II/">Best Time to Buy and Sell Stock II</a><br>å’Œ <a href="https://keshiim.github.io/2017/11/24/Leetcode-121-Best-Time-to-Buy-and-Sell-Stock/">Best Time to Buy and Sell Stock</a>çš„æ€è·¯éƒ½éå¸¸çš„ç®€æ˜ï¼Œç®—æ³•ä¹Ÿå¾ˆç®€å•ã€‚</p>
<p>è€Œè¿™é“é¢˜æ˜¯è¦æ±‚æœ€å¤šäº¤æ˜“ä¸¤æ¬¡ï¼Œæ‰¾åˆ°æœ€å¤§åˆ©æ¶¦ï¼Œè¿˜æ˜¯éœ€è¦ç”¨åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programmingï¼‰æ¥è§£ã€‚</p>
<h3 id="è§£æ³•ä¸€"><a href="#è§£æ³•ä¸€" class="headerlink" title="è§£æ³•ä¸€"></a>è§£æ³•ä¸€</h3><p>è¿™é‡Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸ªåœ°æ¨å…¬å¼æ¥åˆ†åˆ«æ›´æ–°ä¸¤ä¸ªå˜é‡localå’Œglobalï¼Œæˆ‘ä»¬å…¶å®å¯ä»¥æ±‚è‡³å°‘<code>k</code>æ¬¡äº¤æ˜“çš„æœ€å¤§åˆ©æ¶¦ï¼Œæ‰¾åˆ°é€šé¡¹å…¬å¼åå¯ä»¥è®¾å®š<code>k = 2</code>ï¼Œå³ä¸ºæœ¬é¢˜çš„è§£ç­”ã€‚æˆ‘ä»¬å®šä¹‰<code>local[i][j]</code>ä¸ºåœ¨åˆ°è¾¾ç¬¬<code>i</code>å¤©æ—¶æœ€å¤šå¯è¿›è¡Œ<code>j</code>æ¬¡äº¤æ˜“å¹¶ä¸”æœ€åä¸€æ¬¡äº¤æ˜“åœ¨æœ€åä¸€å¤©å–å‡ºçš„æœ€å¤§åˆ©æ¶¦ï¼Œæ­¤ä¸ºå±€éƒ¨æœ€ä¼˜ã€‚ç„¶åæˆ‘ä»¬å®šä¹‰<code>global[i][j]</code>ä¸ºåœ¨åˆ°è¾¾ç¬¬<code>i</code>å¤©æ—¶æœ€å¤šå¯è¿›è¡Œ<code>j</code>æ¬¡äº¤æ˜“çš„æœ€å¤§åˆ©æ¶¦ï¼Œä¸ºæ­¤å…¨å±€æœ€ä¼˜ã€‚ä»–ä»¬çš„é€’æ¨å…¬å¼ä¸ºï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">local[i][j] = max(global[i - <span class="number">1</span>][j - <span class="number">1</span>] + max(diff, <span class="number">0</span>), local[i - <span class="number">1</span>)[j] + diff);</div><div class="line">global[i][j] = max(local[i][j], global[i - <span class="number">1</span>][j])</div></pre></td></tr></table></figure>
<p>å…¶ä¸­å±€éƒ¨æœ€ä¼˜å€¼æ˜¯æ¯”è¾ƒå‰ä¸€å¤©å¹¶å°‘äº¤æ˜“ä¸€æ¬¡çš„å…¨å±€æœ€ä¼˜åŠ ä¸Šå¤§äº<code>0</code>çš„å·®å€¼ï¼Œå’Œå‰ä¸€å¤©çš„å±€éƒ¨æœ€ä¼˜åŠ ä¸Šå·®å€¼ä¸­å–è¾ƒå¤§å€¼ï¼Œè€Œå…¨å±€æœ€ä¼˜å€¼æ˜¯æ¯”è¾ƒå±€éƒ¨æœ€ä¼˜å’Œå‰ä¸€å¤©çš„å…¨å±€æœ€ä¼˜å–è¾ƒå¤§å€¼ã€‚</p>
<p>å…¨å±€:<br><strong>åˆ°è¾¾ç¬¬iå¤©è¿›è¡Œjæ¬¡äº¤æ˜“çš„æœ€å¤§æ”¶ç›Š = max{å±€éƒ¨ï¼ˆåœ¨ç¬¬iå¤©äº¤æ˜“åï¼Œæ°å¥½æ»¡è¶³jæ¬¡äº¤æ˜“ï¼‰ï¼Œå…¨å±€ï¼ˆåˆ°è¾¾ç¬¬i-1å¤©æ—¶å·²ç»æ»¡è¶³jæ¬¡äº¤æ˜“ï¼‰}</strong></p>
<p>å±€éƒ¨ï¼š<br><strong>åœ¨ç¬¬iå¤©äº¤æ˜“åï¼Œæ€»å…±äº¤æ˜“äº†jæ¬¡ =  max{æƒ…å†µ2ï¼Œæƒ…å†µ1}<br>æƒ…å†µ1ï¼šåœ¨ç¬¬i-1å¤©æ—¶ï¼Œæ°å¥½å·²ç»äº¤æ˜“äº†jæ¬¡ï¼ˆlocal[i-1][j]ï¼‰ï¼Œé‚£ä¹ˆå¦‚æœi-1å¤©åˆ°iå¤©å†äº¤æ˜“ä¸€æ¬¡ï¼šå³åœ¨ç¬¬i-1å¤©ä¹°å…¥ï¼Œç¬¬iå¤©å–å‡ºï¼ˆdiffï¼‰ï¼Œåˆ™è¿™ä¸å¹¶ä¸ä¼šå¢åŠ äº¤æ˜“æ¬¡æ•°ï¼ã€ä¾‹å¦‚æˆ‘åœ¨ç¬¬ä¸€å¤©ä¹°å…¥ï¼Œç¬¬äºŒå¤©å–å‡ºï¼›ç„¶åç¬¬äºŒå¤©åˆä¹°å…¥ï¼Œç¬¬ä¸‰å¤©å†å–å‡ºçš„è¡Œä¸º  å’Œ   ç¬¬ä¸€å¤©ä¹°å…¥ï¼Œç¬¬ä¸‰å¤©å–å‡º  çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œå…¶å®åªè¿›è¡Œäº†ä¸€æ¬¡äº¤æ˜“ï¼å› ä¸ºæœ‰è¿ç»­æ€§ã€‘<br>æƒ…å†µ2ï¼šç¬¬i-1å¤©åï¼Œå…±äº¤æ˜“äº†j-1æ¬¡ï¼ˆglobal[i-1][j-1]ï¼‰ï¼Œå› æ­¤ä¸ºäº†æ»¡è¶³â€œç¬¬iå¤©è¿‡åå…±è¿›è¡Œäº†jæ¬¡äº¤æ˜“ï¼Œä¸”ç¬¬iå¤©å¿…é¡»è¿›è¡Œäº¤æ˜“â€çš„æ¡ä»¶ï¼šæˆ‘ä»¬å¯ä»¥é€‰æ‹©ï¼šåœ¨ç¬¬i-1å¤©ä¹°å…¥ï¼Œç„¶åå†ç¬¬iå¤©å–å‡ºï¼ˆdiffï¼‰ï¼Œæˆ–è€…é€‰æ‹©åœ¨ç¬¬iå¤©ä¹°å…¥ï¼Œç„¶ååŒæ ·åœ¨ç¬¬iå¤©å–å‡ºï¼ˆæ”¶ç›Šä¸º0ï¼‰ã€‚</strong></p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<h4 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;prices)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (prices.empty()) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> n = prices.size(), g[n][<span class="number">3</span>] = &#123;<span class="number">0</span>&#125;, l[n][<span class="number">3</span>] = &#123;<span class="number">0</span>&#125;;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; prices.size(); i++) &#123;</div><div class="line">            <span class="keyword">int</span> diff = prices[i] - prices[i - <span class="number">1</span>];</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= <span class="number">2</span>; j++) &#123;</div><div class="line">                l[i][j] = max(g[i - <span class="number">1</span>][j - <span class="number">1</span>] + max(diff, <span class="number">0</span>), l[i - <span class="number">1</span>][j] + diff);</div><div class="line">                g[i][j] = max(l[i][j], g[i - <span class="number">1</span>][j]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> g[n - <span class="number">1</span>][<span class="number">2</span>];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Swift"><a href="#Swift" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">maxProfit</span><span class="params">(<span class="number">_</span> prices: [Int])</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">if</span> prices.<span class="built_in">count</span> == <span class="number">0</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">let</span> n = prices.<span class="built_in">count</span></div><div class="line">        <span class="keyword">var</span> g = [[<span class="type">Int</span>]](repeating: [<span class="type">Int</span>](repeatElement(<span class="number">0</span>, <span class="built_in">count</span>: <span class="number">3</span>)), <span class="built_in">count</span>: n)</div><div class="line">        <span class="keyword">var</span> l = [[<span class="type">Int</span>]](repeating: [<span class="type">Int</span>](repeatElement(<span class="number">0</span>, <span class="built_in">count</span>: <span class="number">3</span>)), <span class="built_in">count</span>: n)</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span>..&lt;n &#123;</div><div class="line">            <span class="keyword">let</span> diff = prices[i] - prices[i - <span class="number">1</span>]</div><div class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="number">1</span>...<span class="number">2</span> &#123;</div><div class="line">                l[i][j] = <span class="built_in">max</span>(g[i - <span class="number">1</span>][j - <span class="number">1</span>] + <span class="built_in">max</span>(diff, <span class="number">0</span>), l[i - <span class="number">1</span>][j] + diff)</div><div class="line">                g[i][j] = <span class="built_in">max</span>(l[i][j], g[i - <span class="number">1</span>][j])</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> g[n - <span class="number">1</span>][<span class="number">2</span>]</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="æå‡"><a href="#æå‡" class="headerlink" title="æå‡"></a>æå‡</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*èŠ‚çœç©ºé—´ç‰ˆæœ¬ï¼š</span></div><div class="line"><span class="comment">ä¸‹é¢è¿™ç§è§£æ³•ç”¨ä¸€ç»´æ•°ç»„æ¥ä»£æ›¿äºŒç»´æ•°ç»„ï¼Œ</span></div><div class="line"><span class="comment">å¯ä»¥æå¤§çš„èŠ‚çœäº†ç©ºé—´ï¼Œç”±äºè¦†ç›–çš„é¡ºåºå…³</span></div><div class="line"><span class="comment">ç³»ï¼Œæˆ‘ä»¬éœ€è¦jä»2åˆ°1ï¼Œè¿™æ ·å¯ä»¥å–åˆ°æ­£ç¡®</span></div><div class="line"><span class="comment">çš„g[j-1]å€¼ï¼Œè€Œéå·²ç»è¢«è¦†ç›–è¿‡çš„å€¼ï¼Œå‚è§ä»£ç å¦‚ä¸‹ï¼š</span></div><div class="line"><span class="comment">*/</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;prices)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (prices.empty()) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> g[<span class="number">3</span>] = &#123;<span class="number">0</span>&#125;;</div><div class="line">        <span class="keyword">int</span> l[<span class="number">3</span>] = &#123;<span class="number">0</span>&#125;;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; prices.size() - <span class="number">1</span>; ++i) &#123;</div><div class="line">            <span class="keyword">int</span> diff = prices[i + <span class="number">1</span>] - prices[i];</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">2</span>; j &gt;= <span class="number">1</span>; --j) &#123;</div><div class="line">                l[j] = max(g[j - <span class="number">1</span>] + max(diff, <span class="number">0</span>), l[j] + diff);</div><div class="line">                g[j] = max(l[j], g[j]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> g[<span class="number">2</span>];</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="è§£æ³•äºŒ"><a href="#è§£æ³•äºŒ" class="headerlink" title="è§£æ³•äºŒ"></a>è§£æ³•äºŒ</h3><p>ä¹Ÿæ˜¯ç”¨DPï¼Œè®¾ç½®å››ä¸ªå˜é‡ï¼Œ<code>buy1ã€buy2ã€sell1ã€sell2</code>åˆ†åˆ«è®°å½•ç¬¬ä¸€æ¬¡è´­ä¹°ï¼Œç¬¬äºŒæ¬¡è´­ä¹°å’Œç¬¬ä¸€æ¬¡å–å‡ºï¼Œç¬¬äºŒæ¬¡å–å‡ºã€‚<br>å› ä¸ºé¢˜ç›®è¦æ±‚åªèƒ½åœ¨è¿™ä¸ªå¾ªåºä¸‹<code>ï¼ˆbuy1 â€”&gt; sell1 -&gt; buy2 -&gt; sell2ï¼‰</code>å®Œæˆäº¤æ˜“ã€‚æ‰€ä»¥éå†ä¸€éæ•°ç»„ï¼Œæ¯ä¸€æ¬¡ä¹°å…¥çš„æ—¶å€™å°½å¯èƒ½èŠ±é’±ä»£ä»·æœ€å°ï¼Œæ¯æ¬¡å–å‡ºæ—¶å°½å¯èƒ½é«˜ä»·å–å‡ºï¼Œä»£ç å¦‚ä¸‹ã€‚</p>
<h4 id="C-1"><a href="#C-1" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; prices)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> buy1 = INT_MIN, buy2 = INT_MIN;</div><div class="line">        <span class="keyword">int</span> sell1 = <span class="number">0</span>, sell2 = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> price: prices) &#123;</div><div class="line">            sell2 = max(sell2, buy2 + price);</div><div class="line">            buy2 = max(buy2, sell1 - price);</div><div class="line">            sell1 = max(sell1, buy1 + price);</div><div class="line">            buy1 = max(buy1, -price);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> sell2;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Swift-1"><a href="#Swift-1" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">maxProfit</span><span class="params">(<span class="number">_</span> prices: [Int])</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">if</span> prices.<span class="built_in">count</span> == <span class="number">0</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">var</span> buy1 = <span class="type">Int</span>.<span class="built_in">min</span>, buy2 = <span class="type">Int</span>.<span class="built_in">min</span></div><div class="line">        <span class="keyword">var</span>  sell1 = <span class="number">0</span>, sell2 = <span class="number">0</span></div><div class="line">        <span class="keyword">for</span> price <span class="keyword">in</span> prices &#123;</div><div class="line">            sell2 = <span class="built_in">max</span>(sell2, buy2 + price)</div><div class="line">            buy2  = <span class="built_in">max</span>(buy2, sell1 - price)</div><div class="line">            sell1 = <span class="built_in">max</span>(sell1, buy1 + price)</div><div class="line">            buy1  = <span class="built_in">max</span>(buy1, -price)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> sell2;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><p><a href="http://blog.csdn.net/fightforyourdream/article/details/14503469" target="_blank" rel="external">http://blog.csdn.net/fightforyourdream/article/details/14503469</a></p>
<h3 id="ç›¸å…³é¢˜ç›®"><a href="#ç›¸å…³é¢˜ç›®" class="headerlink" title="ç›¸å…³é¢˜ç›®"></a>ç›¸å…³é¢˜ç›®</h3><ul>
<li><a href="https://keshiim.github.io/2017/11/24/Leetcode-309-Best-Time-to-Buy-and-Sell-Stock-with-Cooldown/">Best Time to Buy and Sell Stock with Cooldown</a></li>
<li><a href="https://keshiim.github.io/2017/11/24/Leetcode-188-Best-Time-to-Buy-and-Sell-Stock-IV/">Best Time to Buy and Sell Stock IV</a></li>
<li><a href="https://keshiim.github.io/2017/11/24/Leetcode-122-Best-Time-to-Buy-and-Sell-Stock-II/">Best Time to Buy and Sell Stock II</a></li>
<li><a href="https://keshiim.github.io/2017/11/24/Leetcode-121-Best-Time-to-Buy-and-Sell-Stock/">Best Time to Buy and Sell Stock</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iii/description/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Best Time to Buy 
    
    </summary>
    
      <category term="LeetCode" scheme="https://keshiim.github.io/categories/LeetCode/"/>
    
    
      <category term="LeetCode" scheme="https://keshiim.github.io/tags/LeetCode/"/>
    
      <category term="algorithm" scheme="https://keshiim.github.io/tags/algorithm/"/>
    
      <category term="ç®—æ³•" scheme="https://keshiim.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="Dynamic Programming" scheme="https://keshiim.github.io/tags/Dynamic-Programming/"/>
    
      <category term="Hard" scheme="https://keshiim.github.io/tags/Hard/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode-122 Best Time to Buy and Sell Stock II</title>
    <link href="https://keshiim.github.io/2017/11/24/Leetcode-122-Best-Time-to-Buy-and-Sell-Stock-II/"/>
    <id>https://keshiim.github.io/2017/11/24/Leetcode-122-Best-Time-to-Buy-and-Sell-Stock-II/</id>
    <published>2017-11-24T03:32:51.000Z</published>
    <updated>2018-03-20T09:56:53.643Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-ii/description/" target="_blank" rel="external">Best Time to Buy and Sell Stock II ä¹°è‚¡ç¥¨çš„æœ€ä½³æ—¶é—´ä¹‹äºŒ</a></p>
<h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><p>Say you have an array for which the $i^{th}$  element is the price of a given stock on day i.</p>
<p>Design an algorithm to find the maximum profit. You may complete as many transaction as you like(ie, buy one and sell one share of the stock multiple times). However, you may not engage in multiple transactions at the same time(ie, you must sell the stock before you buy again).</p>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><pre><code>input [3, 2, 3, 5, 3, 6]
output 6
ä¸æ˜¯ 6-2=4
è€Œæ˜¯(3-2)+(5-3)+(6-3)=6
</code></pre><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>è¿™é“é¢˜è·Ÿä¹‹å‰<a href="https://keshiim.github.io/2017/11/24/Leetcode-121-Best-Time-to-Buy-and-Sell-Stock/">Best Time to Buy and Sell Stock</a>ç±»ä¼¼ï¼Œè¿™é“é¢˜ç”±äºå¯ä»¥æ— é™æ¬¡æ•°çš„ä¹°å…¥å’Œå–å‡ºï¼Œå¹¶ä¸”è¦æ±‚æ¯æ¬¡ä¹°å…¥ä¹‹å‰ï¼Œå¿…é¡»å…ˆå–æ‰ä¸Šæ¬¡ä¹°å…¥çš„è‚¡ç¥¨ã€‚è¦æƒ³åˆ©æ¶¦æœ€å¤§åŒ–å½“ç„¶æ˜¯ä½ä»·ä¹°å…¥é«˜ä»·æŠ›å‡ºã€‚</p>
<h3 id="è§£æ³•"><a href="#è§£æ³•" class="headerlink" title="è§£æ³•"></a>è§£æ³•</h3><p>è¿™é‡Œæˆ‘ä»¬åªéœ€è¦ä»ç¬¬äºŒå¤©å¼€å§‹ï¼Œå¦‚æœå½“å¤©ä»·æ ¼æ¯”ä¹‹å‰ä»·æ ¼é«˜ï¼Œåˆ™æŠŠæ’å€¼åŠ å…¥åˆ©æ¶¦ä¸­ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥æ˜¨å¤©ä¹°å…¥ï¼Œä»Šå¤©å–å‡ºï¼Œè‹¥æ˜æ—¥ä»·æ ¼æ›´é«˜çš„è¯ï¼Œå¯ä»¥ä»Šæ—¥ä¹°å…¥ï¼Œæ˜æ—¥å–å‡ºã€‚ä¸€æ¬¡ç±»æ¨ï¼Œéå†æ•´ä¸ªæ•°ç»„åå³å¯æ±‚å¾—æœ€å¤§åˆ©æ¶¦ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<h4 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; prices)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> res = <span class="number">0</span>, n = prices.size();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++) &#123;</div><div class="line">            <span class="keyword">if</span> (prices[i] &lt; prices[i + <span class="number">1</span>]) &#123;</div><div class="line">                res += prices[i + <span class="number">1</span>] - prices[i];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> maxprofit = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; prices.length; i++) &#123;</div><div class="line">            <span class="keyword">if</span> (prices[i] &gt; prices[i - <span class="number">1</span>])</div><div class="line">                maxprofit += prices[i] - prices[i - <span class="number">1</span>];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> maxprofit;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Swift"><a href="#Swift" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">maxProfit</span><span class="params">(<span class="number">_</span> prices: [Int])</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">var</span> res = <span class="number">0</span>, i = <span class="number">0</span></div><div class="line">        <span class="keyword">let</span> n = prices.<span class="built_in">count</span></div><div class="line">        <span class="keyword">while</span> i &lt; n - <span class="number">1</span> &#123;</div><div class="line">            <span class="keyword">if</span> prices[i] &lt; prices[i + <span class="number">1</span>] &#123;</div><div class="line">               res += prices[i + <span class="number">1</span>] - prices[i]</div><div class="line">            &#125;</div><div class="line">            i += <span class="number">1</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ç›¸å…³é¢˜ç›®ï¼š"><a href="#ç›¸å…³é¢˜ç›®ï¼š" class="headerlink" title="ç›¸å…³é¢˜ç›®ï¼š"></a>ç›¸å…³é¢˜ç›®ï¼š</h3><ul>
<li><a href="https://keshiim.github.io/2017/11/24/Leetcode-309-Best-Time-to-Buy-and-Sell-Stock-with-Cooldown/">Best Time to Buy and Sell Stock with Cooldown</a></li>
<li><a href="https://keshiim.github.io/2017/11/24/Leetcode-188-Best-Time-to-Buy-and-Sell-Stock-IV/">Best Time to Buy and Sell Stock IV</a></li>
<li><a href="https://keshiim.github.io/2017/11/24/Leetcode-123-Best-Time-to-Buy-and-Sell-Stock-III/">Best Time to Buy and Sell Stock III</a></li>
<li><a href="https://keshiim.github.io/2017/11/24/Leetcode-121-Best-Time-to-Buy-and-Sell-Stock/">Best Time to Buy and Sell Stock</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://leetcode.com/problems/best-time-to-buy-and-sell-stock-ii/description/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Best Time to Buy a
    
    </summary>
    
      <category term="LeetCode" scheme="https://keshiim.github.io/categories/LeetCode/"/>
    
    
      <category term="LeetCode" scheme="https://keshiim.github.io/tags/LeetCode/"/>
    
      <category term="algorithm" scheme="https://keshiim.github.io/tags/algorithm/"/>
    
      <category term="ç®—æ³•" scheme="https://keshiim.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="Array" scheme="https://keshiim.github.io/tags/Array/"/>
    
      <category term="Easy" scheme="https://keshiim.github.io/tags/Easy/"/>
    
  </entry>
  
  <entry>
    <title>Leetcode-121 Best Time to Buy and Sell Stock</title>
    <link href="https://keshiim.github.io/2017/11/24/Leetcode-121-Best-Time-to-Buy-and-Sell-Stock/"/>
    <id>https://keshiim.github.io/2017/11/24/Leetcode-121-Best-Time-to-Buy-and-Sell-Stock/</id>
    <published>2017-11-24T02:49:42.000Z</published>
    <updated>2018-03-20T09:56:53.642Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock/description/" target="_blank" rel="external">Best Time to Buy and Sell Stock æœ€ä½³å€’å–è‚¡ç¥¨</a></p>
<h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><p>Say you have an array for which the $i^{th}$  element is the price of a given stock on day i.</p>
<p>If you were only permitted to complete at most one transaction(ie, buy one and sell one share of the stock), design an algorithm to find the maximum profit.</p>
<h3 id="Example-1"><a href="#Example-1" class="headerlink" title="Example 1"></a>Example 1</h3><pre><code>Input: [7, 1, 5, 3, 6, 4]
Output: 5

max. difference = 6-1 = 5 (not 7-1 = 6, as selling price needs to be larger than buying price)
</code></pre><h3 id="Example-2"><a href="#Example-2" class="headerlink" title="Example 2"></a>Example 2</h3><pre><code>Input: [7, 6, 4, 3, 1]
Output: 0

In this case, no transaction is done, i.e. max profit = 0.
</code></pre><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>å‡å¦‚è¯´ç»™äº†ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸€ä¸ªå…ƒç´ éƒ½å½“å¤©è‚¡ç¥¨äº¤æ˜“çš„ä»·æ ¼ã€‚<br>ç°åœ¨ï¼Œå¦‚æœåªå…è®¸ä½ å®Œæˆè‡³å¤šä¸€æ¬¡äº¤æ˜“(ä¹Ÿå°±æ˜¯ï¼Œä¹°å…¥ä¸€æ¬¡è‚¡ç¥¨ï¼Œå–å‡ºä¸€æ¬¡è‚¡ç¥¨)ï¼Œè®¾è®¡ä¸€ä¸ªå¯ä»¥åˆ©æ¶¦æœ€å¤§åŒ–çš„ç®—æ³•ã€‚</p>
<h3 id="è§£æ³•"><a href="#è§£æ³•" class="headerlink" title="è§£æ³•"></a>è§£æ³•</h3><p>åªéœ€è¦éå†ä¸€éæ•°ç»„ï¼Œç”¨ä¸€ä¸ªå˜é‡è®°å½•éå†è¿‡ç¨‹ä¸­çš„æœ€å°å€¼ï¼Œç„¶åæ¯æ¬¡è®¡ç®—å½“å‰å€¼å’Œè¿™ä¸ªæœ€å°å€¼ä¹‹é—´çš„å·®å€¼æœ€åˆ©æ¶¦ï¼Œç„¶åæ¯æ¬¡é€‰è¾ƒå¤§åˆ©æ¶¦æ¥æ›´æ–°ã€‚å½“éå†å®Œæˆåå½“å‰åˆ©æ¶¦å°±æ˜¯æœ€å¤§åˆ©æ¶¦ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<h3 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; prices)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> res = <span class="number">0</span>, buy = INT_MAX;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> price: prices) &#123;</div><div class="line">            buy = min(buy, price);</div><div class="line">            res = max(res, price - buy);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Swift"><a href="#Swift" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">maxProfit</span><span class="params">(<span class="number">_</span> prices: [Int])</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">var</span> res = <span class="number">0</span>, buy = <span class="type">Int</span>.<span class="built_in">max</span></div><div class="line">        <span class="keyword">for</span> price <span class="keyword">in</span> prices &#123;</div><div class="line">            buy = <span class="built_in">min</span>(buy, price)</div><div class="line">            res = <span class="built_in">max</span>(res, price - buy)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> res = <span class="number">0</span>, buy = Integer.MAX_VALUE;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> price : prices) &#123;</div><div class="line">            buy = Math.min(buy, price);</div><div class="line">            res = Math.max(res, price - buy);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ç›¸å…³é¢˜ç›®"><a href="#ç›¸å…³é¢˜ç›®" class="headerlink" title="ç›¸å…³é¢˜ç›®"></a>ç›¸å…³é¢˜ç›®</h3><ul>
<li><a href="https://keshiim.github.io/2017/11/24/Leetcode-309-Best-Time-to-Buy-and-Sell-Stock-with-Cooldown/">Best Time to Buy and Sell Stock with Cooldown</a></li>
<li><a href="https://keshiim.github.io/2017/11/24/Leetcode-188-Best-Time-to-Buy-and-Sell-Stock-IV/">Best Time to Buy and Sell Stock IV</a></li>
<li><a href="https://keshiim.github.io/2017/11/24/Leetcode-123-Best-Time-to-Buy-and-Sell-Stock-III/">Best Time to Buy and Sell Stock III</a></li>
<li><a href="https://keshiim.github.io/2017/11/24/Leetcode-122-Best-Time-to-Buy-and-Sell-Stock-II/">Best Time to Buy and Sell Stock II</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://leetcode.com/problems/best-time-to-buy-and-sell-stock/description/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Best Time to Buy and 
    
    </summary>
    
      <category term="LeetCode" scheme="https://keshiim.github.io/categories/LeetCode/"/>
    
    
      <category term="LeetCode" scheme="https://keshiim.github.io/tags/LeetCode/"/>
    
      <category term="algorithm" scheme="https://keshiim.github.io/tags/algorithm/"/>
    
      <category term="ç®—æ³•" scheme="https://keshiim.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="Array" scheme="https://keshiim.github.io/tags/Array/"/>
    
      <category term="Easy" scheme="https://keshiim.github.io/tags/Easy/"/>
    
  </entry>
  
  <entry>
    <title>Swiftï¼šç»§æ‰¿</title>
    <link href="https://keshiim.github.io/2017/11/23/swift-inherit/"/>
    <id>https://keshiim.github.io/2017/11/23/swift-inherit/</id>
    <published>2017-11-23T10:12:14.000Z</published>
    <updated>2018-03-20T09:56:53.671Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€ä¸ªç±»å¯ä»¥ä»å¦ä¸€ä¸ªç±»ç»§æ‰¿æ–¹æ³•ã€å±æ€§å’Œå…¶ä»–çš„ç‰¹æ€§ã€‚å½“ä¸€ä¸ªç±»ä»å¦ä¸€ä¸ªç±»ç»§æ‰¿çš„æ—¶å€™ï¼Œç»§æ‰¿çš„ç±»å°±æ˜¯æ‰€è°“çš„å­ç±»ï¼Œè€Œè¿™ä¸ªç±»ç»§æ‰¿çš„ç±»è¢«ç§°ä¸ºçˆ¶ç±»ã€‚åœ¨ Swift ä¸­ï¼Œç»§æ‰¿ä¸å…¶ä»–ç±»å‹ä¸åŒçš„åŸºç¡€åˆ†ç±»è¡Œä¸ºã€‚</p>
<p>åœ¨ Swift ä¸­ç±»å¯ä»¥è°ƒç”¨å’Œè®¿é—®å±äºå®ƒä»¬çˆ¶ç±»çš„æ–¹æ³•ã€å±æ€§å’Œä¸‹æ ‡è„šæœ¬ï¼Œå¹¶ä¸”å¯ä»¥æä¾›å®ƒä»¬è‡ªå·±é‡å†™çš„æ–¹æ³•ï¼Œå±æ€§å’Œä¸‹æ ‡è„šæœ¬æ¥å®šä¹‰æˆ–ä¿®æ”¹å®ƒä»¬çš„è¡Œä¸ºã€‚Swift <em>ä¼šé€šè¿‡æ£€æŸ¥é‡å†™å®šä¹‰éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹åŒ¹é…çš„çˆ¶ç±»å®šä¹‰æ¥ç¡®ä¿ä½ çš„é‡å†™æ˜¯æ­£ç¡®çš„</em>ã€‚</p>
<p><em>ç±»ä¹Ÿå¯ä»¥å‘ç»§æ‰¿çš„å±æ€§æ·»åŠ å±æ€§è§‚å¯Ÿå™¨ï¼Œä»¥ä¾¿åœ¨å±æ€§çš„å€¼æ”¹å˜æ—¶å¾—åˆ°é€šçŸ¥ã€‚å¯ä»¥æ·»åŠ ä»»ä½•å±æ€§ç›‘è§†åˆ°å±æ€§ä¸­ï¼Œä¸ç®¡å®ƒæ˜¯è¢«å®šä¹‰ä¸ºå­˜å‚¨è¿˜æ˜¯è®¡ç®—å±æ€§ã€‚</em></p>
<h3 id="å®šä¹‰ä¸€ä¸ªåŸºç±»"><a href="#å®šä¹‰ä¸€ä¸ªåŸºç±»" class="headerlink" title="å®šä¹‰ä¸€ä¸ªåŸºç±»"></a>å®šä¹‰ä¸€ä¸ªåŸºç±»</h3><p><strong>ä»»ä½•ä¸ä»å¦ä¸€ä¸ªç±»ç»§æ‰¿çš„ç±»</strong>éƒ½æ˜¯æ‰€è°“çš„<strong>åŸºç±»</strong>ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼š<br>Swift ç±»ä¸ä¼šä»ä¸€ä¸ªé€šç”¨åŸºç±»ç»§æ‰¿ã€‚ä½ æ²¡æœ‰æŒ‡å®šç‰¹å®šçˆ¶ç±»çš„ç±»éƒ½ä¼šä»¥åŸºç±»çš„å½¢å¼åˆ›å»ºã€‚</p>
</blockquote>
<p>ä¸‹é¢çš„æ —å­å®šä¹‰äº†ä¸€ä¸ªå«åš <code>Vehicle</code> çš„åŸºç±»ã€‚è¿™ä¸ªåŸºç±»å®šä¹‰äº†ä¸€ä¸ªç§°ä¸º <code>currentSpeed</code> çš„å­˜å‚¨å±æ€§ï¼Œä½¿ç”¨é»˜è®¤å€¼ 0.0 (æ¨æ–­ä¸ºä¸€ä¸ª <code>Double</code> ç±»å‹çš„å±æ€§)ã€‚ <code>currentSpeed</code> å±æ€§çš„å€¼è¢«ç”¨åœ¨ä¸€ä¸ªç§°ä¸º <code>description</code> çš„ <code>String</code> <em>åªè¯»è®¡ç®—å±æ€§</em>æ¥åˆ›å»ºä¸€ä¸ª <code>vehicle</code> çš„æè¿°ã€‚</p>
<p><code>Vehicle</code> åŸºç±»ä¹Ÿå®šä¹‰äº†ä¸€ä¸ªç§°ä¸º <code>makeNoise</code> çš„æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•å®é™…ä¸Šä¸ä¼šä¸ºè¿™ä¸ª <code>Vehicle</code> åŸºç±»çš„å®ä¾‹åšä»»ä½•äº‹ï¼Œä½†æ˜¯ç¨åå®ƒå¯ä»¥è¢« <code>Vehicle</code> çš„å­ç±»è‡ªå®šä¹‰ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vehicle</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> currentSpeed = <span class="number">0.0</span></div><div class="line">    <span class="keyword">var</span> description: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"traveling at <span class="subst">\(currentSpeed)</span> miles per hour"</span></div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">makeNoise</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="comment">// do nothing - an arbitrary vehicle doesn't necessarily make a noise</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½ ä½¿ç”¨åˆå§‹åŒ–è¯­æ³•åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ Vehicle å®ä¾‹ï¼Œå†™ä¸º ç±»å‹å åé¢è·Ÿç€ä¸€ä¸ªç©ºæ‹¬å·ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> someVehicle = <span class="type">Vehicle</span>()</div></pre></td></tr></table></figure>
<p>åœ¨åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ <code>Vehicle</code> å®ä¾‹ä¹‹åï¼Œä½ å¯ä»¥è®¿é—®å®ƒçš„ <code>description</code> å±æ€§æ¥è¾“å‡ºä¸€ä¸ªäººç±»å¯è¯»çš„æ±½è½¦å½“å‰é€Ÿåº¦çš„æè¿°ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">print</span>(<span class="string">"Vehicle: <span class="subst">\(someVehicle.description)</span>"</span>)</div><div class="line"><span class="comment">// Vehicle: traveling at 0.0 miles per hour</span></div></pre></td></tr></table></figure>
<p><code>Vehicle</code> ç±»ä¸ºä»»æ„çš„è½¦è¾†å®šä¹‰äº†å…±åŒçš„ç‰¹å¾ï¼Œä½†æ˜¯å¯¹å®ƒæœ¬èº«æ²¡æœ‰å¤ªå¤§ç”¨å¤„ã€‚ä¸ºäº†è®©å®ƒæ›´æœ‰ç”¨ï¼Œä½ éœ€è¦é‡å®šä¹‰å®ƒæ¥æè¿°æ›´å…·ä½“çš„è½¦è¾†ç§ç±»ã€‚</p>
<h3 id="å­ç±»"><a href="#å­ç±»" class="headerlink" title="å­ç±»"></a>å­ç±»</h3><p><strong>å­ç±»æ˜¯åŸºäºç°æœ‰ç±»åˆ›å»ºæ–°ç±»çš„è¡Œä¸º</strong>ã€‚å­ç±»ä»ç°æœ‰çš„ç±»ç»§æ‰¿äº†ä¸€äº›ç‰¹å¾ï¼Œä½ å¯ä»¥é‡æ–°å®šä¹‰å®ƒä»¬ã€‚ä½ ä¹Ÿå¯ä»¥ä¸ºå­ç±»æ·»åŠ æ–°çš„ç‰¹å¾ã€‚</p>
<p>ä¸ºäº†è¡¨æ˜å­ç±»æœ‰çˆ¶ç±»ï¼Œè¦æŠŠå­ç±»å†™åœ¨çˆ¶ç±»çš„å‰é¢ï¼Œç”¨å†’å·åˆ†éš”ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeSubclass</span>: <span class="title">SomeSuperclass</span> </span>&#123;</div><div class="line">    <span class="comment">// subclass definition goes here</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ä¸€ä¸ªç§°ä¸º <code>Bicycle</code> çš„å­ç±»ï¼Œç»§æ‰¿è‡ª <code>Vehicle</code> ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bicycle</span>: <span class="title">Vehicle</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> hasBasket = <span class="literal">false</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ–°çš„ <code>Bicycle</code> ç±»è‡ªåŠ¨è·å¾—äº† <code>Vehicle</code> çš„æ‰€æœ‰ç‰¹å¾ï¼Œä¾‹å¦‚å®ƒçš„ <code>currentSpeed</code> å’Œ <code>description</code> å±æ€§ä»¥åŠ <code>makeNoise()</code> æ–¹æ³•ã€‚</p>
<p>é™¤äº†ç»§æ‰¿çš„ç‰¹å¾ï¼Œ <code>Bicycle</code> ç±»å®šä¹‰äº†ä¸€ä¸ªæ–°çš„å­˜å‚¨å±æ€§ <code>hasBasket</code> ï¼Œå¹¶ä¸”é»˜è®¤å€¼ä¸º <code>false</code> (å±æ€§çš„ç±»å‹è¢«æ¨æ–­ä¸º <code>Bool</code> )ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä»»ä½•ä½ æ–°å»ºçš„ <code>Bicycle</code> å®ä¾‹éƒ½éƒ½ä¸ä¼šæœ‰ç¯®å­ã€‚åœ¨ <code>Bicycle</code> ç±»çš„å®ä¾‹åˆ›å»ºä¹‹åï¼Œä½ å¯ä»¥å°†å®ƒçš„ <code>hasBasket</code> å±æ€§è®¾ç½®ä¸º <code>true</code> ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> bicycle = <span class="type">Bicycle</span>()</div><div class="line">bicycle.hasBasket = <span class="literal">true</span></div></pre></td></tr></table></figure>
<p>ä½ ä¹Ÿå¯ä»¥åœ¨ <code>Bicycle</code> ç±»å®ä¾‹ä¸­ä¿®æ”¹ç»§æ‰¿è€Œæ¥çš„ <code>currentSpeed</code> å±æ€§ï¼Œæˆ–æ˜¯æŸ¥è¯¢å®ä¾‹ä¸­ç»§æ‰¿çš„ <code>description</code> å±æ€§ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">bicycle.currentSpeed = <span class="number">15.0</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"Bicycle: <span class="subst">\(bicycle.description)</span>"</span>)</div><div class="line"><span class="comment">// Bicycle: traveling at 15.0 miles per hour</span></div></pre></td></tr></table></figure>
<p><strong>å­ç±»æœ¬èº«ä¹Ÿå¯ä»¥è¢«ç»§æ‰¿</strong>ã€‚ä¸‹ä¸ªæ —å­åˆ›å»ºäº†ä¸€ä¸ª <code>Bicycle</code> çš„å­ç±»ï¼Œç§°ä¸ºâ€tandemâ€çš„ä¸¤åº§è‡ªè¡Œè½¦ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tandem</span>: <span class="title">Bicycle</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> currentNumberOfPassengers = <span class="number">0</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>Tandem</code> ç»§æ‰¿äº† <code>Bicycle</code> ä¸­æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œä¹Ÿç»§æ‰¿äº† <code>Vehicle</code> çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚ <code>Tandem</code> å­ç±»ä¹Ÿæ·»åŠ äº†ä¸€ä¸ªæ–°çš„ç§°ä¸º <code>currentNumberOfPassengers</code> çš„å­˜å‚¨å±æ€§ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªé»˜è®¤å€¼ 0 ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> tandem = <span class="type">Tandem</span>()</div><div class="line">tandem.hasBasket = <span class="literal">true</span></div><div class="line">tandem.currentNumberOfPassengers = <span class="number">2</span></div><div class="line">tandem.currentSpeed = <span class="number">22.0</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"Tandem: <span class="subst">\(tandem.description)</span>"</span>)</div><div class="line"><span class="comment">//Print: Tandem: traveling at 22.0 mils per hour</span></div></pre></td></tr></table></figure>
<h3 id="é‡å†™"><a href="#é‡å†™" class="headerlink" title="é‡å†™"></a>é‡å†™</h3><p>å­ç±»å¯ä»¥æä¾›å®ƒè‡ªå·±çš„å®ä¾‹æ–¹æ³•ã€ç±»å‹æ–¹æ³•ã€å®ä¾‹å±æ€§ï¼Œç±»å‹å±æ€§æˆ–ä¸‹æ ‡è„šæœ¬çš„è‡ªå®šä¹‰å®ç°ï¼Œå¦åˆ™å®ƒå°†ä¼šä»çˆ¶ç±»ç»§æ‰¿ã€‚è¿™å°±æ‰€è°“çš„<strong>é‡å†™</strong>ã€‚</p>
<p>è¦é‡å†™è€Œä¸æ˜¯ç»§æ‰¿ä¸€ä¸ªç‰¹å¾ï¼Œä½ éœ€è¦åœ¨ä½ çš„é‡å†™å®šä¹‰å‰é¢åŠ ä¸Š <code>override</code> å…³é”®å­—ã€‚è¿™æ ·åšè¯´æ˜ä½ æ‰“ç®—æä¾›ä¸€ä¸ªé‡å†™è€Œä¸æ˜¯æ„å¤–æä¾›äº†ä¸€ä¸ªç›¸åŒå®šä¹‰ã€‚æ„å¤–çš„é‡å†™å¯èƒ½å¯¼è‡´æ„æƒ³ä¸åˆ°çš„è¡Œä¸ºï¼Œå¹¶ä¸”<em>ä»»ä½•æ²¡æœ‰ä½¿ç”¨</em>  <code>override</code> å…³é”®å­—çš„é‡å†™éƒ½ä¼šåœ¨ç¼–è¯‘æ—¶è¢«è¯Šæ–­ä¸ºé”™è¯¯ã€‚</p>
<p><code>override</code> å…³é”®å­—ä¼šæ‰§è¡Œ Swift ç¼–è¯‘å™¨æ£€æŸ¥ä½ é‡å†™çš„ç±»çš„çˆ¶ç±»(æˆ–è€…çˆ¶ç±»çš„çˆ¶ç±»)æ˜¯å¦æœ‰ä¸ä¹‹åŒ¹é…çš„å£°æ˜æ¥ä¾›ä½ é‡å†™ã€‚è¿™ä¸ªæ£€æŸ¥ç¡®ä¿ä½ é‡å†™çš„å®šä¹‰æ˜¯æ­£ç¡®çš„ã€‚</p>
<h4 id="è®¿é—®çˆ¶ç±»çš„æ–¹æ³•ã€å±æ€§å’Œä¸‹æ ‡è„šæœ¬"><a href="#è®¿é—®çˆ¶ç±»çš„æ–¹æ³•ã€å±æ€§å’Œä¸‹æ ‡è„šæœ¬" class="headerlink" title="è®¿é—®çˆ¶ç±»çš„æ–¹æ³•ã€å±æ€§å’Œä¸‹æ ‡è„šæœ¬"></a>è®¿é—®çˆ¶ç±»çš„æ–¹æ³•ã€å±æ€§å’Œä¸‹æ ‡è„šæœ¬</h4><p>å½“ä½ ä¸ºå­ç±»æä¾›äº†ä¸€ä¸ªæ–¹æ³•ã€å±æ€§æˆ–è€…ä¸‹æ ‡è„šæœ¬æ—¶ï¼Œæœ‰æ—¶<strong>ä½¿ç”¨ç°æœ‰çš„çˆ¶ç±»å®ç°ä½œä¸ºä½ é‡å†™çš„ä¸€éƒ¨åˆ†æ˜¯å¾ˆæœ‰ç”¨çš„</strong>ã€‚æ¯”å¦‚è¯´ï¼Œä½ å¯ä»¥é‡æ–°å®šä¹‰ç°æœ‰å®ç°çš„è¡Œä¸ºï¼Œæˆ–è€…åœ¨ç°æœ‰ç»§æ‰¿çš„å˜é‡ä¸­å­˜å‚¨ä¸€ä¸ªä¿®æ”¹è¿‡çš„å€¼ã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>super</code> å‰ç¼€è®¿é—®çˆ¶ç±»çš„æ–¹æ³•ã€å±æ€§æˆ–ä¸‹æ ‡è„šæœ¬ï¼Œè¿™æ˜¯åˆé€‚çš„ï¼š</p>
<ul>
<li>ä¸€ä¸ªå‘½åä¸º <code>someMethod()</code> çš„é‡å†™æ–¹æ³•å¯ä»¥é€šè¿‡ <code>super.someMethod()</code> åœ¨é‡å†™æ–¹æ³•çš„å®ç°ä¸­è°ƒç”¨çˆ¶ç±»ç‰ˆæœ¬çš„ <code>someMethod()</code> æ–¹æ³•ï¼›</li>
<li>ä¸€ä¸ªå‘½åä¸º <code>someProperty</code> çš„é‡å†™å±æ€§å¯ä»¥é€šè¿‡ <code>super.someProperty</code> åœ¨é‡å†™çš„ <code>getter</code> æˆ– <code>setter</code> å®ç°ä¸­è®¿é—®çˆ¶ç±»ç‰ˆæœ¬çš„ <code>someProperty</code> å±æ€§ï¼›</li>
<li>ä¸€ä¸ªå‘½åä¸º <code>someIndex</code> çš„é‡å†™ä¸‹æ ‡è„šæœ¬å¯ä»¥ä½¿ç”¨ <code>super[someIndex]</code> åœ¨é‡å†™çš„ä¸‹æ ‡è„šæœ¬å®ç°ä¸­è®¿é—®çˆ¶ç±»ç‰ˆæœ¬ä¸­ç›¸åŒçš„ä¸‹æ ‡è„šæœ¬ã€‚</li>
</ul>
<h4 id="é‡å†™æ–¹æ³•"><a href="#é‡å†™æ–¹æ³•" class="headerlink" title="é‡å†™æ–¹æ³•"></a>é‡å†™æ–¹æ³•</h4><p>ä½ å¯ä»¥åœ¨ä½ çš„å­ç±»ä¸­é‡å†™ä¸€ä¸ªç»§æ‰¿çš„å®ä¾‹æˆ–ç±»å‹æ–¹æ³•æ¥æä¾›å®šåˆ¶çš„æˆ–æ›¿ä»£çš„æ–¹æ³•å®ç°ã€‚</p>
<p>ä¸‹é¢çš„æ —å­å®šä¹‰äº†ä¸€ä¸ªæ–°çš„ <code>Vehicle</code> å­ç±»ï¼Œç§°ä¸º <code>Train</code> ï¼Œå®ƒé‡å†™äº† <code>Train</code> ç»§æ‰¿è‡ª <code>Vehicle</code> çš„ <code>makeNoise()</code> æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Train</span>: <span class="title">Vehicle</span> </span>&#123;</div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">makeNoise</span><span class="params">()</span></span> &#123;</div><div class="line">         <span class="built_in">print</span>(<span class="string">"Choo Choo"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœä½ åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ <code>Train</code> å®ä¾‹å¹¶ä¸”è°ƒç”¨å®ƒçš„ <code>makeNoise()</code> æ–¹æ³•ï¼Œä½ å¯ä»¥çœ‹åˆ° <code>Train</code> å­ç±»ç‰ˆæœ¬çš„æ–¹æ³•è¢«è°ƒç”¨äº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> train = <span class="type">Train</span>()</div><div class="line">train.makeNoise()</div><div class="line"><span class="comment">// prints "Choo Choo"</span></div></pre></td></tr></table></figure>
<h4 id="é‡å†™å±æ€§"><a href="#é‡å†™å±æ€§" class="headerlink" title="é‡å†™å±æ€§"></a>é‡å†™å±æ€§</h4><p>ä½ å¯ä»¥é‡å†™ä¸€ä¸ªç»§æ‰¿çš„å®ä¾‹æˆ–ç±»å‹å±æ€§æ¥ä¸ºä½ è‡ªå·±çš„å±æ€§æä¾›ä½ è‡ªå·±è‡ªå®šä¹‰çš„ <code>getter</code> å’Œ <code>setter</code> ï¼Œæˆ–è€…<strong>æ·»åŠ å±æ€§è§‚å¯Ÿå™¨</strong>ç¡®ä¿å½“åº•å±‚å±æ€§å€¼æ”¹å˜æ—¶æ¥ç›‘å¬é‡å†™çš„å±æ€§ã€‚</p>
<h5 id="é‡å†™å±æ€§çš„GETTERå’ŒSETTER"><a href="#é‡å†™å±æ€§çš„GETTERå’ŒSETTER" class="headerlink" title="é‡å†™å±æ€§çš„GETTERå’ŒSETTER"></a>é‡å†™å±æ€§çš„GETTERå’ŒSETTER</h5><p>ä½ å¯ä»¥æä¾›<strong>ä¸€ä¸ªè‡ªå®šä¹‰çš„</strong> <code>Getter</code>(å’Œ<code>Setter</code>ï¼Œå¦‚æœåˆé€‚çš„è¯)<strong>æ¥é‡å†™ä»»æ„ç»§æ‰¿çš„å±æ€§</strong>ï¼Œæ— è®ºåœ¨æœ€å¼€å§‹ç»§æ‰¿çš„å±æ€§å®ç°ä¸ºå‚¨å±æ€§è¿˜æ˜¯è®¡ç®—å±æ€§ã€‚<strong>ç»§æ‰¿çš„å±æ€§æ˜¯å­˜å‚¨è¿˜æ˜¯è®¡ç®—å±æ€§ä¸å¯¹å­ç±»é€æ˜</strong>â€”â€”å®ƒä»…ä»…çŸ¥é“ç»§æ‰¿çš„å±æ€§æœ‰ä¸ªç‰¹å®šåå­—å’Œç±»å‹ã€‚ä½ å¿…é¡»å£°æ˜ä½ é‡å†™çš„å±æ€§åå­—å’Œç±»å‹ï¼Œä»¥ç¡®ä¿ç¼–è¯‘å™¨å¯ä»¥æ£€æŸ¥ä½ çš„é‡å†™æ˜¯å¦åŒ¹é…äº†çˆ¶ç±»ä¸­æœ‰ç›¸åŒåå­—å’Œç±»å‹çš„å±æ€§ã€‚</p>
<p><em>ä½ å¯ä»¥é€šè¿‡åœ¨ä½ çš„å­ç±»é‡å†™é‡Œä¸ºç»§æ‰¿è€Œæ¥çš„åªè¯»å±æ€§æ·»åŠ Getterå’ŒSetteræ¥æŠŠå®ƒç”¨ä½œå¯è¯»å†™å±æ€§ã€‚æ€»ä¹‹ï¼Œä½ ä¸èƒ½æŠŠä¸€ä¸ªç»§æ‰¿è€Œæ¥çš„å¯è¯»å†™å±æ€§è¡¨ç¤ºä¸ºåªè¯»å±æ€§ã€‚</em></p>
<blockquote>
<p>æ³¨æ„ï¼š<br>å¦‚æœä½ æä¾›äº†ä¸€ä¸ª<code>setter</code>ä½œä¸ºå±æ€§é‡å†™çš„ä¸€éƒ¨åˆ†ï¼Œ<em>ä½ ä¹Ÿå°±å¿…é¡»ä¸ºé‡å†™æä¾›ä¸€ä¸ª</em> <code>getter</code>ã€‚å¦‚æœä½ ä¸æƒ³åœ¨é‡å†™<code>getter</code>æ—¶ä¿®æ”¹ç»§æ‰¿å±æ€§çš„å€¼ï¼Œé‚£ä¹ˆä½ å¯ä»¥ç®€å•é€šè¿‡ä»<code>getter</code>è¿”å› <code>super.someProperty</code> æ¥ä¼ é€’ç»§æ‰¿çš„å€¼ï¼Œ <code>someProperty</code> å°±æ˜¯ä½ é‡å†™çš„é‚£ä¸ªå±æ€§çš„åå­—ã€‚</p>
</blockquote>
<p>ä¸‹é¢çš„æ —å­å®šä¹‰äº†ä¸€ä¸ªå«åš <code>Car</code> çš„æ–°ç±»ï¼Œå®ƒæ˜¯ <code>Vehicle</code> çš„å­ç±»ã€‚ <code>Car</code> ç±»å¼•å…¥äº†ä¸€ä¸ªæ–°çš„å­˜å‚¨å±æ€§<code>gear</code>ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªé»˜è®¤çš„æ•´æ•°å€¼ 1 ã€‚ <code>Car</code> ç±»ä¹Ÿé‡å†™äº†ç»§æ‰¿è‡ª <code>Vehicle</code> çš„ <code>description</code> å±æ€§ï¼Œæ¥æä¾›è‡ªå®šä¹‰çš„æè¿°ï¼Œä»‹ç»å½“å‰çš„æ¡£ä½ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span>: <span class="title">Vehicle</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> gear = <span class="number">1</span></div><div class="line">    <span class="keyword">override</span> <span class="keyword">var</span> description: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.description + <span class="string">" in gear <span class="subst">\(gear)</span>"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>description</code> å±æ€§çš„é‡å†™ä»¥è°ƒç”¨ <code>super.description</code> å¼€å§‹ï¼Œå®ƒè¿”å›äº† <code>Vehicle</code> ç±»çš„ <code>description</code> å±æ€§ã€‚ <code>Car</code> ç±»çš„ <code>description</code> éšåå°±æ·»åŠ äº†ä¸€äº›é¢å¤–çš„æ–‡æœ¬åˆ°æè¿°çš„æœ«å°¾ä»¥æä¾›å…³äºå½“å‰æ¡£ä½çš„ä¿¡æ¯ã€‚</p>
<p>å¦‚æœä½ åˆ›å»ºä¸€ä¸ª <code>Car</code> ç±»çš„å®ä¾‹å¹¶ä¸”è®¾ç½®å®ƒçš„ <code>gear</code> å’Œ <code>currentSpeed</code> å±æ€§ï¼Œä½ å°±å¯ä»¥çœ‹åˆ°å®ƒçš„ <code>description</code> å±æ€§åœ¨ <code>Car</code> ç±»çš„å®šä¹‰é‡Œè¿”å›äº†å®šåˆ¶çš„æè¿°ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> car = <span class="type">Car</span>()</div><div class="line">car.currentSpeed = <span class="number">25.0</span></div><div class="line">car.gear = <span class="number">3</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"Car: <span class="subst">\(car.description)</span>"</span>)</div><div class="line"><span class="comment">// Car: traveling at 25.0 miles per hour in gear 3</span></div></pre></td></tr></table></figure>
<h4 id="é‡å†™å±æ€§è§‚å¯Ÿå™¨"><a href="#é‡å†™å±æ€§è§‚å¯Ÿå™¨" class="headerlink" title="é‡å†™å±æ€§è§‚å¯Ÿå™¨"></a>é‡å†™å±æ€§è§‚å¯Ÿå™¨</h4><p>ä½ å¯ä»¥ä½¿ç”¨å±æ€§é‡å†™æ¥ä¸ºç»§æ‰¿çš„å±æ€§æ·»åŠ å±æ€§è§‚å¯Ÿå™¨ã€‚è¿™å°±å¯ä»¥è®©ä½ åœ¨ç»§æ‰¿å±æ€§çš„å€¼æ”¹å˜æ—¶å¾—åˆ°é€šçŸ¥ï¼Œæ— è®ºè¿™ä¸ªå±æ€§æœ€åˆå¦‚ä½•å®ç°ã€‚</p>
<blockquote>
<p>æ³¨æ„<br>ä½ ä¸èƒ½ç»™ç»§æ‰¿è€Œæ¥çš„<strong>å¸¸é‡å­˜å‚¨å±æ€§æˆ–è€…åªè¯»çš„è®¡ç®—å±æ€§æ·»åŠ å±æ€§è§‚å¯Ÿå™¨</strong>ã€‚è¿™äº›å±æ€§çš„å€¼ä¸èƒ½è¢«è®¾ç½®ï¼Œæ‰€ä»¥æä¾› <code>willSet</code> æˆ– <code>didSet</code> å®ç°ä½œä¸ºé‡å†™çš„ä¸€éƒ¨åˆ†ä¹Ÿæ˜¯ä¸åˆé€‚çš„ã€‚</p>
<p>ä¹Ÿè¦æ³¨æ„ä½ <strong>ä¸èƒ½ä¸ºåŒä¸€ä¸ªå±æ€§åŒæ—¶æä¾›é‡å†™çš„<code>setter</code>å’Œé‡å†™çš„å±æ€§è§‚å¯Ÿå™¨</strong>ã€‚å¦‚æœä½ æƒ³è¦ç›‘å¬å±æ€§å€¼çš„æ”¹å˜ï¼Œå¹¶ä¸”ä½ å·²ç»ä¸ºé‚£ä¸ªå±æ€§æä¾›äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„<code>setter</code>ï¼Œé‚£ä¹ˆä½ ä»è‡ªå®šä¹‰çš„<code>setter</code>é‡Œå°±å¯ä»¥ç›‘å¬ä»»æ„å€¼çš„æ”¹å˜ã€‚</p>
</blockquote>
<p>ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ä¸€ä¸ªå«åš <code>AutomaticCar</code> çš„æ–°ç±»ï¼Œå®ƒæ˜¯ <code>Car</code> çš„å­ç±»ã€‚ <code>AutomaticCar</code> ç±»ä»£è¡¨ä¸€è¾†è½¦æœ‰ä¸€ä¸ªè‡ªåŠ¨çš„å˜é€Ÿç®±ï¼Œå¯ä»¥<em>æ ¹æ®å½“å‰çš„é€Ÿåº¦è‡ªåŠ¨åœ°é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„æ¡£ä½</em>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">AutomaticCar</span>: <span class="title">Car</span> </span>&#123;</div><div class="line">    <span class="keyword">override</span> <span class="keyword">var</span> currentSpeed: <span class="type">Double</span> &#123;</div><div class="line">        <span class="keyword">didSet</span> &#123;</div><div class="line">            <span class="keyword">self</span>.gear = <span class="type">Int</span>(currentSpeed / <span class="number">10.0</span>) + <span class="number">1</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ— è®ºä½ åœ¨ä»€ä¹ˆæ—¶å€™è®¾ç½®äº† <code>AutomaticCar</code> å®ä¾‹çš„ <code>currentSpeed</code> å±æ€§ï¼Œå±æ€§çš„ <code>didSet</code> è§‚å¯Ÿå™¨éƒ½ä¼šè®¾ç½®å®ä¾‹çš„ <code>gear</code> å±æ€§ä¸ºæ–°é€Ÿåº¦è®¾ç½®ä¸€ä¸ªåˆé€‚çš„æ¡£ä½ã€‚å…·ä½“åœ°è¯´ï¼Œå±æ€§è§‚å¯Ÿå™¨é€‰æ‹©çš„æ¡£ä½å°±æ˜¯æ–°çš„ <code>currentSpeed</code> å€¼é™¤ä»¥ 10 ï¼Œå››èˆäº”å…¥åˆ°æœ€è¿‘æ•´æ•°ï¼ŒåŠ  1 ã€‚é€Ÿåº¦æ˜¯ 35.0 å°±å¯¹åº” 4 ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> automatic = <span class="type">AutomaticCar</span>()</div><div class="line">automatic.currentSpeed = <span class="number">35.0</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"AutomaticCar: <span class="subst">\(automatic.description)</span>"</span>)</div><div class="line"><span class="comment">// AutomaticCar: traveling at 35.0 miles per hour in gear 4</span></div></pre></td></tr></table></figure>
<h3 id="é˜»æ­¢é‡å†™"><a href="#é˜»æ­¢é‡å†™" class="headerlink" title="é˜»æ­¢é‡å†™"></a>é˜»æ­¢é‡å†™</h3><p>ä½ å¯ä»¥é€šè¿‡<strong>æ ‡è®°ä¸ºç»ˆç‚¹æ¥é˜»æ­¢ä¸€ä¸ªæ–¹æ³•ã€å±æ€§æˆ–è€…ä¸‹æ ‡è„šæœ¬è¢«é‡å†™</strong>ã€‚é€šè¿‡åœ¨æ–¹æ³•ã€å±æ€§æˆ–è€…ä¸‹æ ‡è„šæœ¬çš„å…³é”®å­—å‰å†™ <code>final</code> ä¿®é¥°ç¬¦<code>(æ¯”å¦‚ final var ï¼Œ final func ï¼Œ final class func ï¼Œ fianl subscript )</code>ã€‚</p>
<p>ä»»ä½•åœ¨å­ç±»é‡Œé‡å†™<em>ç»ˆç‚¹æ–¹æ³•ã€å±æ€§æˆ–ä¸‹æ ‡è„šæœ¬</em>çš„å°è¯•éƒ½ä¼šè¢«æŠ¥å‘Šä¸ºç¼–è¯‘æ—¶é”™è¯¯ã€‚ä½ åœ¨æ‰©å±•ä¸­æ·»åŠ åˆ°ç±»çš„æ–¹æ³•ã€å±æ€§æˆ–ä¸‹æ ‡è„šæœ¬ä¹Ÿ<strong>å¯ä»¥åœ¨æ‰©å±•çš„å®šä¹‰é‡Œè¢«æ ‡è®°ä¸ºç»ˆç‚¹</strong>ã€‚</p>
<p><strong>ä½ å¯ä»¥é€šè¿‡åœ¨ç±»å®šä¹‰ä¸­</strong>åœ¨ <code>class</code> å…³é”®å­—å‰é¢å†™ <code>final</code> ä¿®é¥°ç¬¦( <code>final class</code> )æ ‡è®°<strong>ä¸€æ•´ä¸ªç±»ä¸ºç»ˆç‚¹</strong>ã€‚ä»»ä½•æƒ³è¦ä»ç»ˆç‚¹ç±»åˆ›å»ºå­ç±»çš„è¡Œä¸ºéƒ½ä¼šè¢«æŠ¥å‘Šä¸€ä¸ªç¼–è¯‘æ—¶é”™è¯¯ã€‚</p>
<blockquote>
<p>æ‘˜è‡ªï¼š<a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/index.html#//apple_ref/doc/uid/TP40014097-CH3-ID0" target="_blank" rel="external">swift å®˜ç½‘</a><br>æ‰€æœ‰ä»£ç åœ¨Xcode9 Swift4 ç¯å¢ƒç¼–è¯‘æ²¡é—®é¢˜ï¼Œä»£ç <a href="https://github.com/keshiim/LearnSwift4" target="_blank" rel="external">æˆ³è¿™é‡Œ https://github.com/keshiim/LearnSwift4</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸€ä¸ªç±»å¯ä»¥ä»å¦ä¸€ä¸ªç±»ç»§æ‰¿æ–¹æ³•ã€å±æ€§å’Œå…¶ä»–çš„ç‰¹æ€§ã€‚å½“ä¸€ä¸ªç±»ä»å¦ä¸€ä¸ªç±»ç»§æ‰¿çš„æ—¶å€™ï¼Œç»§æ‰¿çš„ç±»å°±æ˜¯æ‰€è°“çš„å­ç±»ï¼Œè€Œè¿™ä¸ªç±»ç»§æ‰¿çš„ç±»è¢«ç§°ä¸ºçˆ¶ç±»ã€‚åœ¨ Swift ä¸­ï¼Œç»§æ‰¿ä¸å…¶ä»–ç±»å‹ä¸åŒçš„åŸºç¡€åˆ†ç±»è¡Œä¸ºã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ Swift ä¸­ç±»å¯ä»¥è°ƒç”¨å’Œè®¿é—®å±äºå®ƒä»¬çˆ¶ç±»çš„æ–¹æ³•ã€å±æ€§å’Œä¸‹æ ‡è„šæœ¬ï¼Œå¹¶ä¸”
    
    </summary>
    
      <category term="å­¦ä¹ " scheme="https://keshiim.github.io/categories/%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="Swift" scheme="https://keshiim.github.io/categories/%E5%AD%A6%E4%B9%A0/Swift/"/>
    
    
      <category term="Swift" scheme="https://keshiim.github.io/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>Swiftï¼šä¸‹æ ‡</title>
    <link href="https://keshiim.github.io/2017/11/23/swift-subscript/"/>
    <id>https://keshiim.github.io/2017/11/23/swift-subscript/</id>
    <published>2017-11-23T09:01:43.000Z</published>
    <updated>2018-03-20T09:56:53.672Z</updated>
    
    <content type="html"><![CDATA[<p><em>ç±»ã€ç»“æ„ä½“</em>å’Œ<em>æšä¸¾</em>å¯ä»¥å®šä¹‰ä¸‹æ ‡ï¼Œå®ƒå¯ä»¥ä½œä¸ºè®¿é—®é›†åˆã€åˆ—è¡¨æˆ–åºåˆ—æˆå‘˜å…ƒç´ çš„å¿«æ·æ–¹å¼ã€‚ä½ å¯ä½¿ç”¨ä¸‹æ ‡ï¼Œé€šè¿‡<strong>ç´¢å¼•å€¼</strong>æ¥<em>è®¾ç½®</em>æˆ–<em>æ£€ç´¢å€¼</em>è€Œä¸éœ€è¦ä¸ºè®¾ç½®å’Œæ£€ç´¢åˆ†åˆ«ä½¿ç”¨å®ä¾‹æ–¹æ³•ã€‚æ¯”å¦‚è¯´ï¼Œç”¨ <code>someArray[index]</code> æ¥è®¿é—® <code>Array</code> å®ä¾‹ä¸­çš„å…ƒç´ ä»¥åŠç”¨ <code>someDictionary[key]</code> è®¿é—® <code>Dictionary</code> å®ä¾‹ä¸­çš„å…ƒç´ ã€‚</p>
<p>ä½ å¯ä»¥ä¸ºä¸€ä¸ªç±»å‹<strong>å®šä¹‰å¤šä¸ªä¸‹æ ‡</strong>ï¼Œå¹¶ä¸”ä¸‹æ ‡ä¼šåŸºäºä¼ å…¥çš„ç´¢å¼•å€¼çš„ç±»å‹é€‰æ‹©åˆé€‚çš„ä¸‹æ ‡<strong>é‡è½½ä½¿ç”¨</strong>ã€‚ä¸‹æ ‡<em>æ²¡æœ‰é™åˆ¶å•ä¸ªç»´åº¦</em>ï¼Œä½ å¯ä»¥ä½¿ç”¨å¤šä¸ªè¾“å…¥å½¢å‚æ¥å®šä¹‰ä¸‹æ ‡ä»¥æ»¡è¶³è‡ªå®šä¹‰ç±»å‹çš„éœ€æ±‚ã€‚</p>
<h3 id="ä¸‹æ ‡çš„è¯­æ³•"><a href="#ä¸‹æ ‡çš„è¯­æ³•" class="headerlink" title="ä¸‹æ ‡çš„è¯­æ³•"></a>ä¸‹æ ‡çš„è¯­æ³•</h3><p>ä¸‹è¡¨è„šæœ¬å…è®¸ä½ é€šè¿‡åœ¨å®ä¾‹ååé¢çš„æ–¹æ‹¬å·å†…<em>å†™ä¸€ä¸ªæˆ–å¤šä¸ªå€¼</em>å¯¹è¯¥ç±»çš„å®ä¾‹è¿›è¡ŒæŸ¥è¯¢ã€‚å®ƒçš„è¯­æ³•ç±»ä¼¼äº<em>å®ä¾‹æ–¹æ³•å’Œå’Œè®¡ç®—å±æ€§</em>ã€‚ä½¿ç”¨å…³é”®å­— <code>subscript</code> æ¥å®šä¹‰ä¸‹æ ‡ï¼Œå¹¶ä¸”æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªè¾“å…¥å½¢å¼å‚æ•°å’Œè¿”å›ç±»å‹ï¼Œä¸å®ä¾‹æ–¹æ³•ä¸€æ ·ã€‚ä¸å®ä¾‹æ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œä¸‹æ ‡å¯ä»¥æ˜¯è¯»å†™ä¹Ÿå¯ä»¥æ˜¯åªè¯»çš„ã€‚è¿™ä¸ªè¡Œä¸ºé€šè¿‡ä¸è®¡ç®—å±æ€§ä¸­ç›¸åŒçš„ <code>getter</code> å’Œ <code>setter</code> ä¼ è¾¾ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</div><div class="line">    <span class="keyword">get</span> &#123;</div><div class="line">        <span class="comment">// return an appropriate subscript value here</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">set</span>(newValue) &#123;</div><div class="line">        <span class="comment">// perform a suitable setting action here</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>newValue</code> çš„ç±»å‹å’Œä¸‹æ ‡çš„è¿”å›å€¼ä¸€æ ·ã€‚ä¸è®¡ç®—å±æ€§ä¸€æ ·ï¼Œä½ å¯ä»¥é€‰æ‹©ä¸å»æŒ‡å®š <code>setter</code> çš„( <code>newValue</code> )å½¢å¼å‚æ•°ã€‚ <code>setter</code> é»˜è®¤æä¾›å½¢å¼å‚æ•° <code>newValue</code> ï¼Œå¦‚æœä½ è‡ªå·±æ²¡æœ‰æä¾›çš„è¯ã€‚</p>
<p><em>ä¸åªè¯»è®¡ç®—å±æ€§ä¸€æ ·ï¼Œä½ å¯ä»¥ç»™åªè¯»ä¸‹æ ‡çœç•¥ <code>get</code> å…³é”®å­—ï¼š</em></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</div><div class="line">    <span class="comment">// return an appropriate subscript value here</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªåªè¯»ä¸‹æ ‡å®ç°çš„æ —å­ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ª <code>TimeTable</code> ç»“æ„ä½“æ¥è¡¨ç¤ºæ•´æ•°çš„nå€è¡¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TimesTable</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> multiplier: <span class="type">Int</span></div><div class="line">    <span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> multiplier * index</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> threeTimesTable = <span class="type">TimesTable</span>(multiplier: <span class="number">3</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"six times three is <span class="subst">\(threeTimesTable[<span class="number">6</span>])</span>"</span>)</div><div class="line"><span class="comment">// prints "six times three is 18"</span></div></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªæ —å­ä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ª <code>TimeTable</code> çš„æ–°å®ä¾‹æ¥è¡¨ç¤ºä¸‰å€è¡¨ã€‚å®ƒè¡¨ç¤ºé€šè¿‡ç»™ç»“æ„ä½“çš„ <code>initializer</code> è½¬å…¥å€¼ 3 æ¥ä½œä¸ºç”¨äºå®ä¾‹çš„ <code>multiplier</code> å½¢å¼å‚æ•°ã€‚</p>
<blockquote>
<p>nå€è¡¨æ˜¯åŸºäºå›ºå®šçš„æ•°å­¦å…¬å¼ã€‚å¹¶ä¸é€‚åˆå¯¹ <code>threeTimesTable[someIndex]</code> è¿›è¡Œèµ‹å€¼æ“ä½œï¼Œæ‰€ä»¥ <code>TimesTable</code> çš„ä¸‹æ ‡å®šä¹‰ä¸ºåªè¯»ä¸‹æ ‡</p>
</blockquote>
<h3 id="ä¸‹æ ‡ç”¨æ³•"><a href="#ä¸‹æ ‡ç”¨æ³•" class="headerlink" title="ä¸‹æ ‡ç”¨æ³•"></a>ä¸‹æ ‡ç”¨æ³•</h3><p>â€œä¸‹æ ‡â€ç¡®åˆ‡çš„æ„æ€å–å†³äºå®ƒä½¿ç”¨çš„ä¸Šä¸‹æ–‡ã€‚é€šå¸¸ä¸‹æ ‡æ˜¯ç”¨æ¥è®¿é—®é›†åˆã€åˆ—è¡¨æˆ–åºåˆ—ä¸­å…ƒç´ çš„å¿«æ·æ–¹å¼ã€‚ä½ å¯ä»¥åœ¨ä½ è‡ªå·±ç‰¹å®šçš„ç±»æˆ–ç»“æ„ä½“ä¸­è‡ªç”±å®ç°ä¸‹æ ‡æ¥æä¾›åˆé€‚çš„åŠŸèƒ½ã€‚</p>
<p>ä¾‹å¦‚ï¼ŒSwift çš„ <code>Dictionary</code> ç±»å‹å®ç°äº†ä¸‹æ ‡æ¥å¯¹ <code>Dictionary</code> å®ä¾‹ä¸­å­˜æ”¾çš„å€¼è¿›è¡Œè®¾ç½®å’Œè¯»å–æ“ä½œã€‚ä½ å¯ä»¥åœ¨ä¸‹æ ‡çš„æ–¹æ‹¬å·ä¸­é€šè¿‡æä¾›å­—å…¸é”®ç±»å‹ç›¸åŒçš„é”®æ¥è®¾ç½®å­—å…¸é‡Œçš„å€¼ï¼Œå¹¶ä¸”æŠŠä¸€ä¸ªä¸å­—å…¸å€¼ç±»å‹ç›¸åŒçš„å€¼èµ‹ç»™è¿™ä¸ªä¸‹æ ‡ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> numberOfLegs = [<span class="string">"spider"</span>: <span class="number">8</span>ï¼Œ <span class="string">"ant"</span>: <span class="number">6</span>ï¼Œ <span class="string">"cat"</span>: <span class="number">4</span>]</div><div class="line">numberOfLegs[<span class="string">"bird"</span>] = <span class="number">2</span></div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„æ —å­å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>numberOfLegs</code> çš„å˜é‡å¹¶ç”¨ä¸€ä¸ªå­—å…¸å­—é¢é‡åˆå§‹åŒ–å‡ºäº†åŒ…å«ä¸‰ä¸ªé”®å€¼å¯¹çš„å­—å…¸å®ä¾‹ã€‚ <code>numberOfLegs</code> å­—å…¸çš„ç±»å‹æ¨æ–­ä¸º <code>[String:Int]</code> ã€‚å­—å…¸å®ä¾‹åˆ›ä¹‹åï¼Œè¿™ä¸ªæ —å­ä¸‹æ ‡èµ‹å€¼æ¥æ·»åŠ ä¸€ä¸ª <code>String</code> é”® â€œ<code>bird</code>â€œ å’Œ <code>Int</code> å€¼ 2 åˆ°å­—å…¸ä¸­ã€‚</p>
<blockquote>
<p>Swift çš„ Dictionary ç±»å‹å®ç°å®ƒçš„ä¸‹æ ‡ä¸ºæ¥æ”¶å’Œè¿”å›<em>å¯é€‰ç±»å‹</em>çš„ä¸‹æ ‡ã€‚å¯¹äºä¸Šä¾‹ä¸­çš„ <code>numberOfLegs</code> å­—å…¸ï¼Œé”®å€¼ä¸‹æ ‡æ¥æ”¶å’Œè¿”å›ä¸€ä¸ª <code>Int?</code> ç±»å‹çš„å€¼ï¼Œæˆ–è€…è¯´â€œ<em>å¯é€‰çš„</em> <code>Int</code>  â€ã€‚ Dictionary ç±»å‹ä½¿ç”¨å¯é€‰çš„ä¸‹æ ‡ç±»å‹æ¥å»ºæ¨¡ä¸æ˜¯æ‰€æœ‰é”®éƒ½ä¼šæœ‰å€¼çš„äº‹å®ï¼Œå¹¶ä¸”æä¾›äº†ä¸€ç§é€šè¿‡ç»™é”®èµ‹å€¼ä¸º <em>nil</em> æ¥åˆ é™¤å¯¹åº”é”®çš„å€¼çš„æ–¹æ³•ã€‚</p>
</blockquote>
<h3 id="ä¸‹æ ‡é€‰é¡¹"><a href="#ä¸‹æ ‡é€‰é¡¹" class="headerlink" title="ä¸‹æ ‡é€‰é¡¹"></a>ä¸‹æ ‡é€‰é¡¹</h3><p>ä¸‹æ ‡å¯ä»¥æ¥æ”¶ä»»æ„æ•°é‡çš„è¾“å…¥å½¢å¼å‚æ•°ï¼Œå¹¶ä¸”è¿™äº›è¾“å…¥å½¢å¼å‚æ•°å¯ä»¥æ˜¯ä»»æ„ç±»å‹ã€‚ä¸‹æ ‡ä¹Ÿå¯ä»¥è¿”å›ä»»æ„ç±»å‹ã€‚ä¸‹æ ‡å¯ä»¥ä½¿ç”¨<strong>å˜é‡å½¢å¼å‚æ•°</strong>å’Œ<strong>å¯å˜å½¢å¼å‚æ•°</strong>(Intâ€¦)ï¼Œ <em>ä½†æ˜¯ä¸èƒ½ä½¿ç”¨è¾“å…¥è¾“å‡ºå½¢å¼å‚æ•°æˆ–æä¾›é»˜è®¤å½¢å¼å‚æ•°å€¼ã€‚</em></p>
<p>ç±»æˆ–ç»“æ„ä½“å¯ä»¥æ ¹æ®è‡ªèº«éœ€è¦æä¾›å¤šä¸ªä¸‹æ ‡å®ç°ï¼Œåˆé€‚è¢«ä½¿ç”¨çš„ä¸‹æ ‡ä¼šåŸºäºå€¼ç±»å‹æˆ–è€…ä½¿ç”¨ä¸‹æ ‡æ—¶ä¸‹æ ‡æ–¹æ‹¬å·é‡ŒåŒ…å«çš„å€¼æ¥æ¨æ–­ã€‚è¿™ä¸ªå¯¹å¤šä¸‹æ ‡çš„å®šä¹‰å°±æ˜¯<strong>æ‰€è°“çš„ä¸‹æ ‡é‡è½½</strong>ã€‚</p>
<p>é€šå¸¸æ¥è®²ä¸‹æ ‡æ¥æ”¶ä¸€ä¸ªå½¢å¼å‚æ•°ï¼Œä½†åªè¦ä½ çš„ç±»å‹éœ€è¦ä¹Ÿå¯ä»¥ä¸ºä¸‹æ ‡å®šä¹‰å¤šä¸ªå‚æ•°ã€‚å¦‚ä¸‹ä¾‹å®šä¹‰äº†ä¸€ä¸ª <code>Matrix</code> ç»“æ„ä½“ï¼Œå®ƒå‘ˆç°ä¸€ä¸ª <code>Double</code> ç±»å‹çš„äºŒç»´çŸ©é˜µã€‚ <code>Matrix</code> ç»“æ„ä½“çš„ä¸‹æ ‡æ¥æ”¶ä¸¤ä¸ªæ•´æ•°å½¢å¼å‚æ•°ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Matrix</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> rows: <span class="type">Int</span>, columns: <span class="type">Int</span></div><div class="line">    <span class="keyword">var</span> grid: [<span class="type">Double</span>]</div><div class="line">    <span class="keyword">init</span>(rows: <span class="type">Int</span>, columns: <span class="type">Int</span>) &#123;</div><div class="line">        <span class="keyword">self</span>.rows = rows</div><div class="line">        <span class="keyword">self</span>.columns = columns</div><div class="line">        grid = [<span class="type">Double</span>](repeatElement(<span class="number">0.0</span>, <span class="built_in">count</span>: rows * columns))</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">indexIsValid</span><span class="params">(row: Int, column: Int)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        <span class="keyword">return</span> row &gt;= <span class="number">0</span> &amp;&amp; row &lt; rows &amp;&amp; column &gt;= <span class="number">0</span> &amp;&amp; column &lt; columns</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">subscript</span>(row: <span class="type">Int</span>, column: <span class="type">Int</span>) -&gt; <span class="type">Double</span> &#123;</div><div class="line">        <span class="keyword">get</span> &#123;</div><div class="line">            <span class="built_in">assert</span>(indexIsValid(row: row, column: column), <span class="string">"Index out of range"</span>)</div><div class="line">            <span class="keyword">return</span> grid[(row * columns) + column]</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">set</span> &#123;</div><div class="line">            <span class="built_in">assert</span>(indexIsValid(row: row, column: column), <span class="string">"Index out of range"</span>)</div><div class="line">            grid[(row * columns) + column] = newValue</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>Matrix</code> æä¾›äº†ä¸€ä¸ªæ¥æ”¶ <code>rows</code> å’Œ <code>columns</code> ä¸¤ä¸ªå½¢å¼å‚æ•°çš„åˆå§‹åŒ–å™¨ï¼Œåˆ›å»ºäº†ä¸€ä¸ªè¶³å¤Ÿå®¹çº³<code>rows * columns</code> ä¸ªæ•°çš„ <code>Double</code> ç±»å‹æ•°ç»„ã€‚çŸ©é˜µé‡Œçš„æ¯ä¸ªä½ç½®éƒ½ç”¨ <code>0.0</code> åˆå§‹åŒ–ã€‚è¦è¿™ä¹ˆåšï¼Œæ•°ç»„çš„é•¿åº¦ï¼Œæ¯ä¸€æ ¼åˆå§‹åŒ–ä¸º <code>0.0</code> ï¼Œéƒ½ä¼ å…¥æ•°ç»„åˆå§‹åŒ–å™¨æ¥åˆ›å»ºå’Œåˆå§‹åŒ–ä¸€ä¸ªæ­£ç¡®é•¿åº¦çš„æ•°ç»„ã€‚è¿™ä¸ªåˆå§‹åŒ–å™¨åœ¨ä½¿ç”¨é»˜è®¤å€¼åˆ›å»ºæ•°ç»„é‡Œæœ‰æ›´è¯¦ç»†çš„æè¿°ã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡ä¼ å…¥åˆé€‚çš„è¡Œå’Œåˆ—çš„æ•°é‡æ¥æ„é€ ä¸€ä¸ªæ–°çš„ <code>Matrix</code> å®ä¾‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> matrix = <span class="type">Matrix</span>(rows: <span class="number">2</span>, columns: <span class="number">2</span>)</div></pre></td></tr></table></figure>
<p>ä¸Šä¾‹ä¸­åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ä¸¤è¡Œä¸¤åˆ—çš„ <code>Matrix</code> å®ä¾‹ã€‚ <code>Matrix</code> å®ä¾‹ä¸­çš„æ•°ç»„<code>grid</code> æ˜¯ çŸ©é˜µçš„é«˜æ•ˆæ‰å¹³åŒ–ç‰ˆæœ¬ï¼Œé˜…è¯»é¡ºåºä»å·¦ä¸Šåˆ°å³ä¸‹ï¼š<br><img style="margin: auto" src="/2017/11/23/swift-subscript/subscriptMatrix01_2x.png" alt="subscriptMatrix01_2x" title="çŸ©é˜µå›¾"></p>
<p>çŸ©é˜µé‡Œçš„å€¼å¯ä»¥é€šè¿‡ä¼ è¡Œå’Œåˆ—ç»™ä¸‹æ ‡æ¥è®¾ç½®ï¼Œç”¨<strong>é€—å·åˆ†éš”</strong>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">matrix[<span class="number">0</span>, <span class="number">1</span>] = <span class="number">1.5</span></div><div class="line">matrix[<span class="number">1</span>, <span class="number">0</span>] = <span class="number">3.2</span></div></pre></td></tr></table></figure>
<p>ä¸Šé¢ä¸¤æ¡è¯­å¥è°ƒç”¨çš„ä¸‹æ ‡çš„è®¾ç½®å™¨æ¥ç»™çŸ©é˜µçš„å³ä¸Šè§’ï¼ˆ <code>row</code> æ˜¯ 0 ï¼Œ <code>column</code> æ˜¯ 1 ï¼‰èµ‹å€¼ä¸º 1.5 ï¼Œç»™å·¦ä¸‹è§’ï¼ˆ <code>row</code> æ˜¯ 1 ï¼Œ <code>column</code> æ˜¯ 0 ï¼‰èµ‹å€¼ä¸º 3.2 ï¼š</p>
<p><img style="margin: auto" src="/2017/11/23/swift-subscript/subscriptMatrix02_2x.png" alt="subscriptMatrix02_2x" title="å¤åˆ¶å"></p>
<p><code>Matrix</code> ä¸‹æ ‡çš„<strong>è®¾ç½®å™¨å’Œè¯»å–å™¨</strong>éƒ½åŒ…å«äº†ä¸€ä¸ªæ–­è¨€æ¥æ£€æŸ¥ä¸‹æ ‡çš„ <code>row</code> å’Œ <code>column</code> æ˜¯å¦æœ‰æ•ˆã€‚ä¸ºäº†æ–¹ä¾¿è¿›è¡Œæ–­è¨€ï¼Œ <code>Matrix</code> åŒ…å«äº†ä¸€ä¸ªåä¸º <code>indexIsValidForRow(_:column:)</code> çš„æˆå‘˜æ–¹æ³•ï¼Œå®ƒç”¨æ¥ç¡®è®¤è¯·æ±‚çš„ <code>row</code> æˆ– <code>column</code> å€¼æ˜¯å¦ä¼šé€ æˆæ•°ç»„è¶Šç•Œï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">indexIsValidForRow</span><span class="params">(row: Int, column: Int)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">    <span class="keyword">return</span> row &gt;= <span class="number">0</span> &amp;&amp; row &lt; rows &amp;&amp; column &gt;= <span class="number">0</span> &amp;&amp; column &lt; columns</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ–­è¨€åœ¨ä¸‹æ ‡è¶Šç•Œæ—¶è§¦å‘:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> someValue = matrix[<span class="number">2</span>, <span class="number">2</span>]</div><div class="line"><span class="comment">// this triggers an assert, because [2, 2] is outside of the matrix bounds</span></div></pre></td></tr></table></figure>
<blockquote>
<p>æ‘˜è‡ªï¼š<a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/index.html#//apple_ref/doc/uid/TP40014097-CH3-ID0" target="_blank" rel="external">swift å®˜ç½‘</a><br>æ‰€æœ‰ä»£ç åœ¨Xcode9 Swift4 ç¯å¢ƒç¼–è¯‘æ²¡é—®é¢˜ï¼Œä»£ç <a href="https://github.com/keshiim/LearnSwift4" target="_blank" rel="external">æˆ³è¿™é‡Œ https://github.com/keshiim/LearnSwift4</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;em&gt;ç±»ã€ç»“æ„ä½“&lt;/em&gt;å’Œ&lt;em&gt;æšä¸¾&lt;/em&gt;å¯ä»¥å®šä¹‰ä¸‹æ ‡ï¼Œå®ƒå¯ä»¥ä½œä¸ºè®¿é—®é›†åˆã€åˆ—è¡¨æˆ–åºåˆ—æˆå‘˜å…ƒç´ çš„å¿«æ·æ–¹å¼ã€‚ä½ å¯ä½¿ç”¨ä¸‹æ ‡ï¼Œé€šè¿‡&lt;strong&gt;ç´¢å¼•å€¼&lt;/strong&gt;æ¥&lt;em&gt;è®¾ç½®&lt;/em&gt;æˆ–&lt;em&gt;æ£€ç´¢å€¼&lt;/em&gt;è€Œä¸éœ€è¦ä¸ºè®¾ç½®å’Œæ£€ç´¢åˆ†åˆ«ä½¿ç”¨å®ä¾‹æ–¹æ³•ã€‚æ¯”å¦‚è¯´ï¼Œç”¨ 
    
    </summary>
    
      <category term="å­¦ä¹ " scheme="https://keshiim.github.io/categories/%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="Swift" scheme="https://keshiim.github.io/categories/%E5%AD%A6%E4%B9%A0/Swift/"/>
    
    
      <category term="Swift" scheme="https://keshiim.github.io/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>Leedcode-283 Move Zeroes</title>
    <link href="https://keshiim.github.io/2017/11/23/Leedcode-283-Move-Zeroes/"/>
    <id>https://keshiim.github.io/2017/11/23/Leedcode-283-Move-Zeroes/</id>
    <published>2017-11-23T07:26:19.000Z</published>
    <updated>2018-03-20T09:56:53.642Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://leetcode.com/problems/move-zeroes/description/" target="_blank" rel="external">Move Zeroes ç§»åŠ¨é›¶</a></p>
<h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><p>Given an array <code>nums</code>, write a function to move all <code>0</code>s to the end of it while maintaining the relative order of the non-zero elements. For example, given <code>nums = [0, 1, 0, 3, 12]</code>, after calling your function, <code>nums</code> should be <code>[1, 3, 12, 0, 0]</code>.</p>
<h3 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h3><ol>
<li>You must do this <strong>in-place</strong> without making a copy of the array.</li>
<li>Minimize the total number of operations.</li>
</ol>
<h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>è¿™é“é¢˜è®©æˆ‘ä»¬å°†ä¸€ä¸ªç»™å®šæ•°ç»„ä¸­æ‰€æœ‰çš„<code>0</code>éƒ½ç§»åˆ°åé¢ï¼ŒæŠŠéé›¶æ•°å‰ç§»ï¼Œè¦æ±‚ä¸èƒ½æ”¹å˜éé›¶æ•°çš„ç›¸å¯¹åº”çš„ä½ç½®å…³ç³»ï¼Œè€Œä¸”ä¸èƒ½æ‹·è´é¢å¤–æ•°ç»„ï¼Œåªèƒ½ç”¨æ›¿æ¢æ³•<code>in-place</code>æ¥åšã€‚</p>
<h3 id="è§£æ³•ä¸€"><a href="#è§£æ³•ä¸€" class="headerlink" title="è§£æ³•ä¸€"></a>è§£æ³•ä¸€</h3><p>ä¸¤æŒ‡é’ˆï¼Œä¸€ä¸ªä¸åœçš„å‘åæ‰«ï¼Œæ‰¾åˆ°éé›¶ä½ç½®ï¼Œç„¶åå’Œå‰é¢é‚£ä¸ªæŒ‡é’ˆäº¤æ¢ä½ç½®å³å¯ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<h4 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">moveZeroes</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>; i &lt; nums.size(); i++) &#123;</div><div class="line">            <span class="keyword">if</span> (nums[i]) &#123;</div><div class="line">                swap(nums[i], nums[j++]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Swift"><a href="#Swift" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">moveZeroes</span><span class="params">(<span class="number">_</span> nums: <span class="keyword">inout</span> [Int])</span></span> &#123;</div><div class="line">        <span class="keyword">var</span> i = <span class="number">0</span>, j = <span class="number">0</span></div><div class="line">        <span class="keyword">while</span> i &lt; nums.<span class="built_in">count</span> &#123;</div><div class="line">            <span class="keyword">if</span> nums[i] != <span class="number">0</span> &#123;</div><div class="line">                nums.swapAt(i, j)</div><div class="line">                j += <span class="number">1</span></div><div class="line">            &#125;</div><div class="line">            i += <span class="number">1</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="è§£æ³•äºŒ"><a href="#è§£æ³•äºŒ" class="headerlink" title="è§£æ³•äºŒ"></a>è§£æ³•äºŒ</h3><p>æ–¹æ³•ä¸€çš„æ”¹è¿›ï¼Œå¦‚æœæ‰«åˆ°çš„æ•°ä¸æ˜¯0ï¼Œå¹¶ä¸”ä¸Šé¢ä»£ç ä¸­<code>j</code> å’Œ <code>i</code>æ•°å€¼ç›¸åŒï¼Œåˆ™ä¸éœ€è¦äº¤æ¢ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<h4 id="C-1"><a href="#C-1" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">moveZeroes</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>; i &lt; nums.size(); i++) &#123;</div><div class="line">            <span class="keyword">if</span> (nums[i]) &#123;</div><div class="line">                <span class="keyword">if</span> (i != j) &#123;</div><div class="line">                    swap(nums[i], nums[j++]);    </div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    j++;   </div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Swift-1"><a href="#Swift-1" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">moveZeros</span><span class="params">(<span class="number">_</span> nums: <span class="keyword">inout</span> [Int])</span></span> &#123;</div><div class="line">    <span class="keyword">var</span> i = <span class="number">0</span>, j = <span class="number">0</span></div><div class="line">    <span class="keyword">while</span> i &lt; nums.<span class="built_in">count</span> &#123;</div><div class="line">        <span class="keyword">if</span> nums[i] != <span class="number">0</span> &#123;</div><div class="line">            <span class="keyword">if</span>  i != j  &#123;</div><div class="line">                nums.swapAt(i, j)</div><div class="line">            &#125;</div><div class="line">            j += <span class="number">1</span></div><div class="line">        &#125;</div><div class="line">        i += <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">moveZeros(&amp;nums)</div><div class="line"><span class="built_in">print</span>(nums)</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://leetcode.com/problems/move-zeroes/description/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Move Zeroes ç§»åŠ¨é›¶&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;é¢˜ç›®æè¿°&quot;&gt;&lt;a 
    
    </summary>
    
      <category term="LeetCode" scheme="https://keshiim.github.io/categories/LeetCode/"/>
    
    
      <category term="LeetCode" scheme="https://keshiim.github.io/tags/LeetCode/"/>
    
      <category term="algorithm" scheme="https://keshiim.github.io/tags/algorithm/"/>
    
      <category term="ç®—æ³•" scheme="https://keshiim.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
      <category term="Array" scheme="https://keshiim.github.io/tags/Array/"/>
    
      <category term="Easy" scheme="https://keshiim.github.io/tags/Easy/"/>
    
  </entry>
  
</feed>
