<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="Farmer, keshiim 播种太阳🌞" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="一个☝程序猿的播种天地">
<meta property="og:type" content="website">
<meta property="og:title" content="Farmer, keshiim 播种太阳🌞">
<meta property="og:url" content="https://keshiim.github.io/page/3/index.html">
<meta property="og:site_name" content="Farmer, keshiim 播种太阳🌞">
<meta property="og:description" content="一个☝程序猿的播种天地">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Farmer, keshiim 播种太阳🌞">
<meta name="twitter:description" content="一个☝程序猿的播种天地">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://keshiim.github.io/page/3/"/>





  <title>Farmer, keshiim 播种太阳🌞</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?921c9b00f7bef5665a875398ea470185";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Farmer, keshiim 播种太阳🌞</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">小n快乐成长🍉</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://keshiim.github.io/2017/11/22/swift-Method/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zheng keshiim">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Farmer, keshiim 播种太阳🌞">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/22/swift-Method/" itemprop="url">Swift：方法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-22T17:44:49+08:00">
                2017-11-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习/" itemprop="url" rel="index">
                    <span itemprop="name">学习</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/22/swift-Method/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/11/22/swift-Method/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/11/22/swift-Method/" class="leancloud_visitors" data-flag-title="Swift：方法">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>方法</strong> 是关联了<em>特定类型</em>的 <em>函数</em> 。类，结构体以及枚举都能定义<strong>实例方法</strong>，方法封装了给定类型特定的任务和功能。类，结构体和枚举同样可以定义<strong>类型方法</strong>，这是与类型本身关联的方法。类型方法与 Objective-C 中的类方法相似。</p>
<p>事实上在 <em>结构体和枚举中定义方法</em> 是 Swift 语言与 C 语言和 Objective-C 的<strong>主要区别</strong>。在 Objective-C 中，类是唯一能定义方法的类型。但是在 Swift ，你可以选择无论类，结构体还是枚举，它们都拥有强大的灵活性来在你创建的类型中定义方法。</p>
<h3 id="实例方法"><a href="#实例方法" class="headerlink" title="实例方法"></a>实例方法</h3><p>实例方法 是属于 <strong>特定</strong> 类实例、结构体实例或者枚举实例的函数。他们为这些实例提供功能性，要么通过提供访问和修改实例属性的方法，要么通过提供与实例相关的功能。实例方法与函数的语法完全相同。</p>
<p>要写一个实例方法，你需要把它放在对应类的花括号之间。实例方法默认可以访问同类下所有其他实例方法和属性。<strong>实例方法只能在类型的具体实例里被呼叫（<code>call</code>）</strong>。它不能在独立于实例而被调用。</p>
<p>举例子：这里有个定义 <code>Counter</code>类的栗子，它可以用来计算动作发生的次数：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> <span class="built_in">count</span> = <span class="number">0</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">increment</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">count</span> += <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">increment</span><span class="params">(by amount: Int)</span></span> &#123;</div><div class="line">        <span class="built_in">count</span> += amount</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">reset</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="built_in">count</span> = <span class="number">0</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>Counter</code> 类定义了三个实例方法：</p>
<ul>
<li><code>increment</code>每次给计数器增加 1；</li>
<li><code>increment(by: Int)</code>按照特定的整型数量来增加计数器；</li>
<li><code>reset</code>会把计数器重置为零。</li>
</ul>
<p><code>Counter</code>类同样声明了一个<em>变量属性</em> <code>count</code>来追踪当前计数器的<strong>值</strong>。</p>
<p>调用实例方法与属性一样都是用<strong>点语法</strong>：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> counter = <span class="type">Counter</span>()</div><div class="line"><span class="comment">// the initial counter value is 0</span></div><div class="line">counter.increment()</div><div class="line"><span class="comment">// the counter's value is now 1</span></div><div class="line">counter.increment(by: <span class="number">5</span>)</div><div class="line"><span class="comment">// the counter's value is now 6</span></div><div class="line">counter.reset()</div><div class="line"><span class="comment">// the counter's value is now 0</span></div></pre></td></tr></table></figure>
<p>如同函数实际参数标签和形式参数名中描述的那样，同样的，对于方法的形式参数来说与函数也是神同步的，因为方法就是与类型关联的《函数》。</p>
<h4 id="self-属性"><a href="#self-属性" class="headerlink" title="self 属性"></a>self 属性</h4><p>每一个类的实例都隐含一个叫做 <code>self</code>的属性，它完完全全与实例本身相等。你可以使用 <code>self</code>属性来在当前实例当中调用它自身的方法。<br>在上边的例子中， <code>increment()</code>方法可以写成这样：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">increment</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">self</span>.<span class="built_in">count</span> += <span class="number">1</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>实际上，你不需要经常在代码中写 <code>self</code>。如果你没有显式地写出 <code>self</code>，Swift会在方法中使用已知属性或者方法的时候<strong>假定你是调用了当前实例中的属性或者方法</strong>。这个假定通过在 <code>Counter</code>的三个实例方法中使用 <code>count</code>（而不是 <code>self.count</code>）来做了<strong>示范</strong>。</p>
<p>对于这个规则的一个重要例外就是当一个实例方法的形式参数名与实例中某个属性拥有相同的名字的时候。在这种情况下，<strong>形式参数名具有优先权</strong>，并且调用属性的时候使用更加严谨的方式就很有必要了。你可以使用 <code>self</code>来<strong>区分*</strong>形式参数名和属性名*。</p>
<p>这时， <code>self</code>就避免了叫做 <code>x</code> 的方法形式参数还是同样叫做 <code>x</code> 的实例属性这样的歧义。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> x = <span class="number">0.0</span>, y = <span class="number">0.0</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">isToTheRightOf</span><span class="params">(x: Double)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.x &gt; x</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> somePoint = <span class="type">Point</span>(x: <span class="number">4.0</span>, y: <span class="number">5.0</span>)</div><div class="line"><span class="keyword">if</span> somePoint.isToTheRightOf(x: <span class="number">1.0</span>) &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"This point is to the right of the line where x == 1.0"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">//Print "This point is to the right of the line where x == 1.0"</span></div></pre></td></tr></table></figure>
<p>除去 <code>self</code> 前缀，Swift 将会假定两个 x 都是叫做<code>( x )</code>的方法<strong>形式参数</strong>。</p>
<h4 id="在实例方法中修改值类型"><a href="#在实例方法中修改值类型" class="headerlink" title="在实例方法中修改值类型"></a>在实例方法中修改值类型</h4><p>结构体和枚举是<strong>值类型</strong>。默认情况下，值类型属性不能被自身的实例方法修改。</p>
<p>总之，如果你需要在<em>特定的方法中修改结构体或者枚举的属性</em>，你可以选择将这个方法<em>异变</em>。然后这个方法就可以在方法中异变（嗯，改变）它的属性了，并且任何改变在方法结束的时候都会写入到原始的结构体中。方法同样可以指定一个全新的实例给它隐含的 <code>self</code>属性，并且这个新的实例将会在方法结束的时候替换掉现存的这个实例。<br>你可以选择在 <code>func</code>关键字前放一个 <code>mutating</code>关键字来使用这个行为：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> x = <span class="number">0.0</span>, y = <span class="number">0.0</span></div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">moveBy</span><span class="params">(x deltaX: Double, y deltaY: Double)</span></span> &#123;</div><div class="line">        x += deltaX</div><div class="line">        y += deltaY</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> somePoint = <span class="type">Point</span>(x: <span class="number">1.0</span>, y: <span class="number">1.0</span>) <span class="comment">// not let somePoint</span></div><div class="line">somePoint.moveBy(x: <span class="number">2.0</span>, y: <span class="number">3.0</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"The point is now at (<span class="subst">\(somePoint.x)</span>, <span class="subst">\(somePoint.y)</span>)"</span>)</div><div class="line"><span class="comment">// prints "The point is now at (3.0, 4.0)"</span></div></pre></td></tr></table></figure>
<p>上文中的 <code>Point</code> 结构体定义了一个<strong>异变</strong>方法 <code>moveBy(x:y:)</code>，它以特定的数值移动一个 <code>Point</code>实例。相比于返回一个新的点，这个方法实际上修改了调用它的点。 被添加到定义中的 <code>mutating</code>关键字允许它修改自身的属性。</p>
<p>注意，如同 <strong>常量</strong>结构体实例的存储属性 里描述的那样，你不能在<strong>常量结构体类型里调用异变方法</strong>，因为自身属性不能被改变，就算它们是变量属性：</p>
<p>下面代码中调用会编译报错：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> fixedPoint = <span class="type">Point</span>(x: <span class="number">3.0</span>, y: <span class="number">3.0</span>)</div><div class="line">fixedPoint.moveBy(x: <span class="number">2.0</span>, y: <span class="number">3.0</span>)</div><div class="line"><span class="comment">// this will report an error</span></div></pre></td></tr></table></figure>
<h4 id="在变异方法里指定自身"><a href="#在变异方法里指定自身" class="headerlink" title="在变异方法里指定自身"></a>在变异方法里指定自身</h4><p>变异方法可以指定整个<strong>实例给隐含的<code>self</code>属性</strong>。上文中那个<code>Point</code>的栗子可以用下边的代码替代：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> x = <span class="number">0.0</span>, y = <span class="number">0.0</span></div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">moveBy</span><span class="params">(x deltaX: Double, y deltaY: Double)</span></span> &#123;</div><div class="line">        <span class="keyword">self</span> = <span class="type">Point</span>(x: x + deltaX, y: y + deltaY)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这次的异变方法 <code>moveBy(x:y:)</code>创建了一个 <code>x</code>和 <code>y</code>设置在目的坐标的全新的结构体。调用这个版本的方法和的结果会和之前那个完全一样。</p>
<p><strong>枚举</strong>的<em>异变方法</em>可以设置隐含的 <code>self</code>属性为相同枚举里的不同成员：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">TriStateSwitch</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> off, low, high</div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">next</span> <span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</div><div class="line">        <span class="keyword">case</span> .low:</div><div class="line">            <span class="keyword">self</span> = .high</div><div class="line">        <span class="keyword">case</span> .off:</div><div class="line">            <span class="keyword">self</span> = .low</div><div class="line">        <span class="keyword">case</span> .high:</div><div class="line">            <span class="keyword">self</span> = .off</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> ovenLight = <span class="type">TriStateSwitch</span>.low</div><div class="line">ovenLight.next()</div><div class="line"><span class="comment">// ovenLight is now equal to .high</span></div><div class="line">ovenLight.next()</div><div class="line"><span class="comment">// ovenLight is now equal to .off</span></div></pre></td></tr></table></figure>
<p>这个栗子定义了一个三种开关状态的枚举。每次调用 <code>next()</code>方法时，这个开关就会在三种不同的电力状态（ <code>Off</code> , <code>low</code>和 <code>high</code>）下切换。</p>
<h3 id="类方法"><a href="#类方法" class="headerlink" title="类方法"></a>类方法</h3><p>如上文描述的那样，<em>实例方法</em>是特定类型实例中调用的方法。你同样可以定义在类型本身调用的方法。这类方法被称作<strong>类型方法</strong>。你可以通过在 <code>func</code>关键字之前使用 <code>static</code>关键字来明确一个类型方法。<br>类同样可以使用 <code>class</code>关键字来允许子类重写父类对类型方法的实现。</p>
<blockquote>
<p>注意：<br>在 Objective-C 中，你只能在 Objective-C 的类中定义<strong>类级别</strong>的方法。但是在 Swift 里，你可以在所有的类里定义类级别的方法，<strong>还有结构体和枚举</strong>。每一个类方法都能够对它自身的类范围显式生效。</p>
</blockquote>
<p>类型方法和实例方法一样<strong>使用点语法调用</strong>。不过，你得在类上调用类型方法，而不是这个类的实例。接下来是一个在 <code>SomeClass</code>类里调用类型方法的栗子：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">someTypeMethod</span>() </span>&#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"调用了someclass"</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="type">SomeClass</span>.someTypeMethod()</div><div class="line"><span class="comment">//Prints "用了someclass"</span></div></pre></td></tr></table></figure>
<p>在类型方法的函数体中，<strong>隐含</strong>的 <code>self</code>属性指向了类本身而不是这个类的实例。对于结构体和枚举，这意味着你可以使用 <code>self</code>来 <em>消除类型属性和类型方法形式参数之间的歧义</em> ，用法和实例属性与实例方法形式参数之间的用法完全相同。</p>
<p>一般来说，你在类型方法函数体内书写的任何非完全标准的方法和属性名 都将会指向另一个类级别的<em>方法和属性</em>。一个类型方法可以使用方法名调用另一个类型方法， <em>并不需要使用类型名字作为前缀</em> 。同样的，结构体和枚举中的类型方法也可以通过直接使用类型属性名而不需要写类型名称前缀来访问类型属性。</p>
<p>下边的栗子定义了一个叫做 <code>LevelTracker</code>的结构体，它通过不同的等级或者阶层来追踪玩家的游戏进度。这是一个单人游戏，但是可以在一个设备上储存多个玩家的信息。</p>
<p>当游戏第一次开始的时候所有的的游戏等级（除了第一级）都是锁定的。每当一个玩家完成一个等级，那这个等级就对设备上的所有玩家解锁。 <code>LevelTracker</code>结构体使用类型属性和方法来追踪解锁的游戏等级。它同样追踪每一个独立玩家的当前等级。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LevelTracker</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">var</span> hightestUnlockedLevel = <span class="number">1</span></div><div class="line">    <span class="keyword">var</span> currentLevel = <span class="number">1</span></div><div class="line">    </div><div class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">unlock</span><span class="params">(<span class="number">_</span> level: Int)</span></span> &#123;</div><div class="line">        <span class="keyword">if</span> level &gt; hightestUnlockedLevel &#123; hightestUnlockedLevel = level &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">isUnlocked</span><span class="params">(<span class="number">_</span> level: Int)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        <span class="keyword">return</span> level &lt;= hightestUnlockedLevel</div><div class="line">    &#125;</div><div class="line">    @discardableResult</div><div class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">advance</span><span class="params">(to level: Int)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        <span class="keyword">if</span> <span class="type">LevelTracker</span>.isUnlocked(level) &#123;</div><div class="line">            currentLevel = level</div><div class="line">            <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>LevelTracker</code>结构体持续追踪任意玩家解锁的最高等级。这个值被储存在叫做 <code>highestUnlockedLevel</code>的类型属性里边。</p>
<p><code>LevelTracker</code>同时还定义了两个类型函数来操作 <code>highestUnlockedLevel</code>属性。第一个类型函数叫做 <code>unlock(_:)</code>，它在新等级解锁的时候更新 <code>highestUnlockedLevel</code>。第二个是叫做 <code>isUnlocked(_:)</code>的便捷类型方法，如果特定等级已经解锁，则返回 <code>true</code>。（注意这些类型方法可以访问 <code>highestUnlockedLevel</code>类型属性而并不需要写作 <code>LevelTracker.highestUnlockedLevel</code>。）</p>
<p>除了其自身的类型属性和类型方法， <code>LevelTracker</code>还追踪每一个玩家在游戏中的进度。它使用一个实例属性 <code>currentLevel</code>来追踪当前游戏中的游戏等级。</p>
<p>为了帮助管理 <code>currentLevel</code>属性， <code>LevelTracker</code>定义了一个叫做 <code>advance(to:)</code>的实例方法。在更新 <code>currentLevel</code>之前，这个方法会检查请求的新等级是否解锁。 <code>advance(to:)</code>方法返回一个布尔值来明确它是否真的可以设置 <code>currentLevel</code>。由于调用时<strong>忽略</strong> <code>advance(to:)</code> 的返回值并不是什么大不了的问题，这个函数用 <code>@discardableResult</code> <strong>标注</strong>。</p>
<p>看下边的栗子， <code>LevelTracker</code>结构体与 <code>Player</code>类共同使用来追踪和更新每一个玩家的进度：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Player</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> tracker = <span class="type">LevelTracker</span>()</div><div class="line">    <span class="keyword">let</span> playerName: <span class="type">String</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">completedLevel</span><span class="params">(level: Int)</span></span> &#123;</div><div class="line">        <span class="type">LevelTracker</span>.unlockLevel(level + <span class="number">1</span>)</div><div class="line">        tracker.advanceToLevel(level + <span class="number">1</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</div><div class="line">        playerName = name</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>Player</code>类创建了一个新的 <code>LevelTracker</code>实例 来追踪玩家的进度。它同事提供了一个叫做 <code>complete(level:)</code>的方法，这个方法在玩家完成一个特定等级的时候会被调用。这个方法会为所有的玩家解锁下一个等级并且更新玩家的进度到下一个等级。（ <code>advance(to:)</code>返回的布尔值被忽略掉了，因为等级已经在先前调用 <code>LevelTracker.unlock(_:)</code>时已知解锁。）<br>你可以通过为 <code>Player</code>类创建一个实例来新建一个玩家，然后看看当玩家达成等级<code>1</code>时会发生什么：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> player = <span class="type">Player</span>(name: <span class="string">"Argyrios"</span>)</div><div class="line">player.complete(level: <span class="number">1</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"highest unlocked level is now <span class="subst">\(LevelTracker.highestUnlockedLevel)</span>"</span>)</div><div class="line"><span class="comment">// Prints "highest unlocked level is now 2"</span></div><div class="line"><span class="keyword">var</span> player = <span class="type">Player</span>(name: <span class="string">"Argyrios"</span>)</div><div class="line">player.complete(level: <span class="number">1</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"highest unlocked level is now <span class="subst">\(LevelTracker.highestUnlockedLevel)</span>"</span>)</div><div class="line"><span class="comment">// Prints "highest unlocked level is now 2"</span></div></pre></td></tr></table></figure>
<p>如果你创建了第二个玩家，当你让他尝试进入尚未被任何玩家在游戏中解锁的等级时， 设置玩家当前等级的尝试将会失败：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">player = <span class="type">Player</span>(name: <span class="string">"Beto"</span>)</div><div class="line"><span class="keyword">if</span> player.tracker.<span class="built_in">advance</span>(to: <span class="number">6</span>) &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"player is now on level 6"</span>)</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"level 6 has not yet been unlocked"</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// Prints "level 6 has not yet been unlocked"</span></div></pre></td></tr></table></figure>
<blockquote>
<p>摘自：<a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/index.html#//apple_ref/doc/uid/TP40014097-CH3-ID0" target="_blank" rel="external">swift 官网</a><br>所有代码在Xcode9 Swift4 环境编译没问题，代码<a href="https://github.com/keshiim/LearnSwift4" target="_blank" rel="external">戳这里 https://github.com/keshiim/LearnSwift4</a></p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://keshiim.github.io/2017/11/22/1-bit-and-2-bit-Characters/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zheng keshiim">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Farmer, keshiim 播种太阳🌞">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/22/1-bit-and-2-bit-Characters/" itemprop="url">Leetcode-717 1-bit and 2-bit Characters</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-22T15:11:12+08:00">
                2017-11-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LeetCode/" itemprop="url" rel="index">
                    <span itemprop="name">LeetCode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/22/1-bit-and-2-bit-Characters/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/11/22/1-bit-and-2-bit-Characters/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/11/22/1-bit-and-2-bit-Characters/" class="leancloud_visitors" data-flag-title="Leetcode-717 1-bit and 2-bit Characters">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>We have two special characters. The first character can be represented by one bit <code>0</code>. The second character can be represented by two bits(<code>10</code>or<code>11</code>).</p>
<p>Now given a string represented by several bits. Return whether the last character must be a one-bit character or not. The given string will always end with a zero.</p>
<h3 id="Example1"><a href="#Example1" class="headerlink" title="Example1"></a>Example1</h3><pre><code>Input: 
bits = [1, 0, 0]
Output: True
Explanation: 
The only way to decode it is two-bit character and one-bit character. So the last character is one-bit character.
</code></pre><h3 id="Example2"><a href="#Example2" class="headerlink" title="Example2"></a>Example2</h3><pre><code>Input: 
bits = [1, 1, 1, 0]
Output: False
Explanation: 
The only way to decode it is two-bit character and two-bit character. So the last character is NOT one-bit character.
</code></pre><h3 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h3><ul>
<li>$1\leq len(bits)\leq 1000$.</li>
<li><code>bits[i]</code> is always <code>0</code> or <code>1</code></li>
</ul>
<h3 id="解法一"><a href="#解法一" class="headerlink" title="解法一"></a>解法一</h3><p><strong>分析：</strong>这道题说有两种特殊的字符，一种是两位字符，只能是二进制的<code>11</code>和<code>10</code>，另一种是单个位字符，只能是二进制的<code>0</code>。现在给我们了一个包含0和1的数组，问我们是否能够将其正确的分割，使得最后一个字符是个单个位字符。</p>
<p>这道题使用贪心散发来做，因为两种位字符互不干扰，只要我们遍历到了数字1，那么气必定是两位字符，所以后面以为也得跟着，而遍历到了数字0，那么就必定是单个位字符。</p>
<p>所以，我们可以用一个变量<code>i</code>来记录当前遍历到的位置，如果遇到了0，那么<code>i</code>自增1，如果遇到了1，那么<code>i</code>自增2，我们循环的条件是<code>i &lt; n-1</code>，即留出最后一位，所以当循环退出后，当<code>i</code>正好停留在<code>n - 1</code>上，说明最后以为是单独分割开的，因为题目中限定了最后一位一定是0，就没有必要判断了，代码如下：</p>
<h4 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isOneBitCharacter</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; bits)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> n = bits.size(), i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span> (i &lt; n - <span class="number">1</span>) &#123;</div><div class="line">            <span class="keyword">if</span> (bits[i] == <span class="number">0</span>) ++i;</div><div class="line">            <span class="keyword">else</span> i+= <span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> i == n - <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Swift"><a href="#Swift" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">isOneBitCharacter</span><span class="params">(<span class="number">_</span> bits: [Int])</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        <span class="keyword">let</span> n = bits.<span class="built_in">count</span></div><div class="line">        <span class="keyword">var</span> i = <span class="number">0</span></div><div class="line">        <span class="keyword">while</span> i &lt; n - <span class="number">1</span> &#123;</div><div class="line">            <span class="keyword">if</span> bits[i] == <span class="number">0</span> &#123; </div><div class="line">                i+= <span class="number">1</span></div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                i += <span class="number">2</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span>  i == n - <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="解法二"><a href="#解法二" class="headerlink" title="解法二"></a>解法二</h3><p>下面这种解法写的更加简洁了，直接用一行代替了<code>if..else..</code>语句，相当巧妙，当bits[i]为0时，i还是相当于自增了1，当bits[i]为1时，i相当于自增了2，最后还是在循环跳出后检测i是否为n-1，参见代码如下：</p>
<h4 id="C-1"><a href="#C-1" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isOneBitCharacter</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; bits)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> n = bits.size(), i = <span class="number">0</span>;</div><div class="line">        <span class="keyword">while</span> (i &lt; n - <span class="number">1</span>) &#123;</div><div class="line">            i += bits[i] + <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> i == n - <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Swift-1"><a href="#Swift-1" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">isOneBitCharacter</span><span class="params">(<span class="number">_</span> bits: [Int])</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        <span class="keyword">let</span> n = bits.<span class="built_in">count</span></div><div class="line">        <span class="keyword">var</span> i = <span class="number">0</span></div><div class="line">        <span class="keyword">while</span> i &lt; n - <span class="number">1</span> &#123;</div><div class="line">            i += bits[i] + <span class="number">1</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span>  i == n - <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="解法三"><a href="#解法三" class="headerlink" title="解法三"></a>解法三</h3><p>下面我们来看递归解法，用的是回溯的思想，首先判断如果<code>bits</code>为空了，直接返回<code>false</code>，因为题目初始给的<code>bits</code>是非空的，在调用递归函数中为空了说明最后一位跟倒数第二位组成了个两位字符，所以不合题意返回<code>false</code>。再判断如果<code>bits</code>大小为1了，那么返回这个数字是否为0，其实直接返回<code>true</code>也行，因为题目中说了最后一个数字一定是0。然后我们新建一个数组<code>t</code>，如果<code>bits</code>的首元素为0，则我们的<code>t</code>赋值为去掉首元素的<code>bits</code>数组；如果<code>bits</code>的首元素是1，则我们的t服之为去掉前两个元素的<code>bits</code>数组，然后返回调用递归函数的结果即可，参见代码如下：</p>
<h4 id="C-2"><a href="#C-2" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isOneBitCharactor</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; bits)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (bits.empty()) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        <span class="keyword">if</span> (bits.size() == <span class="number">1</span>) <span class="keyword">return</span> bits[<span class="number">0</span>] == <span class="number">0</span>; </div><div class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; t;</div><div class="line">        <span class="keyword">if</span> (bits[<span class="number">0</span>] == <span class="number">0</span>) &#123;</div><div class="line">            t = <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(bits.begin() + <span class="number">1</span>, bits.end());</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (bits[<span class="number">0</span>] == <span class="number">1</span>) &#123;</div><div class="line">            t = <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(bits.begin() + <span class="number">2</span>, bits.end())</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> isOneBitCharactor(t);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Swift-2"><a href="#Swift-2" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">isOneBitCharacter1</span><span class="params">(<span class="number">_</span> bits: [Int])</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">    <span class="keyword">if</span> bits.isEmpty &#123; <span class="keyword">return</span> <span class="literal">false</span> &#125;</div><div class="line">    <span class="keyword">if</span> bits.<span class="built_in">count</span> == <span class="number">1</span> &#123; <span class="keyword">return</span> bits[<span class="number">0</span>] == <span class="number">0</span> &#125;</div><div class="line">    <span class="keyword">var</span> t = <span class="type">Array</span>&lt;<span class="type">Int</span>&gt;()</div><div class="line">    <span class="keyword">if</span> bits[<span class="number">0</span>] == <span class="number">0</span> &#123;</div><div class="line">        t = <span class="type">Array</span>(bits[<span class="number">1</span>..&lt;bits.endIndex])</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> bits[<span class="number">0</span>] == <span class="number">1</span> &#123;</div><div class="line">        t = <span class="type">Array</span>(bits[<span class="number">2</span>..&lt;bits.endIndex])</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> isOneBitCharacter1(t)</div><div class="line">&#125;</div><div class="line"><span class="built_in">print</span>(isOneBitCharacter1([<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>]))</div></pre></td></tr></table></figure>
<h3 id="解法四"><a href="#解法四" class="headerlink" title="解法四"></a>解法四</h3><p>下面这种解法也是用的递归，递归函数用的不是原函数，这样可以只用位置变量<code>idx</code>来遍历，<strong>而不用新建数组<code>t</code></strong>，初始时<code>idx</code>传入0，在递归函数中，</p>
<p>如果<code>idx</code>为<code>n</code>了，相当于上面解法中的<code>bits</code>数组为空了情况，返回<code>false</code>；</p>
<p>如果<code>idx</code>为<code>n-1</code>，返回 bits[idx] == 0；</p>
<p>如果<code>bits[idx]</code>为0，则返回调用递归函数的结果，此时<code>idx</code>加上1；</p>
<p>如果<code>bits[idx]</code>为1，则返回调用递归函数的结果，此时<code>idx</code>加上2，参见代码如下：</p>
<h4 id="C-3"><a href="#C-3" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isOneBitCharacter</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; bits)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> helper(bits, <span class="number">0</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">helper</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; bits, <span class="keyword">int</span> idx)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> n = bits.size();</div><div class="line">        <span class="keyword">if</span> (idx == n) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        <span class="keyword">if</span> (idx == n - <span class="number">1</span>) <span class="keyword">return</span> bits[idx] == <span class="number">0</span>;</div><div class="line">        <span class="keyword">if</span> (bits[idx] == <span class="number">0</span>) <span class="keyword">return</span> helper(bits, idx + <span class="number">1</span>);</div><div class="line">        <span class="keyword">return</span> helper(bits, idx + <span class="number">2</span>);</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Swift-3"><a href="#Swift-3" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">isOneBitCharacter2</span><span class="params">(<span class="number">_</span> bits: [Int])</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">    <span class="keyword">return</span> helper(bits, idx: <span class="number">0</span>)</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">helper</span><span class="params">(<span class="number">_</span> bits: [Int], idx: Int)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">    <span class="keyword">let</span> n = bits.<span class="built_in">count</span></div><div class="line">    <span class="keyword">if</span> idx == n &#123; <span class="keyword">return</span> <span class="literal">false</span> &#125;</div><div class="line">    <span class="keyword">if</span> idx == n - <span class="number">1</span> &#123; <span class="keyword">return</span> bits[idx] == <span class="number">0</span> &#125;</div><div class="line">    <span class="keyword">if</span> (bits[idx] == <span class="number">0</span>) &#123; <span class="keyword">return</span> helper(bits, idx: idx + <span class="number">1</span>) &#125;</div><div class="line">    <span class="keyword">return</span> helper(bits, idx: idx + <span class="number">2</span>)</div><div class="line">&#125;</div><div class="line"><span class="built_in">print</span>(isOneBitCharacter2([<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>]))</div><div class="line"><span class="comment">// Print true</span></div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://keshiim.github.io/2017/11/22/Find-All-Numbers-Disappeared-in-an-Array/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zheng keshiim">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Farmer, keshiim 播种太阳🌞">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/22/Find-All-Numbers-Disappeared-in-an-Array/" itemprop="url">Leetcode-448 Find All Numbers Disappeared in an Array</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-22T10:41:07+08:00">
                2017-11-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LeetCode/" itemprop="url" rel="index">
                    <span itemprop="name">LeetCode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/22/Find-All-Numbers-Disappeared-in-an-Array/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/11/22/Find-All-Numbers-Disappeared-in-an-Array/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/11/22/Find-All-Numbers-Disappeared-in-an-Array/" class="leancloud_visitors" data-flag-title="Leetcode-448 Find All Numbers Disappeared in an Array">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p><a href="https://leetcode.com/problems/find-all-numbers-disappeared-in-an-array/description/" target="_blank" rel="external">Find All Numbers Disappeared in an Array 缺失值查找</a></p>
<p>Given an array of integers where $1\leq a[i]\leq n$ (n=size of array), some elements appear twice and tohers appear once. Find all the elements of [1, n] inclusive that do not appear in this array.<br>Could you do it without extra space and in $O(n)$ runtime? You may assume the returned list does not count as extra space.</p>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><p><strong>Input:</strong><br><code>[4,3,2,7,8,2,3,1]</code></p>
<p><strong>Output:</strong><br><code>[5,6]</code></p>
<h3 id="解法一："><a href="#解法一：" class="headerlink" title="解法一："></a>解法一：</h3><p>这道题让我们找出数组中所有消失的数。乍一看，先拍个序，再遍历整个数组找出未出现数字。但是这要求我们不借助辅助空间且在<code>O(n)</code>复杂度内完成。<strong>那这道题的一个最重要的条件就是$1\leq a[i]\leq n$ (n=size of array)</strong>。这里有三种解法。首先先来看第一种解法，这种解法的思路是，对每个数组nums[i]，如果对应的nums[nums[i] - 1]是正数，我们就赋值为其相反数，如果已经是负数不变，那么最后我们只要把留下的证书对应的位置加入结果集<code>res</code>中即可，代码如下：</p>
<h4 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; findDisappearedNumbers(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums) &#123;</div><div class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; res;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.size(); i++) &#123;</div><div class="line">            <span class="keyword">int</span> idx = <span class="built_in">abs</span>(nums[i]) - <span class="number">1</span></div><div class="line">            nums[idx] = (nums[idx] &gt; <span class="number">0</span>) ? -nums[idx] : nums[idx];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.size(); i++) &#123;</div><div class="line">            <span class="keyword">if</span> (nums[i] &gt; <span class="number">0</span>) &#123;</div><div class="line">                res.push_back(i + <span class="number">1</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Swift"><a href="#Swift" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">findDisappearedNumbers</span><span class="params">(<span class="number">_</span> nums: [Int])</span></span> -&gt; [<span class="type">Int</span>] &#123;</div><div class="line">    <span class="keyword">var</span> res: [<span class="type">Int</span>] = [<span class="type">Int</span>]()</div><div class="line">    <span class="keyword">var</span> nums = nums</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;nums.<span class="built_in">count</span> &#123;</div><div class="line">        <span class="keyword">let</span> idx = <span class="built_in">abs</span>(nums[i]) - <span class="number">1</span></div><div class="line">        nums[idx] = (nums[idx] &gt; <span class="number">0</span>) ? -nums[idx] : nums[idx]</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;nums.<span class="built_in">count</span> &#123;</div><div class="line">        <span class="keyword">if</span> nums[i] &gt; <span class="number">0</span> &#123;</div><div class="line">            res.append(i + <span class="number">1</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res</div><div class="line">&#125;</div><div class="line"><span class="built_in">print</span>(findDisappearedNumbers([<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>]))</div><div class="line"><span class="comment">// Prints [5, 6]</span></div></pre></td></tr></table></figure>
<h3 id="解法二："><a href="#解法二：" class="headerlink" title="解法二："></a>解法二：</h3><p>方法二是将<code>nums[i]</code>置换到其对应的位置<code>nums[nums[i] - 1]</code>上去，比如对于没有缺失项的正确的顺序应该是<code>[1, 2, 3, 4, 5, 6, 7, 8</code>，而我们现在确实<code>[4, 3, 2, 7, 8, 2, 3, 1]</code>，我们需要把数组移动到正确的位置上去，比如第一个<code>4</code>就应该和<code>7</code>先交换个位置，以此类推，最后得到的顺序应该是<code>[1, 2, 3, 4, 3, 2, 7, 8]</code>，我们最后对应位置检验，如果<code>nums[i]</code>和 <code>i+1</code>不等，那么我们将<code>i+1</code>存入结果<code>res</code>中即可，代码如下：</p>
<h4 id="C-1"><a href="#C-1" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; findDisappearedNumbers(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums) &#123;</div><div class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; res;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.size(); i++) &#123;</div><div class="line">            <span class="keyword">if</span> (nums[i] != nums[nums[i] - <span class="number">1</span>]) &#123;</div><div class="line">                swap(nums[i], nums[nums[i] - <span class="number">1</span>]);</div><div class="line">                --i;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.size(); i++) &#123;</div><div class="line">            <span class="keyword">if</span> (nums[i] != i + <span class="number">1</span>) &#123;</div><div class="line">                res.push_back(i + <span class="number">1</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Swift-1"><a href="#Swift-1" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">findDisappearedNumbers1</span><span class="params">(<span class="number">_</span> nums: [Int])</span></span> -&gt; [<span class="type">Int</span>] &#123;</div><div class="line">    <span class="keyword">var</span> res = [<span class="type">Int</span>]()</div><div class="line">    <span class="keyword">var</span> nums = nums</div><div class="line">    <span class="keyword">var</span> i = <span class="number">0</span></div><div class="line">    <span class="keyword">while</span> i &lt; nums.<span class="built_in">count</span> &#123;</div><div class="line">        <span class="keyword">if</span> nums[i] != nums[nums[i] - <span class="number">1</span>] &#123;</div><div class="line">            nums.swapAt(i, nums[i] - <span class="number">1</span>);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            i += <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;nums.<span class="built_in">count</span> &#123;</div><div class="line">        <span class="keyword">if</span> nums[i] != i + <span class="number">1</span> &#123;</div><div class="line">            res.append(i + <span class="number">1</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res</div><div class="line">&#125;</div><div class="line"><span class="built_in">print</span>(findDisappearedNumbers1([<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>]))</div></pre></td></tr></table></figure>
<h3 id="解法三："><a href="#解法三：" class="headerlink" title="解法三："></a>解法三：</h3><p>和方法一类似，都对<code>nums[nums[i]-1]</code>数值做操作，不同的是方法一对值进行负数处理。下面这种方法是对<code>nums[nums[i]-1]</code>位置的数值累加数组长度<code>n</code>，注意<code>nums[i] - 1</code>有可能越界，所以我们需要对<code>n</code>取余，最后要找出确实的数只需要看<code>nums[i]</code>的值是否小于等于n即可，最后遍历完<code>nums[i]</code>数组为<code>[12, 19, 18, 15, 8, 2, 11, 9]</code>，我们发现有两个数字8和2小于等于<code>n</code>，那么就可以通过<code>i + 1</code>来得到正确的结果5、6，代码如下：</p>
<h4 id="C-2"><a href="#C-2" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; findDisappearedNumbers(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums) &#123;</div><div class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; res;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.size(); i++) &#123;</div><div class="line">            <span class="keyword">int</span> idx = nums[i] - <span class="number">1</span>;</div><div class="line">            nums[idx % n] += n;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</div><div class="line">            <span class="keyword">if</span> (nums[i] &lt;= n) &#123;</div><div class="line">                res.push_back(i + <span class="number">1</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Swift-2"><a href="#Swift-2" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">findDisappearedNumbers2</span><span class="params">(<span class="number">_</span> nums: [Int])</span></span> -&gt; [<span class="type">Int</span>] &#123;</div><div class="line">    <span class="keyword">var</span> res = [<span class="type">Int</span>]()</div><div class="line">    <span class="keyword">var</span> nums = nums</div><div class="line">    <span class="keyword">let</span> n = nums.<span class="built_in">count</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;nums.<span class="built_in">count</span> &#123;</div><div class="line">        <span class="keyword">let</span> idx = nums[i] - <span class="number">1</span></div><div class="line">        nums[idx % n] += n</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;n &#123;</div><div class="line">        <span class="keyword">if</span> nums[i] &lt;= n &#123;</div><div class="line">            res.append(i + <span class="number">1</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res</div><div class="line">&#125;</div><div class="line"><span class="built_in">print</span>(findDisappearedNumbers2([<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>]))</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://keshiim.github.io/2017/11/20/Max-Area-of-Island/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zheng keshiim">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Farmer, keshiim 播种太阳🌞">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/20/Max-Area-of-Island/" itemprop="url">Leetcode-695 Max Area of Island</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-20T13:50:38+08:00">
                2017-11-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LeetCode/" itemprop="url" rel="index">
                    <span itemprop="name">LeetCode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/20/Max-Area-of-Island/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/11/20/Max-Area-of-Island/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/11/20/Max-Area-of-Island/" class="leancloud_visitors" data-flag-title="Leetcode-695 Max Area of Island">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>Given a non-empty 2D array <strong>grid</strong> of 0’s and 1’s, an <strong>island</strong> is a group of 1’s (representing land) connected 4-directionally (horizontal or vertical.) You may assume all four edges of the grid are surrounded by water.</p>
<p>Find the maximum area of an island in the given 2D array. (If there is no island, the maximum area is 0.)</p>
<h3 id="Example-1"><a href="#Example-1" class="headerlink" title="Example 1:"></a>Example 1:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[[0,0,1,0,0,0,0,1,0,0,0,0,0],</div><div class="line"> [0,0,0,0,0,0,0,1,1,1,0,0,0],</div><div class="line"> [0,1,1,0,1,0,0,0,0,0,0,0,0],</div><div class="line"> [0,1,0,0,1,1,0,0,1,0,1,0,0],</div><div class="line"> [0,1,0,0,1,1,0,0,1,1,1,0,0],</div><div class="line"> [0,0,0,0,0,0,0,0,0,0,1,0,0],</div><div class="line"> [0,0,0,0,0,0,0,1,1,1,0,0,0],</div><div class="line"> [0,0,0,0,0,0,0,1,1,0,0,0,0]]</div></pre></td></tr></table></figure>
<p>Given the above grid, return <strong>6</strong>. Note the answer is not <code>11</code>, because the island must be <strong>connected 4-directionally</strong>.</p>
<h3 id="Example-2"><a href="#Example-2" class="headerlink" title="Example 2:"></a>Example 2:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[[0,0,0,0,0,0,0,0]]</div></pre></td></tr></table></figure>
<p>Given the above grid, return <strong>0</strong>.</p>
<h3 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h3><p>The length of each dimension in the given grid does not exceed 50.</p>
<h3 id="解法一："><a href="#解法一：" class="headerlink" title="解法一："></a>解法一：</h3><p>这道题跟<a href="">Number of Islands</a> 和 <a href="">Number of Distinct Islands</a> 是同一种类型的，不过这道题要统计岛的大小，再来更新结果<code>res</code>。先用递归来做，遍历<code>grid</code>，当遇到为<code>1</code>的点，我们调用递归函数，在递归函数中，我们首先判断<code>i</code>和<code>j</code>是否越界，还有<code>grid[i][j]</code>是否为<code>1</code>，我们没有用<code>visited</code>数组，而是直接修改了<code>grid</code>数组，遍历过的标记为<code>-1</code>。如果合法，那么<code>cnt</code>自增<code>1</code>，并且更新结果<code>res</code>，然后对其周围四个相邻位置分别调用递归函数即可，代码如下：</p>
<h4 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; dirs&#123;&#123;<span class="number">0</span>, <span class="number">-1</span>&#125;, &#123;<span class="number">-1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;&#125;;</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxAreaOfIsland</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> m = grid.size(), n = grid[<span class="number">0</span>].size(), res = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</div><div class="line">                <span class="keyword">if</span> (grid[i][j] != <span class="number">1</span>) <span class="keyword">continue</span>;</div><div class="line">                <span class="keyword">int</span> cnt = <span class="number">0</span>;</div><div class="line">                helper(grid, i, j, cnt, res);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">helper</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; grid, <span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">int</span>&amp; cnt, <span class="keyword">int</span>&amp; res)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> m = grid.size(), n = grid[<span class="number">0</span>].size();</div><div class="line">        <span class="keyword">if</span> (i &lt; <span class="number">0</span> || i &gt;= m || j &lt; <span class="number">0</span> || j &gt;= n || grid[i][j] &lt;= <span class="number">0</span>) <span class="keyword">return</span>;</div><div class="line">        res = max(res, ++cnt);</div><div class="line">        grid[i][j] *= <span class="number">-1</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> dir : dirs) &#123;</div><div class="line">            helper(grid, i + dir[<span class="number">0</span>], j + dir[<span class="number">1</span>], cnt, res);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="swift"><a href="#swift" class="headerlink" title="swift"></a>swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> dirs = [[<span class="number">0</span>, -<span class="number">1</span>], [-<span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>], [<span class="number">1</span>, <span class="number">0</span>]]</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">maxAreaOfIsland</span><span class="params">(<span class="number">_</span> grid: [[Int]])</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">let</span> m = grid.<span class="built_in">count</span>, n = grid[<span class="number">0</span>].<span class="built_in">count</span></div><div class="line">        <span class="keyword">var</span> grid = grid</div><div class="line">        <span class="keyword">var</span> res = <span class="number">0</span></div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;m &#123;</div><div class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="number">0</span>..&lt;n &#123;</div><div class="line">                <span class="keyword">if</span> grid[i][j] != <span class="number">1</span> &#123; <span class="keyword">continue</span> &#125;</div><div class="line">                <span class="keyword">var</span> cnt = <span class="number">0</span></div><div class="line">                helper(&amp;grid, i: i, j: j, cnt: &amp;cnt, res: &amp;res)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">helper</span><span class="params">(<span class="number">_</span> grid: <span class="keyword">inout</span> [[Int]], i: Int, j: Int, cnt: <span class="keyword">inout</span> Int, res: <span class="keyword">inout</span> Int)</span></span> &#123;</div><div class="line">        <span class="keyword">let</span> m = grid.<span class="built_in">count</span>, n = grid[<span class="number">0</span>].<span class="built_in">count</span></div><div class="line">        <span class="keyword">if</span> i &lt; <span class="number">0</span> || i &gt;= m || j &lt; <span class="number">0</span> || j &gt;= n || grid[i][j] &lt;= <span class="number">0</span> &#123; <span class="keyword">return</span> &#125;</div><div class="line">        cnt+=<span class="number">1</span></div><div class="line">        res = <span class="built_in">max</span>(res, cnt)</div><div class="line">        grid[i][j] *= -<span class="number">1</span></div><div class="line">        <span class="keyword">for</span> dir <span class="keyword">in</span> dirs &#123;</div><div class="line">            helper(&amp;grid, i: i + dir[<span class="number">0</span>], j: j + dir[<span class="number">1</span>], cnt: &amp;cnt, res: &amp;res)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="解法二："><a href="#解法二：" class="headerlink" title="解法二："></a>解法二：</h3><p>下面是迭代的写法，<strong>BFS</strong>遍历，使用<strong>queue</strong>来辅助运算，思路没啥太大区别，都是套路，都是模版，往里套就行了，参见代码如下：</p>
<h4 id="C-1"><a href="#C-1" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; dirs&#123;&#123;<span class="number">0</span>, <span class="number">-1</span>&#125;, &#123;<span class="number">-1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;&#125;;</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">maxAreaOfIsland</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> m = grid.size(), n = grid[<span class="number">0</span>].size(), res = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</div><div class="line">                <span class="keyword">if</span> (grid[i][j] != <span class="number">1</span>) <span class="keyword">continue</span>;</div><div class="line">                <span class="keyword">int</span> cnt = <span class="number">0</span>;</div><div class="line">                <span class="built_in">queue</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; q&#123;&#123;&#123;i, j&#125;&#125;&#125;;</div><div class="line">                grid[i][j] *= <span class="number">-1</span>;</div><div class="line">                <span class="keyword">while</span> (!q.empty()) &#123;</div><div class="line">                    <span class="keyword">auto</span> t = q.front(); q.pop();</div><div class="line">                    res = max(res, ++cnt);</div><div class="line">                    <span class="keyword">for</span>  (<span class="keyword">auto</span> dir : dirs) &#123;</div><div class="line">                        <span class="keyword">int</span> x = t.first + dir[<span class="number">0</span>], y = t.second + dir[<span class="number">1</span>];</div><div class="line">                        <span class="keyword">if</span> (x &lt; <span class="number">0</span> || x &gt;= m || y &lt; <span class="number">0</span> || y &gt;= n || grid[x][y] &lt;= <span class="number">0</span>) <span class="keyword">continue</span>;</div><div class="line">                        grid[x][y] *= <span class="number">-1</span>;</div><div class="line">                        q.push(&#123;x, y&#125;);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://keshiim.github.io/2017/11/17/Swift-property/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zheng keshiim">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Farmer, keshiim 播种太阳🌞">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/17/Swift-property/" itemprop="url">Swift：属性</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-17T18:20:00+08:00">
                2017-11-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习/" itemprop="url" rel="index">
                    <span itemprop="name">学习</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/17/Swift-property/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/11/17/Swift-property/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/11/17/Swift-property/" class="leancloud_visitors" data-flag-title="Swift：属性">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>属性</strong>可以将值与特定的类、结构体或者是枚举联系起来。<em>存储属性</em> 会存储 <em>常量或变量</em> 作为实例的一部分，反之<em>计算属性</em>会计算（而不是存储）值。<strong>计算属性</strong> <em>可以由类、结构体和枚举定义</em>。<br><del>存储属性只能由类和结构体定义</del>。</p>
<p>通常存储属性和计算属性通常和特定类型的<strong>实例相关联</strong>。总之，属性也可以与<strong>类型本身</strong>相关联。这种属性就是所谓的<strong>类型属性</strong>。</p>
<p>另外，你也<em>可以定义属性观察器来检查属性中值的变化</em>，这样你就可以用自定义的行为来响应。<strong>属性观察器</strong>可以被添加到你自己定义的存储属性中，也可以添加到子类从他的父类那里所继承来的属性中。</p>
<h3 id="存储属性"><a href="#存储属性" class="headerlink" title="存储属性"></a>存储属性</h3><p>在其最简单的形式下，<em>存储属性</em>是一个作为特定类和结构体实例一部分的<em>常量或变量</em>。存储属性要么是<em>变量</em>存储属性（由 <code>var</code>  关键字引入）要么是<em>常量</em>存储属性（由 let  关键字引入）。</p>
<p>你可以为存储属性提供一个默认值作为它定义的一部分。你也可以在初始化的过程中设置和修改存储属性的初始值。正如在初始化中分配常量属性所述，这一点对于<strong>常量存储属性</strong>也成立。</p>
<p>下面的例子定义了一个名为 <code>FixedLengthRange</code> 的结构体，它描述了一个一旦被创建长度就不能改变的整型值域：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">FixedLengthRange</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> firstValue: <span class="type">Int</span></div><div class="line">    <span class="keyword">let</span> length: <span class="type">Int</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> rangeOfThreeItems = <span class="type">FixedLengthRange</span>(firstValue: <span class="number">0</span>, length: <span class="number">3</span>)</div><div class="line"><span class="comment">// the range represents integer values 0, 1, and 2</span></div><div class="line">rangeOfThreeItems.firstValue = <span class="number">6</span></div><div class="line"><span class="comment">// the range now represents integer values 6, 7, and 8</span></div></pre></td></tr></table></figure>
<p><code>FixedLengthRange</code> 的实例有一个名为 <code>firstValue</code> 的变量存储属性和一个名为 <code>length</code> 的常量存储属性。在上面的例子中，当新的值域创建时 <code>length</code> 已经被<strong>创建并且不能再修改</strong>，因为这是一个<em>常量属性</em>。</p>
<h4 id="常量结构体实例的存储属性"><a href="#常量结构体实例的存储属性" class="headerlink" title="常量结构体实例的存储属性"></a>常量结构体实例的存储属性</h4><p>当你创建了一个结构体的实例并且把这个<em>实例赋给常量</em>，你不能修改这个实例的<em>属性</em>， <em>即使是声明为变量的属性：</em></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> rangeOfFourItems = <span class="type">FixedLengthRange</span>(firstValue: <span class="number">0</span>, length: <span class="number">4</span>)</div><div class="line">rangeOfFourItems.firstValue = <span class="number">6</span> </div><div class="line"><span class="comment">//compile error: cannot assign to property: 'rangeOfFourItems' is a 'let' constant</span></div></pre></td></tr></table></figure>
<p>由于 <code>rangeOfFourItems</code> 被声明为常量（用 <code>let</code> 关键字），我们不能改变其 <code>firstValue</code> 属性，即使 <code>firstValue</code> 是一个变量属性。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="string">"这是由于结构体是值类型。当一个值类型的实例被标记为常量时，该实例的其他属性也均为常量。"</span></div><div class="line"><span class="string">"对于类来说则不同，它是引用类型。如果你给一个常量赋值引用类型实例，你仍然可以修改那个实例的变量属性。"</span></div></pre></td></tr></table></figure>
<h4 id="延迟存储属性"><a href="#延迟存储属性" class="headerlink" title="延迟存储属性"></a>延迟存储属性</h4><p><em>延迟存储属性</em>的初始值在其第一次使用时才进行计算。你可以通过在其声明前标注 <code>lazy</code> 修饰语来表示一个延迟存储属性。</p>
<blockquote>
<p>你必须把延迟存储属性声明为变量（使用 <code>var</code> 关键字），因为它的初始值可能在实例初始化完成之前无法取得。常量属性则必须在初始化完成之前有值，因此不能声明为延迟。</p>
</blockquote>
<p>延时属性的使用场景：一个属性的初始值可能依赖于某些外部因素，当这些外部因素的值只有在实例的初始化完成后才能得到时，延迟属性就可以发挥作用了。而当属性的初始值需要执行复杂或代价高昂的配置才能获得，你又想要在需要时才执行，延迟属性就能够派上用场了。</p>
<p>下面这个栗子使用了一个延迟存储属性来避免复杂类不必要的初始化。这个例子定义了两个名为 <code>DataImporter</code>和 <code>DataManager</code> 的类：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataImporter</span> </span>&#123;</div><div class="line">    </div><div class="line">    <span class="comment">//DataImporter is a class to import data from an external file.</span></div><div class="line">    <span class="comment">//The class is assumed to take a non-trivial amount of time to initialize.</span></div><div class="line">    </div><div class="line">    <span class="keyword">var</span> fileName = <span class="string">"data.txt"</span></div><div class="line">    <span class="comment">// the DataImporter class would provide data importing functionality here</span></div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataManager</span> </span>&#123;</div><div class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> importer = <span class="type">DataImporter</span>()</div><div class="line">    <span class="keyword">var</span> data = [<span class="type">String</span>]()</div><div class="line">    <span class="comment">// the DataManager class would provide data management functionality here</span></div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="keyword">let</span> manager = <span class="type">DataManager</span>()</div><div class="line">manager.data.append(<span class="string">"Some data"</span>)</div><div class="line">manager.data.append(<span class="string">"Some more data"</span>)</div><div class="line"><span class="comment">// the DataImporter instance for the importer property has not yet been created</span></div></pre></td></tr></table></figure>
<p>下面👇是一堆很啰嗦的业务描述：<br>类 <code>DataManager</code> 有一个名为 <code>data</code> 的存储属性，它被初始化为一个空的新 <code>String</code> 数组。尽管它的其余功能没有展示出来，还是可以知道类 <code>DataManager</code> 的目的是管理并提供访问这个 <code>String</code> 数组的方法。</p>
<p><code>DataManager</code> 类的功能之一是<em>从文件导入数据</em>。此功能由 <code>DataImporter</code> 类提供，它假定为需要一定时间来进行初始化。这大概是因为 <code>DataImporter</code> 实例在进行初始化的时候需要打开文件并读取其内容到内存中。</p>
<p><code>DataManager</code> 实例并不要从文件导入数据就可以管理其数据的情况是有可能发生的，所以当 <code>DataManager</code> 本身创建的时候没有必要去再创建一个新的 <code>DataImporter</code> 实例。反之，在 <code>DataImporter</code> 第一次被使用的时候再创建它才更有意义。</p>
<p>因为它被 <code>lazy</code> 修饰符所标记，只有在 <code>importer</code> 属性第一次被访问时才会创建 <code>DataManager</code> 实例，比如当查询它的 <code>fileName</code> 属性时：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">print</span>(manager.importer.fileName)</div><div class="line"><span class="comment">// the DataImporter instance for the importer property has now been created</span></div><div class="line"><span class="comment">// prints "data.txt"</span></div></pre></td></tr></table></figure>
<blockquote>
<p>注意：如果被标记为 <code>lazy</code> 修饰符的属性同时<em>被多个线程访问并且属性</em>还没有<strong>被初始化</strong>，则无法保证属性只初始化一次。</p>
</blockquote>
<h4 id="存储属性与实例变量"><a href="#存储属性与实例变量" class="headerlink" title="存储属性与实例变量"></a>存储属性与实例变量</h4><p>如果你有 Objective-C 的开发经验，那你应该知道在类实例里有<em>两种方法来存储值和引用</em>。另外，你还可以使用<em>实例变量</em>作为属性中所储存的值的备份存储。</p>
<p>Swift 把这些概念都统一到了属性声明里。Swift 属性没有与之相对应的实例变量，并且属性的后备存储不能被直接访问。这避免了不同环境中对值的访问的混淆并且将属性的声明简化为一条单一的、限定的语句。所有关于<strong>属性的信息——包括它的名字，类型和内存管理特征——都作为类的定义放在了同一个地方</strong>。</p>
<h3 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h3><p>除了存储属性，<em>类、结构体和枚举</em>也能够定义<strong>计算属性</strong>，而它实际并不存储值。相反，他们提供一个读取器和一个可选的设置器来间接得到和设置其他的属性和值。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> x = <span class="number">0.0</span>, y = <span class="number">0.0</span></div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Size</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> width = <span class="number">0.0</span>, height = <span class="number">0.0</span></div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Rect</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> origin = <span class="type">Point</span>()</div><div class="line">    <span class="keyword">var</span> size = <span class="type">Size</span>()</div><div class="line">    <span class="keyword">var</span> center: <span class="type">Point</span> &#123;</div><div class="line">        <span class="keyword">get</span> &#123;</div><div class="line">            <span class="keyword">let</span> centerX = origin.x + (size.width / <span class="number">2</span>)</div><div class="line">            <span class="keyword">let</span> centerY = origin.y + (size.height / <span class="number">2</span>)</div><div class="line">            <span class="keyword">return</span> <span class="type">Point</span>(x: centerX, y: centerY)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">set</span>(newCenter) &#123;</div><div class="line">            origin.x = newCenter.x - (size.width / <span class="number">2</span>)</div><div class="line">            origin.y = newCenter.y - (size.height / <span class="number">2</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> square = <span class="type">Rect</span>(origin: <span class="type">Point</span>(x: <span class="number">0.0</span>, y: <span class="number">0.0</span>),</div><div class="line">    size: <span class="type">Size</span>(width: <span class="number">10.0</span>, height: <span class="number">10.0</span>))</div><div class="line"><span class="keyword">let</span> initialSquareCenter = square.center</div><div class="line">square.center = <span class="type">Point</span>(x: <span class="number">15.0</span>, y: <span class="number">15.0</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"square.origin is now at (<span class="subst">\(square.origin.x)</span>, <span class="subst">\(square.origin.y)</span>)"</span>)</div><div class="line"><span class="comment">// prints "square.origin is now at (10.0, 10.0)"</span></div></pre></td></tr></table></figure>
<p>这个例子定义了三个结构体来处理几何图形：</p>
<ul>
<li><code>Point</code> 封装了一个 <code>(x,y)</code> 坐标;</li>
<li><code>Size</code> 封装了一个 <code>width</code> 和 <code>height</code> ;</li>
<li><code>Rect</code> 封装了一个长方形包括原点和大小。</li>
</ul>
<p><code>Rect</code> 结构体还提供了一个名为 <code>center</code> 的计算属性。 <code>Rect</code> 的当前中心位置由它的 <code>origin</code> 和 <code>size</code> 决定，所以你不需要把中心点作为一个明确的 <code>Point</code> 值来存储。相反， <code>Rect</code> 为名为 <code>center</code> 的计算变量定义了一个定制的读取器（ <code>getter</code> ）和设置器（ <code>setter</code> ），来允许你使用该长方形的 <code>center</code> ，就好像它是一个真正的存储属性一样。</p>
<p>前面的例子创建了一个名为 <code>square</code> 的新 <code>Rect</code> 变量。 <code>square</code> 变量以 <code>(0,0)</code> 为中心点，宽和高为 <code>10</code> 初始化。这个方形在下面的图像中以蓝色方形区域表示。</p>
<p>一堆啰嗦的业务blabla:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">前面的例子创建了一个名为 square 的新 Rect 变量。 square 变量以 (0,0) 为中心点，</div><div class="line">宽和高为 10 初始化。这个方形在下面的图像中以蓝色方形区域表示。</div><div class="line"></div><div class="line">square 变量的 center 属性通过点操作符（ square. center ）来访问，</div><div class="line">通过调用 center 的读取器，来得到当前的属性值。而读取器实际上是计算并返回一个新的 Point </div><div class="line">来表示这个方形区域的中心，而不是返回一个已存在的值。如上边你看到的，</div><div class="line">getter正确返回了一个值为（ 5，5 ）的中心点。</div><div class="line"></div><div class="line">然后 center 属性被赋予新值（ 15，15 ），使得该方形区域被移动到了右上方，</div><div class="line">到达下图中如黄色区域所在的新位置。设置 center 属性调用 center 的设置器方法，</div><div class="line">通过修改 origin 存储属性中 x 和 y 的值，将该正方形移动到新位置。</div></pre></td></tr></table></figure>
<p><img style="margin: auto" src="/2017/11/17/Swift-property/computedProperties_2x-1.png" alt="computedProperties_2x-1" title="图示 Square"></p>
<h4 id="简写设置器（setter）声明"><a href="#简写设置器（setter）声明" class="headerlink" title="简写设置器（setter）声明"></a>简写设置器（setter）声明</h4><p>如果一个计算属性的<strong>设置器</strong>没有为将要被设置的值定义一个<em>指定名字</em>，那么他将被默认命名为 <code>newValue</code> 。下面是结构体 <code>Rect</code> 的另一种写法，其中利用了简写<strong>设置器</strong>声明的特性。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">AlternativeRect</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> origin = <span class="type">Point</span>()</div><div class="line">    <span class="keyword">var</span> size = size()</div><div class="line">    <span class="keyword">var</span> center: <span class="type">Point</span> &#123;</div><div class="line">        <span class="keyword">get</span> &#123;</div><div class="line">            <span class="keyword">let</span> centerX = origin.x + (size.width / <span class="number">2</span>)</div><div class="line">            <span class="keyword">let</span> centerY = origin.y + (size.height / <span class="number">2</span>)</div><div class="line">            <span class="keyword">return</span> <span class="type">Point</span>(x: centerX, y: centerY)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">set</span> &#123;</div><div class="line">            origin.x = newValue.x - (size.width / <span class="number">2</span>)</div><div class="line">            origin.y = newValue.y - (size.height / <span class="number">2</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="只读计算属性"><a href="#只读计算属性" class="headerlink" title="只读计算属性"></a>只读计算属性</h4><p>一个有读取器但是没有设置器的计算属性就是所谓的<em>只读计算属性</em>。只读计算属性返回一个值，也可以通过点语法访问，但是不能被修改为另一个值。</p>
<blockquote>
<p>注意:<br>你必须用 <code>var</code> 关键字定义计算属性——<strong>包括只读计算属性</strong>——为变量属性，因为它们的值不是固定的。 <code>let</code> 关键字只用于常量属性，用于明确那些值一旦作为实例初始化就不能更改。</p>
</blockquote>
<p>你可以通过去掉 <code>get</code> 关键字和他的大扩号来简化只读计算属性的声明：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Cuboid</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> width = <span class="number">0.0</span>, height = <span class="number">0.0</span>, depth = <span class="number">0.0</span></div><div class="line">    <span class="keyword">var</span> volume: <span class="type">Double</span> &#123;</div><div class="line">        <span class="keyword">return</span> width * height * depth</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> fourByFiveByTwo = <span class="type">Cuboid</span>(width: <span class="number">4.0</span>, height: <span class="number">5.0</span>, depth: <span class="number">2.0</span>)</div><div class="line"><span class="built_in">print</span>(<span class="string">"the volume of fourByFiveByTwo is <span class="subst">\(fourByFiveByTwo.volume)</span>"</span>)</div><div class="line"><span class="comment">// prints "the volume of fourByFiveByTwo is 40.0"</span></div></pre></td></tr></table></figure>
<p>这个例子定义了一个名为 <code>Cuboid</code> 的新结构体，它代表了一个有 <code>width</code> ， <code>height</code> 和 <code>depth</code> 属性的三维长方形结构。这个结构体还有一个名为 <code>volume</code> 的只读计算属性，它计算并返回长方体的当前体积。对于 <code>volume</code> 属性来说可被设置并没有意义，因为它会明确 <code>width</code> ， <code>height</code> 和 <code>depth</code> 中哪个值用在特定的 <code>volume</code> 值中，对 <code>Cuboid</code> 来说提供一个只读计算属性来让外部用户来发现它的当前计算体积就显得很有用了。</p>
<h3 id="属性观察者"><a href="#属性观察者" class="headerlink" title="属性观察者"></a>属性观察者</h3><p>属性观察者会观察并对属性值的变化做出回应。每当一个属性的值被设置时，属性观察者都会被调用，即使这个值与该属性当前的值相同。你可以为你定义的<em>任意存储属性</em>添加属性观察者，<strong>除了延迟存储属性</strong>。</p>
<blockquote>
<p>你不需要为非重写的计算属性定义属性观察者，因为你可以在计算属性的设置器里直接观察和相应它们值的改变。</p>
</blockquote>
<p>你可以选择将这些观察者或其中之一定义在属性上：</p>
<ul>
<li>willSet 会在该值被存储之前被调用。</li>
<li>didSet 会在一个新值被存储后被调用。</li>
</ul>
<p>如果你实现了一个 <code>willSet</code> 观察者，新的属性值会以<strong>常量形式</strong>参数传递。你可以在你的 <code>willSet</code> 实现中为这个参数定义名字。如果你没有为它命名，那么它会使用默认的名字 <code>newValue</code> 。</p>
<p>同样，如果你实现了一个 <code>didSet</code>观察者，一个包含旧属性值的<strong>常量形式</strong>参数将会被传递。你可以为它命名，也可以使用默认的形式参数名 <code>oldValue</code> 。如果你在属性自己的 <code>didSet</code> 观察者里给自己赋值，<em>你赋值的新值就会取代刚刚设置的值</em>。</p>
<blockquote>
<p>注意：<br>父类属性的 <code>willSet</code> 和 <code>didSet</code> 观察者<strong>会在子类初始化器中设置时被调用</strong>。它们不会在类的父类初始化器调用中设置其自身属性时被调用。</p>
</blockquote>
<p>这里有一个关于 <code>willSet</code> 和 <code>didSet</code> 的使用栗子。下面的栗子定义了一个名为 <code>StepCounter</code> 的新类，它追踪人散步的总数量。这个类可能会用于从计步器或者其他计步工具导入数据来追踪人日常的锻炼情况。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">StepCounter</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> totalSteps: <span class="type">Int</span> = <span class="number">0</span> &#123;</div><div class="line">        <span class="keyword">willSet</span>(newTotalSteps) &#123;</div><div class="line">            <span class="built_in">print</span>(<span class="string">"About to set totalSteps to <span class="subst">\(newTotalSteps)</span>"</span>)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">didSet</span> &#123;</div><div class="line">            <span class="keyword">if</span> totalSteps &gt; oldValue  &#123;</div><div class="line">                <span class="built_in">print</span>(<span class="string">"Added <span class="subst">\(totalSteps - oldValue)</span> steps"</span>)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> stepCounter = <span class="type">StepCounter</span>()</div><div class="line">stepCounter.totalSteps = <span class="number">200</span></div><div class="line"><span class="comment">// About to set totalSteps to 200</span></div><div class="line"><span class="comment">// Added 200 steps</span></div><div class="line">stepCounter.totalSteps = <span class="number">360</span></div><div class="line"><span class="comment">// About to set totalSteps to 360</span></div><div class="line"><span class="comment">// Added 160 steps</span></div><div class="line">stepCounter.totalSteps = <span class="number">896</span></div><div class="line"><span class="comment">// About to set totalSteps to 896</span></div><div class="line"><span class="comment">// Added 536 steps</span></div></pre></td></tr></table></figure>
<p><code>StepCounter</code> 类声明了一个 <code>Int</code> 类型的 <code>totalSteps</code> 属性。这是一个包含了 <code>willSet</code> 和 <code>didSet</code> 观察者的储存属性。<code>totalSteps</code> 的 <code>willSet</code> 和 <code>didSet</code> 观察者会在每次属性被赋新值的时候调用。就算新值与当前值完全相同也会如此。</p>
<p>栗子中的 <code>willSet</code> 观察者为增量的新值使用自定义的形式参数名 <code>newTotalSteps</code> ，它只是简单的打印出将要设置的值。</p>
<p><code>didSet</code> 观察者在 <code>totalSteps</code> 的值更新后调用。它用旧值对比 <code>totalSteps</code> 的新值。如果总步数增加了，就打印一条信息来表示接收了多少新的步数。 <code>didSet</code> 观察者不会提供自定义的形式参数名给旧值，而是使用 <code>oldValue</code> 这个默认的名字。</p>
<h3 id="全局和局部变量"><a href="#全局和局部变量" class="headerlink" title="全局和局部变量"></a>全局和局部变量</h3><p>上边描述的<strong>计算属性</strong>和<strong>观察属性</strong>的能力同样对<em>全局变量和局部变量有效</em>。全局变量是定义在任何函数、方法、闭包或者类型环境之外的变量。局部变量是定义在函数、方法或者闭包环境之中的变量。</p>
<p>你在之前章节中所遇到的全局和局部变量都是<em>存储变量</em>。存储变量，类似于存储属性，为特定类型的值提供存储并且允许这个值被设置和取回。</p>
<p>总之，你同样可以定义计算属性以及给存储变量<em>定义观察者</em>，无论是全局还是局部环境。计算变量计算而不是存储值，并且与计算属性的写法一致。</p>
<blockquote>
<p>注意：<br><strong>全局常量和变量永远是延迟计算</strong>的，与延迟存储属性有着相同的行为。不同于延迟存储属性，全局常量和变量<strong>不需要标记 lazy</strong> 修饰符。</p>
</blockquote>
<h3 id="类型属性"><a href="#类型属性" class="headerlink" title="类型属性"></a>类型属性</h3><p>你同样可以定义属于类型本身的属性，不是这个类型的某一个实例的属性。这个属性只有一个拷贝，无论你创建了多少个类对应的实例。这样的属性叫做<strong>类型属性</strong>。</p>
<p>类型属性在定义那些对特定类型的所有实例都通用的值的时候很有用，比如实例要使用的常量属性（类似 C 里的<strong>静态常量</strong>），或者储存对这个类型的所有实例全局可见的值的存储属性（类似 C 里的<strong>静态变量</strong>）。</p>
<p><strong>存储类型属性可以是变量或者常量。计算类型属性总要被声明为变量属性，与计算实例属性一致。</strong></p>
<blockquote>
<p>不同于存储实例属性，你必须总是给存储类型属性一个默认值。这是因为类型本身不能拥有能够在初始化时给存储类型属性赋值的初始化器。</p>
<p>存储类型属性是在它们第一次访问时延迟初始化的。它们保证只会初始化一次，就算被多个线程同时访问，他们也不需要使用 <code>lazy</code> 修饰符标记。</p>
</blockquote>
<h4 id="类型属性语法"><a href="#类型属性语法" class="headerlink" title="类型属性语法"></a>类型属性语法</h4><p>在 C 和  Objective-C 中，你使用全局静态变量来定义一个与类型关联的<em>静态常量和变量</em>。在 Swift 中，总之，类型属性是写在类型的定义之中的，在类型的花括号里，并且每一个类型属性都显式地放在它支持的类型范围内。</p>
<p>使用 <code>static</code> 关键字来开一<em>类型属性</em>。 <em>对于类类型的计算类型属性，</em> 你可以使用 <code>class</code> 关键字<em>来允许子类重写父类的实现</em>。下面的栗子展示了存储和计算类型属性的语法：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SomeStructure</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">var</span> storedTypeProperty = <span class="string">"Some value."</span></div><div class="line">    <span class="keyword">static</span> <span class="keyword">var</span> computedTypeProperty: <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">SomeEnumeration</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">var</span> storedTypeProperty = <span class="string">"Some value."</span></div><div class="line">    <span class="keyword">static</span> <span class="keyword">var</span> computedTypeProperty: <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">6</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">var</span> storedTypeProperty = <span class="string">"Some value."</span></div><div class="line">    <span class="keyword">static</span> <span class="keyword">var</span> computedTypeProperty: <span class="type">Int</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">27</span></div><div class="line">    &#125;</div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">var</span> <span class="title">overrideableComputedTypeProperty</span>: <span class="title">Int</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">107</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="查询和设置类型属性"><a href="#查询和设置类型属性" class="headerlink" title="查询和设置类型属性"></a>查询和设置类型属性</h4><p>类型属性使用点语法来查询和设置。总之，类型属性在类里查询和设置，而不是这个类型的实例。举例来说：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">print</span>(<span class="type">SomeStructure</span>.storedTypeProperty)</div><div class="line"><span class="comment">// prints "Some value."</span></div><div class="line"><span class="type">SomeStructure</span>.storedTypeProperty = <span class="string">"Another value."</span></div><div class="line"><span class="built_in">print</span>(<span class="type">SomeStructure</span>.storedTypeProperty)</div><div class="line"><span class="comment">// prints "Another value."</span></div><div class="line"><span class="built_in">print</span>(<span class="type">SomeEnumeration</span>.computedTypeProperty)</div><div class="line"><span class="comment">// prints "6"</span></div><div class="line"><span class="built_in">print</span>(<span class="type">SomeClass</span>.computedTypeProperty)</div><div class="line"><span class="comment">// prints "27"</span></div></pre></td></tr></table></figure>
<p>接下来的栗子使用了两个存储类型属性作为建模一个为数字音频信道音频测量表的结构体的一部分。每一个频道都有一个介于 0 到 10 之间的数字音频等级。</p>
<p>下边的图例展示了这个音频频道如何组合建模一个立体声音频测量表。当频道的音频电平为 0，那个对应频道的灯就不会亮。当电平是 10 ，所有这个频道的灯都会亮。在这个图例里，左声道当前电平是 9 ，右声道的当前电平是 7 ：<br><img style="margin: auto" src="/2017/11/17/Swift-property/staticPropertiesVUMeter_2x.png" alt="staticPropertiesVUMeter_2x" title="声道图例"><br>上边描述的音频声道使用 <code>AudioChannel</code> 结构体来表示：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">AudioChannel</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">let</span> thresholdLevel = <span class="number">10</span></div><div class="line">    <span class="keyword">static</span> <span class="keyword">var</span> maxInputLevelForAllChannels = <span class="number">0</span></div><div class="line">    <span class="keyword">var</span> currentLevel: <span class="type">Int</span> = <span class="number">0</span> &#123;</div><div class="line">        <span class="keyword">didSet</span> &#123;</div><div class="line">            <span class="keyword">if</span> currentLevel &gt; <span class="type">AudioChannel</span>.thresholdLevel &#123;</div><div class="line">                <span class="comment">// cap the new audio level to the threshold level</span></div><div class="line">                currentLevel = <span class="type">AudioChannel</span>.thresholdLevel</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> currentLevel &gt; <span class="type">AudioChannel</span>.maxInputLevelForAllChannels &#123;</div><div class="line">                <span class="comment">// store this as the new overall maximum input level</span></div><div class="line">                <span class="type">AudioChannel</span>.maxInputLevelForAllChannels = currentLevel</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>AudioChannel</code> 结构体定义了两个存储类型属性来支持它的功能。第一个， <code>thresholdLevel</code> ，定义了最大限度电平。它是对所有 <code>AudioChannel</code> 实例来说是一个常量值 10 。（如下方描述的那样）如果传入音频信号值大于 10 ，则只会被限定在这个限定值上。</p>
<p>第二个类型属性是一个变量存储属性叫做 <code>maxInputLevelForAllChannels</code> 。它保持追踪任意 <code>AudioChannel</code> 实例接收到的最大输入值。它以 0 初始值开始。</p>
<p><code>AudioChannel</code> 结构体同样定义了存储实力属性叫做 <code>currentLevel</code> ，它表示声道的当前音频电平标量从 0 到 10 。</p>
<p><code>currentLevel</code> 属性有一个 <code>didSet</code> 属性观察者来检查每次 <code>currentLevel</code> 设定的值，这个观察者执行两个检查：</p>
<ul>
<li>如果 <code>currentLevel</code> 的新值比<strong>允许的限定值要大</strong>，属性观察者就限定 <code>currentLevel</code> 为 <code>thresholdLevel</code> ；</li>
<li>如果 <code>currentLevel</code> 的新值（任何限定之后）比之前任何 <code>AudioChannel</code> 实例接收的都高，属性观察者就在 <code>maxInputLevelForAllChannels</code> 类型属性里储存 <code>currentLevel</code> 的新值。</li>
</ul>
<blockquote>
<p>注意<br><strong>在这两个检查的第一个中， <code>didSet</code> 观察者设置 <code>currentLevel</code> 为不同的值。总之，它不会导致观察者的再次调用。</strong></p>
</blockquote>
<p>你可以使用 <code>AudioChannel</code> 结构体来创建两个新的音频声道 <code>leftChannel</code> 和 <code>rightChannel</code> ，来表示双声道系统的音频等级：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> leftChannel = <span class="type">AudioChannel</span>()</div><div class="line"><span class="keyword">var</span> rightChannel = <span class="type">AudioChannel</span>()</div></pre></td></tr></table></figure>
<p>1.如果你设置左声道的 <code>currentLevel</code> 为 7 ，你就会看到 <code>maxInputLevelForAllChannels</code> 类型属性被更新到了 7 ：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">leftChannel.currentLevel = <span class="number">7</span></div><div class="line"><span class="built_in">print</span>(leftChannel.currentLevel)</div><div class="line"><span class="comment">// prints "7"</span></div><div class="line"><span class="built_in">print</span>(<span class="type">AudioChannel</span>.maxInputLevelForAllChannels)</div><div class="line"><span class="comment">// prints "7"</span></div><div class="line">leftChannel.currentLevel = <span class="number">7</span></div><div class="line"><span class="built_in">print</span>(leftChannel.currentLevel)</div><div class="line"><span class="comment">// prints "7"</span></div><div class="line"><span class="built_in">print</span>(<span class="type">AudioChannel</span>.maxInputLevelForAllChannels)</div><div class="line"><span class="comment">// prints "7"</span></div></pre></td></tr></table></figure>
<p>2.如果你尝试去设置右声道的 <code>currentLevel</code> 到 11 ，你就会看到右声道的 <code>currentLevel</code> 属性被上限限制到了最大值 10 ，并且 <code>maxInputLevelForAllChannels</code> 类型属性被更新到了 10 ：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">rightChannel.currentLevel = <span class="number">11</span></div><div class="line"><span class="built_in">print</span>(rightChannel.currentLevel)</div><div class="line"><span class="comment">// prints "10"</span></div><div class="line"><span class="built_in">print</span>(<span class="type">AudioChannel</span>.maxInputLevelForAllChannels)</div><div class="line"><span class="comment">// prints "10"</span></div><div class="line">rightChannel.currentLevel = <span class="number">11</span></div><div class="line"><span class="built_in">print</span>(rightChannel.currentLevel)</div><div class="line"><span class="comment">// prints "10"</span></div><div class="line"><span class="built_in">print</span>(<span class="type">AudioChannel</span>.maxInputLevelForAllChannels)</div><div class="line"><span class="comment">// prints "10"</span></div></pre></td></tr></table></figure>
<blockquote>
<p>摘自：<a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/index.html#//apple_ref/doc/uid/TP40014097-CH3-ID0" target="_blank" rel="external">swift 官网</a><br>所有代码在Xcode9 Swift4 环境编译没问题，代码<a href="https://github.com/keshiim/LearnSwift4" target="_blank" rel="external">戳这里 https://github.com/keshiim/LearnSwift4</a></p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://keshiim.github.io/2017/11/17/Shortest-Word-Distance/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zheng keshiim">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Farmer, keshiim 播种太阳🌞">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/17/Shortest-Word-Distance/" itemprop="url">Leetcode-243 Shortest Word Distance</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-17T14:02:38+08:00">
                2017-11-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LeetCode/" itemprop="url" rel="index">
                    <span itemprop="name">LeetCode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/17/Shortest-Word-Distance/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/11/17/Shortest-Word-Distance/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/11/17/Shortest-Word-Distance/" class="leancloud_visitors" data-flag-title="Leetcode-243 Shortest Word Distance">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>Given a list of words and two words <em>word1</em> and <em>word2</em>, return the shortest distance between these two words in the list.</p>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Assume that words=[&quot;practice&quot;, &quot;makes&quot;, &quot;perfect&quot;, &quot;coding&quot;, &quot;makes&quot;]</div><div class="line">Given word1 = “coding”, word2 = “practice”, return 3.</div><div class="line">Given word1 = &quot;makes&quot;, word2 = &quot;coding&quot;, return 1.</div></pre></td></tr></table></figure>
<h3 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h3><p>You may <strong>assume</strong> that <em>word1</em> does not equal to <em>word2</em>, and <em>word1</em> and <em>word2</em> are both in the list.</p>
<hr>
<h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>这道题，首先是遍历一遍数组，我们把出现<em>word1</em>和<em>word2</em>的给定单词所有出现的位置分别存入两个数组里，然后我们对这两个数组进行两两比较更新结果，代码如下：</p>
<h3 id="解法1"><a href="#解法1" class="headerlink" title="解法1"></a>解法1</h3><h4 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">shortestDistance</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; words, <span class="built_in">string</span> word1, <span class="built_in">string</span> word2)</span> </span>&#123;</div><div class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; idx1, idx2;</div><div class="line">        <span class="keyword">int</span> res = INT_MAX;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; words.size(); i++) &#123;</div><div class="line">            <span class="keyword">if</span> (words[i] == word1) idx1.push_back(i);</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (words[i] == word2) idx2.push_back(i);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; idx1.size(); ++i) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; idx2.size(); ++j) &#123;</div><div class="line">                res = min(res, <span class="built_in">abs</span>(idx1[i] - idx2[j]));</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Swift"><a href="#Swift" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">shortestDistance</span><span class="params">(<span class="number">_</span> words: [String], word1: String, word2: String)</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">    <span class="keyword">var</span> idx1: [<span class="type">Int</span>] = [<span class="type">Int</span>](), idx2 = [<span class="type">Int</span>]()</div><div class="line">    <span class="keyword">var</span> res = <span class="type">Int</span>.<span class="built_in">max</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;words.<span class="built_in">count</span> &#123;</div><div class="line">        <span class="keyword">if</span> words[i] == word1 &#123; idx1.append(i) &#125;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> words[i] == word2 &#123; idx2.append(i) &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;idx1.<span class="built_in">count</span> &#123;</div><div class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="number">0</span>..&lt;idx2.<span class="built_in">count</span> &#123;</div><div class="line">            res = <span class="built_in">min</span>(res, <span class="built_in">abs</span>(idx1[i] - idx2[j]))</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res</div><div class="line">&#125;</div><div class="line"><span class="built_in">print</span>(shortestDistance([<span class="string">"practice"</span>, <span class="string">"makes"</span>, <span class="string">"perfect"</span>, <span class="string">"coding"</span>, <span class="string">"makes"</span>], word1: <span class="string">"makes"</span>, word2: <span class="string">"coding"</span>))</div></pre></td></tr></table></figure>
<h3 id="解法2"><a href="#解法2" class="headerlink" title="解法2"></a>解法2</h3><p>上面的那种方法并不高效，我们其实需要遍历一次数组就可以了，我们用两个变量<code>p1</code>, <code>p2</code>初始化为<code>-1</code>，然后我们遍历数组，遇到<em>单词1</em>，就将其位置存在<code>p1</code>里，若遇到<em>单词2</em>，就将其位置存在<code>p2</code>里，如果此时<code>p1, p2</code>都不为<code>-1</code>了，那么我们更新结果，参见代码如下：</p>
<h4 id="C-1"><a href="#C-1" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">shortestDistance</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; words, <span class="built_in">string</span> word1, <span class="built_in">string</span> word2)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> p1 = <span class="number">-1</span>, p2 = <span class="number">-1</span>, res = INT_MAX;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; words.size(); ++i) &#123;</div><div class="line">            <span class="keyword">if</span> (words[i] == word1) p1 = i;</div><div class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (words[i] == word2) p2 = i;</div><div class="line">            <span class="keyword">if</span> (p1 != <span class="number">-1</span> &amp;&amp; p2 != <span class="number">-1</span>) res = min(res, <span class="built_in">abs</span>(p1 - p2));</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Swift-1"><a href="#Swift-1" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">shortestDistance1</span><span class="params">(<span class="number">_</span> words: [String], word1: String, word2: String)</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">    <span class="keyword">var</span> idx1: <span class="type">Int</span> = -<span class="number">1</span>, idx2 = -<span class="number">1</span></div><div class="line">    <span class="keyword">var</span> res = <span class="type">Int</span>.<span class="built_in">max</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;words.<span class="built_in">count</span> &#123;</div><div class="line">        <span class="keyword">if</span> words[i] == word1 &#123; idx1 = i&#125;</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> words[i] == word2 &#123; idx2 = i&#125;</div><div class="line">        <span class="keyword">if</span> idx1 != -<span class="number">1</span> &amp;&amp; idx2 != -<span class="number">1</span> &#123;</div><div class="line">            res = <span class="built_in">min</span>(res, <span class="built_in">abs</span>(idx1 - idx2))</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res</div><div class="line">&#125;</div><div class="line"><span class="built_in">print</span>(shortestDistance1([<span class="string">"practice"</span>, <span class="string">"makes"</span>, <span class="string">"perfect"</span>, <span class="string">"coding"</span>, <span class="string">"makes"</span>], word1: <span class="string">"coding"</span>, word2: <span class="string">"practice"</span>))</div><div class="line"><span class="comment">// Print "3"</span></div></pre></td></tr></table></figure>
<h3 id="解法3"><a href="#解法3" class="headerlink" title="解法3"></a>解法3</h3><p>下面这种方法只用一个辅助变量<code>idx</code>，初始化为<code>-1</code>，然后遍历数组，如果遇到等于两个单词中的任意一个的单词，我们在看<code>idx</code>是否为<code>-1</code>，若不为<code>-1</code>，且指向的单词和当前遍历到的单词不同，我们更新结果，参见代码如下：</p>
<h4 id="C-2"><a href="#C-2" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">shortestDistance</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; words, <span class="built_in">string</span> word1, <span class="built_in">string</span> word2)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> idx = <span class="number">-1</span>, res = INT_MAX;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; words.size(); ++i) &#123;</div><div class="line">            <span class="keyword">if</span> (words[i] == word1 || words[i] == word2) &#123;</div><div class="line">                <span class="keyword">if</span> (idx != <span class="number">-1</span> &amp;&amp; words[idx] != words[i]) &#123;</div><div class="line">                    res = min(res, i - idx);</div><div class="line">                &#125;</div><div class="line">                idx = i;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Swift-2"><a href="#Swift-2" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">shortestDistance2</span><span class="params">(<span class="number">_</span> words: [String], word1: String, word2: String)</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">    <span class="keyword">var</span> idx = -<span class="number">1</span></div><div class="line">    <span class="keyword">var</span> res = <span class="type">Int</span>.<span class="built_in">max</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;words.<span class="built_in">count</span> &#123;</div><div class="line">        <span class="keyword">if</span> words[i] == word1 || words[i] == word2 &#123;</div><div class="line">            <span class="keyword">if</span> idx != -<span class="number">1</span> &amp;&amp; words[i] != words[idx] &#123;</div><div class="line">                res = <span class="built_in">min</span>(res, <span class="built_in">abs</span>(i - idx))</div><div class="line">            &#125;</div><div class="line">            idx = i</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res</div><div class="line">&#125;</div><div class="line"><span class="built_in">print</span>(shortestDistance2([<span class="string">"practice"</span>, <span class="string">"makes"</span>, <span class="string">"perfect"</span>, <span class="string">"coding"</span>, <span class="string">"makes"</span>], word1: <span class="string">"coding"</span>, word2: <span class="string">"practice"</span>))</div><div class="line"><span class="comment">// Prints "3"</span></div></pre></td></tr></table></figure>
<h3 id="参考资料："><a href="#参考资料：" class="headerlink" title="参考资料："></a>参考资料：</h3><blockquote>
<p><a href="https://leetcode.com/discuss/50234/ac-java-clean-solution" target="_blank" rel="external">https://leetcode.com/discuss/50234/ac-java-clean-solution</a><br><a href="https://leetcode.com/discuss/61820/java-only-need-to-keep-one-index" target="_blank" rel="external">https://leetcode.com/discuss/61820/java-only-need-to-keep-one-index</a></p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://keshiim.github.io/2017/11/16/Two-Sum/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zheng keshiim">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Farmer, keshiim 播种太阳🌞">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/16/Two-Sum/" itemprop="url">Leetcode-1 Two Sum</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-16T16:00:42+08:00">
                2017-11-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LeetCode/" itemprop="url" rel="index">
                    <span itemprop="name">LeetCode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/16/Two-Sum/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/11/16/Two-Sum/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/11/16/Two-Sum/" class="leancloud_visitors" data-flag-title="Leetcode-1 Two Sum">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p><a href="https://leetcode.com/problems/two-sum/description/" target="_blank" rel="external">Two Sum（两数之和）</a></p>
<p>Given an array of integers, return <strong>indices</strong> of the two numbers such that they add up to a specific target.<br>You may assume that each input would have <strong>exactly</strong> one solution, and you may not use the same element twice.</p>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Given nums = [2, 7, 11, 15], target = 9,</div><div class="line"></div><div class="line">Because nums[0] + nums[1] = 2 + 7 = 9,</div><div class="line">return [0, 1].</div></pre></td></tr></table></figure>
<hr>
<h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>咋一看这道题就知道用暴力迭代肯定能解决问题，但是LeetCode肯定不会接受这种暴力搜索这么简单的方法（其时间复杂度$O(n^2)$）。</p>
<h3 id="解法1"><a href="#解法1" class="headerlink" title="解法1"></a>解法1</h3><p>先遍历一遍数组，建立<code>map&lt;key=(数组值), vale=(索引)&gt;</code>数据。然后再遍历一遍，开始超找，找到则记录index。代码如下：</p>
<h4 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; twoSum(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> target) &#123;</div><div class="line">        <span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;m;</div><div class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; res;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.size(); i++) &#123;</div><div class="line">            m[nums[i]] = i;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.size(); i++) &#123;</div><div class="line">            <span class="keyword">int</span> t = target - nums[i];</div><div class="line">            <span class="keyword">if</span> (m.count(t) &amp;&amp; m[t] != i) &#123;</div><div class="line">                res.push_back(i);</div><div class="line">                res.push_back(m[t]);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Swift"><a href="#Swift" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">twoSum</span><span class="params">(<span class="number">_</span> nums: [Int], <span class="number">_</span> target: Int)</span></span> -&gt; [<span class="type">Int</span>] &#123;</div><div class="line">        <span class="keyword">var</span> <span class="built_in">map</span>: [<span class="type">Int</span>: <span class="type">Int</span>] = [:]</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;nums.<span class="built_in">count</span> &#123;</div><div class="line">            <span class="built_in">map</span>[nums[i]] = i</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">var</span> res = [<span class="type">Int</span>]()</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;nums.<span class="built_in">count</span> &#123;</div><div class="line">            <span class="keyword">let</span> t = target - nums[i]</div><div class="line">            <span class="keyword">if</span> <span class="keyword">let</span> index = <span class="built_in">map</span>[t], <span class="built_in">map</span>[t] != i &#123;</div><div class="line">                res.append(i)</div><div class="line">                res.append(index)</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="解法2"><a href="#解法2" class="headerlink" title="解法2"></a>解法2</h3><p>或者我们可以写的更加简洁一些，把两个for循环合并成一个：</p>
<h4 id="C-1"><a href="#C-1" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; twoSum(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> target) &#123;</div><div class="line">        <span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; m;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.size(); ++i) &#123;</div><div class="line">            <span class="keyword">if</span> (m.count(target - nums[i])) &#123;</div><div class="line">                <span class="keyword">return</span> &#123;i, m[target - nums[i]]&#125;;</div><div class="line">            &#125;</div><div class="line">            m[nums[i]] = i;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> &#123;&#125;;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Swift-1"><a href="#Swift-1" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">class Solution &#123;</div><div class="line">    func twoSum(_ nums: [Int], _ target: Int) -&gt; [Int] &#123;</div><div class="line">        var map: [Int: Int] = [:]</div><div class="line">        for i in 0..&lt;nums.count &#123;</div><div class="line">            if let index = map[target - nums[i]] &#123;</div><div class="line">                return [index, i]</div><div class="line">            &#125;</div><div class="line">            map[nums[i]] = i</div><div class="line">        &#125;</div><div class="line">        return []</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://keshiim.github.io/2017/11/16/Reshape-the-Matrix/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zheng keshiim">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Farmer, keshiim 播种太阳🌞">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/16/Reshape-the-Matrix/" itemprop="url">Leetcode-566 Reshape the Matrix</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-16T14:40:07+08:00">
                2017-11-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LeetCode/" itemprop="url" rel="index">
                    <span itemprop="name">LeetCode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/16/Reshape-the-Matrix/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/11/16/Reshape-the-Matrix/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/11/16/Reshape-the-Matrix/" class="leancloud_visitors" data-flag-title="Leetcode-566 Reshape the Matrix">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p><a href="https://leetcode.com/problems/reshape-the-matrix/description/" target="_blank" rel="external">Reshape the Matrix（重组矩阵）</a></p>
<p>In MATLAB, there is a very useful function called ‘reshape’, which can reshape a matrix into a new one with different size but keep its original data.</p>
<p>You’re given a matrix represented by a two-dimensional array, and two <strong>positive</strong> integers <strong>r</strong> and <strong>c</strong> representing the <strong>row</strong> number and <strong>column</strong> number of the wanted reshaped matrix, respectively.</p>
<p>The reshaped matrix need to be filled with all the elements of the original matrix in the same <strong>row-traversing</strong> order as they were.</p>
<p>If the ‘reshape’ operation with given parameters is possible and legal, output the new reshaped matrix; Otherwise, output the original matrix.</p>
<h3 id="Example1"><a href="#Example1" class="headerlink" title="Example1"></a>Example1</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Input: </div><div class="line">nums = </div><div class="line">[[1,2],</div><div class="line"> [3,4]]</div><div class="line">r = 1, c = 4</div><div class="line"></div><div class="line">Output: </div><div class="line">[[1,2,3,4]]</div><div class="line"></div><div class="line">Explanation:</div><div class="line">The row-traversing of nums is [1,2,3,4]. The new reshaped matrix is a 1 * 4 matrix, fill it row by row by using the previous list.</div></pre></td></tr></table></figure>
<h3 id="Example2"><a href="#Example2" class="headerlink" title="Example2"></a>Example2</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">Input: </div><div class="line">nums = </div><div class="line">[[1,2],</div><div class="line"> [3,4]]</div><div class="line">r = 2, c = 4</div><div class="line"></div><div class="line">Output: </div><div class="line">[[1,2],</div><div class="line"> [3,4]]</div><div class="line"> </div><div class="line">Explanation:</div><div class="line">There is no way to reshape a 2 * 2 matrix to a 2 * 4 matrix. So output the original matrix.</div></pre></td></tr></table></figure>
<h3 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h3><ol>
<li>The height and width of the given matrix is in range <code>[1, 100]</code>.</li>
<li>The given r and c are all positive.</li>
</ol>
<hr>
<h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>这道题让我们实现矩阵大小的重塑。<br><em>答题思路：</em> 对于这种二维数组大小重新分配的问题的关键就是<strong>对应位置的坐标转换</strong>，最直接的办法就是把原数组拉直，变成一条直线，然后再组成新数组。</p>
<h3 id="解法1"><a href="#解法1" class="headerlink" title="解法1"></a>解法1</h3><p>这道题我们先判断给定数组是否能重塑成给定的大小，就是看两者的元素个数是否相同，直接行数乘以列数即可，然后我们重建一个目标大小的数组，并开始遍历，对于每个位置，我们先转为拉之后的一维坐标，然后在算出在原数组中的对应位置复制过来即可，代码如下：</p>
<h4 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; matrixReshape(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; nums, <span class="keyword">int</span> r, <span class="keyword">int</span> c) &#123;</div><div class="line">        <span class="keyword">int</span> m = nums.size(), n = nums[<span class="number">0</span>].size();</div><div class="line">        <span class="keyword">if</span> (m * n != r * c) <span class="keyword">return</span> nums;</div><div class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; res(r, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(c));</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; r; i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; c; j++) &#123;</div><div class="line">                <span class="keyword">int</span> k = i * c + j;</div><div class="line">                res[i][j] = nums[k / n][k % n];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Swift"><a href="#Swift" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">matrixReshape</span><span class="params">(<span class="number">_</span> nums: [[Int]], <span class="number">_</span> r: Int, <span class="number">_</span> <span class="built_in">c</span>: Int)</span></span> -&gt; [[<span class="type">Int</span>]] &#123;</div><div class="line">    <span class="keyword">let</span> m = nums.<span class="built_in">count</span>, n = nums[<span class="number">0</span>].<span class="built_in">count</span></div><div class="line">    <span class="keyword">if</span> (m * n != r * <span class="built_in">c</span>) &#123; <span class="keyword">return</span> nums &#125;</div><div class="line">    <span class="keyword">var</span> res = [[<span class="type">Int</span>]](repeating: [<span class="type">Int</span>](repeating: <span class="number">0</span>, <span class="built_in">count</span>: <span class="built_in">c</span>), <span class="built_in">count</span>: r)</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;r &#123;</div><div class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="number">0</span>..&lt;<span class="built_in">c</span> &#123;</div><div class="line">            <span class="keyword">let</span> k = i * <span class="built_in">c</span> + j</div><div class="line">            res[i][j] = nums[k / n][k % n]</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res</div><div class="line">&#125;</div><div class="line"><span class="built_in">print</span>(matrixReshape([[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]], <span class="number">1</span>, <span class="number">4</span>))</div></pre></td></tr></table></figure>
<h3 id="解法2"><a href="#解法2" class="headerlink" title="解法2"></a>解法2</h3><p>下面这种方法整体思路和上面没啥区别，但是只使用了一个循环<strong>，直接就是遍历拉直后的一维数组的坐标</strong>，然后分别转换为两个二维数组的坐标进行赋值，参见代码如下：</p>
<h4 id="C-1"><a href="#C-1" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; matrixReshape(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; nums, <span class="keyword">int</span> r, <span class="keyword">int</span> c) &#123;</div><div class="line">        <span class="keyword">int</span> m = nums.size(), n = nums[<span class="number">0</span>].size();</div><div class="line">        <span class="keyword">if</span> (m * n != r * c) <span class="keyword">return</span> nums;</div><div class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; res(r, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(c));</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; r * c; i++) &#123;</div><div class="line">            res[i / c][i % c] = nums[i / n][i % n];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Swift-1"><a href="#Swift-1" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">matrixReshape</span><span class="params">(<span class="number">_</span> nums: [[Int]], <span class="number">_</span> r: Int, <span class="number">_</span> <span class="built_in">c</span>: Int)</span></span> -&gt; [[<span class="type">Int</span>]] &#123;</div><div class="line">    <span class="keyword">let</span> m = nums.<span class="built_in">count</span>, n = nums[<span class="number">0</span>].<span class="built_in">count</span></div><div class="line">    <span class="keyword">if</span> (m * n != r * <span class="built_in">c</span>) &#123; <span class="keyword">return</span> nums &#125;</div><div class="line">    <span class="keyword">var</span> res = [[<span class="type">Int</span>]](repeating: [<span class="type">Int</span>](repeating: <span class="number">0</span>, <span class="built_in">count</span>: <span class="built_in">c</span>), <span class="built_in">count</span>: r)</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;r*<span class="built_in">c</span> &#123;</div><div class="line">        res[i / <span class="built_in">c</span>][i % <span class="built_in">c</span>] = nums[i / n][i % n]</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res</div><div class="line">&#125;</div><div class="line"><span class="built_in">print</span>(matrixReshape([[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]], <span class="number">1</span>, <span class="number">4</span>))</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://keshiim.github.io/2017/11/15/Swift-class-struct/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zheng keshiim">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Farmer, keshiim 播种太阳🌞">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/15/Swift-class-struct/" itemprop="url">Swift：类和结构体</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-15T10:54:05+08:00">
                2017-11-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习/" itemprop="url" rel="index">
                    <span itemprop="name">学习</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/15/Swift-class-struct/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/11/15/Swift-class-struct/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/11/15/Swift-class-struct/" class="leancloud_visitors" data-flag-title="Swift：类和结构体">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>作为你程序代码的构建基础，<em>类</em>和<em>结构体</em>是一种多功能且灵活的<strong>构造体</strong>。通过使用与现存常量、变量、函数完全相同的语法来在类和结构体当中定义属性和方法以添加功能。</p>
<p>值得一提的是Swift不像其他的程序语言，不需要你为自定义类和结构体创建<strong>独立的*</strong>接口<em>和</em>实现文件<em>。在 Swift 中，你在一个文件中定义一个</em>类或者结构体*， 则系统将会自动生成面向其他代码的外部接口。</p>
<p>一个类的实例通常被称为对象。总之，Swift 的类和结构体在功能上要比其他语言中的更加<em>相近</em>，并且本章节所讨论的大部分功能都可以同时用在类和结构体的<strong>实例</strong>上。因此，我们使用更加通用的术语实例。</p>
<h3 id="类与结构体的对比"><a href="#类与结构体的对比" class="headerlink" title="类与结构体的对比"></a>类与结构体的对比</h3><p>在 Swift 中类和结构体有很多共同之处，它们都能：</p>
<ul>
<li>定义属性用来存储值；</li>
<li>定义方法用于提供功能；</li>
<li>定义下标脚本用来允许使用下标语法访问值；</li>
<li>定义初始化器用于初始化状态；</li>
<li>可以被扩展来默认所没有的功能；</li>
<li>遵循协议来针对特定类型提供标准功能。</li>
</ul>
<p>然后是，类有而结构体没有的<em>额外</em>功能：</p>
<ul>
<li>继承允许一个类继承另一个类的特征;</li>
<li>类型转换允许你在运行检查和解释一个类实例的类型；</li>
<li>反初始化器允许一个类实例释放任何其所被分配的资源；</li>
<li>引用计数允许不止一个对类实例的引用。</li>
</ul>
<h4 id="定义语法"><a href="#定义语法" class="headerlink" title="定义语法"></a>定义语法</h4><p>类与结构体有着相似的定义语法，你可以通过使用关键词 <code>class</code>来定义类使用 <code>struct</code>来定义结构体。并在一对大括号内定义它们的具体内容。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span> </span>&#123;</div><div class="line">    <span class="comment">//class definition goes here</span></div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SomeStruct</span> </span>&#123;</div><div class="line">    <span class="comment">//Structure definition goes here</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>无论你在何时定义了一个<strong>新的类</strong>或者<strong>结构体</strong>，实际上你定义了一个全新的 Swift 类型。请用 <code>UpperCamelCase</code> 驼峰命名法命名 (比如这里我们说到的 <code>SomeClass</code>和 <code>SomeStructure</code>)以符合 Swift 的字母大写风格（比如说 <code>String</code> ， <code>Int</code> 以及 <code>Bool</code>）。相反，对于属性和方法使用 <code>lowerCamelCase</code>命名法 (比如 <code>frameRate</code> 和 <code>incrementCount</code>)，以此来区别于类型名称。</p>
</blockquote>
<p>下面是<em>类定义</em>和<em>结构体定义</em>的栗子🌰：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Resolution</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> width = <span class="number">0</span></div><div class="line">    <span class="keyword">var</span> height = <span class="number">0</span></div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">VideoMode</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> resolution = <span class="type">Resolution</span>()</div><div class="line">    <span class="keyword">var</span> interlaced = <span class="literal">false</span></div><div class="line">    <span class="keyword">var</span> frameRate = <span class="number">0.0</span></div><div class="line">    <span class="keyword">var</span> name: <span class="type">String</span>?</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面这个这个例子定义了一个名叫 <code>Resolution</code>的新结构体，用来描述一个基于像素的显示器分辨率。这个结构体拥有两个存储属性名叫 <code>width</code>和 <code>height</code>，存储属性是绑定并储存在类或者结构体中的常量或者变量。这两个属性因以值 0 来初始化，所以它们的类型被推断为 <code>Int</code> 。</p>
<p>例子也定义了一个名叫 <code>VideoMode</code>的新类，用来描述一个视频显示的特定视频模式。这个类有四个变量存储属性。第一个， <code>resolution</code>,用 <code>Resolution</code>结构体实例来初始化，它使属性的类型被推断为 <code>Resolution</code>。对于其他三个属性来说，新的 <code>VideoMode</code>实例将会以 <code>interlaced</code>为 <code>false</code> (意思是“非隔行扫描视频”)，回放帧率为 0.0，和一个名叫 <code>name</code>的可选项 <code>String</code>值来初始化 。 <code>name</code>属性会自动被赋予一个空值 <code>nil</code> ，或“无 <code>name</code>值”，因为它是一个可选项。</p>
<h4 id="类与结构体实例"><a href="#类与结构体实例" class="headerlink" title="类与结构体实例"></a>类与结构体实例</h4><p><code>Resolution</code>结构体的定义和 <code>VideoMode</code>类的定义仅仅描述了什么是 <code>Resolution</code>或 <code>VideoMode</code>。它们自己并没有描述一个特定的分辨率或视频 <em>模式</em>。对此，你需要创建一个结构体或类的实例。<br>创建结构体和类的实例的语法是非常相似的：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> someResolution = <span class="type">Resolution</span>()</div><div class="line"><span class="keyword">let</span> somVideoMode = <span class="type">VideoMode</span>()</div></pre></td></tr></table></figure>
<p>结构体和类两者都能使用初始化器语法来生成新的实例。初始化器语法最简单的是在类或结构体名字后面接一个空的<strong>圆括号</strong>，例如 <code>Resolution()</code>或者 <code>VideoMode()</code>。这样就创建了一个新的类或者结构体的实例，任何属性都被初始化为它们的默认值。在初始化一章有对类和结构体的初始化更详尽的描述。</p>
<blockquote>
<p>此时，结构体<code>Resolution</code>已存在一个隐式的初始化方法，<code>let someResolution = Resolution(width: Int, height: Int)</code>方式调用</p>
</blockquote>
<h4 id="访问属性"><a href="#访问属性" class="headerlink" title="访问属性"></a>访问属性</h4><p>你可以<em>用点语法</em>来访问一个实例的属性。在点语法中，你只需在实例名后面书写属性名，用<code>(.)</code>来分开，无需空格：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">print</span>(<span class="string">"The width of someResolution is <span class="subst">\(someResolution.width)</span>"</span>)</div><div class="line"><span class="comment">// prints "The width of someResolution is 0"</span></div></pre></td></tr></table></figure>
<p>你可以继续下去来访问子属性，如 <code>VideoMode</code>中 <code>resolution</code>属性中的 <code>width</code>属性：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">print</span>(<span class="string">"The width of someVideoMode is <span class="subst">\(someVideoMode.resolution.width)</span>"</span>)</div><div class="line"><span class="comment">// prints "The width of someVideoMode is 0"</span></div></pre></td></tr></table></figure>
<p>你亦可以用点语法来指定一个新值到一个变量属性中：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">someVideoMode.resolution.width = <span class="number">1280</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"The width of someVideoMode is now <span class="subst">\(someVideoMode.resolution.width)</span>"</span>)</div><div class="line"><span class="comment">// prints "The width of someVideoMode is now 1280"</span></div></pre></td></tr></table></figure>
<blockquote>
<p>不同于 Objective-C，Swift <strong>允许你直接设置一个结构体属性中的子属性</strong>。在上述最后一个栗子中， <code>someVideoMode</code>的 <code>resolution</code>属性中的 <code>width</code>这个属性可以直接设置，不用你重新设置整个 <code>resolution</code> 属性到一个新值。</p>
</blockquote>
<h4 id="结构体类型的成员初始化器"><a href="#结构体类型的成员初始化器" class="headerlink" title="结构体类型的成员初始化器"></a>结构体类型的成员初始化器</h4><p><strong>所有的结构体</strong>都有一个自动生成的<strong>成员初始化器</strong>，你可以使用它来初始化新结构体实例的成员属性。新实例属性的初始化值可以通过属性名称传递到成员初始化器中：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> vga = <span class="type">Resolution</span>(width: <span class="number">640</span>, height: <span class="number">480</span>)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;与结构体不同，类实例不会接收默认的成员初始化器.&quot;</div></pre></td></tr></table></figure>
<h3 id="结构体和枚举是值类型"><a href="#结构体和枚举是值类型" class="headerlink" title="结构体和枚举是值类型"></a>结构体和枚举是值类型</h3><p><em>值类型</em>是一种当它被指定到常量或者变量，或者被传递给函数时<strong>会被拷贝</strong>的类型</p>
<p>其实，在之前的章节中我们已经大量使用了值类型。实际上，Swift 中所有的基本类型——<strong>整数，浮点数，布尔量，字符串，数组和字典——都是值类型</strong>，并且都以<em>结构体的形式在后台实现</em>。</p>
<p>Swift 中所有的<strong>结构体和枚举</strong>都是<em>值类型</em>，这意味着你所创建的任何<em>结构体和枚举实例</em>——和实例作为<em>属性</em>所包含的任意<em>值类型</em>——在代码传递中总是<strong>被拷贝</strong>的。</p>
<p>举个栗子，其使用了前面例子中的 <code>Resolution</code>结构体：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> hd = <span class="type">Resolution</span>(width: <span class="number">1920</span>, height: <span class="number">1080</span>)</div><div class="line"><span class="keyword">let</span> cinema = hd</div></pre></td></tr></table></figure>
<p>这个栗子声明了一个叫 <code>hd</code> 的常量,并且赋予它一个以全高清视频( <code>1920</code>像素宽乘以 <code>1080</code>像素高)宽和高初始化的 <code>Resolution</code>实例。</p>
<p>之后声明了一个叫 <code>cinema</code>的变量并且以当前 <code>hd</code> 的值进行初始化。因为 <code>Resolution</code>是一个结构体，现有实例的拷贝会被制作出来，然后这份新的拷贝就赋值给了 <code>cinema</code>。尽管 <code>hd</code>和 <code>cinema</code>有相同的像素宽和像素高，但是在<strong>后台中他们是两个完全不同的实例</strong>。</p>
<p>接下来，为了适应数字影院的放映需求 ( <code>2048</code>像素宽和 <code>1080</code>像素高)，我们把 <code>cinema</code>的属性 <code>width</code>修改为稍宽一点的 2K 标准：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">cinema.width = <span class="number">2048</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"cinema is now <span class="subst">\(cinema.width)</span> pixels wide"</span>) <span class="comment">//检查 cinema的 width属性发现已被改成 2048 </span></div><div class="line"><span class="comment">//println "cinema is now 2048 pixels wide"</span></div><div class="line"><span class="built_in">print</span>(<span class="string">"hd is still <span class="subst">\(hd.width)</span> pixels wide"</span>) <span class="comment">//原始 hd实例中的 width属性依旧是 1920：</span></div><div class="line"><span class="comment">// prints "hd is still 1920 pixels wide"</span></div></pre></td></tr></table></figure>
<p>这种行为规则同样适用于<strong>枚举</strong>。</p>
<h3 id="类是引用类型"><a href="#类是引用类型" class="headerlink" title="类是引用类型"></a>类是引用类型</h3><p>不同于值类型，在<em>引用类型</em>被赋值到一个常量，变量或者本身被传递到一个函数的时候它是<strong>不会被拷贝的</strong>。相对于拷贝，这里使用的是同一个对现存实例的<strong>引用</strong>。</p>
<p>这里有个栗子，使用上面定义的 <code>VideoMode</code>类：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> tenEighty = <span class="type">VideoMode</span>()</div><div class="line">tenEighty.resolution = hd</div><div class="line">tenEighty.interlaced = <span class="literal">true</span></div><div class="line">tenEighty.name = <span class="string">"1080i"</span></div><div class="line">tenEighty.frameRate = <span class="number">25.0</span></div></pre></td></tr></table></figure>
<p>这个栗子声明了一个新的名叫 <code>tenEighty</code>的常量并且设置它引用一个 <code>VideoMode</code>类的新实例，这个视频模式复制了之前的 <code>1920</code> 乘 <code>1080</code>的HD分辨率。同时设置为隔行扫描，并且给予了一个名字“ <code>1080i</code>”。最后，设置了 <code>25.0</code>帧每秒的帧率。</p>
<p>然后， <code>tenEighty</code>是赋给了一个名叫 <code>alsoEighty</code>的新常量，并且将其帧率修改：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> alsoTenEighty = tenEighty</div><div class="line">alsoTenEighty.frameRate = <span class="number">30.0</span></div></pre></td></tr></table></figure>
<p>因为<strong>类是引用类型</strong>， <code>tenEighty</code> 和 <code>alsoTenEighty</code>其实都是引用了相同的 <code>VideoMode</code>实例。实际上，它们只是相同实例的两个不同命名罢了。</p>
<p>下面， <code>tenEighty</code>的 <code>frameRate</code>属性展示了它正确地显示了来自于 <code>VideoMode</code>实例的新帧率：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">print</span>(<span class="string">"The frameRate property of tenEighty is now <span class="subst">\(tenEighty.frameRate)</span>"</span>)</div><div class="line"><span class="comment">// prints "The frameRate property of tenEighty is now 30.0"</span></div></pre></td></tr></table></figure>
<p>注意 <code>tenEighty</code>和 <code>alsoTenEighty</code>都被声明为<em>常量</em>。然而，你仍然能改变 <code>tenEighty.frameRate</code>和 <code>alsoTenEighty.frameRate</code>因为 <code>tenEighty</code>和 <code>alsoTenEighty</code>常量本身的值不会改变。 <code>tenEighty</code>和 <code>alsoTenEighty</code>本身是并没有存储 <code>VideoMode</code>实例 — 相反，它们两者都在后台<em>指向了</em> <code>VideoMode</code>实例。这是 <code>VideoMode</code>的 <code>frameRate</code>属性在改变而不是引用 <code>VideoMode</code>的常量的值在改变。</p>
<h4 id="特征运算符"><a href="#特征运算符" class="headerlink" title="特征运算符"></a>特征运算符</h4><p>因为类是<em>引用类型</em>，在后台有可能有很多常量和变量都是引用到了<strong>同一个类</strong>的实例。但相对于结构体和枚举来说并不是真的相同，因为它们在赋予给常量，变量或者被传递给一个函数时总是被拷贝过去的。</p>
<p>有时候找出两个常量或者变量是否引用自同一个类实例非常有用，为了允许这样，Swift提供了两个特点运算符：</p>
<ul>
<li>相同于   <code>(===)</code></li>
<li>不相同于 <code>(!==)</code></li>
</ul>
<p>利用这两个恒等运算符来检查两个常量或者变量是否引用相同的实例：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> tenEighty === alsoTenEighty &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"tenEighty and alsoTenEighty refer to the same VideoMode instance."</span>)</div><div class="line">&#125;</div><div class="line"><span class="comment">// prints "tenEighty and alsoTenEighty refer to the same VideoMode instance."</span></div></pre></td></tr></table></figure>
<p><strong>注意”相同于”(用三个等于号表示，或者说 ===)这与”等于”的意义不同(用两个等于号表示，或者说 ==)。</strong></p>
<ul>
<li>“相同于”意味着两个类类型常量或者变量引用自相同的实例；</li>
<li>“等于”意味着两个实例的在值上被视作“相等”或者“等价”，某种意义上的“相等”，就如同类设计者定义的那样。</li>
</ul>
<h4 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h4><p>如果你有过 C，C++ 或者 Objective-C 的经验，你可能知道这些语言使用可指针来引用内存中的地址。一个 Swift 的常量或者变量指向某个实例的引用类型和 C 中的指针类似，但是这并不是直接指向内存地址的指针，也不需要你书写星号<code>(*)</code>来明确你建立了一个引用。相反，这些引用被定义得就像 Swift 中其他常量或者变量一样。</p>
<h3 id="类和结构体之间的选择"><a href="#类和结构体之间的选择" class="headerlink" title="类和结构体之间的选择"></a>类和结构体之间的选择</h3><p>类和结构体都可以用来定义自定义的数据类型，作为你的程序代码构建块。</p>
<p>总之，结构体实例总是通过值来传递，而类实例总是通过引用来传递。这意味着他们分别适用于不同类型的任务。当你考虑你的工程项目中数据结构和功能的时候，你需要决定把每个数据结构定义成类还是结构体。</p>
<p>按照通用准则，当符合以下一条或多条情形时应考虑创建一个结构体：</p>
<ul>
<li>结构体的主要目的是为了封装一些相关的简单数据值；</li>
<li>当你在赋予或者传递结构实例时，有理由需要封装的数据值被拷贝而不是引用；</li>
<li>任何存储在结构体中的属性是值类型，也将被拷贝而不是被引用；</li>
<li>结构体不需要从一个已存在类型继承属性或者行为。</li>
</ul>
<p>合适的结构体候选者包括：</p>
<ul>
<li>几何形状的大小，可能封装了一个 <code>width</code>属性和 <code>height</code>属性，两者都为 <code>double</code>类型；</li>
<li>一定范围的路径，可能封装了一个 <code>start</code>属性和 <code>length</code>属性，两者为 <code>Int</code>类型；</li>
<li>三维坐标系的一个点，可能封装了 <code>x</code> , <code>y</code> 和 <code>z</code>属性，他们都是 <code>double</code>类型。</li>
</ul>
<p>在其他的情况下，定义一个类，并创建这个类的实例通过引用来管理和传递。事实上，大部分的自定义的数据结构应该是类，而不是结构体。</p>
<h3 id="字符串，数组和字典的赋值与拷贝行为"><a href="#字符串，数组和字典的赋值与拷贝行为" class="headerlink" title="字符串，数组和字典的赋值与拷贝行为"></a>字符串，数组和字典的赋值与拷贝行为</h3><p>Swift 的 <code>String</code> , <code>Array</code> 和 <code>Dictionary</code>类型是作为结构体来实现的，这意味着字符串，数组和字典在它们被赋值到一个新的常量或者变量，亦或者它们本身被传递到一个函数或方法中的时候，其实是传递了<strong>拷贝</strong>。</p>
<p>这种行为不同于基础库中的 <code>NSString</code>, <code>NSArray</code>和 <code>NSDictionary</code>，它们是作为<strong>类</strong>来实现的，而不是结构体。 <code>NSString</code> , <code>NSArray</code> 和 <code>NSDictionary</code>实例总是作为一个已存在实例的<strong>引用</strong>而不是拷贝来赋值和传递。</p>
<blockquote>
<p>注意：在上述有关字符串，数组和字典“拷贝”的描述中。你在代码中所见到的行为<em>好像总是拷贝</em>。然而在后台 Swift 只有在需要这么做时才会实际去拷贝。Swift 能够管理所有的值的拷贝来<em>确保最佳的性能</em>，所有你也没必要为了保证最佳性能来避免赋值。</p>
<p>摘自：<a href="https://developer.apple.com/library/content/documentation/Swift/Conceptual/Swift_Programming_Language/index.html#//apple_ref/doc/uid/TP40014097-CH3-ID0" target="_blank" rel="external">swift 官网</a><br>所有代码在Xcode9 Swift4 环境编译没问题，代码<a href="https://github.com/keshiim/LearnSwift4" target="_blank" rel="external">戳这里 https://github.com/keshiim/LearnSwift4</a></p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://keshiim.github.io/2017/11/14/Array-Partition-I/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zheng keshiim">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Farmer, keshiim 播种太阳🌞">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/11/14/Array-Partition-I/" itemprop="url">Leetcode-561 Array Partition I</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-14T14:25:41+08:00">
                2017-11-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LeetCode/" itemprop="url" rel="index">
                    <span itemprop="name">LeetCode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/11/14/Array-Partition-I/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/11/14/Array-Partition-I/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/11/14/Array-Partition-I/" class="leancloud_visitors" data-flag-title="Leetcode-561 Array Partition I">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p><a href="https://leetcode.com/problems/array-partition-i/description/" target="_blank" rel="external">Array Partintion I (数组分割I)</a></p>
<p>Given an array of <strong>2n</strong> integers, your task is to group these integers into <strong>n</strong> pairs of integer, say (a1, b1), (a2, b2), …, (an, bn) which makes sum of min(ai, bi) for all i from 1 to n as large as possible.</p>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Input: [<span class="number">1</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>]</div><div class="line"></div><div class="line">Output: <span class="number">4</span></div><div class="line">Explanation: n is <span class="number">2</span>, <span class="keyword">and</span> the maximum sum of pairs is <span class="number">4</span> = min(<span class="number">1</span>, <span class="number">2</span>) + min(<span class="number">3</span>, <span class="number">4</span>).</div></pre></td></tr></table></figure>
<h3 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h3><ol>
<li><strong>n</strong> is a positive integer, which is in the range of <code>[1, 10000]</code>.</li>
<li>All the integers in the array will be in the range of <code>[-10000, 10000]</code>.</li>
</ol>
<hr>
<h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>这道题，让我们分隔数组形成两两一对，让每对中较小数的和最大。</p>
<p>若要最大化每对中的较小数之和，那么肯定是没对中两个数字大小<strong>越相近也好</strong>。因为如果差距过大，而我们只取每对中最小数字，那么较大的那个数就被浪费掉了。因此，我们只需要给数组排序，然后按照顺序的每两个就是一对。取出每对中第一个数字(较小值)累加起来即可。</p>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><h4 id="Swift"><a href="#Swift" class="headerlink" title="Swift"></a>Swift</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">arrayPairSum</span><span class="params">(<span class="number">_</span> nums: [Int])</span></span> -&gt; <span class="type">Int</span> &#123;</div><div class="line">    <span class="keyword">var</span> res = <span class="number">0</span></div><div class="line">    <span class="keyword">let</span> n = nums.<span class="built_in">count</span></div><div class="line">    <span class="keyword">let</span> numsSored = nums.sorted&#123; $<span class="number">0</span> &lt; $<span class="number">1</span> &#125; <span class="comment">//排序</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">stride</span>(from: <span class="number">0</span>, to: n, by: <span class="number">2</span>) &#123;</div><div class="line">        res += numsSored[i]</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res</div><div class="line">&#125;</div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">这里使用到了Swift标准库里 Collection定义的函数做迭代步长</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">/// Returns the sequence of values (`self`, `self + stride`, `self +</span></div><div class="line"><span class="comment">/// 2 * stride`, ... *last*) where *last* is the last value in the</span></div><div class="line"><span class="comment">/// progression that is less than `end`.</span></div><div class="line"><span class="comment">public func stride&lt;T&gt;(from start: T, to end: T, by stride: T.Stride) -&gt; StrideTo&lt;T&gt; where T : Strideable</span></div><div class="line"><span class="comment">*/</span></div></pre></td></tr></table></figure>
<h4 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">arrayPairSum</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> res = <span class="number">0</span>, n = nums.size();</div><div class="line">        sort(nums.begin(), nums.end());</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i+=<span class="number">2</span>) &#123;</div><div class="line">            res += nums[i];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">arrayPairSum</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> res = <span class="number">0</span>, n = nums.length;</div><div class="line">        Arrays.sort(nums);</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i+=<span class="number">2</span>) &#123;</div><div class="line">            res += nums[i];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> res;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.png"
               alt="Zheng keshiim" />
          <p class="site-author-name" itemprop="name">Zheng keshiim</p>
           
              <p class="site-description motion-element" itemprop="description">一个☝程序猿的播种天地</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">45</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">16</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/keshiim" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/Jasonzhengkeshi" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                    
                      Twitter
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/u/1997859257" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                    
                      Weibo
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/jason-zheng-17/activities" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                      知乎
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2017 - 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zheng keshiim</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  

    
      <script id="dsq-count-scr" src="https://keshiim.disqus.com/count.js" async></script>
    

    

  




	





  








  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("II40xJrcdEwAMUcs8t0GQCM7-gzGzoHsz", "6u6FB7dghxObIE4zhaUKCYoF");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
